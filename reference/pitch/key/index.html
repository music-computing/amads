
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../pitches/">
      
      
        <link rel="next" href="../serial/">
      
      
        
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.2">
    
    
      
        <title>Key Profiles - AMADS</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.484c7ddc.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#amads.pitch.key.profiles" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="AMADS" class="md-header__button md-logo" aria-label="AMADS" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            AMADS
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Key Profiles
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../paper/" class="md-tabs__link">
        
  
  
    
  
  Project Overview

      </a>
    </li>
  

      
        
  
  
  
    
  
  
    
    
      
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../../core/" class="md-tabs__link">
          
  
  
  API Reference

        </a>
      </li>
    
  

    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../user_guide/installation/" class="md-tabs__link">
        
  
  
    
  
  Install

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../developer_notes/documentation/" class="md-tabs__link">
          
  
  
  Developer

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="AMADS" class="md-nav__button md-logo" aria-label="AMADS" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    AMADS
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../paper/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Project Overview
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    API Reference
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    API Reference
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_1" >
        
          
          <label class="md-nav__link" for="__nav_3_1" id="__nav_3_1_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Core
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    Core
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../core/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../basics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Basic Score Elements
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../basics_more/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    More Classes
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Pitch
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../distribution/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Distribution
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../utils/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Utility Functions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../vector/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Vector Functions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../io/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Input and Output
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Pitch
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Pitch
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ismonophonic/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ismonophonic
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../hz2midi/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Hz2midi
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../intervals/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Interval Distributions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pitches/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Pitch Distributions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Key Profiles
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Key Profiles
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#amads.pitch.key.profiles" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;profiles
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.pitch.key.profiles.PitchProfile" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;PitchProfile
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.pitch.key.profiles.KeyProfile" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;KeyProfile
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.pitch.key.transpose2c" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;transpose2c
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.pitch.key.transpose2c.transpose2c" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;transpose2c
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.pitch.key.kkkey" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;kkkey
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.pitch.key.kkkey.kkkey" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;kkkey
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.pitch.key.keymode" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;keymode
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.pitch.key.keymode.keymode" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;keymode
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.pitch.key.key_cc" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;key_cc
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.pitch.key.key_cc.key_cc" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;key_cc
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.pitch.key.kkcc" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;kkcc
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.pitch.key.kkcc.kkcc" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;kkcc
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.pitch.key.max_key_cc" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;max_key_cc
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.pitch.key.max_key_cc.max_key_cc" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;max_key_cc
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.pitch.key.keysom" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;keysom
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.pitch.key.keysom.keysom" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;keysom
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.pitch.key.keysomdata" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;keysomdata
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.pitch.key.keysomdata.KeyProfileSOM" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;KeyProfileSOM
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.pitch.key.keysomdata.pretrained_weights_script" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;pretrained_weights_script
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.pitch.key.keysomdata.zero_SOM_init" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;zero_SOM_init
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.pitch.key.keysomdata.random_SOM_init" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;random_SOM_init
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.pitch.key.keysomdata.handcrafted_SOM_init" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;handcrafted_SOM_init
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.pitch.key.keysomdata.keysom_inverse_decay" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;keysom_inverse_decay
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.pitch.key.keysomdata.keysom_stepped_inverse_decay" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;keysom_stepped_inverse_decay
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.pitch.key.keysomdata.keysom_stepped_log_inverse_decay" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;keysom_stepped_log_inverse_decay
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.pitch.key.keysomdata.keysom_centroid_euclidean" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;keysom_centroid_euclidean
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.pitch.key.keysomdata.keysom_toroid_euclidean" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;keysom_toroid_euclidean
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.pitch.key.keysomdata.keysom_toroid_clamped" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;keysom_toroid_clamped
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../serial/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Serial
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_4" >
        
          
          <label class="md-nav__link" for="__nav_3_4" id="__nav_3_4_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Time
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Time
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../time/durations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Duration Distributions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../time/meter/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Meter
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../time/notedensity/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Note Density
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../time/rhythm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Rhythm
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../time/swing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Swing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../time/tempo/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tempo
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../time/variability/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Variability
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_5" >
        
          
          <label class="md-nav__link" for="__nav_3_5" id="__nav_3_5_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Melody
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Melody
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../melody/boundary/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Boundary
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../melody/contour/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Contour
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../melody/segment/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Segment
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../melody/segment_gestalt/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Segment gestalt
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../melody/similarity/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Similarity
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_6" >
        
          
          <label class="md-nav__link" for="__nav_3_6" id="__nav_3_6_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Harmony
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Harmony
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../harmony/consonance/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Consonance
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../harmony/root_finding/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Root finding
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_7" >
        
          
          <label class="md-nav__link" for="__nav_3_7" id="__nav_3_7_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Polyphony
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    Polyphony
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../polyphony/skyline/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Skyline
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_8" >
        
          
          <label class="md-nav__link" for="__nav_3_8" id="__nav_3_8_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Algorithms
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    Algorithms
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../algorithms/complexity/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Complexity
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../algorithms/entropy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Entropy
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../algorithms/gcd/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    GCD
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../algorithms/mtype_tokenizer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Mtype tokenizer
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../algorithms/ngrams/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Ngrams
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../algorithms/nnotes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Nnotes
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../algorithms/norm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Norm
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../algorithms/scale/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Scale
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../algorithms/slice/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Slice
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../schema/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Schemata
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../user_guide/installation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Install
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Developer
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Developer
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer_notes/documentation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Documentation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer_notes/making_a_release/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Making a Release
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer_notes/modules/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Modules
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer_notes/testing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Testing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer_notes/contributing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Contributing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer_notes/style/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Style
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer_notes/github/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Github
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer_notes/design/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Design
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer_notes/music21/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Music21
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#amads.pitch.key.profiles" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;profiles
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.pitch.key.profiles.PitchProfile" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;PitchProfile
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.pitch.key.profiles.KeyProfile" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;KeyProfile
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.pitch.key.transpose2c" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;transpose2c
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.pitch.key.transpose2c.transpose2c" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;transpose2c
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.pitch.key.kkkey" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;kkkey
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.pitch.key.kkkey.kkkey" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;kkkey
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.pitch.key.keymode" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;keymode
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.pitch.key.keymode.keymode" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;keymode
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.pitch.key.key_cc" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;key_cc
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.pitch.key.key_cc.key_cc" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;key_cc
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.pitch.key.kkcc" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;kkcc
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.pitch.key.kkcc.kkcc" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;kkcc
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.pitch.key.max_key_cc" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;max_key_cc
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.pitch.key.max_key_cc.max_key_cc" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;max_key_cc
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.pitch.key.keysom" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;keysom
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.pitch.key.keysom.keysom" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;keysom
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.pitch.key.keysomdata" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;keysomdata
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.pitch.key.keysomdata.KeyProfileSOM" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;KeyProfileSOM
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.pitch.key.keysomdata.pretrained_weights_script" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;pretrained_weights_script
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.pitch.key.keysomdata.zero_SOM_init" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;zero_SOM_init
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.pitch.key.keysomdata.random_SOM_init" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;random_SOM_init
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.pitch.key.keysomdata.handcrafted_SOM_init" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;handcrafted_SOM_init
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.pitch.key.keysomdata.keysom_inverse_decay" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;keysom_inverse_decay
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.pitch.key.keysomdata.keysom_stepped_inverse_decay" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;keysom_stepped_inverse_decay
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.pitch.key.keysomdata.keysom_stepped_log_inverse_decay" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;keysom_stepped_log_inverse_decay
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.pitch.key.keysomdata.keysom_centroid_euclidean" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;keysom_centroid_euclidean
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.pitch.key.keysomdata.keysom_toroid_euclidean" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;keysom_toroid_euclidean
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.pitch.key.keysomdata.keysom_toroid_clamped" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;keysom_toroid_clamped
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  



  <h1>Key Profiles</h1>

<div class="doc doc-object doc-module">



<h2 id="amads.pitch.key.profiles" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>            <span class="doc doc-object-name doc-module-name">profiles</span>


<a href="#amads.pitch.key.profiles" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents first">

        <p>Pitch class usage profiles (PCP) from the literature.</p>
<p>In almost all cases reported here, keys are assumed to be
transpositionally equivalent, so the first (0th) entry is the tonic,
and no key-specific information is given.  The exception is QuinnWhite
which provides key-specific data.  In the key-specific case, we
instead store the distributions as a tuple of tuples of distributions
representing each individual key profile.</p>
<p>The profiles here provide the values exactly as reported in the
literature.  Where a profile does not sum to 1, an additional "_sum"
entry is provided with that normalisation.</p>
<p>The profiles appear below in approximately chronological order.
For reference, the alphabetical ordering is:</p>
<ul>
<li>AardenEssen</li>
<li>AlbrechtShanahan</li>
<li>BellmanBudge</li>
<li>deClerqTemperley</li>
<li>KrumhanslKessler</li>
<li>KrumhanslSchmuckler</li>
<li>PrinceSchumuckler</li>
<li>QuinnWhite</li>
<li>SappSimple</li>
<li>TemperleyKostkaPayne</li>
<li>TemperleyDeClerq</li>
<li>Vuvan</li>
<li>VuvanHughes</li>
</ul>
<p>The variable <strong><code>source_list</code></strong> contains a list of all of these profiles.</p>
<p>Each profile is a dataclass object with the following attributes:</p>
<ul>
<li><strong><code>name</code></strong> (str) - the class name</li>
<li><strong><code>about</code></strong> (str) - a short description</li>
<li><strong><code>literature</code></strong> (str) - reference to the relevant publication</li>
<li><strong><code>major</code></strong> (tuple[float]) - original weights for 12 pitch classes, major keys
   (in KrumhanslKessler, KrumhanslSchmuckler, AardenEssen, BellmanBudge,
    TemperleyKostkaPayne, Sapp, AlbrechtShanahan only)</li>
<li><strong><code>major_sum</code></strong>  (tuple[float]) - weights that sum to 1, major keys
   (in KrumhanslKessler, KrumhanslSchmuckler, AardenEssen, BellmanBudge,
    TemperleyKostkaPayne, Sapp only)</li>
<li><strong><code>minor</code></strong> (tuple[float]) - original weights for 12 pitch classes, minor keys
   (in KrumhanslKessler, KrumhanslSchmuckler, AardenEssen, BellmanBudge,
    TemperleyKostkaPayne, Sapp, AlbrechtShanahan only)</li>
<li><strong><code>minor_sum</code></strong>  (tuple[float]) - weights that sum to 1, minor keys
   (in KrumhanslKessler, KrumhanslSchmuckler, AardenEssen, BellmanBudge,
    TemperleyKostkaPayne, Sapp only)</li>
<li><strong><code>natural_minor</code></strong> (tuple[float]) - original weights, natural minor keys
   (in <code>Vuvan</code> only)</li>
<li><strong><code>natural_minor_sum</code></strong> (tuple[float]) - weights that sum to 1, natural minor keys
   (in <code>Vuvan</code> only)</li>
<li><strong><code>harmonic_minor</code></strong> (tuple[float]) - original weights, harmonic minor keys
   (in <code>Vuvan</code> only)</li>
<li><strong><code>harmonic_minor_sum</code></strong> (tuple[float]) - weights that sum to 1, harmonic minor keys
   (in <code>Vuvan</code> only)</li>
<li><strong><code>melodic_minor</code></strong> (tuple[float]) - original weights, melodic minor keys
   (in <code>Vuvan</code> only)</li>
<li><strong><code>melodic_minor_sum</code></strong> (tuple[float]) - weights that sum to 1, melodic minor keys
   (in <code>Vuvan</code> only)</li>
<li><strong><code>roots</code></strong> (tuple[float]) - original weights that sum to 1, chord roots in rock
   harmony (in DeClerqTemperley only)</li>
<li><strong><code>melody_major</code></strong> (tuple[float]) - original weights that sum to 1, major melodies
   (in <code>TemperleyDeClerq</code> only)</li>
<li><strong><code>melody_minor</code></strong> (tuple[float]) - original weights that sum to 1, minor melodies
   (in <code>TemperleyDeClerq</code> only)</li>
<li><strong><code>harmony_major</code></strong> (tuple[float]) - original weights that sum to 1, major melodies
   (in <code>TemperleyDeClerq</code> only)</li>
<li><strong><code>harmony_minor</code></strong> (tuple[float]) - original weights that sum to 1, minor melodies
   (in <code>TemperleyDeClerq</code> only)</li>
<li><strong><code>downbeat_major</code></strong> (tuple[float]) - original weights,
   major on downbeats (in <code>PrinceSchumuckler</code> only)</li>
<li><strong><code>downbeat_major_sum</code></strong> (tuple[float]) - original weights that sum to 1,
   major on downbeats (in <code>PrinceSchumuckler</code> only)</li>
<li><strong><code>downbeat_minor</code></strong> (tuple[float]) - original weights,
   minor on downbeats (in <code>PrinceSchumuckler</code> only)</li>
<li><strong><code>downbeat_minor_sum</code></strong> (tuple[float]) - original weights that sum to 1,
   minor on downbeats (in <code>PrinceSchumuckler</code> only)</li>
<li><strong><code>all_beats_major</code></strong> (tuple[float]) - original weights,
   major on all beats (in <code>PrinceSchumuckler</code> only)</li>
<li><strong><code>all_beats_major_sum</code></strong> (tuple[float]) - original weights that sum to 1,
   major on all beats (in <code>PrinceSchumuckler</code> only)</li>
<li><strong><code>all_beats_minor</code></strong> (tuple[float]) - original weights,
   minor on all_beats (in <code>PrinceSchumuckler</code> only)</li>
<li><strong><code>all_beats_minor_sum</code></strong> (tuple[float]) - original weights that sum to 1,
   minor on all_beats (in <code>PrinceSchumuckler</code> only)</li>
<li><strong><code>major_all</code></strong> (tuple[float]) - original weights that sum to 1, all keys
   (in QuinnWhite only)</li>
<li><strong><code>major_0</code></strong> (tuple[float]) - original weights that sum to 1, C Major
   (in QuinnWhite only)</li>
<li><strong><code>major_1</code></strong> (tuple[float]) - original weights that sum to 1, C#/Db Major
   (in QuinnWhite only)</li>
<li><strong><code>major_2</code></strong> (tuple[float]) - original weights that sum to 1, D Major
   (in QuinnWhite only)</li>
<li><strong><code>major_3</code></strong> (tuple[float]) - original weights that sum to 1, D#/Eb Major
   (in QuinnWhite only)</li>
<li><strong><code>major_4</code></strong> (tuple[float]) - original weights that sum to 1, E Major
   (in QuinnWhite only)</li>
<li><strong><code>major_5</code></strong> (tuple[float]) - original weights that sum to 1, F Major
   (in QuinnWhite only)</li>
<li><strong><code>major_6</code></strong> (tuple[float]) - original weights that sum to 1, F#/Gb Major
   (in QuinnWhite only)</li>
<li><strong><code>major_7</code></strong> (tuple[float]) - original weights that sum to 1, G Major
   (in QuinnWhite only)</li>
<li><strong><code>major_8</code></strong> (tuple[float]) - original weights that sum to 1, G#/Ab Major
   (in QuinnWhite only)</li>
<li><strong><code>major_9</code></strong> (tuple[float]) - original weights that sum to 1, A Major,
   (in QuinnWhite only)</li>
<li><strong><code>major_10</code></strong> (tuple[float]) - original weights that sum to 1, A#/Bb Major
   (in QuinnWhite only)</li>
<li><strong><code>major_11</code></strong> (tuple[float]) - original weights that sum to 1, B Major
   (in QuinnWhite only)</li>
<li><strong><code>minor_all</code></strong> (tuple[float]) - original weights that sum to 1, all keys
   (in QuinnWhite only)</li>
<li><strong><code>minor_0</code></strong> (tuple[float]) - original weights that sum to 1, C Minor
   (in QuinnWhite only)</li>
<li><strong><code>minor_1</code></strong> (tuple[float]) - original weights that sum to 1, C#/Db Minor
   (in QuinnWhite only)</li>
<li><strong><code>minor_2</code></strong> (tuple[float]) - original weights that sum to 1, D Minor
   (in QuinnWhite only)</li>
<li><strong><code>minor_3</code></strong> (tuple[float]) - original weights that sum to 1, D#/Eb Minor
   (in QuinnWhite only)</li>
<li><strong><code>minor_4</code></strong> (tuple[float]) - original weights that sum to 1, E Minor
   (in QuinnWhite only)</li>
<li><strong><code>minor_5</code></strong> (tuple[float]) - original weights that sum to 1, F Minor
   (in QuinnWhite only)</li>
<li><strong><code>minor_6</code></strong> (tuple[float]) - original weights that sum to 1, F#/Gb Minor
   (in QuinnWhite only)</li>
<li><strong><code>minor_7</code></strong> (tuple[float]) - original weights that sum to 1, G Minor
   (in QuinnWhite only)</li>
<li><strong><code>minor_8</code></strong> (tuple[float]) - original weights that sum to 1, G#/Ab Minor
   (in QuinnWhite only)</li>
<li><strong><code>minor_9</code></strong> (tuple[float]) - original weights that sum to 1, A Minor,
   (in QuinnWhite only)</li>
<li><strong><code>minor_10</code></strong> (tuple[float]) - original weights that sum to 1, A#/Bb Minor
   (in QuinnWhite only)</li>
<li><strong><code>minor_11</code></strong> (tuple[float]) - original weights that sum to 1, B Minor
   (in QuinnWhite only)</li>
<li><strong><code>classical</code></strong> (tuple[float]) - original weights for 12 pitch classes,
   all classical keys
   (in VuvanHuges only)</li>
<li><strong><code>classical_sum</code></strong>  (tuple[float]) - weights that sum to 1, all classical keys
   (in VuvanHuges only)</li>
<li><strong><code>rock</code></strong> (tuple[float]) - original weights for 12 pitch classes, all rock keys
   (in VuvanHuges only)</li>
<li><strong><code>rock_sum</code></strong>  (tuple[float]) - weights that sum to 1, all rock keys
   (in VuvanHuges only)</li>
</ul>
<p><small><strong>Author</strong>: Mark Gotham, 2021, Huw Cheston, 2025</small></p>


<details class="reference" open>
  <summary>REFERENCE</summary>
  <p>Gotham et al. "What if the 'When' Implies the 'What'?". ISMIR, 2021
(see README.md)</p>
</details>














<div class="doc doc-children">












  </div>

    </div>

</div><hr />


<div class="doc doc-object doc-class">



<h2 id="amads.pitch.key.profiles.PitchProfile" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">PitchProfile</span>


<a href="#amads.pitch.key.profiles.PitchProfile" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">PitchProfile</span><span class="p">(</span>
    <span class="n"><span title="amads.pitch.key.profiles.PitchProfile(name)">name</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span><span class="p">,</span>
    <span class="n"><span title="amads.pitch.key.profiles.PitchProfile(profile_tuple)">profile_tuple</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#tuple">tuple</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a></span><span class="p">,</span> <span class="o">...</span><span class="p">]</span> <span class="o">|</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#tuple">tuple</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#tuple">tuple</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a></span><span class="p">,</span> <span class="o">...</span><span class="p">],</span> <span class="o">...</span><span class="p">],</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="            Distribution (amads.core.distribution.Distribution)" href="../../distribution/#amads.core.distribution.Distribution">Distribution</a></code></p>



        <p>A set of weights for each pitch class denoting the expected frequency
 of pitches for collections of notes (typically songs, can be chords)
 of a given key.</p>
<p>We provide methods to allow users to obtain or visualize this information
 in a useful state.</p>
<p>Definitions:
 Define a canonical order of pitches as the order of pitches specified in
 relative chromatic degree.</p>
<p>In our implementation, a pitch profile is a collection of pitch class
 distributions stored in a canonical form convenient for conversion
 into other useful forms, whether to provide methods in a useful state
 or for custom visualization.
 We store the pitch profile canonically in one of two forms:</p>
<ol>
<li>In the transpositionally equivalent case, we store the data as a
     list of 12 (float) weights beginning with the tonic.</li>
<li>In the case of profiles that are not transpositionally equivalent,
     there is are weights for each key which are collectively stored
     as a list of 12 key profiles, each a list of 12 weights. Each
     profile begins with the tonic. Therefore <code>data[2][5]</code> represents
     the 5th weight (for pitch class G) in the 2nd key (D).</li>
</ol>
<p>For visualization, our design envisions the following use-cases:</p>
<ol>
<li>Compare and contrast data within a single PitchProfile object,
     especially between different key profiles beginning at their
     respecive tonic. Hence, our custom plot method allows a list
     of keys to plot the data side by side in a heatmap.</li>
<li>Compare and contrast PitchProfile data with other pitch-class
     distributions, hence why we also satisfy the specifications
     for both singular plot and multiple plots from its parent
     class Distribution.</li>
</ol>


<p><span class="doc-section-title">Attributes:</span></p>
    <ul>
        <li class="doc-section-item field-body">
          <b><code><span title="amads.pitch.key.profiles.PitchProfile._profile_label">_profile_label</span></code></b>
              (<code>str, class attribute</code>)
          
          <div class="doc-md-description">
            <p>histogram label for 1-D histogram (x-axis), or representing the
key of the current profile in the 2-D heatmap (y-axis)</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
          <b><code><span title="amads.pitch.key.profiles.PitchProfile._data_cats_2d">_data_cats_2d</span></code></b>
              (<code>List[int], class attribute</code>)
          
          <div class="doc-md-description">
            <p>data categories for the 2-D heatmap, which are labelled in terms
of relative chromatic degree</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
          <b><code><span title="amads.pitch.key.profiles.PitchProfile._data_labels">_data_labels</span></code></b>
              (<code>List[str], class attribute</code>)
          
          <div class="doc-md-description">
            <p>possible data labels, Relative Chromatic Degree for 2-D case (x-axis),
and Weights for 1-D case (y-axis)</p>
          </div>
        </li>
    </ul>












<p><span class="doc-section-title">Methods:</span></p>
    <ul>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="            normalize (amads.pitch.key.profiles.PitchProfile.normalize)" href="#amads.pitch.key.profiles.PitchProfile.normalize">normalize</a></code></b>
            
            <div class="doc-md-description">
              <p>Normalize the pitch-class distributions within the PitchProfile.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="            key_to_weights (amads.pitch.key.profiles.PitchProfile.key_to_weights)" href="#amads.pitch.key.profiles.PitchProfile.key_to_weights">key_to_weights</a></code></b>
            
            <div class="doc-md-description">
              <p>Given a key, computes the corresponding weights for the key profile.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="            as_canonical_matrix (amads.pitch.key.profiles.PitchProfile.as_canonical_matrix)" href="#amads.pitch.key.profiles.PitchProfile.as_canonical_matrix">as_canonical_matrix</a></code></b>
            
            <div class="doc-md-description">
              <p>Computes a 12x12 matrix of the profile data.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="            plot (amads.pitch.key.profiles.PitchProfile.plot)" href="#amads.pitch.key.profiles.PitchProfile.plot">plot</a></code></b>
            
            <div class="doc-md-description">
              <p>Virtual plot function for Distribution.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="            show (amads.pitch.key.profiles.PitchProfile.show)" href="#amads.pitch.key.profiles.PitchProfile.show">show</a></code></b>
            
            <div class="doc-md-description">
              <p>Print information about the distribution</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="            plot_multiple


  
      classmethod
   (amads.pitch.key.profiles.PitchProfile.plot_multiple)" href="#amads.pitch.key.profiles.PitchProfile.plot_multiple">plot_multiple</a></code></b>
            
            <div class="doc-md-description">
              <p>Plot multiple distributions into a single Figure using vertically</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="            plot_grouped_1d


  
      classmethod
   (amads.pitch.key.profiles.PitchProfile.plot_grouped_1d)" href="#amads.pitch.key.profiles.PitchProfile.plot_grouped_1d">plot_grouped_1d</a></code></b>
            
            <div class="doc-md-description">
              <p>Overlay multiple 1-D distributions on a single axes.</p>
            </div>
          </li>
    </ul>



                  <details class="mkdocstrings-source">
                    <summary>Source code in <code>amads/pitch/key/profiles.py</code></summary>
                    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">profile_tuple</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="o">...</span><span class="p">],</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="o">...</span><span class="p">],</span> <span class="o">...</span><span class="p">]],</span>
<span class="p">):</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">PitchProfile</span><span class="o">.</span><span class="n">_check_init_data_integrity</span><span class="p">(</span><span class="n">profile_tuple</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;invalid profile tuple </span><span class="si">{</span><span class="n">profile_tuple</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">profile_data</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">profile_shape</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">dist_type</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="n">x_cats</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">x_label</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">y_cats</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">y_label</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">profile_tuple</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nb">float</span><span class="p">):</span>
        <span class="n">profile_data</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">profile_tuple</span><span class="p">)</span>
        <span class="n">profile_shape</span> <span class="o">=</span> <span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">profile_data</span><span class="p">)]</span>
        <span class="n">dist_type</span> <span class="o">=</span> <span class="s2">&quot;symmetric_key_profile&quot;</span>
        <span class="n">x_cats</span> <span class="o">=</span> <span class="n">CHROMATIC_NAMES</span>
        <span class="n">x_label</span> <span class="o">=</span> <span class="n">PitchProfile</span><span class="o">.</span><span class="n">_profile_label</span>
        <span class="n">y_cats</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">y_label</span> <span class="o">=</span> <span class="n">PitchProfile</span><span class="o">.</span><span class="n">_data_labels</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">profile_tuple</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nb">tuple</span><span class="p">):</span>
        <span class="c1"># convert data from tonic-first to non-rotated canonical order</span>
        <span class="n">profile_data</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">elem</span><span class="p">[</span><span class="o">-</span><span class="n">idx</span><span class="p">:]</span> <span class="o">+</span> <span class="n">elem</span><span class="p">[:</span><span class="o">-</span><span class="n">idx</span><span class="p">]</span>  <span class="c1"># type: ignore</span>
            <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">elem</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">profile_tuple</span><span class="p">)</span>
        <span class="p">]</span>
        <span class="n">profile_shape</span> <span class="o">=</span> <span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">profile_data</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">profile_data</span><span class="p">[</span><span class="mi">0</span><span class="p">])]</span>
        <span class="n">dist_type</span> <span class="o">=</span> <span class="s2">&quot;asymmetric_key_profile&quot;</span>
        <span class="n">x_cats</span> <span class="o">=</span> <span class="n">PitchProfile</span><span class="o">.</span><span class="n">_data_cats_2d</span>
        <span class="n">x_label</span> <span class="o">=</span> <span class="n">PitchProfile</span><span class="o">.</span><span class="n">_data_labels</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">y_cats</span> <span class="o">=</span> <span class="n">CHROMATIC_NAMES</span>
        <span class="n">y_label</span> <span class="o">=</span> <span class="n">PitchProfile</span><span class="o">.</span><span class="n">_profile_label</span>

    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;invalid profile tuple </span><span class="si">{</span><span class="n">profile_tuple</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
        <span class="n">name</span><span class="p">,</span>
        <span class="n">profile_data</span><span class="p">,</span>
        <span class="n">dist_type</span><span class="p">,</span>
        <span class="n">profile_shape</span><span class="p">,</span>
        <span class="n">x_cats</span><span class="p">,</span>  <span class="c1"># type: ignore (strings are ok)</span>
        <span class="n">x_label</span><span class="p">,</span>
        <span class="n">y_cats</span><span class="p">,</span>  <span class="c1"># type: ignore (strings are ok)</span>
        <span class="n">y_label</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
                  </details>



<div class="doc doc-children">








<h3 id="amads.pitch.key.profiles.PitchProfile-functions">Functions<a href="#amads.pitch.key.profiles.PitchProfile-functions" class="headerlink" title="Permanent link">&para;</a></h3>

<div class="doc doc-object doc-function">


<h4 id="amads.pitch.key.profiles.PitchProfile.normalize" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">normalize</span>


<a href="#amads.pitch.key.profiles.PitchProfile.normalize" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">normalize</span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Normalize the pitch-class distributions within the PitchProfile.</p>
<p>For each key, the sum of all weights in the corresponding key profile
is normalized to 1.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>amads/pitch/key/profiles.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">normalize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Normalize the pitch-class distributions within the PitchProfile.</span>

<span class="sd">    For each key, the sum of all weights in the corresponding key profile</span>
<span class="sd">    is normalized to 1.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">distribution_type</span> <span class="o">==</span> <span class="s2">&quot;symmetric_key_profile&quot;</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">norm</span><span class="o">.</span><span class="n">normalize</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="s2">&quot;sum&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">norm</span><span class="o">.</span><span class="n">normalize</span><span class="p">(</span><span class="n">elem</span><span class="p">,</span> <span class="s2">&quot;sum&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span> <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span>
        <span class="p">]</span>
        <span class="k">return</span> <span class="bp">self</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="amads.pitch.key.profiles.PitchProfile.key_to_weights" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">key_to_weights</span>


<a href="#amads.pitch.key.profiles.PitchProfile.key_to_weights" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">key_to_weights</span><span class="p">(</span><span class="n"><a class="autorefs autorefs-internal" title="key (amads.pitch.key.profiles.PitchProfile.key_to_weights(key))" href="#amads.pitch.key.profiles.PitchProfile.key_to_weights(key)">key</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Given a key, computes the corresponding weights for the key profile.</p>
<p>The key profile is rotated to the key as the tonic and organized in
relative chromatic degree.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
<h5 id="amads.pitch.key.profiles.PitchProfile.key_to_weights(key)" class="doc doc-heading doc-heading-parameter">              <b><code>key</code></b>
<a href="#amads.pitch.key.profiles.PitchProfile.key_to_weights(key)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></code>)
          
          <div class="doc-md-description">
            <p>pitch string denoting the key of the key profile data we want to retrieve</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a>]</code>
          
          <div class="doc-md-description">
            <p>weights: list of 12 floats</p>
          </div>
        </li>
    </ul>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>amads/pitch/key/profiles.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">key_to_weights</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a key, computes the corresponding weights for the key profile.</span>

<span class="sd">    The key profile is rotated to the key as the tonic and organized in</span>
<span class="sd">    relative chromatic degree.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    key: str</span>
<span class="sd">        pitch string denoting the key of the key profile data we want to retrieve</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    list[float]</span>
<span class="sd">        weights: list of 12 floats</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">key_idx</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">try</span><span class="p">:</span>  <span class="c1"># C -&gt; 0, C# -&gt; 1, D -&gt; 2, ..., B -&gt; 11</span>
        <span class="n">key_idx</span> <span class="o">=</span> <span class="n">CHROMATIC_NAMES</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">key</span><span class="o">.</span><span class="n">capitalize</span><span class="p">())</span>
    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;invalid key </span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">, expected one of </span><span class="si">{</span><span class="n">CHROMATIC_NAMES</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>
    <span class="k">assert</span> <span class="n">key_idx</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
    <span class="k">assert</span> <span class="n">key_idx</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">key_idx</span> <span class="o">&lt;</span> <span class="mi">12</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">distribution_type</span> <span class="o">==</span> <span class="s2">&quot;symmetric_key_profile&quot;</span><span class="p">:</span>
        <span class="c1"># symmetrical case</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span>
    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">distribution_type</span> <span class="o">!=</span> <span class="s2">&quot;asymmetric_key_profile&quot;</span><span class="p">:</span>
        <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;invalid distribution type </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">distribution_type</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="c1"># asymmetrical case</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">key_idx</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="amads.pitch.key.profiles.PitchProfile.as_canonical_matrix" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">as_canonical_matrix</span>


<a href="#amads.pitch.key.profiles.PitchProfile.as_canonical_matrix" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">as_canonical_matrix</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n"><span title="numpy.ndarray">ndarray</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Computes a 12x12 matrix of the profile data.</p>
<pre><code>1. The i-th row corresponds to the key profile of the
   i-th chromatic degree

2. Each row's weights begin from C and are ordered by
   relative chromatic degree)
</code></pre>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><span title="numpy.ndarray">ndarray</span></code>
          
          <div class="doc-md-description">
            <p>a 12x12 numpy matrix of floats</p>
          </div>
        </li>
    </ul>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>amads/pitch/key/profiles.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">as_canonical_matrix</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Computes a 12x12 matrix of the profile data.</span>

<span class="sd">        1. The i-th row corresponds to the key profile of the</span>
<span class="sd">           i-th chromatic degree</span>

<span class="sd">        2. Each row&#39;s weights begin from C and are ordered by</span>
<span class="sd">           relative chromatic degree)</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    np.ndarray</span>
<span class="sd">        a 12x12 numpy matrix of floats</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">dimensions</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">12</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">distribution_type</span> <span class="o">==</span> <span class="s2">&quot;symmetric_key_profile&quot;</span><span class="p">:</span>
        <span class="c1"># in this case, symmetric profile is transpositionally equivalent,</span>
        <span class="c1"># so for instance, in C# major, the pitch weights would be</span>
        <span class="c1"># transposed (rotated) as B -&gt; C, C -&gt; C#, C# -&gt; D, ...</span>
        <span class="n">profile_matrix</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">dimensions</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">dimensions</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">12</span><span class="p">):</span>
            <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="o">-</span><span class="n">i</span><span class="p">:]</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[:</span><span class="o">-</span><span class="n">i</span><span class="p">]</span>
            <span class="n">profile_matrix</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span>
        <span class="k">return</span> <span class="n">profile_matrix</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">distribution_type</span> <span class="o">==</span> <span class="s2">&quot;asymmetric_key_profile&quot;</span>
        <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">dimensions</span> <span class="o">==</span> <span class="p">[</span><span class="mi">12</span><span class="p">,</span> <span class="mi">12</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="amads.pitch.key.profiles.PitchProfile.plot" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">plot</span>


<a href="#amads.pitch.key.profiles.PitchProfile.plot" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">plot</span><span class="p">(</span>
    <span class="n"><a class="autorefs autorefs-internal" title="color (amads.pitch.key.profiles.PitchProfile.plot(color))" href="#amads.pitch.key.profiles.PitchProfile.plot(color)">color</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="option (amads.pitch.key.profiles.PitchProfile.plot(option))" href="#amads.pitch.key.profiles.PitchProfile.plot(option)">option</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="show (amads.pitch.key.profiles.PitchProfile.plot(show))" href="#amads.pitch.key.profiles.PitchProfile.plot(show)">show</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="fig (amads.pitch.key.profiles.PitchProfile.plot(fig))" href="#amads.pitch.key.profiles.PitchProfile.plot(fig)">fig</a></span><span class="p">:</span> <span class="n"><span title="matplotlib.figure.Figure">Figure</span></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="ax (amads.pitch.key.profiles.PitchProfile.plot(ax))" href="#amads.pitch.key.profiles.PitchProfile.plot(ax)">ax</a></span><span class="p">:</span> <span class="n"><span title="matplotlib.axes.Axes">Axes</span></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="matplotlib.figure.Figure">Figure</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Virtual plot function for Distribution.
Allows standalone plotting of a Distribution (when fig and ax are None),
while providing enough extensibility to invoke this plot function or its
overwritten variants for subplotting when fig and ax are provided as
arguments.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
<h5 id="amads.pitch.key.profiles.PitchProfile.plot(color)" class="doc doc-heading doc-heading-parameter">              <b><code>color</code></b>
<a href="#amads.pitch.key.profiles.PitchProfile.plot(color)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a> | None</code>, default:
                  <code>None</code>
)
          
          <div class="doc-md-description">
            <p>Plot color string specification. In this particular plot function,
it is handled in 1-D distributions and ignored in 2-D distributions.
None for default option (Distribution.DEFAULT_BAR_COLOR).</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h5 id="amads.pitch.key.profiles.PitchProfile.plot(option)" class="doc doc-heading doc-heading-parameter">              <b><code>option</code></b>
<a href="#amads.pitch.key.profiles.PitchProfile.plot(option)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a> | None</code>, default:
                  <code>None</code>
)
          
          <div class="doc-md-description">
            <p>Plot style string specification. In this particular plot function,
only {"bar", "line"} are valid string arguments that will be handled
in a 1-D distribution, while any argument is ignored in 2-D
distributions. None for default option ("bar").</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h5 id="amads.pitch.key.profiles.PitchProfile.plot(show)" class="doc doc-heading doc-heading-parameter">              <b><code>show</code></b>
<a href="#amads.pitch.key.profiles.PitchProfile.plot(show)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>, default:
                  <code>True</code>
)
          
          <div class="doc-md-description">
            <p>Whether to call <code>plt.show()</code> at the end.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h5 id="amads.pitch.key.profiles.PitchProfile.plot(fig)" class="doc doc-heading doc-heading-parameter">              <b><code>fig</code></b>
<a href="#amads.pitch.key.profiles.PitchProfile.plot(fig)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><span title="matplotlib.figure.Figure">Figure</span></code>, default:
                  <code>None</code>
)
          
          <div class="doc-md-description">
            <p>Provide existing Figure to draw on; if omitted, a new
figure is created.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h5 id="amads.pitch.key.profiles.PitchProfile.plot(ax)" class="doc doc-heading doc-heading-parameter">              <b><code>ax</code></b>
<a href="#amads.pitch.key.profiles.PitchProfile.plot(ax)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><span title="matplotlib.axes.Axes">Axes</span></code>, default:
                  <code>None</code>
)
          
          <div class="doc-md-description">
            <p>Provide existing axes to draw on; if omitted, a new
figure and axes are created.</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Raises:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/exceptions.html#ValueError">ValueError</a></code>
            
          <div class="doc-md-description">
            <p>A ValueError is raised if:</p>
<ul>
<li><code>ax</code> (axes) but not <code>fig</code> (Figure) is provided</li>
<li><code>dims</code> is not 1 or 2</li>
</ul>
          </div>
        </li>
    </ul>


<details class="note" open>
  <summary>Notes</summary>
  <p>Behavior to this specific plot method:</p>
<ul>
<li>1-D: bar (default) or line when kind is "line"</li>
<li>2-D: heatmap</li>
</ul>
</details>

            <details class="mkdocstrings-source">
              <summary>Source code in <code>amads/core/distribution.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">plot</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">color</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">option</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">show</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">fig</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Figure</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">ax</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Axes</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Figure</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Virtual plot function for Distribution.</span>
<span class="sd">    Allows standalone plotting of a Distribution (when fig and ax are None),</span>
<span class="sd">    while providing enough extensibility to invoke this plot function or its</span>
<span class="sd">    overwritten variants for subplotting when fig and ax are provided as</span>
<span class="sd">    arguments.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    color : Optional[str]</span>
<span class="sd">        Plot color string specification. In this particular plot function,</span>
<span class="sd">        it is handled in 1-D distributions and ignored in 2-D distributions.</span>
<span class="sd">        None for default option (Distribution.DEFAULT_BAR_COLOR).</span>
<span class="sd">    option : Optional[str]</span>
<span class="sd">        Plot style string specification. In this particular plot function,</span>
<span class="sd">        only {&quot;bar&quot;, &quot;line&quot;} are valid string arguments that will be handled</span>
<span class="sd">        in a 1-D distribution, while any argument is ignored in 2-D</span>
<span class="sd">        distributions. None for default option (&quot;bar&quot;).</span>
<span class="sd">    show : bool</span>
<span class="sd">        Whether to call ``plt.show()`` at the end.</span>
<span class="sd">    fig : Figure</span>
<span class="sd">        Provide existing Figure to draw on; if omitted, a new</span>
<span class="sd">        figure is created.</span>
<span class="sd">    ax : Axes</span>
<span class="sd">        Provide existing axes to draw on; if omitted, a new</span>
<span class="sd">        figure and axes are created.</span>

<span class="sd">    Raises</span>
<span class="sd">    ------</span>
<span class="sd">    ValueError</span>
<span class="sd">        A ValueError is raised if:</span>

<span class="sd">        - `ax` (axes) but not `fig` (Figure) is provided</span>
<span class="sd">        - `dims` is not 1 or 2</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Behavior to this specific plot method:</span>

<span class="sd">    - 1-D: bar (default) or line when kind is &quot;line&quot;</span>
<span class="sd">    - 2-D: heatmap</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">dims</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dimensions</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">dims</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="s2">&quot;Unsupported number of dimensions for Distribution class&quot;</span>
        <span class="p">)</span>

    <span class="c1"># Figure/axes handling: either both `fig` and `ax` are provided, or</span>
    <span class="c1"># neither; in the latter case, create a new figure/axes pair.</span>
    <span class="k">if</span> <span class="n">fig</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">ax</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;invalid figure/axis combination&quot;</span><span class="p">)</span>
        <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">ax</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;invalid figure/axis combination&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">dims</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">color</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">color</span> <span class="o">=</span> <span class="n">Distribution</span><span class="o">.</span><span class="n">DEFAULT_BAR_COLOR</span>
        <span class="k">if</span> <span class="n">option</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">option</span> <span class="o">=</span> <span class="s2">&quot;bar&quot;</span>
        <span class="n">x</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x_categories</span><span class="p">))</span>
        <span class="c1"># 1-D distributions: draw either a bar chart or a line chart.</span>
        <span class="k">if</span> <span class="n">option</span> <span class="o">==</span> <span class="s2">&quot;bar&quot;</span><span class="p">:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">option</span> <span class="o">==</span> <span class="s2">&quot;line&quot;</span><span class="p">:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s2">&quot;o&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;unknown kind for 1D plot: </span><span class="si">{</span><span class="n">option</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="n">ax</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">([</span><span class="nb">str</span><span class="p">(</span><span class="n">label</span><span class="p">)</span> <span class="k">for</span> <span class="n">label</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">x_categories</span><span class="p">])</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x_label</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">y_label</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

    <span class="k">else</span><span class="p">:</span>  <span class="c1"># dims == 2</span>
        <span class="c1"># 2-D distributions: render as a heatmap with a colorbar.</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="n">cax</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span>
            <span class="n">data</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s2">&quot;gray_r&quot;</span><span class="p">,</span> <span class="n">aspect</span><span class="o">=</span><span class="s2">&quot;auto&quot;</span><span class="p">,</span> <span class="n">interpolation</span><span class="o">=</span><span class="s2">&quot;nearest&quot;</span>
        <span class="p">)</span>
        <span class="n">fig</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span><span class="n">cax</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Proportion&quot;</span><span class="p">)</span>

        <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x_label</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">y_label</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

        <span class="n">ax</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x_categories</span><span class="p">)))</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">([</span><span class="nb">str</span><span class="p">(</span><span class="n">label</span><span class="p">)</span> <span class="k">for</span> <span class="n">label</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">x_categories</span><span class="p">])</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">y_categories</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_yticks</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">y_categories</span><span class="p">)))</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">set_yticklabels</span><span class="p">([</span><span class="nb">str</span><span class="p">(</span><span class="n">label</span><span class="p">)</span> <span class="k">for</span> <span class="n">label</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">y_categories</span><span class="p">])</span>

        <span class="n">ax</span><span class="o">.</span><span class="n">invert_yaxis</span><span class="p">()</span>

    <span class="n">fig</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">show</span><span class="p">:</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">fig</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="amads.pitch.key.profiles.PitchProfile.show" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">show</span>


<a href="#amads.pitch.key.profiles.PitchProfile.show" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">show</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Print information about the distribution</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>amads/core/distribution.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">show</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Print information about the distribution&quot;&quot;&quot;</span>
    <span class="n">plural</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dimensions</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="k">else</span> <span class="s2">&quot;s&quot;</span>
    <span class="nb">print</span><span class="p">(</span>
        <span class="sa">f</span><span class="s1">&#39;Distribution: &quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s1">&quot; has dimension</span><span class="si">{</span><span class="n">plural</span><span class="si">}</span><span class="s1"> &#39;</span>
        <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">dimensions</span><span class="si">}</span><span class="s1">, x_label: &quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">x_label</span><span class="si">}</span><span class="s1">&quot;, &#39;</span>
        <span class="sa">f</span><span class="s1">&#39;y_label: &quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">y_label</span><span class="si">}</span><span class="s1">&quot;, &#39;</span>
        <span class="sa">f</span><span class="s1">&#39;distribution_type: &quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">distribution_type</span><span class="si">}</span><span class="s1">&quot;&#39;</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="amads.pitch.key.profiles.PitchProfile.plot_multiple" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">plot_multiple</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#amads.pitch.key.profiles.PitchProfile.plot_multiple" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">plot_multiple</span><span class="p">(</span>
    <span class="n"><a class="autorefs autorefs-internal" title="dists (amads.pitch.key.profiles.PitchProfile.plot_multiple(dists))" href="#amads.pitch.key.profiles.PitchProfile.plot_multiple(dists)">dists</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-internal" title="            Distribution (amads.core.distribution.Distribution)" href="../../distribution/#amads.core.distribution.Distribution">Distribution</a></span><span class="p">],</span>
    <span class="n"><a class="autorefs autorefs-internal" title="show (amads.pitch.key.profiles.PitchProfile.plot_multiple(show))" href="#amads.pitch.key.profiles.PitchProfile.plot_multiple(show)">show</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="options (amads.pitch.key.profiles.PitchProfile.plot_multiple(options))" href="#amads.pitch.key.profiles.PitchProfile.plot_multiple(options)">options</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span> <span class="o">|</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="colors (amads.pitch.key.profiles.PitchProfile.plot_multiple(colors))" href="#amads.pitch.key.profiles.PitchProfile.plot_multiple(colors)">colors</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span> <span class="o">|</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="matplotlib.figure.Figure">Figure</span></span> <span class="o">|</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Plot multiple distributions into a single Figure using vertically
stacked subplots.</p>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><span title="matplotlib.figure.Figure">Figure</span> or None</code>
          
          <div class="doc-md-description">
            <p>A matplotlib Figure when at least one distribution is plotted;
otherwise None when <code>dists</code> is empty.</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
<h5 id="amads.pitch.key.profiles.PitchProfile.plot_multiple(dists)" class="doc doc-heading doc-heading-parameter">              <b><code>dists</code></b>
<a href="#amads.pitch.key.profiles.PitchProfile.plot_multiple(dists)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a>[<a class="autorefs autorefs-internal" title="            Distribution (amads.core.distribution.Distribution)" href="../../distribution/#amads.core.distribution.Distribution">Distribution</a>]</code>)
          
          <div class="doc-md-description">
            <p>Distributions to plot. 2-D are rendered as heatmaps; 1-D below them.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h5 id="amads.pitch.key.profiles.PitchProfile.plot_multiple(show)" class="doc doc-heading doc-heading-parameter">              <b><code>show</code></b>
<a href="#amads.pitch.key.profiles.PitchProfile.plot_multiple(show)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>, default:
                  <code>True</code>
)
          
          <div class="doc-md-description">
            <p>Whether to call <code>plt.show()</code> at the end.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h5 id="amads.pitch.key.profiles.PitchProfile.plot_multiple(options)" class="doc doc-heading doc-heading-parameter">              <b><code>options</code></b>
<a href="#amads.pitch.key.profiles.PitchProfile.plot_multiple(options)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a> | <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>] | None</code>, default:
                  <code>None</code>
)
          
          <div class="doc-md-description">
            <p>plot style per distribution (e.g. "bar" or "line"). If a single
string is given, it is broadcast to all distributions. If None,
defaults to "bar".</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h5 id="amads.pitch.key.profiles.PitchProfile.plot_multiple(colors)" class="doc doc-heading doc-heading-parameter">              <b><code>colors</code></b>
<a href="#amads.pitch.key.profiles.PitchProfile.plot_multiple(colors)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a> | <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>] | None</code>, default:
                  <code>None</code>
)
          
          <div class="doc-md-description">
            <p>color option per distribution. If a single string is given, it is
broadcast to all 1-D distributions. If None, defaults to
the single color Distribution.DEFAULT_BAR_COLOR.</p>
          </div>
        </li>
    </ul>


<details class="note" open>
  <summary>Notes</summary>
  <ul>
<li>distributions are plotted in the same order they were presented in
  dists list</li>
<li>as long as a Distribution or inherited class has a valid plot function
  implemented, the relevant plot will be added to the figure at the
  specified axes.</li>
<li><code>options</code> and <code>colors</code> apply to all distributions</li>
<li>Although the original plot function is only limited to
  <code>option</code> and <code>color</code> being used in the 1-D case, it is not to say
  that a class inheriting Distribution won't leverage these arguments.</li>
<li>You can pass either a list (per-series) or a single string. When a
  single string is provided, it will be broadcast to all inputs.
  For example, kinds="line" makes all 1-D plots line charts.</li>
</ul>
</details>

            <details class="mkdocstrings-source">
              <summary>Source code in <code>amads/core/distribution.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">plot_multiple</span><span class="p">(</span>
    <span class="bp">cls</span><span class="p">,</span>
    <span class="n">dists</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="s2">&quot;Distribution&quot;</span><span class="p">],</span>
    <span class="n">show</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">options</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">colors</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Figure</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Plot multiple distributions into a single Figure using vertically</span>
<span class="sd">    stacked subplots.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    Figure or None</span>
<span class="sd">        A matplotlib Figure when at least one distribution is plotted;</span>
<span class="sd">        otherwise None when `dists` is empty.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    dists : list[Distribution]</span>
<span class="sd">        Distributions to plot. 2-D are rendered as heatmaps; 1-D below them.</span>
<span class="sd">    show : bool</span>
<span class="sd">        Whether to call ``plt.show()`` at the end.</span>
<span class="sd">    options : str | list[str] | None</span>
<span class="sd">        plot style per distribution (e.g. &quot;bar&quot; or &quot;line&quot;). If a single</span>
<span class="sd">        string is given, it is broadcast to all distributions. If None,</span>
<span class="sd">        defaults to &quot;bar&quot;.</span>
<span class="sd">    colors : str | list[str] | None</span>
<span class="sd">        color option per distribution. If a single string is given, it is</span>
<span class="sd">        broadcast to all 1-D distributions. If None, defaults to</span>
<span class="sd">        the single color Distribution.DEFAULT_BAR_COLOR.</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    - distributions are plotted in the same order they were presented in</span>
<span class="sd">      dists list</span>
<span class="sd">    - as long as a Distribution or inherited class has a valid plot function</span>
<span class="sd">      implemented, the relevant plot will be added to the figure at the</span>
<span class="sd">      specified axes.</span>
<span class="sd">    - `options` and `colors` apply to all distributions</span>
<span class="sd">    - Although the original plot function is only limited to</span>
<span class="sd">      `option` and `color` being used in the 1-D case, it is not to say</span>
<span class="sd">      that a class inheriting Distribution won&#39;t leverage these arguments.</span>
<span class="sd">    - You can pass either a list (per-series) or a single string. When a</span>
<span class="sd">      single string is provided, it will be broadcast to all inputs.</span>
<span class="sd">      For example, kinds=&quot;line&quot; makes all 1-D plots line charts.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">dists</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="c1"># when single string, broadcast to all distributions</span>
    <span class="n">options</span> <span class="o">=</span> <span class="n">options</span> <span class="ow">or</span> <span class="p">[</span><span class="s2">&quot;bar&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">dists</span><span class="p">)</span>
    <span class="n">colors</span> <span class="o">=</span> <span class="n">colors</span> <span class="ow">or</span> <span class="p">[</span><span class="n">Distribution</span><span class="o">.</span><span class="n">DEFAULT_BAR_COLOR</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">dists</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">options</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">options</span> <span class="o">=</span> <span class="p">[</span><span class="n">options</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">dists</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">colors</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">colors</span> <span class="o">=</span> <span class="p">[</span><span class="n">colors</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">dists</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">options</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">dists</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">colors</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">dists</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="s2">&quot;kinds/colors must match number of distributions in list case&quot;</span>
        <span class="p">)</span>

    <span class="c1"># Create a vertical stack of subplots sized to total count</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">axes</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">dists</span><span class="p">),</span> <span class="mi">1</span><span class="p">,</span> <span class="n">squeeze</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">axes</span> <span class="o">=</span> <span class="n">axes</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>
    <span class="c1"># use an axes iterator here</span>
    <span class="n">ax_iter</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="n">axes</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">d</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">c</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">dists</span><span class="p">,</span> <span class="n">options</span><span class="p">,</span> <span class="n">colors</span><span class="p">):</span>
        <span class="n">ax</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">ax_iter</span><span class="p">)</span>
        <span class="n">d</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="n">c</span><span class="p">,</span> <span class="n">option</span><span class="o">=</span><span class="n">k</span><span class="p">,</span> <span class="n">show</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">fig</span><span class="o">=</span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">)</span>

    <span class="n">fig</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">show</span><span class="p">:</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">fig</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="amads.pitch.key.profiles.PitchProfile.plot_grouped_1d" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">plot_grouped_1d</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#amads.pitch.key.profiles.PitchProfile.plot_grouped_1d" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">plot_grouped_1d</span><span class="p">(</span>
    <span class="n"><a class="autorefs autorefs-internal" title="dists (amads.pitch.key.profiles.PitchProfile.plot_grouped_1d(dists))" href="#amads.pitch.key.profiles.PitchProfile.plot_grouped_1d(dists)">dists</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-internal" title="            Distribution (amads.core.distribution.Distribution)" href="../../distribution/#amads.core.distribution.Distribution">Distribution</a></span><span class="p">],</span>
    <span class="n"><a class="autorefs autorefs-internal" title="show (amads.pitch.key.profiles.PitchProfile.plot_grouped_1d(show))" href="#amads.pitch.key.profiles.PitchProfile.plot_grouped_1d(show)">show</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="options (amads.pitch.key.profiles.PitchProfile.plot_grouped_1d(options))" href="#amads.pitch.key.profiles.PitchProfile.plot_grouped_1d(options)">options</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span> <span class="o">|</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="colors (amads.pitch.key.profiles.PitchProfile.plot_grouped_1d(colors))" href="#amads.pitch.key.profiles.PitchProfile.plot_grouped_1d(colors)">colors</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span> <span class="o">|</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="matplotlib.figure.Figure">Figure</span></span> <span class="o">|</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Overlay multiple 1-D distributions on a single axes.</p>
<p>This function draws all input 1-D distributions in one matplotlib
Axes so that each category (x bin) shows a "group" of valuesone
per distribution. You can mix plotting styles using the <code>kinds</code>
argument (for example, some as bars and others as lines with
markers. Colors are controlled via the <code>colors</code> argument.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
<h5 id="amads.pitch.key.profiles.PitchProfile.plot_grouped_1d(dists)" class="doc doc-heading doc-heading-parameter">              <b><code>dists</code></b>
<a href="#amads.pitch.key.profiles.PitchProfile.plot_grouped_1d(dists)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a>[<a class="autorefs autorefs-internal" title="            Distribution (amads.core.distribution.Distribution)" href="../../distribution/#amads.core.distribution.Distribution">Distribution</a>]</code>)
          
          <div class="doc-md-description">
            <p>1-D distributions to compare in a single plot.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h5 id="amads.pitch.key.profiles.PitchProfile.plot_grouped_1d(show)" class="doc doc-heading doc-heading-parameter">              <b><code>show</code></b>
<a href="#amads.pitch.key.profiles.PitchProfile.plot_grouped_1d(show)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>, default:
                  <code>True</code>
)
          
          <div class="doc-md-description">
            <p>Whether to call <code>plt.show()</code> at the end.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h5 id="amads.pitch.key.profiles.PitchProfile.plot_grouped_1d(options)" class="doc doc-heading doc-heading-parameter">              <b><code>options</code></b>
<a href="#amads.pitch.key.profiles.PitchProfile.plot_grouped_1d(options)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a> | <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>] | None</code>, default:
                  <code>None</code>
)
          
          <div class="doc-md-description">
            <p>Per-distribution plot style. Allowed values: "bar" or "line".
You can provide a single string to apply to all series (broadcast),
or a list with length <code>len(dists)</code>. If None, all series default to
"bar".</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h5 id="amads.pitch.key.profiles.PitchProfile.plot_grouped_1d(colors)" class="doc doc-heading doc-heading-parameter">              <b><code>colors</code></b>
<a href="#amads.pitch.key.profiles.PitchProfile.plot_grouped_1d(colors)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a> | <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>] | None</code>, default:
                  <code>None</code>
)
          
          <div class="doc-md-description">
            <p>Per-distribution color list. You can provide a single string to
apply to all series (broadcast), or a list with length <code>len(dists)</code>.
If None, a distinct default color palette is applied (rcParams cycle
or the tab10 palette).</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><span title="matplotlib.figure.Figure">Figure</span> or None</code>
          
          <div class="doc-md-description">
            <p>A matplotlib Figure if any distributions are plotted; None when
<code>dists</code> is empty.</p>
          </div>
        </li>
    </ul>


<details class="constraints" open>
  <summary>Constraints</summary>
  <ul>
<li>Only 1-D distributions are accepted. All inputs must have the same
  length (number of categories) so they can be grouped per category.</li>
<li>The x/y labels and category names are taken from the first
  distribution in <code>dists</code>. Hence, this function does not support
  overlaying 1-D distributions with different categories and labels.</li>
</ul>
</details>

<details class="how-this-differs-from-plot_multiple" open>
  <summary>How this differs from plot_multiple</summary>
  <ul>
<li>plot_grouped_1d overlays all 1-D distributions on a single axes
  to allow:<ol>
<li>per-category (bin-by-bin) comparison intuitive and compact
   for grouped bar graphs</li>
<li>intuitive and compact gradient comparison for overlaid line
   graphs.</li>
</ol>
</li>
</ul>
<p>Since all distributions are plotted in a single plot, we can
  compare all plots within a single legend.
- plot_multiple creates a vertical stack of subplots, one per
  distribution, while leveraging the plot attribute of each
  Distribution (and also supports 2-D heatmaps).</p>
</details>

            <details class="mkdocstrings-source">
              <summary>Source code in <code>amads/core/distribution.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">plot_grouped_1d</span><span class="p">(</span>
    <span class="bp">cls</span><span class="p">,</span>
    <span class="n">dists</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="s2">&quot;Distribution&quot;</span><span class="p">],</span>
    <span class="n">show</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">options</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">colors</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Figure</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Overlay multiple 1-D distributions on a single axes.</span>

<span class="sd">    This function draws all input 1-D distributions in one matplotlib</span>
<span class="sd">    Axes so that each category (x bin) shows a &quot;group&quot; of valuesone</span>
<span class="sd">    per distribution. You can mix plotting styles using the `kinds`</span>
<span class="sd">    argument (for example, some as bars and others as lines with</span>
<span class="sd">    markers. Colors are controlled via the `colors` argument.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    dists : list[Distribution]</span>
<span class="sd">        1-D distributions to compare in a single plot.</span>
<span class="sd">    show : bool</span>
<span class="sd">        Whether to call ``plt.show()`` at the end.</span>
<span class="sd">    options : str | list[str] | None</span>
<span class="sd">        Per-distribution plot style. Allowed values: &quot;bar&quot; or &quot;line&quot;.</span>
<span class="sd">        You can provide a single string to apply to all series (broadcast),</span>
<span class="sd">        or a list with length `len(dists)`. If None, all series default to</span>
<span class="sd">        &quot;bar&quot;.</span>
<span class="sd">    colors : str | list[str] | None</span>
<span class="sd">        Per-distribution color list. You can provide a single string to</span>
<span class="sd">        apply to all series (broadcast), or a list with length `len(dists)`.</span>
<span class="sd">        If None, a distinct default color palette is applied (rcParams cycle</span>
<span class="sd">        or the tab10 palette).</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    Figure or None</span>
<span class="sd">        A matplotlib Figure if any distributions are plotted; None when</span>
<span class="sd">        `dists` is empty.</span>

<span class="sd">    Constraints</span>
<span class="sd">    -----------</span>
<span class="sd">    - Only 1-D distributions are accepted. All inputs must have the same</span>
<span class="sd">      length (number of categories) so they can be grouped per category.</span>
<span class="sd">    - The x/y labels and category names are taken from the first</span>
<span class="sd">      distribution in `dists`. Hence, this function does not support</span>
<span class="sd">      overlaying 1-D distributions with different categories and labels.</span>

<span class="sd">    How this differs from plot_multiple</span>
<span class="sd">    -----------------------------------</span>
<span class="sd">    - plot_grouped_1d overlays all 1-D distributions on a single axes</span>
<span class="sd">      to allow:</span>
<span class="sd">        1. per-category (bin-by-bin) comparison intuitive and compact</span>
<span class="sd">           for grouped bar graphs</span>
<span class="sd">        2. intuitive and compact gradient comparison for overlaid line</span>
<span class="sd">           graphs.</span>

<span class="sd">      Since all distributions are plotted in a single plot, we can</span>
<span class="sd">      compare all plots within a single legend.</span>
<span class="sd">    - plot_multiple creates a vertical stack of subplots, one per</span>
<span class="sd">      distribution, while leveraging the plot attribute of each</span>
<span class="sd">      Distribution (and also supports 2-D heatmaps).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Validate inputs</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">dists</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">dimensions</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">1</span> <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">dists</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="s2">&quot;All distributions must be 1-D for grouped plotting&quot;</span>
        <span class="p">)</span>
    <span class="c1"># number of categories for each plot in the 1d distribution</span>
    <span class="n">dimension</span> <span class="o">=</span> <span class="n">dists</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">dimensions</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">dimensions</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="n">dimension</span> <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">dists</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;All 1-D distributions must have the same length&quot;</span><span class="p">)</span>
    <span class="c1"># labels and categories will need to be the same...</span>
    <span class="c1"># or else some of the data visualization for axes will be misleading</span>
    <span class="c1"># since this function does not support plotting multiple axes labels</span>
    <span class="c1"># and categories on the same plot</span>
    <span class="k">if</span> <span class="nb">any</span><span class="p">(</span>
        <span class="n">d</span><span class="o">.</span><span class="n">x_label</span> <span class="o">!=</span> <span class="n">dists</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">x_label</span> <span class="ow">or</span> <span class="n">d</span><span class="o">.</span><span class="n">y_label</span> <span class="o">!=</span> <span class="n">dists</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">y_label</span>
        <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">dists</span>
    <span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;All 1-D distributions must have same axes labels&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">any</span><span class="p">(</span>
        <span class="n">d</span><span class="o">.</span><span class="n">x_categories</span> <span class="o">!=</span> <span class="n">dists</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">x_categories</span>
        <span class="ow">or</span> <span class="n">d</span><span class="o">.</span><span class="n">y_categories</span> <span class="o">!=</span> <span class="n">dists</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">y_categories</span>
        <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">dists</span>
    <span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="s2">&quot;All 1-D distributions must have same axes categories&quot;</span>
        <span class="p">)</span>

    <span class="c1"># when single string, broadcast to all</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">options</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">options</span> <span class="o">=</span> <span class="p">[</span><span class="n">options</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">dists</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">colors</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">colors</span> <span class="o">=</span> <span class="p">[</span><span class="n">colors</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">dists</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">options</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">options</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;bar&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">dists</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">colors</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="c1"># get the default ListedColormap; get_cmap does not always</span>
        <span class="c1"># return an object with .colors, so we have to ignore the type:</span>
        <span class="n">base_colors</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">get_cmap</span><span class="p">(</span><span class="s2">&quot;tab10&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">colors</span>  <span class="c1"># type: ignore</span>
        <span class="n">colors</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">base_colors</span><span class="p">[</span><span class="n">i</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="n">base_colors</span><span class="p">)]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">dists</span><span class="p">))</span>
        <span class="p">]</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">options</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">dists</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">colors</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">dists</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="s2">&quot;kinds and colors must match number of distributions&quot;</span>
        <span class="p">)</span>

    <span class="n">bar_graph_info</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">line_graph_info</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="c1"># partition bar graphs and line graphs to be plotted separately</span>
    <span class="c1"># (so that line graphs don&#39;t each take up a bin themselves)</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">options</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
        <span class="n">bar_graph_info</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">(</span><span class="n">dist</span><span class="p">,</span> <span class="n">color</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">dist</span><span class="p">,</span> <span class="n">kind</span><span class="p">,</span> <span class="n">color</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">dists</span><span class="p">,</span> <span class="n">options</span><span class="p">,</span> <span class="n">colors</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">kind</span> <span class="o">==</span> <span class="s2">&quot;bar&quot;</span>
        <span class="p">]</span>
        <span class="n">line_graph_info</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">(</span><span class="n">dist</span><span class="p">,</span> <span class="n">color</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">dist</span><span class="p">,</span> <span class="n">kind</span><span class="p">,</span> <span class="n">color</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">dists</span><span class="p">,</span> <span class="n">options</span><span class="p">,</span> <span class="n">colors</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">kind</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;line&quot;</span><span class="p">,</span> <span class="s2">&quot;plot&quot;</span><span class="p">)</span>
        <span class="p">]</span>

    <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>

    <span class="c1"># Grouped bar arithmetic (unit bar width, grouped per category)</span>
    <span class="c1"># must have at least 1 bin for the line plot to be valid</span>
    <span class="n">n</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">bar_graph_info</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>
    <span class="c1"># bar_width does not matter here, since everything in the grouped bar</span>
    <span class="c1"># graph is scaled according to this variable</span>
    <span class="n">bar_width</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">x_coords</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">dimension</span><span class="p">)</span> <span class="o">*</span> <span class="n">bar_width</span> <span class="o">*</span> <span class="n">n</span>
    <span class="n">bottom_half</span><span class="p">,</span> <span class="n">upper_half</span> <span class="o">=</span> <span class="n">n</span> <span class="o">//</span> <span class="mi">2</span><span class="p">,</span> <span class="n">n</span> <span class="o">-</span> <span class="n">n</span> <span class="o">//</span> <span class="mi">2</span>
    <span class="n">width_idxes</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="o">-</span><span class="n">bottom_half</span><span class="p">,</span> <span class="n">upper_half</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
    <span class="n">is_even_offset</span> <span class="o">=</span> <span class="p">((</span><span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">%</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">bar_width</span> <span class="o">/</span> <span class="mi">2</span>

    <span class="c1"># setting plot axes</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">(</span><span class="n">x_coords</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">([</span><span class="nb">str</span><span class="p">(</span><span class="n">d</span><span class="p">)</span> <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">dists</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">x_categories</span><span class="p">])</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="n">dists</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">x_label</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="n">dists</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">y_label</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;Grouped Histogram Plot for 1-D Distributions&quot;</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">width_idx</span><span class="p">,</span> <span class="p">(</span><span class="n">dist</span><span class="p">,</span> <span class="n">color</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">width_idxes</span><span class="p">,</span> <span class="n">bar_graph_info</span><span class="p">):</span>
        <span class="n">x_axis</span> <span class="o">=</span> <span class="n">x_coords</span> <span class="o">+</span> <span class="n">width_idx</span> <span class="o">*</span> <span class="n">bar_width</span> <span class="o">+</span> <span class="n">is_even_offset</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span>
            <span class="n">x_axis</span><span class="p">,</span> <span class="n">dist</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="n">bar_width</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="n">dist</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">color</span>
        <span class="p">)</span>

    <span class="k">for</span> <span class="n">dist</span><span class="p">,</span> <span class="n">color</span> <span class="ow">in</span> <span class="n">line_graph_info</span><span class="p">:</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
            <span class="n">x_coords</span><span class="p">,</span> <span class="n">dist</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s2">&quot;o&quot;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="n">dist</span><span class="o">.</span><span class="n">name</span>
        <span class="p">)</span>

    <span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">show</span><span class="p">:</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">fig</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div><hr />


<div class="doc doc-object doc-class">



<h2 id="amads.pitch.key.profiles.KeyProfile" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">KeyProfile</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#amads.pitch.key.profiles.KeyProfile" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">KeyProfile</span><span class="p">(</span><span class="n"><span title="amads.pitch.key.profiles.KeyProfile(name)">name</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n"><span title="amads.pitch.key.profiles.KeyProfile(literature)">literature</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n"><span title="amads.pitch.key.profiles.KeyProfile(about)">about</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents first">



        <p>This is the base class for all key profiles.</p>
<p>Attributes:
    name (str): the name of the profile
    literature (str): citations for the profile in the literature
    about (str): a longer description of the profile.</p>












<p><span class="doc-section-title">Methods:</span></p>
    <ul>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="            __getitem__ (amads.pitch.key.profiles.KeyProfile.__getitem__)" href="#amads.pitch.key.profiles.KeyProfile.__getitem__">__getitem__</a></code></b>
            
            <div class="doc-md-description">
              <p>This is added for (some) backwards compatibility, allowing objects</p>
            </div>
          </li>
    </ul>






<div class="doc doc-children">








<h3 id="amads.pitch.key.profiles.KeyProfile-functions">Functions<a href="#amads.pitch.key.profiles.KeyProfile-functions" class="headerlink" title="Permanent link">&para;</a></h3>

<div class="doc doc-object doc-function">


<h4 id="amads.pitch.key.profiles.KeyProfile.__getitem__" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">__getitem__</span>


<a href="#amads.pitch.key.profiles.KeyProfile.__getitem__" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">__getitem__</span><span class="p">(</span><span class="n"><span title="amads.pitch.key.profiles.KeyProfile.__getitem__(key)">key</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>This is added for (some) backwards compatibility, allowing objects
to be accessed as dictionaries using bracket notation.</p>


<p><span class="doc-section-title">Examples:</span></p>
    <pre><code>&gt;&gt;&gt; kp = KrumhanslKessler()
&gt;&gt;&gt; kp["name"]
'KrumhanslKessler'
</code></pre>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>amads/pitch/key/profiles.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;This is added for (some) backwards compatibility, allowing objects</span>
<span class="sd">    to be accessed as dictionaries using bracket notation.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">        &gt;&gt;&gt; kp = KrumhanslKessler()</span>
<span class="sd">        &gt;&gt;&gt; kp[&quot;name&quot;]</span>
<span class="sd">        &#39;KrumhanslKessler&#39;</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span>
    <span class="c1"># Slightly nicer error handling</span>
    <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Key Profile &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()</span><span class="si">}</span><span class="s2">&#39; has no attribute &#39;</span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">&#39;&quot;</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div><hr />


<div class="doc doc-object doc-module">



<h2 id="amads.pitch.key.transpose2c" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>            <span class="doc doc-object-name doc-module-name">transpose2c</span>


<a href="#amads.pitch.key.transpose2c" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents first">

        <p>transposes a given score to C after we've attained
the maximum correlation key of the score from
the krumhansl-kessler algorithm (kkcc with default parameters).</p>
<p><small><strong>Author</strong>: Tai Nakamura, Di Wang</small></p>


<details class="reference" open>
  <summary>Reference</summary>
  <p>https://citeseerx.ist.psu.edu/document?repid=rep1&amp;type=pdf&amp;doi=6e06906ca1ba0bf0ac8f2cb1a929f3be95eeadfa#page=93</p>
</details>














<div class="doc doc-children">












  </div>

    </div>

</div><hr />


<div class="doc doc-object doc-function">


<h2 id="amads.pitch.key.transpose2c.transpose2c" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>            <span class="doc doc-object-name doc-function-name">transpose2c</span>


<a href="#amads.pitch.key.transpose2c.transpose2c" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">transpose2c</span><span class="p">(</span>
    <span class="n"><a class="autorefs autorefs-internal" title="score (amads.pitch.key.transpose2c.transpose2c(score))" href="#amads.pitch.key.transpose2c.transpose2c(score)">score</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            Score (amads.core.basics.Score)" href="../../basics/#amads.core.basics.Score">Score</a></span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-internal" title="profile_name (amads.pitch.key.transpose2c.transpose2c(profile_name))" href="#amads.pitch.key.transpose2c.transpose2c(profile_name)">profile_name</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span> <span class="o">=</span> <span class="s2">&quot;KRUMHANSL-KESSLER&quot;</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-internal" title="            Score (amads.core.basics.Score)" href="../../basics/#amads.core.basics.Score">Score</a></span>
</code></pre></div>

    <div class="doc doc-contents first">

        <p>returns a copy of score transposed to C-major/minor with the key from the
original krumhansl-kessler algorithm (kkcc with default parameters).</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
<h3 id="amads.pitch.key.transpose2c.transpose2c(score)" class="doc doc-heading doc-heading-parameter">              <b><code>score</code></b>
<a href="#amads.pitch.key.transpose2c.transpose2c(score)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-internal" title="            Score (amads.core.basics.Score)" href="../../basics/#amads.core.basics.Score">Score</a></code>)
          
          <div class="doc-md-description">
            <p>The musical score to analyze.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h3 id="amads.pitch.key.transpose2c.transpose2c(profile_name)" class="doc doc-heading doc-heading-parameter">              <b><code>profile_name</code></b>
<a href="#amads.pitch.key.transpose2c.transpose2c(profile_name)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></code>, default:
                  <code>&#39;KRUMHANSL-KESSLER&#39;</code>
)
          
          <div class="doc-md-description">
            <p>string argument denoting the relevant profile for key estimation</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><a class="autorefs autorefs-internal" title="            Score (amads.core.basics.Score)" href="../../basics/#amads.core.basics.Score">Score</a></code>
          
          <div class="doc-md-description">
            <p>a copy of the input score transposed to C-major/minor</p>
          </div>
        </li>
    </ul>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>amads/pitch/key/transpose2c.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">transpose2c</span><span class="p">(</span><span class="n">score</span><span class="p">:</span> <span class="n">Score</span><span class="p">,</span> <span class="n">profile_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;KRUMHANSL-KESSLER&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Score</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    returns a copy of score transposed to C-major/minor with the key from the</span>
<span class="sd">    original krumhansl-kessler algorithm (kkcc with default parameters).</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    score : Score</span>
<span class="sd">        The musical score to analyze.</span>
<span class="sd">    profile_name : str</span>
<span class="sd">        string argument denoting the relevant profile for key estimation</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    Score</span>
<span class="sd">        a copy of the input score transposed to C-major/minor</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># kkcc fails when an empty score is supplied.</span>
    <span class="c1"># However, an empty score transposes to an empty score regardless of what key</span>
    <span class="c1"># you&#39;re transposing to, so we treat this as a special case here.</span>
    <span class="k">if</span> <span class="nb">next</span><span class="p">(</span><span class="n">score</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="n">Note</span><span class="p">),</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">score</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">()</span>
    <span class="n">corr_vals</span> <span class="o">=</span> <span class="n">kkcc</span><span class="p">(</span><span class="n">score</span><span class="p">,</span> <span class="n">profile_name</span><span class="p">)</span>

    <span class="n">key_idx</span> <span class="o">=</span> <span class="n">corr_vals</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="n">corr_vals</span><span class="p">))</span> <span class="o">%</span> <span class="mi">12</span>
    <span class="c1"># TODO: need to use pitch_shift which is to be implemented in Score</span>
    <span class="n">score_copy</span> <span class="o">=</span> <span class="n">score</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">note</span> <span class="ow">in</span> <span class="n">score_copy</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="n">Note</span><span class="p">):</span>
        <span class="n">keynum</span><span class="p">,</span> <span class="n">alt</span> <span class="o">=</span> <span class="n">note</span><span class="o">.</span><span class="n">pitch</span><span class="o">.</span><span class="n">as_tuple</span><span class="p">()</span>
        <span class="c1"># since Pitches with same alt and keynum are equivalent</span>
        <span class="c1"># and Pitches themselves are considered &quot;immutable&quot; in</span>
        <span class="c1"># our representation scheme</span>
        <span class="n">note</span><span class="o">.</span><span class="n">pitch</span> <span class="o">=</span> <span class="n">Pitch</span><span class="p">(</span><span class="n">keynum</span> <span class="o">-</span> <span class="n">key_idx</span><span class="p">,</span> <span class="n">alt</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">score_copy</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div><hr />


<div class="doc doc-object doc-module">



<h2 id="amads.pitch.key.kkkey" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>            <span class="doc doc-object-name doc-module-name">kkkey</span>


<a href="#amads.pitch.key.kkkey" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents first">

        <p>Maximal correlation value's attribute and index pair from key_cc algorithm.</p>
<p>Corresponds to kkkey in miditoolbox.</p>


<details class="reference" open>
  <summary>Reference</summary>
  <p>https://citeseerx.ist.psu.edu/document?repid=rep1&amp;type=pdf&amp;doi=6e06906ca1ba0bf0ac8f2cb1a929f3be95eeadfa#page=68</p>
</details>














<div class="doc doc-children">












  </div>

    </div>

</div><hr />


<div class="doc doc-object doc-function">


<h2 id="amads.pitch.key.kkkey.kkkey" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>            <span class="doc doc-object-name doc-function-name">kkkey</span>


<a href="#amads.pitch.key.kkkey.kkkey" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">kkkey</span><span class="p">(</span>
    <span class="n"><a class="autorefs autorefs-internal" title="score (amads.pitch.key.kkkey.kkkey(score))" href="#amads.pitch.key.kkkey.kkkey(score)">score</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            Score (amads.core.basics.Score)" href="../../basics/#amads.core.basics.Score">Score</a></span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="profile (amads.pitch.key.kkkey.kkkey(profile))" href="#amads.pitch.key.kkkey.kkkey(profile)">profile</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            KeyProfile


  
      dataclass
   (amads.pitch.key.profiles.KeyProfile)" href="#amads.pitch.key.profiles.KeyProfile">KeyProfile</a></span> <span class="o">=</span> <span class="n"><span title="amads.pitch.key.profiles.krumhansl_kessler">krumhansl_kessler</span></span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="attribute_names (amads.pitch.key.kkkey.kkkey(attribute_names))" href="#amads.pitch.key.kkkey.kkkey(attribute_names)">attribute_names</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;major&quot;</span><span class="p">,</span> <span class="s2">&quot;minor&quot;</span><span class="p">],</span>
    <span class="n"><a class="autorefs autorefs-internal" title="salience_flag (amads.pitch.key.kkkey.kkkey(salience_flag))" href="#amads.pitch.key.kkkey.kkkey(salience_flag)">salience_flag</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#tuple">tuple</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents first">

        <p>Finds the pitch profile with the highest correlation value.</p>
<p>Within <code>profile</code> there are multiple profiles named by attributes.
This function returns the "best" attribute (string) and the best
key (int) where the int corresponds to the 12 keys in order:
0 -&gt; C, 1 -&gt; C#, ..., 11 -&gt; B. (see key_cc.py for more details)</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
<h3 id="amads.pitch.key.kkkey.kkkey(score)" class="doc doc-heading doc-heading-parameter">              <b><code>score</code></b>
<a href="#amads.pitch.key.kkkey.kkkey(score)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-internal" title="            Score (amads.core.basics.Score)" href="../../basics/#amads.core.basics.Score">Score</a></code>)
          
          <div class="doc-md-description">
            <p>The musical score to analyze.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h3 id="amads.pitch.key.kkkey.kkkey(profile)" class="doc doc-heading doc-heading-parameter">              <b><code>profile</code></b>
<a href="#amads.pitch.key.kkkey.kkkey(profile)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-internal" title="            KeyProfile


  
      dataclass
   (amads.pitch.key.profiles.KeyProfile)" href="#amads.pitch.key.profiles.KeyProfile">KeyProfile</a></code>, default:
                  <code><span title="amads.pitch.key.profiles.krumhansl_kessler">krumhansl_kessler</span></code>
)
          
          <div class="doc-md-description">
            <p>The key profile to use for analysis.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h3 id="amads.pitch.key.kkkey.kkkey(attribute_names)" class="doc doc-heading doc-heading-parameter">              <b><code>attribute_names</code></b>
<a href="#amads.pitch.key.kkkey.kkkey(attribute_names)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>] | None</code>, default:
                  <code>[&#39;major&#39;, &#39;minor&#39;]</code>
)
          
          <div class="doc-md-description">
            <p>List of attribute names that denote the particular PitchProfiles
within the KeyProfile to compute correlations for.
See key_cc for more details</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h3 id="amads.pitch.key.kkkey.kkkey(salience_flag)" class="doc doc-heading doc-heading-parameter">              <b><code>salience_flag</code></b>
<a href="#amads.pitch.key.kkkey.kkkey(salience_flag)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>, default:
                  <code>False</code>
)
          
          <div class="doc-md-description">
            <p>indicate whether we want to turn on salience weights in key_cc</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#tuple">tuple</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>, <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a>]</code>
          
          <div class="doc-md-description">
            <p>The attribute name and key with the highest correlation coefficient.</p>
          </div>
        </li>
    </ul>


<details class="see-also" open>
  <summary>See Also</summary>
  <p>key_cc</p>
</details>

            <details class="mkdocstrings-source">
              <summary>Source code in <code>amads/pitch/key/kkkey.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">kkkey</span><span class="p">(</span>
    <span class="n">score</span><span class="p">:</span> <span class="n">Score</span><span class="p">,</span>
    <span class="n">profile</span><span class="p">:</span> <span class="n">prof</span><span class="o">.</span><span class="n">KeyProfile</span> <span class="o">=</span> <span class="n">prof</span><span class="o">.</span><span class="n">krumhansl_kessler</span><span class="p">,</span>
    <span class="n">attribute_names</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;major&quot;</span><span class="p">,</span> <span class="s2">&quot;minor&quot;</span><span class="p">],</span>
    <span class="n">salience_flag</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Finds the pitch profile with the highest correlation value.</span>

<span class="sd">    Within `profile` there are multiple profiles named by attributes.</span>
<span class="sd">    This function returns the &quot;best&quot; attribute (string) and the best</span>
<span class="sd">    key (int) where the int corresponds to the 12 keys in order:</span>
<span class="sd">    0 -&gt; C, 1 -&gt; C#, ..., 11 -&gt; B. (see key_cc.py for more details)</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    score: Score</span>
<span class="sd">        The musical score to analyze.</span>
<span class="sd">    profile: Profile</span>
<span class="sd">        The key profile to use for analysis.</span>
<span class="sd">    attribute_names: Optional[List[str]]</span>
<span class="sd">        List of attribute names that denote the particular PitchProfiles</span>
<span class="sd">        within the KeyProfile to compute correlations for.</span>
<span class="sd">        See key_cc for more details</span>
<span class="sd">    salience_flag: bool</span>
<span class="sd">        indicate whether we want to turn on salience weights in key_cc</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    tuple[str, int]</span>
<span class="sd">        The attribute name and key with the highest correlation coefficient.</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    key_cc</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">corrcoef_pairs</span> <span class="o">=</span> <span class="n">key_cc</span><span class="p">(</span><span class="n">score</span><span class="p">,</span> <span class="n">profile</span><span class="p">,</span> <span class="n">attribute_names</span><span class="p">,</span> <span class="n">salience_flag</span><span class="p">)</span>
    <span class="c1"># list of pairs (attribute_name, [correlation coefficients])</span>
    <span class="n">max_val_iter</span> <span class="o">=</span> <span class="p">(</span><span class="n">coefs</span> <span class="k">for</span> <span class="p">(</span><span class="n">_</span><span class="p">,</span> <span class="n">coefs</span><span class="p">)</span> <span class="ow">in</span> <span class="n">corrcoef_pairs</span> <span class="k">if</span> <span class="n">coefs</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span>
    <span class="c1"># This code is a little unexpected: it first searches for the maximum</span>
    <span class="c1"># correlation value across all attributes and keys, then finds the</span>
    <span class="c1"># attribute and key index corresponding to that maximum value.</span>
    <span class="n">max_val</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">chain</span><span class="o">.</span><span class="n">from_iterable</span><span class="p">(</span><span class="n">max_val_iter</span><span class="p">))</span>
    <span class="n">nested_coefs_iter</span> <span class="o">=</span> <span class="p">(</span>
        <span class="p">(</span><span class="n">attr</span><span class="p">,</span> <span class="n">coefs</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">max_val</span><span class="p">))</span>
        <span class="k">for</span> <span class="p">(</span><span class="n">attr</span><span class="p">,</span> <span class="n">coefs</span><span class="p">)</span> <span class="ow">in</span> <span class="n">corrcoef_pairs</span>
        <span class="k">if</span> <span class="n">coefs</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">max_val</span> <span class="ow">in</span> <span class="n">coefs</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="nb">next</span><span class="p">(</span><span class="n">nested_coefs_iter</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div><hr />


<div class="doc doc-object doc-module">



<h2 id="amads.pitch.key.keymode" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>            <span class="doc doc-object-name doc-module-name">keymode</span>


<a href="#amads.pitch.key.keymode" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents first">

        <p>Assuming key of C, find a score's mode based on key profiles using key_cc.</p>
<p>This function is primarily used to estimate the mode, an attribute of a given
KeyProfile collection. The key of C is assumed, and cross-correlation with
profiles for other keys are ignored.</p>


<details class="reference" open>
  <summary>Reference</summary>
  <p>https://citeseerx.ist.psu.edu/document?repid=rep1&amp;type=pdf&amp;doi=6e06906ca1ba0bf0ac8f2cb1a929f3be95eeadfa#page=65</p>
</details>














<div class="doc doc-children">












  </div>

    </div>

</div><hr />


<div class="doc doc-object doc-function">


<h2 id="amads.pitch.key.keymode.keymode" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>            <span class="doc doc-object-name doc-function-name">keymode</span>


<a href="#amads.pitch.key.keymode.keymode" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">keymode</span><span class="p">(</span>
    <span class="n"><a class="autorefs autorefs-internal" title="score (amads.pitch.key.keymode.keymode(score))" href="#amads.pitch.key.keymode.keymode(score)">score</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            Score (amads.core.basics.Score)" href="../../basics/#amads.core.basics.Score">Score</a></span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="profile (amads.pitch.key.keymode.keymode(profile))" href="#amads.pitch.key.keymode.keymode(profile)">profile</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            KeyProfile


  
      dataclass
   (amads.pitch.key.profiles.KeyProfile)" href="#amads.pitch.key.profiles.KeyProfile">KeyProfile</a></span> <span class="o">=</span> <span class="n"><span title="amads.pitch.key.profiles.krumhansl_kessler">krumhansl_kessler</span></span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="attribute_names (amads.pitch.key.keymode.keymode(attribute_names))" href="#amads.pitch.key.keymode.keymode(attribute_names)">attribute_names</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;major&quot;</span><span class="p">,</span> <span class="s2">&quot;minor&quot;</span><span class="p">],</span>
    <span class="n"><a class="autorefs autorefs-internal" title="salience_flag (amads.pitch.key.keymode.keymode(salience_flag))" href="#amads.pitch.key.keymode.keymode(salience_flag)">salience_flag</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents first">

        <p>Find the mode based on cross-correlation values.</p>
<p>Returns the list of mode(s) whose profile(s) have a maximal
cross-correlation with the score's pitch distribution.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
<h3 id="amads.pitch.key.keymode.keymode(score)" class="doc doc-heading doc-heading-parameter">              <b><code>score</code></b>
<a href="#amads.pitch.key.keymode.keymode(score)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-internal" title="            Score (amads.core.basics.Score)" href="../../basics/#amads.core.basics.Score">Score</a></code>)
          
          <div class="doc-md-description">
            <p>The musical score to analyze.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h3 id="amads.pitch.key.keymode.keymode(profile)" class="doc doc-heading doc-heading-parameter">              <b><code>profile</code></b>
<a href="#amads.pitch.key.keymode.keymode(profile)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-internal" title="            KeyProfile


  
      dataclass
   (amads.pitch.key.profiles.KeyProfile)" href="#amads.pitch.key.profiles.KeyProfile">KeyProfile</a></code>, default:
                  <code><span title="amads.pitch.key.profiles.krumhansl_kessler">krumhansl_kessler</span></code>
)
          
          <div class="doc-md-description">
            <p>collection of profile data for different modes (attributes)</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h3 id="amads.pitch.key.keymode.keymode(attribute_names)" class="doc doc-heading doc-heading-parameter">              <b><code>attribute_names</code></b>
<a href="#amads.pitch.key.keymode.keymode(attribute_names)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>] | None</code>, default:
                  <code>[&#39;major&#39;, &#39;minor&#39;]</code>
)
          
          <div class="doc-md-description">
            <p>List of attribute names that denote the particular PitchProfiles
within the KeyProfile and generally indicate different modes.
See profiles.py for more details.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h3 id="amads.pitch.key.keymode.keymode(salience_flag)" class="doc doc-heading doc-heading-parameter">              <b><code>salience_flag</code></b>
<a href="#amads.pitch.key.keymode.keymode(salience_flag)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>, default:
                  <code>False</code>
)
          
          <div class="doc-md-description">
            <p>Indicate whether we want to turn on salience weights in key_cc
which is used to compute the cross-correlations.</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>]</code>
          
          <div class="doc-md-description">
            <p>List of attribute names that have maximal cross-correlation with
the score's profile (usually, length will be 1).</p>
          </div>
        </li>
    </ul>


<details class="see-also" open>
  <summary>See Also</summary>
  <p>key_cc</p>
</details>

            <details class="mkdocstrings-source">
              <summary>Source code in <code>amads/pitch/key/keymode.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">keymode</span><span class="p">(</span>
    <span class="n">score</span><span class="p">:</span> <span class="n">Score</span><span class="p">,</span>
    <span class="n">profile</span><span class="p">:</span> <span class="n">prof</span><span class="o">.</span><span class="n">KeyProfile</span> <span class="o">=</span> <span class="n">prof</span><span class="o">.</span><span class="n">krumhansl_kessler</span><span class="p">,</span>
    <span class="n">attribute_names</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;major&quot;</span><span class="p">,</span> <span class="s2">&quot;minor&quot;</span><span class="p">],</span>
    <span class="n">salience_flag</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Find the mode based on cross-correlation values.</span>

<span class="sd">    Returns the list of mode(s) whose profile(s) have a maximal</span>
<span class="sd">    cross-correlation with the score&#39;s pitch distribution.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    score: Score</span>
<span class="sd">        The musical score to analyze.</span>
<span class="sd">    profile: Profile</span>
<span class="sd">        collection of profile data for different modes (attributes)</span>
<span class="sd">    attribute_names: Optional[List[str]]</span>
<span class="sd">        List of attribute names that denote the particular PitchProfiles</span>
<span class="sd">        within the KeyProfile and generally indicate different modes.</span>
<span class="sd">        See profiles.py for more details.</span>
<span class="sd">    salience_flag: bool</span>
<span class="sd">        Indicate whether we want to turn on salience weights in key_cc</span>
<span class="sd">        which is used to compute the cross-correlations.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    List[str]</span>
<span class="sd">        List of attribute names that have maximal cross-correlation with</span>
<span class="sd">        the score&#39;s profile (usually, length will be 1).</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    key_cc</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># This algorithm is not very efficient: It computes 12 correlations</span>
    <span class="c1"># for each mode, but only uses one. Then, it iterates through the</span>
    <span class="c1"># results, once to find the maximum, and again to form a list of</span>
    <span class="c1"># modes that achieve that maximum.</span>

    <span class="n">corrcoef_pairs</span> <span class="o">=</span> <span class="n">key_cc</span><span class="p">(</span><span class="n">score</span><span class="p">,</span> <span class="n">profile</span><span class="p">,</span> <span class="n">attribute_names</span><span class="p">,</span> <span class="n">salience_flag</span><span class="p">)</span>

    <span class="n">c_max_val_iter</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">coefs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="p">(</span><span class="n">_</span><span class="p">,</span> <span class="n">coefs</span><span class="p">)</span> <span class="ow">in</span> <span class="n">corrcoef_pairs</span> <span class="k">if</span> <span class="n">coefs</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
    <span class="p">)</span>
    <span class="n">c_max_val</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">c_max_val_iter</span><span class="p">)</span>
    <span class="n">keymode_attributes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">attr</span>
        <span class="k">for</span> <span class="p">(</span><span class="n">attr</span><span class="p">,</span> <span class="n">coefs</span><span class="p">)</span> <span class="ow">in</span> <span class="n">corrcoef_pairs</span>
        <span class="k">if</span> <span class="n">coefs</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">coefs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">c_max_val</span>
    <span class="p">]</span>
    <span class="k">return</span> <span class="n">keymode_attributes</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div><hr />


<div class="doc doc-object doc-module">



<h2 id="amads.pitch.key.key_cc" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>            <span class="doc doc-object-name doc-module-name">key_cc</span>


<a href="#amads.pitch.key.key_cc" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents first">

        <p>Cross-correlations between pitch-class distributions and key profiles.</p>
<p><small><strong>Author</strong>: Tai Nakamura, Di Wang</small></p>


<details class="reference" open>
  <summary>Reference</summary>
  <p>https://citeseerx.ist.psu.edu/document?repid=rep1&amp;type=pdf&amp;doi=6e06906ca1ba0bf0ac8f2cb1a929f3be95eeadfa#page=68 for more details</p>
</details>














<div class="doc doc-children">












  </div>

    </div>

</div><hr />


<div class="doc doc-object doc-function">


<h2 id="amads.pitch.key.key_cc.key_cc" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>            <span class="doc doc-object-name doc-function-name">key_cc</span>


<a href="#amads.pitch.key.key_cc.key_cc" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">key_cc</span><span class="p">(</span>
    <span class="n"><a class="autorefs autorefs-internal" title="score (amads.pitch.key.key_cc.key_cc(score))" href="#amads.pitch.key.key_cc.key_cc(score)">score</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            Score (amads.core.basics.Score)" href="../../basics/#amads.core.basics.Score">Score</a></span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="profile (amads.pitch.key.key_cc.key_cc(profile))" href="#amads.pitch.key.key_cc.key_cc(profile)">profile</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            KeyProfile


  
      dataclass
   (amads.pitch.key.profiles.KeyProfile)" href="#amads.pitch.key.profiles.KeyProfile">KeyProfile</a></span> <span class="o">=</span> <span class="n"><span title="amads.pitch.key.profiles.krumhansl_kessler">krumhansl_kessler</span></span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="attribute_names (amads.pitch.key.key_cc.key_cc(attribute_names))" href="#amads.pitch.key.key_cc.key_cc(attribute_names)">attribute_names</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="salience_flag (amads.pitch.key.key_cc.key_cc(salience_flag))" href="#amads.pitch.key.key_cc.key_cc(salience_flag)">salience_flag</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#tuple">tuple</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#tuple">tuple</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a></span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]]</span>
</code></pre></div>

    <div class="doc doc-contents first">

        <p>Calculate the correlation coefficients with specific pitch profiles.</p>
<p>A score's pitch-class distribution is computed and generally,
KeyProfiles come from existing data in profiles.py. Within each
KeyProfile are one or more distributions, e.g. for "major" and
"minor" keys, so you must specify which distributions you want
correlations for.  Return a list of tuples, each containing the
attribute name (e.g., "major") and the corresponding 12 correlation
coefficients.</p>
<p>When <code>salience_flag</code> is True, the pitch class distribution from the score
(pcd) is replaced by a new one (pcd2) where each element is a weighted sum
of the elements of pcd. The weights are rotated for each element. Thus,
pcd2[i] = sum(pcd[j] * weight[(j + i) mod 12].</p>
<p>The idea here is that the perception of significance of a certain pitch in
a score depends not only on its naive unweighted frequency, but also (to a
lesser extent) on the frequency of functionally harmonic pitches present
in the score.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
<h3 id="amads.pitch.key.key_cc.key_cc(score)" class="doc doc-heading doc-heading-parameter">              <b><code>score</code></b>
<a href="#amads.pitch.key.key_cc.key_cc(score)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-internal" title="            Score (amads.core.basics.Score)" href="../../basics/#amads.core.basics.Score">Score</a></code>)
          
          <div class="doc-md-description">
            <p>The score to analyze.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h3 id="amads.pitch.key.key_cc.key_cc(profile)" class="doc doc-heading doc-heading-parameter">              <b><code>profile</code></b>
<a href="#amads.pitch.key.key_cc.key_cc(profile)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-internal" title="            KeyProfile


  
      dataclass
   (amads.pitch.key.profiles.KeyProfile)" href="#amads.pitch.key.profiles.KeyProfile">KeyProfile</a></code>, default:
                  <code><span title="amads.pitch.key.profiles.krumhansl_kessler">krumhansl_kessler</span></code>
)
          
          <div class="doc-md-description">
            <p>The key profile to use for analysis.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h3 id="amads.pitch.key.key_cc.key_cc(attribute_names)" class="doc doc-heading doc-heading-parameter">              <b><code>attribute_names</code></b>
<a href="#amads.pitch.key.key_cc.key_cc(attribute_names)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>] | None</code>, default:
                  <code>None</code>
)
          
          <div class="doc-md-description">
            <p>List of attribute names that denote the particular PitchProfiles
within the KeyProfile to compute correlations for. An example
<code>attribute_names</code> for profile prof.vuvan could be
<code>["natural_minor", "harmonic_minor"]</code>, which says to
compute the cross-correlation between the pitch-class distribution
of the score and both prof.vuvan's natural_minor and prof.vuvan's
harmonic_minor. <code>None</code> can be supplied when we want to specify all
valid pitch profiles within a given key profile.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h3 id="amads.pitch.key.key_cc.key_cc(salience_flag)" class="doc doc-heading doc-heading-parameter">              <b><code>salience_flag</code></b>
<a href="#amads.pitch.key.key_cc.key_cc(salience_flag)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>, default:
                  <code>False</code>
)
          
          <div class="doc-md-description">
            <p>If True, apply salience pitch-wise bias weights to the score's
pitch-class distribution.</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#tuple">tuple</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>, <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#tuple">tuple</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a>] | None]]</code>
          
          <div class="doc-md-description">
            <p>A list of tuples where each tuple contains the attribute name, from
parameter <code>attribute_names</code>, and the corresponding 12-tuple of
correlation coefficients. If an attribute name does not reference
a valid data field within the specified key profile, it will yield
<code>(</code><em>attribute_name</em><code>, None)</code>.</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Raises:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/exceptions.html#RuntimeError">RuntimeError</a></code>
            
          <div class="doc-md-description">
            <p>If the score or key profile contains equal pitch weights,
resulting in correlation not being able to be computed.</p>
          </div>
        </li>
    </ul>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>amads/pitch/key/key_cc.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">key_cc</span><span class="p">(</span>
    <span class="n">score</span><span class="p">:</span> <span class="n">Score</span><span class="p">,</span>
    <span class="n">profile</span><span class="p">:</span> <span class="n">prof</span><span class="o">.</span><span class="n">KeyProfile</span> <span class="o">=</span> <span class="n">prof</span><span class="o">.</span><span class="n">krumhansl_kessler</span><span class="p">,</span>
    <span class="n">attribute_names</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">salience_flag</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">]]]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calculate the correlation coefficients with specific pitch profiles.</span>

<span class="sd">    A score&#39;s pitch-class distribution is computed and generally,</span>
<span class="sd">    KeyProfiles come from existing data in profiles.py. Within each</span>
<span class="sd">    KeyProfile are one or more distributions, e.g. for &quot;major&quot; and</span>
<span class="sd">    &quot;minor&quot; keys, so you must specify which distributions you want</span>
<span class="sd">    correlations for.  Return a list of tuples, each containing the</span>
<span class="sd">    attribute name (e.g., &quot;major&quot;) and the corresponding 12 correlation</span>
<span class="sd">    coefficients.</span>

<span class="sd">    When `salience_flag` is True, the pitch class distribution from the score</span>
<span class="sd">    (pcd) is replaced by a new one (pcd2) where each element is a weighted sum</span>
<span class="sd">    of the elements of pcd. The weights are rotated for each element. Thus,</span>
<span class="sd">    pcd2[i] = sum(pcd[j] * weight[(j + i) mod 12].</span>

<span class="sd">    The idea here is that the perception of significance of a certain pitch in</span>
<span class="sd">    a score depends not only on its naive unweighted frequency, but also (to a</span>
<span class="sd">    lesser extent) on the frequency of functionally harmonic pitches present</span>
<span class="sd">    in the score.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    score: Score</span>
<span class="sd">        The score to analyze.</span>

<span class="sd">    profile: prof.KeyProfile</span>
<span class="sd">        The key profile to use for analysis.</span>

<span class="sd">    attribute_names: Optional[List[str]]</span>
<span class="sd">        List of attribute names that denote the particular PitchProfiles</span>
<span class="sd">        within the KeyProfile to compute correlations for. An example</span>
<span class="sd">        `attribute_names` for profile prof.vuvan could be</span>
<span class="sd">        `[&quot;natural_minor&quot;, &quot;harmonic_minor&quot;]`, which says to</span>
<span class="sd">        compute the cross-correlation between the pitch-class distribution</span>
<span class="sd">        of the score and both prof.vuvan&#39;s natural_minor and prof.vuvan&#39;s</span>
<span class="sd">        harmonic_minor. `None` can be supplied when we want to specify all</span>
<span class="sd">        valid pitch profiles within a given key profile.</span>

<span class="sd">    salience_flag: bool</span>
<span class="sd">        If True, apply salience pitch-wise bias weights to the score&#39;s</span>
<span class="sd">        pitch-class distribution.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    List[Tuple[str, Optional[Tuple[float]]]]</span>
<span class="sd">        A list of tuples where each tuple contains the attribute name, from</span>
<span class="sd">        parameter `attribute_names`, and the corresponding 12-tuple of</span>
<span class="sd">        correlation coefficients. If an attribute name does not reference</span>
<span class="sd">        a valid data field within the specified key profile, it will yield</span>
<span class="sd">        `(`*attribute_name*`, None)`.</span>

<span class="sd">    Raises</span>
<span class="sd">    ------</span>
<span class="sd">    RuntimeError</span>
<span class="sd">        If the score or key profile contains equal pitch weights,</span>
<span class="sd">        resulting in correlation not being able to be computed.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># Get pitch-class distribution</span>
    <span class="n">pcd</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">pitch_class_distribution_1</span><span class="p">(</span><span class="n">score</span><span class="p">,</span> <span class="n">weighted</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">data</span><span class="p">])</span>

    <span class="c1"># Apply salience weighting if requested</span>
    <span class="k">if</span> <span class="n">salience_flag</span><span class="p">:</span>
        <span class="c1"># NOTE: this is not the weight vector,</span>
        <span class="c1"># the salience weights for the c-pitch in the pitch-class distribution</span>
        <span class="c1"># is [1, 0, 0.2, 0.17, 0.33, 0, 0, 0.5, 0, 0, 0.25, 0].</span>
        <span class="c1"># These weights form the first column of the 12x12 matrix salm.</span>
        <span class="n">sal2</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.33</span><span class="p">,</span> <span class="mf">0.17</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="mi">2</span>
        <span class="n">salm</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">12</span><span class="p">,</span> <span class="mi">12</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">salm</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
            <span class="n">salm</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">sal2</span><span class="p">[</span><span class="mi">12</span> <span class="o">-</span> <span class="n">i</span> <span class="p">:</span> <span class="mi">24</span> <span class="o">-</span> <span class="n">i</span><span class="p">]</span>
        <span class="n">pcd</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">matmul</span><span class="p">(</span><span class="n">pcd</span><span class="p">,</span> <span class="n">salm</span><span class="o">.</span><span class="n">T</span><span class="p">)</span>  <span class="c1"># shape (1, 12)</span>

    <span class="n">results</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="n">true_attribute_names</span> <span class="o">=</span> <span class="n">attribute_names</span>

    <span class="k">if</span> <span class="n">true_attribute_names</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">true_attribute_names</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">f</span><span class="o">.</span><span class="n">name</span>
            <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">fields</span><span class="p">(</span><span class="n">profile</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="s2">&quot;literature&quot;</span><span class="p">,</span> <span class="s2">&quot;about&quot;</span><span class="p">]</span>
        <span class="p">]</span>

    <span class="k">for</span> <span class="n">attr_name</span> <span class="ow">in</span> <span class="n">true_attribute_names</span><span class="p">:</span>
        <span class="c1"># ! we should probably treat the special attributes as proper attribute names</span>
        <span class="k">if</span> <span class="n">attr_name</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="s2">&quot;literature&quot;</span><span class="p">,</span> <span class="s2">&quot;about&quot;</span><span class="p">]:</span>
            <span class="nb">print</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Warning! Attempting to access metadata in profile &#39;</span><span class="si">{</span><span class="n">profile</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
            <span class="n">results</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">attr_name</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span>
            <span class="k">continue</span>
        <span class="c1"># Get the attribute from the profile</span>
        <span class="n">attr_value</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">profile</span><span class="p">,</span> <span class="n">attr_name</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">attr_value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Warning: Attribute &#39;</span><span class="si">{</span><span class="n">attr_name</span><span class="si">}</span><span class="s2">&#39; is invalid or None in profile &#39;</span><span class="si">{</span><span class="n">profile</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;&quot;</span>
            <span class="p">)</span>
            <span class="n">results</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">attr_name</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span>
            <span class="k">continue</span>
        <span class="n">profiles_matrix</span> <span class="o">=</span> <span class="n">attr_value</span><span class="o">.</span><span class="n">as_canonical_matrix</span><span class="p">()</span>
        <span class="n">correlations</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">_compute_correlations</span><span class="p">(</span><span class="n">pcd</span><span class="p">,</span> <span class="n">profiles_matrix</span><span class="p">))</span>
        <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">val</span><span class="p">)</span> <span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">correlations</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
                <span class="s2">&quot;key_cc has encountered either an invalid or equal weight&quot;</span>
                <span class="s2">&quot; score, or invalid pitch profile</span><span class="se">\n</span><span class="s2">&quot;</span>
                <span class="sa">f</span><span class="s2">&quot;correlations = </span><span class="si">{</span><span class="nb">list</span><span class="p">(</span><span class="n">correlations</span><span class="p">)</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
                <span class="sa">f</span><span class="s2">&quot;score pitch-class distribution = </span><span class="si">{</span><span class="nb">list</span><span class="p">(</span><span class="n">pcd</span><span class="p">)</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
                <span class="sa">f</span><span class="s2">&quot;profiles matrix = </span><span class="se">\n</span><span class="si">{</span><span class="n">profiles_matrix</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="p">)</span>
        <span class="n">results</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">attr_name</span><span class="p">,</span> <span class="n">correlations</span><span class="p">))</span>

    <span class="k">return</span> <span class="n">results</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div><hr />


<div class="doc doc-object doc-module">



<h2 id="amads.pitch.key.kkcc" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>            <span class="doc doc-object-name doc-module-name">kkcc</span>


<a href="#amads.pitch.key.kkcc" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents first">

        <p>This is a wrapper for key_cc to mimic the functionality of kkcc from
miditoolbox for convenience.</p>
<p><small><strong>Author</strong>: Tai Nakamura, Di Wang</small></p>


<details class="reference" open>
  <summary>Reference</summary>
  <p>https://citeseerx.ist.psu.edu/document?repid=rep1&amp;type=pdf&amp;doi=6e06906ca1ba0bf0ac8f2cb1a929f3be95eeadfa#page=68</p>
</details>














<div class="doc doc-children">












  </div>

    </div>

</div><hr />


<div class="doc doc-object doc-function">


<h2 id="amads.pitch.key.kkcc.kkcc" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>            <span class="doc doc-object-name doc-function-name">kkcc</span>


<a href="#amads.pitch.key.kkcc.kkcc" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">kkcc</span><span class="p">(</span>
    <span class="n"><a class="autorefs autorefs-internal" title="score (amads.pitch.key.kkcc.kkcc(score))" href="#amads.pitch.key.kkcc.kkcc(score)">score</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            Score (amads.core.basics.Score)" href="../../basics/#amads.core.basics.Score">Score</a></span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="profile_name (amads.pitch.key.kkcc.kkcc(profile_name))" href="#amads.pitch.key.kkcc.kkcc(profile_name)">profile_name</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span> <span class="o">=</span> <span class="s2">&quot;KRUMHANSL-KESSLER&quot;</span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="salience_flag (amads.pitch.key.kkcc.kkcc(salience_flag))" href="#amads.pitch.key.kkcc.kkcc(salience_flag)">salience_flag</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#tuple">tuple</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents first">

        <p>kkcc wrapper on key_cc that provides the exact behavior of miditoolbox kkcc</p>
<p>This module:</p>
<ol>
<li>Provides 3 string options for profile names</li>
<li>maps the <code>profile_name</code> option to the relevant profile and attribute
     name list combination for key_cc, replicating the behavior of
     the relevant kkcc function call in miditoolbox.</li>
</ol>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
<h3 id="amads.pitch.key.kkcc.kkcc(score)" class="doc doc-heading doc-heading-parameter">              <b><code>score</code></b>
<a href="#amads.pitch.key.kkcc.kkcc(score)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-internal" title="            Score (amads.core.basics.Score)" href="../../basics/#amads.core.basics.Score">Score</a></code>)
          
          <div class="doc-md-description">
            <p>The musical score to analyze.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h3 id="amads.pitch.key.kkcc.kkcc(profile_name)" class="doc doc-heading doc-heading-parameter">              <b><code>profile_name</code></b>
<a href="#amads.pitch.key.kkcc.kkcc(profile_name)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></code>, default:
                  <code>&#39;KRUMHANSL-KESSLER&#39;</code>
)
          
          <div class="doc-md-description">
            <p>String argument denoting the relevant miditoolbox
string option for kkcc. Must be one of "KRUMHANSL-KESSLER",
"TEMPERLEY", or "ALBRECHT-SHANAHAN".</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h3 id="amads.pitch.key.kkcc.kkcc(salience_flag)" class="doc doc-heading doc-heading-parameter">              <b><code>salience_flag</code></b>
<a href="#amads.pitch.key.kkcc.kkcc(salience_flag)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>, default:
                  <code>False</code>
)
          
          <div class="doc-md-description">
            <p>If True, apply salience weighting to the pitch-class
according to Huron &amp; Parncutt (1993).</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#tuple">tuple</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a>, ...]</code>
          
          <div class="doc-md-description">
            <p>This denotes the 12 major correlation coefficients and 12 minor correlation
coefficients from C to B in both major and minor keys, respectively (dim=24).</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Raises:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/exceptions.html#ValueError">ValueError</a></code>
            
          <div class="doc-md-description">
            <p>If the score is not a valid Score object or if the profile_name is invalid.</p>
          </div>
        </li>
    </ul>


<details class="see-also" open>
  <summary>See Also</summary>
  <p>key_cc</p>
</details>

            <details class="mkdocstrings-source">
              <summary>Source code in <code>amads/pitch/key/kkcc.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">kkcc</span><span class="p">(</span>
    <span class="n">score</span><span class="p">:</span> <span class="n">Score</span><span class="p">,</span>
    <span class="n">profile_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;KRUMHANSL-KESSLER&quot;</span><span class="p">,</span>
    <span class="n">salience_flag</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    kkcc wrapper on key_cc that provides the exact behavior of miditoolbox kkcc</span>

<span class="sd">    This module:</span>

<span class="sd">      1. Provides 3 string options for profile names</span>
<span class="sd">      2. maps the `profile_name` option to the relevant profile and attribute</span>
<span class="sd">         name list combination for key_cc, replicating the behavior of</span>
<span class="sd">         the relevant kkcc function call in miditoolbox.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    score : Score</span>
<span class="sd">        The musical score to analyze.</span>
<span class="sd">    profile_name : str</span>
<span class="sd">        String argument denoting the relevant miditoolbox</span>
<span class="sd">        string option for kkcc. Must be one of &quot;KRUMHANSL-KESSLER&quot;,</span>
<span class="sd">        &quot;TEMPERLEY&quot;, or &quot;ALBRECHT-SHANAHAN&quot;.</span>
<span class="sd">    salience_flag : bool</span>
<span class="sd">        If True, apply salience weighting to the pitch-class</span>
<span class="sd">        according to Huron &amp; Parncutt (1993).</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    tuple[float, ...]</span>
<span class="sd">        This denotes the 12 major correlation coefficients and 12 minor correlation</span>
<span class="sd">        coefficients from C to B in both major and minor keys, respectively (dim=24).</span>

<span class="sd">    Raises</span>
<span class="sd">    ------</span>
<span class="sd">    ValueError</span>
<span class="sd">        If the score is not a valid Score object or if the profile_name is invalid.</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    key_cc</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">score</span><span class="p">,</span> <span class="n">Score</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;invalid score type!&quot;</span><span class="p">)</span>
    <span class="c1"># default is krumhansl kessler, and is what profile_name is set to by default</span>
    <span class="n">profile</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">attribute_list</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="n">profile_name</span> <span class="o">==</span> <span class="s2">&quot;KRUMHANSL-KESSLER&quot;</span><span class="p">:</span>
        <span class="n">profile</span> <span class="o">=</span> <span class="n">profiles</span><span class="o">.</span><span class="n">krumhansl_kessler</span>
        <span class="n">attribute_list</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;major&quot;</span><span class="p">,</span> <span class="s2">&quot;minor&quot;</span><span class="p">]</span>
    <span class="k">elif</span> <span class="n">profile_name</span> <span class="o">==</span> <span class="s2">&quot;TEMPERLEY&quot;</span><span class="p">:</span>
        <span class="n">profile</span> <span class="o">=</span> <span class="n">profiles</span><span class="o">.</span><span class="n">temperley</span>
        <span class="n">attribute_list</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;major&quot;</span><span class="p">,</span> <span class="s2">&quot;minor&quot;</span><span class="p">]</span>
    <span class="k">elif</span> <span class="n">profile_name</span> <span class="o">==</span> <span class="s2">&quot;ALBRECHT-SHANAHAN&quot;</span><span class="p">:</span>
        <span class="n">profile</span> <span class="o">=</span> <span class="n">profiles</span><span class="o">.</span><span class="n">albrecht_shanahan</span>
        <span class="n">attribute_list</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;major&quot;</span><span class="p">,</span> <span class="s2">&quot;minor&quot;</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;profile_name = &quot;</span><span class="si">{</span><span class="n">profile_name</span><span class="si">}</span><span class="s1">&quot; is not valid&#39;</span><span class="p">)</span>

    <span class="c1"># these checks are paranoia mainly to prevent future changes</span>
    <span class="c1"># from breaking the code after</span>
    <span class="k">assert</span> <span class="ow">not</span> <span class="p">(</span><span class="n">profile</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">attribute_list</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)</span>
    <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">profile</span><span class="p">,</span> <span class="n">profiles</span><span class="o">.</span><span class="n">KeyProfile</span><span class="p">)</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">attribute_list</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span>

    <span class="n">corrcoef_pairs</span> <span class="o">=</span> <span class="n">key_cc</span><span class="p">(</span><span class="n">score</span><span class="p">,</span> <span class="n">profile</span><span class="p">,</span> <span class="n">attribute_list</span><span class="p">,</span> <span class="n">salience_flag</span><span class="p">)</span>
    <span class="c1"># check integrity of corrcoef correspondences and whether or not they abide</span>
    <span class="c1"># to the output agreed on in key_cc</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">corrcoef_pairs</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">attribute_list</span><span class="p">)</span>
    <span class="k">assert</span> <span class="nb">all</span><span class="p">(</span>
        <span class="n">attr_name</span> <span class="o">==</span> <span class="n">target_attr</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">coefs</span><span class="p">)</span> <span class="o">==</span> <span class="mi">12</span>
        <span class="k">for</span> <span class="p">((</span><span class="n">attr_name</span><span class="p">,</span> <span class="n">coefs</span><span class="p">),</span> <span class="n">target_attr</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span>
            <span class="n">corrcoef_pairs</span><span class="p">,</span> <span class="n">attribute_list</span>
        <span class="p">)</span>
    <span class="p">)</span>

    <span class="c1"># pattern match, then collect individual coefficients into</span>
    <span class="c1"># a single tuple to get our final corrcoefs</span>
    <span class="n">nested_coefs_iter</span> <span class="o">=</span> <span class="p">(</span><span class="n">coefs</span> <span class="k">for</span> <span class="p">(</span><span class="n">_</span><span class="p">,</span> <span class="n">coefs</span><span class="p">)</span> <span class="ow">in</span> <span class="n">corrcoef_pairs</span><span class="p">)</span>
    <span class="n">corrcoefs</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">chain</span><span class="o">.</span><span class="n">from_iterable</span><span class="p">(</span><span class="n">nested_coefs_iter</span><span class="p">))</span>

    <span class="k">return</span> <span class="n">corrcoefs</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div><hr />


<div class="doc doc-object doc-module">



<h2 id="amads.pitch.key.max_key_cc" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>            <span class="doc doc-object-name doc-module-name">max_key_cc</span>


<a href="#amads.pitch.key.max_key_cc" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents first">

        <p>Maximal correlation value from key_cc algorithm.</p>
<p>Corresponds to maxkkcc in miditoolbox</p>


<details class="reference" open>
  <summary>Reference</summary>
  <p>https://citeseerx.ist.psu.edu/document?repid=rep1&amp;type=pdf&amp;doi=6e06906ca1ba0bf0ac8f2cb1a929f3be95eeadfa#page=69</p>
</details>














<div class="doc doc-children">












  </div>

    </div>

</div><hr />


<div class="doc doc-object doc-function">


<h2 id="amads.pitch.key.max_key_cc.max_key_cc" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>            <span class="doc doc-object-name doc-function-name">max_key_cc</span>


<a href="#amads.pitch.key.max_key_cc.max_key_cc" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">max_key_cc</span><span class="p">(</span>
    <span class="n"><a class="autorefs autorefs-internal" title="score (amads.pitch.key.max_key_cc.max_key_cc(score))" href="#amads.pitch.key.max_key_cc.max_key_cc(score)">score</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            Score (amads.core.basics.Score)" href="../../basics/#amads.core.basics.Score">Score</a></span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="profile (amads.pitch.key.max_key_cc.max_key_cc(profile))" href="#amads.pitch.key.max_key_cc.max_key_cc(profile)">profile</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            KeyProfile


  
      dataclass
   (amads.pitch.key.profiles.KeyProfile)" href="#amads.pitch.key.profiles.KeyProfile">KeyProfile</a></span> <span class="o">=</span> <span class="n"><span title="amads.pitch.key.profiles.krumhansl_kessler">krumhansl_kessler</span></span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="attribute_names (amads.pitch.key.max_key_cc.max_key_cc(attribute_names))" href="#amads.pitch.key.max_key_cc.max_key_cc(attribute_names)">attribute_names</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;major&quot;</span><span class="p">,</span> <span class="s2">&quot;minor&quot;</span><span class="p">],</span>
    <span class="n"><a class="autorefs autorefs-internal" title="salience_flag (amads.pitch.key.max_key_cc.max_key_cc(salience_flag))" href="#amads.pitch.key.max_key_cc.max_key_cc(salience_flag)">salience_flag</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a></span>
</code></pre></div>

    <div class="doc doc-contents first">

        <p>Find the maximal correlation value after calling key_cc
with relevant parameters (see key_cc.py for more details)</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
<h3 id="amads.pitch.key.max_key_cc.max_key_cc(score)" class="doc doc-heading doc-heading-parameter">              <b><code>score</code></b>
<a href="#amads.pitch.key.max_key_cc.max_key_cc(score)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-internal" title="            Score (amads.core.basics.Score)" href="../../basics/#amads.core.basics.Score">Score</a></code>)
          
          <div class="doc-md-description">
            <p>The musical score to analyze.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h3 id="amads.pitch.key.max_key_cc.max_key_cc(profile)" class="doc doc-heading doc-heading-parameter">              <b><code>profile</code></b>
<a href="#amads.pitch.key.max_key_cc.max_key_cc(profile)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-internal" title="            KeyProfile


  
      dataclass
   (amads.pitch.key.profiles.KeyProfile)" href="#amads.pitch.key.profiles.KeyProfile">KeyProfile</a></code>, default:
                  <code><span title="amads.pitch.key.profiles.krumhansl_kessler">krumhansl_kessler</span></code>
)
          
          <div class="doc-md-description">
            <p>The key profile to use for analysis.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h3 id="amads.pitch.key.max_key_cc.max_key_cc(attribute_names)" class="doc doc-heading doc-heading-parameter">              <b><code>attribute_names</code></b>
<a href="#amads.pitch.key.max_key_cc.max_key_cc(attribute_names)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>] | None</code>, default:
                  <code>[&#39;major&#39;, &#39;minor&#39;]</code>
)
          
          <div class="doc-md-description">
            <p>List of attribute names that denote the particular PitchProfiles
within the KeyProfile to compute correlations for.
See key_cc for more details</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h3 id="amads.pitch.key.max_key_cc.max_key_cc(salience_flag)" class="doc doc-heading doc-heading-parameter">              <b><code>salience_flag</code></b>
<a href="#amads.pitch.key.max_key_cc.max_key_cc(salience_flag)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>, default:
                  <code>False</code>
)
          
          <div class="doc-md-description">
            <p>indicate whether we want to turn on salience weights in key_cc</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a></code>
          
          <div class="doc-md-description">
            <p>the maximum correlation value computed in key_cc</p>
          </div>
        </li>
    </ul>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>amads/pitch/key/max_key_cc.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">max_key_cc</span><span class="p">(</span>
    <span class="n">score</span><span class="p">:</span> <span class="n">Score</span><span class="p">,</span>
    <span class="n">profile</span><span class="p">:</span> <span class="n">prof</span><span class="o">.</span><span class="n">KeyProfile</span> <span class="o">=</span> <span class="n">prof</span><span class="o">.</span><span class="n">krumhansl_kessler</span><span class="p">,</span>
    <span class="n">attribute_names</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;major&quot;</span><span class="p">,</span> <span class="s2">&quot;minor&quot;</span><span class="p">],</span>
    <span class="n">salience_flag</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Find the maximal correlation value after calling key_cc</span>
<span class="sd">    with relevant parameters (see key_cc.py for more details)</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    score: Score</span>
<span class="sd">        The musical score to analyze.</span>
<span class="sd">    profile: Profile</span>
<span class="sd">        The key profile to use for analysis.</span>
<span class="sd">    attribute_names: Optional[List[str]]</span>
<span class="sd">        List of attribute names that denote the particular PitchProfiles</span>
<span class="sd">        within the KeyProfile to compute correlations for.</span>
<span class="sd">        See key_cc for more details</span>
<span class="sd">    salience_flag: bool</span>
<span class="sd">        indicate whether we want to turn on salience weights in key_cc</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    float</span>
<span class="sd">        the maximum correlation value computed in key_cc</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">corrcoef_pairs</span> <span class="o">=</span> <span class="n">key_cc</span><span class="p">(</span><span class="n">score</span><span class="p">,</span> <span class="n">profile</span><span class="p">,</span> <span class="n">attribute_names</span><span class="p">,</span> <span class="n">salience_flag</span><span class="p">)</span>
    <span class="n">nested_coefs_iter</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">coefs</span> <span class="k">for</span> <span class="p">(</span><span class="n">_</span><span class="p">,</span> <span class="n">coefs</span><span class="p">)</span> <span class="ow">in</span> <span class="n">corrcoef_pairs</span> <span class="k">if</span> <span class="n">coefs</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="nb">max</span><span class="p">(</span><span class="n">chain</span><span class="o">.</span><span class="n">from_iterable</span><span class="p">(</span><span class="n">nested_coefs_iter</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div><hr />


<div class="doc doc-object doc-module">



<h2 id="amads.pitch.key.keysom" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>            <span class="doc doc-object-name doc-module-name">keysom</span>


<a href="#amads.pitch.key.keysom" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents first">

        <p>Projection of pitch-class distribution on a self-organizing map.</p>
<p>Computes the projection of a pitch-class distribution on a trained
self-organizing map, and visualize it in a 2-D heatmap with a custom color
gradient.</p>
<p>Unlike the original miditoolbox implementation in matlab, the SOM here
is allowed to use any key profile as long as it contains major and
minor pitch profile attributes. See key/profiles.py for more details.</p>


<details class="warning" open>
  <summary>Warnings</summary>
  <p>(Remove this after testing and experimentation)</p>
</details>

<details class="references" open>
  <summary>References</summary>
  <p>https://citeseerx.ist.psu.edu/document?repid=rep1&amp;type=pdf&amp;doi=6e06906ca1ba0bf0ac8f2cb1a929f3be95eeadfa#page=66 for more details</p>
<p>Toiviainen &amp; Krumhansl, 2003</p>
</details>














<div class="doc doc-children">












  </div>

    </div>

</div><hr />


<div class="doc doc-object doc-function">


<h2 id="amads.pitch.key.keysom.keysom" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>            <span class="doc doc-object-name doc-function-name">keysom</span>


<a href="#amads.pitch.key.keysom.keysom" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">keysom</span><span class="p">(</span>
    <span class="n"><a class="autorefs autorefs-internal" title="note_collection (amads.pitch.key.keysom.keysom(note_collection))" href="#amads.pitch.key.keysom.keysom(note_collection)">note_collection</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            Score (amads.core.basics.Score)" href="../../basics/#amads.core.basics.Score">Score</a></span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="map (amads.pitch.key.keysom.keysom(map))" href="#amads.pitch.key.keysom.keysom(map)">map</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            KeyProfileSOM (amads.pitch.key.keysomdata.KeyProfileSOM)" href="#amads.pitch.key.keysomdata.KeyProfileSOM">KeyProfileSOM</a></span> <span class="o">|</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="has_legend (amads.pitch.key.keysom.keysom(has_legend))" href="#amads.pitch.key.keysom.keysom(has_legend)">has_legend</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="scaled_legend (amads.pitch.key.keysom.keysom(scaled_legend))" href="#amads.pitch.key.keysom.keysom(scaled_legend)">scaled_legend</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="font_size (amads.pitch.key.keysom.keysom(font_size))" href="#amads.pitch.key.keysom.keysom(font_size)">font_size</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a></span> <span class="o">|</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="color_map (amads.pitch.key.keysom.keysom(color_map))" href="#amads.pitch.key.keysom.keysom(color_map)">color_map</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span> <span class="o">|</span> <span class="n"><span title="matplotlib.colors.LinearSegmentedColormap">LinearSegmentedColormap</span></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="show (amads.pitch.key.keysom.keysom(show))" href="#amads.pitch.key.keysom.keysom(show)">show</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#tuple">tuple</a></span><span class="p">[</span><span class="n"><span title="numpy.ndarray">ndarray</span></span><span class="p">,</span> <span class="n"><span title="matplotlib.figure.Figure">Figure</span></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents first">

        <p>Projects the pitch-class distribution of a note-collection to a SOM.</p>
<p>The SOM (self-organized map) is trained on key profile data.
Returns the resulting projection matrix.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
<h3 id="amads.pitch.key.keysom.keysom(note_collection)" class="doc doc-heading doc-heading-parameter">              <b><code>note_collection</code></b>
<a href="#amads.pitch.key.keysom.keysom(note_collection)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-internal" title="            Score (amads.core.basics.Score)" href="../../basics/#amads.core.basics.Score">Score</a></code>)
          
          <div class="doc-md-description">
            <p>Collection of notes to calculate the pitch-class distribution of and
project onto the pre-trained SOM.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h3 id="amads.pitch.key.keysom.keysom(map)" class="doc doc-heading doc-heading-parameter">              <b><code>map</code></b>
<a href="#amads.pitch.key.keysom.keysom(map)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><span title="KeyProfileSOM">KeyProfileSOM</span></code>)
          
          <div class="doc-md-description">
            <p>A pretrained self-organizing map trained on major + minor pitch profiles.
Or, a path string to a .npz file with the map.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h3 id="amads.pitch.key.keysom.keysom(has_legend)" class="doc doc-heading doc-heading-parameter">              <b><code>has_legend</code></b>
<a href="#amads.pitch.key.keysom.keysom(has_legend)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>, default:
                  <code>True</code>
)
          
          <div class="doc-md-description">
            <p>Whether or not the plot should include a color legend</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h3 id="amads.pitch.key.keysom.keysom(scaled_legend)" class="doc doc-heading doc-heading-parameter">              <b><code>scaled_legend</code></b>
<a href="#amads.pitch.key.keysom.keysom(scaled_legend)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>, default:
                  <code>True</code>
)
          
          <div class="doc-md-description">
            <p>Whether or not the color legend scales with the projection's minimum
and maximum, or (by default) scales with the trained SOM's global
minimum and maximum. Use the default to get consistent color scales
across multiple graphs of differing data.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h3 id="amads.pitch.key.keysom.keysom(font_size)" class="doc doc-heading doc-heading-parameter">              <b><code>font_size</code></b>
<a href="#amads.pitch.key.keysom.keysom(font_size)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a> | <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a> | None</code>, default:
                  <code>None</code>
)
          
          <div class="doc-md-description">
            <p>Font size, either:
(1) Font size of the labels (in points) or a string option from
matplotlib
(2) None for the default font size provided by matplotlib
Shares the same effects as the option of the same name in the
project_and_visualize method of KeyProfileSOM.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h3 id="amads.pitch.key.keysom.keysom(color_map)" class="doc doc-heading doc-heading-parameter">              <b><code>color_map</code></b>
<a href="#amads.pitch.key.keysom.keysom(color_map)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a> | <span title="matplotlib.colors.LinearSegmentedColormap">LinearSegmentedColormap</span> | None</code>, default:
                  <code>None</code>
)
          
          <div class="doc-md-description">
            <p>Color map describing the color gradient of the resulting visualization.
Option has same functionality as the <code>color_map</code> argument of the
<code>project_and_visualize</code> method of <code>KeyProfileSOM</code>.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h3 id="amads.pitch.key.keysom.keysom(show)" class="doc doc-heading doc-heading-parameter">              <b><code>show</code></b>
<a href="#amads.pitch.key.keysom.keysom(show)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>, default:
                  <code>True</code>
)
          
          <div class="doc-md-description">
            <p>Whether or not we suspend execution and display the plot before returning
from this function</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><span title="numpy.array">array</span>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a>]</code>
          
          <div class="doc-md-description">
            <p>Returns a 2-D numpy array that contains the projection of the input
data onto the self-organizing map.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
              <code><span title="matplotlib.figure.Figure">Figure</span></code>
          
          <div class="doc-md-description">
            <p>Matplotlib figure that contains a plot of the projection. (The axes
are also accessible because they are contained within the figure.)</p>
          </div>
        </li>
    </ul>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>amads/pitch/key/keysom.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">keysom</span><span class="p">(</span>
    <span class="n">note_collection</span><span class="p">:</span> <span class="n">Score</span><span class="p">,</span>
    <span class="nb">map</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">ksom</span><span class="o">.</span><span class="n">KeyProfileSOM</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span>
    <span class="n">has_legend</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">scaled_legend</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">font_size</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">color_map</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">mcolors</span><span class="o">.</span><span class="n">LinearSegmentedColormap</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">show</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">Figure</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Projects the pitch-class distribution of a note-collection to a SOM.</span>

<span class="sd">    The SOM (self-organized map) is trained on key profile data.</span>
<span class="sd">    Returns the resulting projection matrix.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    note_collection : Score</span>
<span class="sd">        Collection of notes to calculate the pitch-class distribution of and</span>
<span class="sd">        project onto the pre-trained SOM.</span>
<span class="sd">    map : KeyProfileSOM</span>
<span class="sd">        A pretrained self-organizing map trained on major + minor pitch profiles.</span>
<span class="sd">        Or, a path string to a .npz file with the map.</span>
<span class="sd">    has_legend : bool</span>
<span class="sd">        Whether or not the plot should include a color legend</span>
<span class="sd">    scaled_legend: bool</span>
<span class="sd">        Whether or not the color legend scales with the projection&#39;s minimum</span>
<span class="sd">        and maximum, or (by default) scales with the trained SOM&#39;s global</span>
<span class="sd">        minimum and maximum. Use the default to get consistent color scales</span>
<span class="sd">        across multiple graphs of differing data.</span>
<span class="sd">    font_size: Optional[Union[float, str]] = None,</span>
<span class="sd">        Font size, either:</span>
<span class="sd">        (1) Font size of the labels (in points) or a string option from</span>
<span class="sd">        matplotlib</span>
<span class="sd">        (2) None for the default font size provided by matplotlib</span>
<span class="sd">        Shares the same effects as the option of the same name in the</span>
<span class="sd">        project_and_visualize method of KeyProfileSOM.</span>
<span class="sd">    color_map: Optional[Union[str, mcolors.LinearSegmentedColormap]]</span>
<span class="sd">        Color map describing the color gradient of the resulting visualization.</span>
<span class="sd">        Option has same functionality as the `color_map` argument of the</span>
<span class="sd">        `project_and_visualize` method of `KeyProfileSOM`.</span>
<span class="sd">    show : bool</span>
<span class="sd">        Whether or not we suspend execution and display the plot before returning</span>
<span class="sd">        from this function</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    np.array[float]</span>
<span class="sd">        Returns a 2-D numpy array that contains the projection of the input</span>
<span class="sd">        data onto the self-organizing map.</span>
<span class="sd">    Figure</span>
<span class="sd">        Matplotlib figure that contains a plot of the projection. (The axes</span>
<span class="sd">        are also accessible because they are contained within the figure.)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">target_map</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="nb">map</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">target_map</span> <span class="o">=</span> <span class="n">ksom</span><span class="o">.</span><span class="n">KeyProfileSOM</span><span class="o">.</span><span class="n">from_trained_SOM</span><span class="p">(</span><span class="nb">map</span><span class="p">)</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="nb">map</span><span class="p">,</span> <span class="n">ksom</span><span class="o">.</span><span class="n">KeyProfileSOM</span><span class="p">):</span>
        <span class="n">target_map</span> <span class="o">=</span> <span class="nb">map</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;invalid map argument!&quot;</span><span class="p">)</span>
    <span class="nb">input</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">pitch_class_distribution_1</span><span class="p">(</span><span class="n">note_collection</span><span class="p">)</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
    <span class="n">projection</span><span class="p">,</span> <span class="n">Figure</span> <span class="o">=</span> <span class="n">target_map</span><span class="o">.</span><span class="n">project_and_visualize</span><span class="p">(</span>
        <span class="nb">input</span><span class="p">,</span> <span class="n">has_legend</span><span class="p">,</span> <span class="n">scaled_legend</span><span class="p">,</span> <span class="n">font_size</span><span class="p">,</span> <span class="n">color_map</span><span class="p">,</span> <span class="n">show</span>
    <span class="p">)</span>
    <span class="c1"># a good idea would probably be to return a tuple containing projection and</span>
    <span class="c1"># Figure/axes</span>
    <span class="k">return</span> <span class="n">projection</span><span class="p">,</span> <span class="n">Figure</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div><hr />


<div class="doc doc-object doc-module">



<h2 id="amads.pitch.key.keysomdata" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>            <span class="doc doc-object-name doc-module-name">keysomdata</span>


<a href="#amads.pitch.key.keysomdata" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents first">

        <p>Key Profile Based Self-Organizing Maps</p>
<p>Self-organizing maps trained on pitch class usage profiles from literature.</p>
<p>A self-organizing map can be trained on key profile with 'major' and 'minor'
data fields. The caller can define the decay rate and neighborhood
function that the profile is trained on.
A projection of a pitch-class distribution (pc_projection) onto a
self-organizing map given the constituent input weights (input_weights) and
their corresponding pitch-class distribution weights (pcdist), is defined for
all valid row, column = i, j as
pc_projection[i, j, :] = sum(input_weights[i, j, k] * pcdist[k] for all k in range(12)).</p>
<p>When visualizing a projection of a pitch-class profile onto a trained
self-organizing map, there are 24 key labels scattered across the map.
The positions of these key labels (upper-case for major, lower-case for minor)
are determined by the position of the best matching unit of the corresponding
pitch profile in the trained map.</p>


<details class="reference" open>
  <summary>Reference</summary>
  <p>Toiviainen, P. &amp; Krumhansl, C. L. (2003). Measuring and modeling
real-time responses to music: the dynamics of tonality induction.
Perception, 32(6), 741-766.</p>
</details>














<div class="doc doc-children">












  </div>

    </div>

</div><hr />


<div class="doc doc-object doc-class">



<h2 id="amads.pitch.key.keysomdata.KeyProfileSOM" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">KeyProfileSOM</span>


<a href="#amads.pitch.key.keysomdata.KeyProfileSOM" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">KeyProfileSOM</span><span class="p">(</span>
    <span class="n"><span title="amads.pitch.key.keysomdata.KeyProfileSOM(output_layer_dimensions)">output_layer_dimensions</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#tuple">tuple</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></span><span class="p">]</span> <span class="o">=</span> <span class="n"><span title="amads.pitch.key.keysomdata.KeyProfileSOM._default_output_dimensions">_default_output_dimensions</span></span><span class="p">,</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents first">



        <p>The primary use-case for Key Profile SOM is to extract tonal features of a
pair of major and minor pitch profiles and project them onto a 2-D map.</p>
<p>We provide methods to allows users to do the following:</p>
<ol>
<li>
<p>For initialization, supply the structure of the key profile SOM.</p>
</li>
<li>
<p>For training, the following is customizeable:</p>
<p>2.1 Customize the key profile used for training data. Only
the 'major' and 'minor' PitchProfile attributes within the supplied key
profile are used.
If either attribute does not exist, a value error is raised before training.</p>
<p>2.2 Customize training behavior by supplying functions denoting both the
neighborhood propagation function and global decay function.</p>
<p>2.3 Record a log of information to track the training process. This
feature is not implemented completely.</p>
</li>
<li>
<p>Projection of a supplied pitch-class distribution onto a trained SOM.</p>
</li>
<li>
<p>Visualization facilities, primarily:</p>
<p>4.1 Visualization of projection from a single pitch-class distribution
onto the internal SOM.</p>
<p>4.2 Animation of projections from a sequence of pitch-class distributions
onto the internal SOM.</p>
</li>
</ol>
<p>The internal data unique to each KeyProfileSOM object is as follows:</p>
<ol>
<li>
<p>SOM structural specifications (output layer dimensions), stored as a
2-tuple of ints specifying the width and height of the SOM output layer.</p>
</li>
<li>
<p>The trained SOM according to the structural specifications,
stored as a 3-D numpy array with shape
(output_width, output_height, input_length).</p>
</li>
<li>
<p>A list of 2-D coordinates for the trained SOM, where each list element at
index i specifies the location of the ith label in the trained SOM.
The coordinate is the BMU of the ith pitch's corresponding pitch-class
profile in the trained SOM.
Note that capital pitches denote major key pitches, while lower-case pitches
denote minor key pitches.</p>
</li>
<li>
<p>Training log containing simple training information per update instance
of the SOM (for debugging purposes if logging is turned on during training).</p>
</li>
<li>
<p>A name (string identifier) for the SOM that can be optionally specified.</p>
</li>
</ol>


<p><span class="doc-section-title">Attributes:</span></p>
    <ul>
        <li class="doc-section-item field-body">
          <b><code><span title="amads.pitch.key.keysomdata.KeyProfileSOM._input_length">_input_length</span></code></b>
              (<code>int, class attribute</code>)
          
          <div class="doc-md-description">
            <p>the number of pitches in a pitch-class distribution, or the number
of tonal pitches in a western music system</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
          <b><code><span title="amads.pitch.key.keysomdata.KeyProfileSOM._default_output_dimensions">_default_output_dimensions</span></code></b>
              (<code>Tuple[int], class attribute</code>)
          
          <div class="doc-md-description">
            <p>output dimensions for the pretrained SOM in the original MATLAB version
of miditoolbox</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
          <b><code><span title="amads.pitch.key.keysomdata.KeyProfileSOM._labels">_labels</span></code></b>
              (<code>List[str], class attribute</code>)
          
          <div class="doc-md-description">
            <p>list of strings denoting the pitch labels</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Examples:</span></p>
    <p>Load a set of pretrained weights and visualize the pitch-class distribution
of a small score:</p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">amads.core.basics</span><span class="w"> </span><span class="kn">import</span> <span class="n">Score</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">score</span> <span class="o">=</span> <span class="n">Score</span><span class="o">.</span><span class="n">from_melody</span><span class="p">([</span><span class="mi">60</span><span class="p">,</span> <span class="mi">62</span><span class="p">,</span> <span class="mi">64</span><span class="p">,</span> <span class="mi">65</span><span class="p">,</span> <span class="mi">67</span><span class="p">,</span> <span class="mi">69</span><span class="p">,</span> <span class="mi">71</span><span class="p">,</span> <span class="mi">72</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">amads.pitch.pcdist1</span><span class="w"> </span><span class="kn">import</span> <span class="n">pitch_class_distribution_1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pcdist_of_score</span> <span class="o">=</span> <span class="n">pitch_class_distribution_1</span><span class="p">(</span><span class="n">score</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">example_SOM</span> <span class="o">=</span> <span class="n">pretrained_weights_script</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">_</span> <span class="o">=</span> <span class="n">example_SOM</span><span class="o">.</span><span class="n">project_and_visualize</span><span class="p">(</span><span class="nb">tuple</span><span class="p">(</span><span class="n">pcdist_of_score</span><span class="o">.</span><span class="n">data</span><span class="p">),</span>
<span class="gp">... </span>                                      <span class="n">show</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</code></pre></div>
    <p>Train a set of weights from a key profile with 'major' and 'minor'
attributes with supplied training parameters:</p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">training_profile</span> <span class="o">=</span> <span class="n">prof</span><span class="o">.</span><span class="n">krumhansl_kessler</span> <span class="c1"># from key/profiles.py</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test_SOM</span> <span class="o">=</span> <span class="n">KeyProfileSOM</span><span class="p">()</span> <span class="c1"># default output dimensions used</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">_</span> <span class="o">=</span> <span class="n">test_SOM</span><span class="o">.</span><span class="n">train_SOM</span><span class="p">(</span><span class="n">training_profile</span><span class="p">)</span> <span class="c1"># use default parameters</span>
</code></pre></div>












<p><span class="doc-section-title">Methods:</span></p>
    <ul>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="            save_trained_SOM


  
      classmethod
   (amads.pitch.key.keysomdata.KeyProfileSOM.save_trained_SOM)" href="#amads.pitch.key.keysomdata.KeyProfileSOM.save_trained_SOM">save_trained_SOM</a></code></b>
            
            <div class="doc-md-description">
              <p>Save a trained key profile SOM.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="            from_trained_SOM


  
      classmethod
   (amads.pitch.key.keysomdata.KeyProfileSOM.from_trained_SOM)" href="#amads.pitch.key.keysomdata.KeyProfileSOM.from_trained_SOM">from_trained_SOM</a></code></b>
            
            <div class="doc-md-description">
              <p>Create a new KeyProfileSOM object containing the trained KeyProfileSOM.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="            update_SOM (amads.pitch.key.keysomdata.KeyProfileSOM.update_SOM)" href="#amads.pitch.key.keysomdata.KeyProfileSOM.update_SOM">update_SOM</a></code></b>
            
            <div class="doc-md-description">
              <p>Update the SOM on the input data based off of the best matching unit.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="            find_best_matching_unit (amads.pitch.key.keysomdata.KeyProfileSOM.find_best_matching_unit)" href="#amads.pitch.key.keysomdata.KeyProfileSOM.find_best_matching_unit">find_best_matching_unit</a></code></b>
            
            <div class="doc-md-description">
              <p>Find best matching unit given a self-organizing map and input data.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="            train_SOM (amads.pitch.key.keysomdata.KeyProfileSOM.train_SOM)" href="#amads.pitch.key.keysomdata.KeyProfileSOM.train_SOM">train_SOM</a></code></b>
            
            <div class="doc-md-description">
              <p>Train a self-organizing map using the given training data and parameters.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="            project_input_onto_SOM (amads.pitch.key.keysomdata.KeyProfileSOM.project_input_onto_SOM)" href="#amads.pitch.key.keysomdata.KeyProfileSOM.project_input_onto_SOM">project_input_onto_SOM</a></code></b>
            
            <div class="doc-md-description">
              <p>Compute the resulting projection weights of the input on a trained SOM.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="            project_and_visualize (amads.pitch.key.keysomdata.KeyProfileSOM.project_and_visualize)" href="#amads.pitch.key.keysomdata.KeyProfileSOM.project_and_visualize">project_and_visualize</a></code></b>
            
            <div class="doc-md-description">
              <p>Project a pitch-class distribution and visualizes it.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="            project_and_animate (amads.pitch.key.keysomdata.KeyProfileSOM.project_and_animate)" href="#amads.pitch.key.keysomdata.KeyProfileSOM.project_and_animate">project_and_animate</a></code></b>
            
            <div class="doc-md-description">
              <p>Animate a collection of pitch-class distributions.</p>
            </div>
          </li>
    </ul>



                  <details class="mkdocstrings-source">
                    <summary>Source code in <code>amads/pitch/key/keysomdata.py</code></summary>
                    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">output_layer_dimensions</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">_default_output_dimensions</span>
<span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">SOM_output_dims</span> <span class="o">=</span> <span class="n">output_layer_dimensions</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">SOM</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="c1"># best matching units to each of the corresponding coordinates</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">label_coord_list</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">log_info</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
                  </details>



<div class="doc doc-children">








<h3 id="amads.pitch.key.keysomdata.KeyProfileSOM-functions">Functions<a href="#amads.pitch.key.keysomdata.KeyProfileSOM-functions" class="headerlink" title="Permanent link">&para;</a></h3>

<div class="doc doc-object doc-function">


<h4 id="amads.pitch.key.keysomdata.KeyProfileSOM.save_trained_SOM" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">save_trained_SOM</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#amads.pitch.key.keysomdata.KeyProfileSOM.save_trained_SOM" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">save_trained_SOM</span><span class="p">(</span>
    <span class="n"><a class="autorefs autorefs-internal" title="obj (amads.pitch.key.keysomdata.KeyProfileSOM.save_trained_SOM(obj))" href="#amads.pitch.key.keysomdata.KeyProfileSOM.save_trained_SOM(obj)">obj</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            KeyProfileSOM (amads.pitch.key.keysomdata.KeyProfileSOM)" href="#amads.pitch.key.keysomdata.KeyProfileSOM">KeyProfileSOM</a></span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="dir_path (amads.pitch.key.keysomdata.KeyProfileSOM.save_trained_SOM(dir_path))" href="#amads.pitch.key.keysomdata.KeyProfileSOM.save_trained_SOM(dir_path)">dir_path</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span> <span class="o">=</span> <span class="s2">&quot;./&quot;</span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="file_name (amads.pitch.key.keysomdata.KeyProfileSOM.save_trained_SOM(file_name))" href="#amads.pitch.key.keysomdata.KeyProfileSOM.save_trained_SOM(file_name)">file_name</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Save a trained key profile SOM.</p>
<p>Raises a value exception if the object
does not contain a proper trained SOM or the directory path is not valid.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
<h5 id="amads.pitch.key.keysomdata.KeyProfileSOM.save_trained_SOM(obj)" class="doc doc-heading doc-heading-parameter">              <b><code>obj</code></b>
<a href="#amads.pitch.key.keysomdata.KeyProfileSOM.save_trained_SOM(obj)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><a class="autorefs autorefs-internal" title="            KeyProfileSOM (amads.pitch.key.keysomdata.KeyProfileSOM)" href="#amads.pitch.key.keysomdata.KeyProfileSOM">KeyProfileSOM</a></code>)
          
          <div class="doc-md-description">
            <p>Key Profile SOM object containing a trained SOM</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h5 id="amads.pitch.key.keysomdata.KeyProfileSOM.save_trained_SOM(dir_path)" class="doc doc-heading doc-heading-parameter">              <b><code>dir_path</code></b>
<a href="#amads.pitch.key.keysomdata.KeyProfileSOM.save_trained_SOM(dir_path)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></code>, default:
                  <code>&#39;./&#39;</code>
)
          
          <div class="doc-md-description">
            <p>Path to directory to store the trained SOM (in npz format)</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h5 id="amads.pitch.key.keysomdata.KeyProfileSOM.save_trained_SOM(file_name)" class="doc doc-heading doc-heading-parameter">              <b><code>file_name</code></b>
<a href="#amads.pitch.key.keysomdata.KeyProfileSOM.save_trained_SOM(file_name)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a> | None</code>, default:
                  <code>None</code>
)
          
          <div class="doc-md-description">
            <p>Optional file name argument to save the trained SOM</p>
          </div>
        </li>
    </ul>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>amads/pitch/key/keysomdata.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">save_trained_SOM</span><span class="p">(</span>
    <span class="bp">cls</span><span class="p">,</span>
    <span class="n">obj</span><span class="p">:</span> <span class="s2">&quot;KeyProfileSOM&quot;</span><span class="p">,</span>
    <span class="n">dir_path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;./&quot;</span><span class="p">,</span>
    <span class="n">file_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Save a trained key profile SOM.</span>

<span class="sd">    Raises a value exception if the object</span>
<span class="sd">    does not contain a proper trained SOM or the directory path is not valid.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    obj: KeyProfileSOM</span>
<span class="sd">        Key Profile SOM object containing a trained SOM</span>
<span class="sd">    dir_path: str</span>
<span class="sd">        Path to directory to store the trained SOM (in npz format)</span>
<span class="sd">    file_name: Optional[str]</span>
<span class="sd">        Optional file name argument to save the trained SOM</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">file_name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">file_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">obj</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">_data.npz&quot;</span>

    <span class="n">file_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">dir_path</span><span class="p">,</span> <span class="n">file_name</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">SOM</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">obj</span><span class="o">.</span><span class="n">label_coord_list</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;input SOM is not trained!&quot;</span><span class="p">)</span>

    <span class="n">np</span><span class="o">.</span><span class="n">savez</span><span class="p">(</span>
        <span class="n">file_path</span><span class="p">,</span>
        <span class="n">SOM</span><span class="o">=</span><span class="n">obj</span><span class="o">.</span><span class="n">SOM</span><span class="p">,</span>
        <span class="n">name</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">name</span><span class="p">),</span>
        <span class="n">label_coords</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">label_coord_list</span><span class="p">),</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="amads.pitch.key.keysomdata.KeyProfileSOM.from_trained_SOM" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">from_trained_SOM</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#amads.pitch.key.keysomdata.KeyProfileSOM.from_trained_SOM" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">from_trained_SOM</span><span class="p">(</span>
    <span class="n"><a class="autorefs autorefs-internal" title="file_path (amads.pitch.key.keysomdata.KeyProfileSOM.from_trained_SOM(file_path))" href="#amads.pitch.key.keysomdata.KeyProfileSOM.from_trained_SOM(file_path)">file_path</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span> <span class="o">=</span> <span class="s2">&quot;./amads/pitch/key/KrumhanslKessler_SOM_data.npz&quot;</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-internal" title="            KeyProfileSOM (amads.pitch.key.keysomdata.KeyProfileSOM)" href="#amads.pitch.key.keysomdata.KeyProfileSOM">KeyProfileSOM</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Create a new KeyProfileSOM object containing the trained KeyProfileSOM.</p>
<p>Data is loaded from the specified file.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
<h5 id="amads.pitch.key.keysomdata.KeyProfileSOM.from_trained_SOM(file_path)" class="doc doc-heading doc-heading-parameter">              <b><code>file_path</code></b>
<a href="#amads.pitch.key.keysomdata.KeyProfileSOM.from_trained_SOM(file_path)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></code>, default:
                  <code>&#39;./amads/pitch/key/KrumhanslKessler_SOM_data.npz&#39;</code>
)
          
          <div class="doc-md-description">
            <p>Path to directory containing stored SOM (in npz format)</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><a class="autorefs autorefs-internal" title="            KeyProfileSOM (amads.pitch.key.keysomdata.KeyProfileSOM)" href="#amads.pitch.key.keysomdata.KeyProfileSOM">KeyProfileSOM</a></code>
          
          <div class="doc-md-description">
            <p>Key Profile SOM object containing the trained SOM from the file</p>
          </div>
        </li>
    </ul>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>amads/pitch/key/keysomdata.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">from_trained_SOM</span><span class="p">(</span>
    <span class="bp">cls</span><span class="p">,</span> <span class="n">file_path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;./amads/pitch/key/KrumhanslKessler_SOM_data.npz&quot;</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;KeyProfileSOM&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create a new KeyProfileSOM object containing the trained KeyProfileSOM.</span>

<span class="sd">    Data is loaded from the specified file.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    file_path: str</span>
<span class="sd">        Path to directory containing stored SOM (in npz format)</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    KeyProfileSOM</span>
<span class="sd">        Key Profile SOM object containing the trained SOM from the file</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">load_table</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
    <span class="n">SOM</span> <span class="o">=</span> <span class="n">load_table</span><span class="p">[</span><span class="s2">&quot;SOM&quot;</span><span class="p">]</span>
    <span class="p">(</span><span class="n">dim0</span><span class="p">,</span> <span class="n">dim1</span><span class="p">,</span> <span class="n">_</span><span class="p">)</span> <span class="o">=</span> <span class="n">SOM</span><span class="o">.</span><span class="n">shape</span>
    <span class="n">output_dims</span> <span class="o">=</span> <span class="p">(</span><span class="n">dim0</span><span class="p">,</span> <span class="n">dim1</span><span class="p">)</span>
    <span class="n">name</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">load_table</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">])</span>
    <span class="n">label_coord_list</span> <span class="o">=</span> <span class="p">[</span>
        <span class="nb">tuple</span><span class="p">(</span><span class="n">coord</span><span class="p">)</span> <span class="k">for</span> <span class="n">coord</span> <span class="ow">in</span> <span class="n">load_table</span><span class="p">[</span><span class="s2">&quot;label_coords&quot;</span><span class="p">]</span>
    <span class="p">]</span>

    <span class="n">obj</span> <span class="o">=</span> <span class="n">KeyProfileSOM</span><span class="p">(</span><span class="n">output_dims</span><span class="p">)</span>
    <span class="n">obj</span><span class="o">.</span><span class="n">SOM</span> <span class="o">=</span> <span class="n">SOM</span>
    <span class="n">obj</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
    <span class="n">obj</span><span class="o">.</span><span class="n">label_coord_list</span> <span class="o">=</span> <span class="n">label_coord_list</span>
    <span class="n">obj</span><span class="o">.</span><span class="n">vmin</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">SOM</span><span class="p">)</span>
    <span class="n">obj</span><span class="o">.</span><span class="n">vmax</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">SOM</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">obj</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="amads.pitch.key.keysomdata.KeyProfileSOM.update_SOM" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">update_SOM</span>


<a href="#amads.pitch.key.keysomdata.KeyProfileSOM.update_SOM" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">update_SOM</span><span class="p">(</span>
    <span class="n"><a class="autorefs autorefs-internal" title="best_match (amads.pitch.key.keysomdata.KeyProfileSOM.update_SOM(best_match))" href="#amads.pitch.key.keysomdata.KeyProfileSOM.update_SOM(best_match)">best_match</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#tuple">tuple</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></span><span class="p">],</span>
    <span class="n"><a class="autorefs autorefs-internal" title="input_data (amads.pitch.key.keysomdata.KeyProfileSOM.update_SOM(input_data))" href="#amads.pitch.key.keysomdata.KeyProfileSOM.update_SOM(input_data)">input_data</a></span><span class="p">:</span> <span class="n"><span title="numpy.array">array</span></span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="idx (amads.pitch.key.keysomdata.KeyProfileSOM.update_SOM(idx))" href="#amads.pitch.key.keysomdata.KeyProfileSOM.update_SOM(idx)">idx</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="neighborhood (amads.pitch.key.keysomdata.KeyProfileSOM.update_SOM(neighborhood))" href="#amads.pitch.key.keysomdata.KeyProfileSOM.update_SOM(neighborhood)">neighborhood</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" title="collections.abc.Callable" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable">Callable</a></span><span class="p">[</span>
        <span class="p">[</span><span class="n"><a class="autorefs autorefs-external" title="typing.Tuple" href="https://docs.python.org/3/library/typing.html#typing.Tuple">Tuple</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></span><span class="p">],</span> <span class="n"><a class="autorefs autorefs-external" title="typing.Tuple" href="https://docs.python.org/3/library/typing.html#typing.Tuple">Tuple</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></span><span class="p">],</span> <span class="n"><a class="autorefs autorefs-external" title="typing.Tuple" href="https://docs.python.org/3/library/typing.html#typing.Tuple">Tuple</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></span><span class="p">],</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></span><span class="p">],</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a></span>
    <span class="p">],</span>
    <span class="n"><a class="autorefs autorefs-internal" title="global_decay (amads.pitch.key.keysomdata.KeyProfileSOM.update_SOM(global_decay))" href="#amads.pitch.key.keysomdata.KeyProfileSOM.update_SOM(global_decay)">global_decay</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" title="collections.abc.Callable" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable">Callable</a></span><span class="p">[[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></span><span class="p">],</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a></span><span class="p">],</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-internal" title="            KeyProfileSOM (amads.pitch.key.keysomdata.KeyProfileSOM)" href="#amads.pitch.key.keysomdata.KeyProfileSOM">KeyProfileSOM</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Update the SOM on the input data based off of the best matching unit.</p>
<p>Uses the current global training iteration.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
<h5 id="amads.pitch.key.keysomdata.KeyProfileSOM.update_SOM(best_match)" class="doc doc-heading doc-heading-parameter">              <b><code>best_match</code></b>
<a href="#amads.pitch.key.keysomdata.KeyProfileSOM.update_SOM(best_match)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#tuple">tuple</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a>]</code>)
          
          <div class="doc-md-description">
            <p>Coordinate of the best-matching node in the output layer of the
self-organizing map and its corresponding connector weights
(to the input)</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h5 id="amads.pitch.key.keysomdata.KeyProfileSOM.update_SOM(input_data)" class="doc doc-heading doc-heading-parameter">              <b><code>input_data</code></b>
<a href="#amads.pitch.key.keysomdata.KeyProfileSOM.update_SOM(input_data)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><span title="numpy.array">array</span></code>)
          
          <div class="doc-md-description">
            <p>data vector that was selected to train on for the current
training iteration</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h5 id="amads.pitch.key.keysomdata.KeyProfileSOM.update_SOM(idx)" class="doc doc-heading doc-heading-parameter">              <b><code>idx</code></b>
<a href="#amads.pitch.key.keysomdata.KeyProfileSOM.update_SOM(idx)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>)
          
          <div class="doc-md-description">
            <p>Current training iteration in training session.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h5 id="amads.pitch.key.keysomdata.KeyProfileSOM.update_SOM(neighborhood)" class="doc doc-heading doc-heading-parameter">              <b><code>neighborhood</code></b>
<a href="#amads.pitch.key.keysomdata.KeyProfileSOM.update_SOM(neighborhood)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><a class="autorefs autorefs-external" title="collections.abc.Callable" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable">Callable</a>[[<a class="autorefs autorefs-external" title="typing.Tuple" href="https://docs.python.org/3/library/typing.html#typing.Tuple">Tuple</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a>], <a class="autorefs autorefs-external" title="typing.Tuple" href="https://docs.python.org/3/library/typing.html#typing.Tuple">Tuple</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a>], <a class="autorefs autorefs-external" title="typing.Tuple" href="https://docs.python.org/3/library/typing.html#typing.Tuple">Tuple</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a>], <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a>], <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a>]</code>)
          
          <div class="doc-md-description">
            <p>Neighborhood function, denoting the update rate component depending
on coordinate differences to the best matching unit and training
iteration.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h5 id="amads.pitch.key.keysomdata.KeyProfileSOM.update_SOM(global_decay)" class="doc doc-heading doc-heading-parameter">              <b><code>global_decay</code></b>
<a href="#amads.pitch.key.keysomdata.KeyProfileSOM.update_SOM(global_decay)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><a class="autorefs autorefs-external" title="collections.abc.Callable" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable">Callable</a>[[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a>], <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a>]</code>)
          
          <div class="doc-md-description">
            <p>Global decay function, denoting the update rate component dependent
solely on training iteration.</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><a class="autorefs autorefs-internal" title="            KeyProfileSOM (amads.pitch.key.keysomdata.KeyProfileSOM)" href="#amads.pitch.key.keysomdata.KeyProfileSOM">KeyProfileSOM</a></code>
          
          <div class="doc-md-description">
            <p>Current object</p>
          </div>
        </li>
    </ul>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>amads/pitch/key/keysomdata.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">update_SOM</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">best_match</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span>
    <span class="n">input_data</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">,</span>
    <span class="n">idx</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="n">neighborhood</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[</span>
        <span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span> <span class="nb">int</span><span class="p">],</span> <span class="nb">float</span>
    <span class="p">],</span>
    <span class="n">global_decay</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="nb">int</span><span class="p">],</span> <span class="nb">float</span><span class="p">],</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;KeyProfileSOM&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Update the SOM on the input data based off of the best matching unit.</span>

<span class="sd">    Uses the current global training iteration.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    best_match: Tuple[int]</span>
<span class="sd">        Coordinate of the best-matching node in the output layer of the</span>
<span class="sd">        self-organizing map and its corresponding connector weights</span>
<span class="sd">        (to the input)</span>
<span class="sd">    input_data: np.array</span>
<span class="sd">        data vector that was selected to train on for the current</span>
<span class="sd">        training iteration</span>
<span class="sd">    idx: int</span>
<span class="sd">        Current training iteration in training session.</span>
<span class="sd">    neighborhood: Callable[[Tuple[int], Tuple[int], Tuple[int], int], float]</span>
<span class="sd">        Neighborhood function, denoting the update rate component depending</span>
<span class="sd">        on coordinate differences to the best matching unit and training</span>
<span class="sd">        iteration.</span>
<span class="sd">    global_decay: Callable[[int], float]</span>
<span class="sd">        Global decay function, denoting the update rate component dependent</span>
<span class="sd">        solely on training iteration.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    KeyProfileSOM</span>
<span class="sd">        Current object</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">input_data</span><span class="o">.</span><span class="n">shape</span> <span class="o">!=</span> <span class="p">(</span><span class="n">KeyProfileSOM</span><span class="o">.</span><span class="n">_input_length</span><span class="p">,):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;input </span><span class="si">{</span><span class="n">input_data</span><span class="si">}</span><span class="s2"> is of invalid shape </span><span class="si">{</span><span class="n">input_data</span><span class="o">.</span><span class="n">shape</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>

    <span class="n">dim0</span><span class="p">,</span> <span class="n">dim1</span><span class="p">,</span> <span class="n">input_length</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">SOM</span><span class="o">.</span><span class="n">shape</span>
    <span class="k">if</span> <span class="n">input_length</span> <span class="o">!=</span> <span class="n">KeyProfileSOM</span><span class="o">.</span><span class="n">_input_length</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Corrupted SOM =</span><span class="se">\n</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">SOM</span><span class="si">}</span><span class="se">\n</span><span class="s2">of shape </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">SOM</span><span class="o">.</span><span class="n">shape</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">best_match</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">2</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid best matching unit coords </span><span class="si">{</span><span class="n">best_match</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># update all weights in the SOM based on competitive learning</span>
    <span class="c1"># (where the only things that truly matter in a training iteration</span>
    <span class="c1"># is the BMU and the input data)</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">dim0</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">dim1</span><span class="p">):</span>
            <span class="n">rate</span> <span class="o">=</span> <span class="n">global_decay</span><span class="p">(</span><span class="n">idx</span><span class="p">)</span> <span class="o">*</span> <span class="n">neighborhood</span><span class="p">(</span>
                <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">),</span> <span class="n">best_match</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">SOM</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="n">idx</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">SOM</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">rate</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">SOM</span><span class="p">[</span>
                <span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="p">:</span>
            <span class="p">]</span> <span class="o">+</span> <span class="n">rate</span> <span class="o">*</span> <span class="n">input_data</span>

    <span class="k">return</span> <span class="bp">self</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="amads.pitch.key.keysomdata.KeyProfileSOM.find_best_matching_unit" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">find_best_matching_unit</span>


<a href="#amads.pitch.key.keysomdata.KeyProfileSOM.find_best_matching_unit" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">find_best_matching_unit</span><span class="p">(</span><span class="n"><a class="autorefs autorefs-internal" title="input_data (amads.pitch.key.keysomdata.KeyProfileSOM.find_best_matching_unit(input_data))" href="#amads.pitch.key.keysomdata.KeyProfileSOM.find_best_matching_unit(input_data)">input_data</a></span><span class="p">:</span> <span class="n"><span title="numpy.array">array</span></span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#tuple">tuple</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Find best matching unit given a self-organizing map and input data.</p>
<p>Finds the coordinate of the output node whose weights has the smallest
Euclidean distance from the input data.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
<h5 id="amads.pitch.key.keysomdata.KeyProfileSOM.find_best_matching_unit(input_data)" class="doc doc-heading doc-heading-parameter">              <b><code>input_data</code></b>
<a href="#amads.pitch.key.keysomdata.KeyProfileSOM.find_best_matching_unit(input_data)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><span title="numpy.array">array</span></code>)
          
          <div class="doc-md-description">
            <p>1-D data vector of input length containing the input weights</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#tuple">tuple</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a>]</code>
          
          <div class="doc-md-description">
            <p>Coordinates of the node that has the connector weights with the
smallest Euclidean distance to the input data</p>
          </div>
        </li>
    </ul>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>amads/pitch/key/keysomdata.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">find_best_matching_unit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">input_data</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Find best matching unit given a self-organizing map and input data.</span>

<span class="sd">    Finds the coordinate of the output node whose weights has the smallest</span>
<span class="sd">    Euclidean distance from the input data.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    input_data: np.array</span>
<span class="sd">        1-D data vector of input length containing the input weights</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    Tuple[int]</span>
<span class="sd">        Coordinates of the node that has the connector weights with the</span>
<span class="sd">        smallest Euclidean distance to the input data</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># input data length needs to match</span>
    <span class="k">if</span> <span class="n">input_data</span><span class="o">.</span><span class="n">shape</span> <span class="o">!=</span> <span class="p">(</span><span class="n">KeyProfileSOM</span><span class="o">.</span><span class="n">_input_length</span><span class="p">,):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;input </span><span class="si">{</span><span class="n">input_data</span><span class="si">}</span><span class="s2"> is of invalid shape </span><span class="si">{</span><span class="n">input_data</span><span class="o">.</span><span class="n">shape</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>

    <span class="n">dim0</span><span class="p">,</span> <span class="n">dim1</span><span class="p">,</span> <span class="n">input_length</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">SOM</span><span class="o">.</span><span class="n">shape</span>
    <span class="k">if</span> <span class="n">input_length</span> <span class="o">!=</span> <span class="n">KeyProfileSOM</span><span class="o">.</span><span class="n">_input_length</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Corrupted SOM =</span><span class="se">\n</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">SOM</span><span class="si">}</span><span class="se">\n</span><span class="s2">of shape </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">SOM</span><span class="o">.</span><span class="n">shape</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>

    <span class="n">best_i</span><span class="p">,</span> <span class="n">best_j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span>
    <span class="n">best_distance</span> <span class="o">=</span> <span class="n">euclidean_distance</span><span class="p">(</span>
        <span class="n">input_data</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">SOM</span><span class="p">[</span><span class="n">best_i</span><span class="p">,</span> <span class="n">best_j</span><span class="p">,</span> <span class="p">:],</span> <span class="kc">False</span>
    <span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">dim0</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">dim1</span><span class="p">):</span>
            <span class="n">distance</span> <span class="o">=</span> <span class="n">euclidean_distance</span><span class="p">(</span>
                <span class="n">input_data</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">SOM</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="p">:],</span> <span class="kc">False</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="n">best_distance</span> <span class="o">&gt;</span> <span class="n">distance</span><span class="p">:</span>
                <span class="n">best_i</span><span class="p">,</span> <span class="n">best_j</span> <span class="o">=</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span>
                <span class="n">best_distance</span> <span class="o">=</span> <span class="n">distance</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">best_i</span><span class="p">,</span> <span class="n">best_j</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="amads.pitch.key.keysomdata.KeyProfileSOM.train_SOM" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">train_SOM</span>


<a href="#amads.pitch.key.keysomdata.KeyProfileSOM.train_SOM" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">train_SOM</span><span class="p">(</span>
    <span class="n"><a class="autorefs autorefs-internal" title="profile (amads.pitch.key.keysomdata.KeyProfileSOM.train_SOM(profile))" href="#amads.pitch.key.keysomdata.KeyProfileSOM.train_SOM(profile)">profile</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            KeyProfile


  
      dataclass
   (amads.pitch.key.profiles.KeyProfile)" href="#amads.pitch.key.profiles.KeyProfile">KeyProfile</a></span> <span class="o">=</span> <span class="n"><span title="amads.pitch.key.profiles.krumhansl_kessler">krumhansl_kessler</span></span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="max_iterations (amads.pitch.key.keysomdata.KeyProfileSOM.train_SOM(max_iterations))" href="#amads.pitch.key.keysomdata.KeyProfileSOM.train_SOM(max_iterations)">max_iterations</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></span> <span class="o">=</span> <span class="mi">24</span> <span class="o">*</span> <span class="mi">64</span><span class="p">,</span>
    <span class="n"><span title="amads.pitch.key.keysomdata.KeyProfileSOM.train_SOM(neighborhood)">neighborhood</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" title="collections.abc.Callable" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable">Callable</a></span><span class="p">[</span>
        <span class="p">[</span><span class="n"><a class="autorefs autorefs-external" title="typing.Tuple" href="https://docs.python.org/3/library/typing.html#typing.Tuple">Tuple</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></span><span class="p">],</span> <span class="n"><a class="autorefs autorefs-external" title="typing.Tuple" href="https://docs.python.org/3/library/typing.html#typing.Tuple">Tuple</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></span><span class="p">],</span> <span class="n"><a class="autorefs autorefs-external" title="typing.Tuple" href="https://docs.python.org/3/library/typing.html#typing.Tuple">Tuple</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></span><span class="p">],</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></span><span class="p">],</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a></span>
    <span class="p">]</span> <span class="o">=</span> <span class="n"><a class="autorefs autorefs-internal" title="            keysom_toroid_clamped (amads.pitch.key.keysomdata.keysom_toroid_clamped)" href="#amads.pitch.key.keysomdata.keysom_toroid_clamped">keysom_toroid_clamped</a></span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="global_decay (amads.pitch.key.keysomdata.KeyProfileSOM.train_SOM(global_decay))" href="#amads.pitch.key.keysomdata.KeyProfileSOM.train_SOM(global_decay)">global_decay</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" title="collections.abc.Callable" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable">Callable</a></span><span class="p">[</span>
        <span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></span><span class="p">],</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a></span>
    <span class="p">]</span> <span class="o">=</span> <span class="n"><a class="autorefs autorefs-internal" title="            keysom_stepped_log_inverse_decay (amads.pitch.key.keysomdata.keysom_stepped_log_inverse_decay)" href="#amads.pitch.key.keysomdata.keysom_stepped_log_inverse_decay">keysom_stepped_log_inverse_decay</a></span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="weights_initialization (amads.pitch.key.keysomdata.KeyProfileSOM.train_SOM(weights_initialization))" href="#amads.pitch.key.keysomdata.KeyProfileSOM.train_SOM(weights_initialization)">weights_initialization</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" title="collections.abc.Callable" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable">Callable</a></span><span class="p">[</span>
        <span class="p">[</span><span class="n"><a class="autorefs autorefs-external" title="typing.Tuple" href="https://docs.python.org/3/library/typing.html#typing.Tuple">Tuple</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></span><span class="p">]],</span> <span class="n"><span title="numpy.array">array</span></span>
    <span class="p">]</span> <span class="o">=</span> <span class="n"><a class="autorefs autorefs-internal" title="            random_SOM_init (amads.pitch.key.keysomdata.random_SOM_init)" href="#amads.pitch.key.keysomdata.random_SOM_init">random_SOM_init</a></span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="log_training (amads.pitch.key.keysomdata.KeyProfileSOM.train_SOM(log_training))" href="#amads.pitch.key.keysomdata.KeyProfileSOM.train_SOM(log_training)">log_training</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-internal" title="            KeyProfileSOM (amads.pitch.key.keysomdata.KeyProfileSOM)" href="#amads.pitch.key.keysomdata.KeyProfileSOM">KeyProfileSOM</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Train a self-organizing map using the given training data and parameters.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
<h5 id="amads.pitch.key.keysomdata.KeyProfileSOM.train_SOM(profile)" class="doc doc-heading doc-heading-parameter">              <b><code>profile</code></b>
<a href="#amads.pitch.key.keysomdata.KeyProfileSOM.train_SOM(profile)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><a class="autorefs autorefs-internal" title="            KeyProfile


  
      dataclass
   (amads.pitch.key.profiles.KeyProfile)" href="#amads.pitch.key.profiles.KeyProfile">KeyProfile</a></code>, default:
                  <code><span title="amads.pitch.key.profiles.krumhansl_kessler">krumhansl_kessler</span></code>
)
          
          <div class="doc-md-description">
            <p>The key profile to use for analysis.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h5 id="amads.pitch.key.keysomdata.KeyProfileSOM.train_SOM(max_iterations)" class="doc doc-heading doc-heading-parameter">              <b><code>max_iterations</code></b>
<a href="#amads.pitch.key.keysomdata.KeyProfileSOM.train_SOM(max_iterations)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>, default:
                  <code>24 * 64</code>
)
          
          <div class="doc-md-description">
            <p>The number of iterations to train the self-organizing map for</p>
<p>Neighborhood function, denoting the update rate component dependent
on coordinate differences to the best matching unit and training
iteration.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h5 id="amads.pitch.key.keysomdata.KeyProfileSOM.train_SOM(global_decay)" class="doc doc-heading doc-heading-parameter">              <b><code>global_decay</code></b>
<a href="#amads.pitch.key.keysomdata.KeyProfileSOM.train_SOM(global_decay)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><a class="autorefs autorefs-external" title="collections.abc.Callable" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable">Callable</a>[[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a>], <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a>]</code>, default:
                  <code><a class="autorefs autorefs-internal" title="            keysom_stepped_log_inverse_decay (amads.pitch.key.keysomdata.keysom_stepped_log_inverse_decay)" href="#amads.pitch.key.keysomdata.keysom_stepped_log_inverse_decay">keysom_stepped_log_inverse_decay</a></code>
)
          
          <div class="doc-md-description">
            <p>Global decay function, denoting the update rate component dependent
solely on training iteration.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h5 id="amads.pitch.key.keysomdata.KeyProfileSOM.train_SOM(weights_initialization)" class="doc doc-heading doc-heading-parameter">              <b><code>weights_initialization</code></b>
<a href="#amads.pitch.key.keysomdata.KeyProfileSOM.train_SOM(weights_initialization)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><a class="autorefs autorefs-external" title="collections.abc.Callable" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Callable">Callable</a>[[<a class="autorefs autorefs-external" title="typing.Tuple" href="https://docs.python.org/3/library/typing.html#typing.Tuple">Tuple</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a>, <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a>, <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a>]], <span title="numpy.array">array</span>]</code>, default:
                  <code><a class="autorefs autorefs-internal" title="            random_SOM_init (amads.pitch.key.keysomdata.random_SOM_init)" href="#amads.pitch.key.keysomdata.random_SOM_init">random_SOM_init</a></code>
)
          
          <div class="doc-md-description">
            <p>SOM weights initialization function, returning a numpy array of the
initial SOM weights dependent on its input shape.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h5 id="amads.pitch.key.keysomdata.KeyProfileSOM.train_SOM(log_training)" class="doc doc-heading doc-heading-parameter">              <b><code>log_training</code></b>
<a href="#amads.pitch.key.keysomdata.KeyProfileSOM.train_SOM(log_training)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>, default:
                  <code>False</code>
)
          
          <div class="doc-md-description">
            <p>Indicator flag for whether or not to keep a semi-detailed log of the
training process</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><a class="autorefs autorefs-internal" title="            KeyProfileSOM (amads.pitch.key.keysomdata.KeyProfileSOM)" href="#amads.pitch.key.keysomdata.KeyProfileSOM">KeyProfileSOM</a></code>
          
          <div class="doc-md-description">
            <p>Current object</p>
          </div>
        </li>
    </ul>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>amads/pitch/key/keysomdata.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span>
<span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span>
<span class="normal">652</span>
<span class="normal">653</span>
<span class="normal">654</span>
<span class="normal">655</span>
<span class="normal">656</span>
<span class="normal">657</span>
<span class="normal">658</span>
<span class="normal">659</span>
<span class="normal">660</span>
<span class="normal">661</span>
<span class="normal">662</span>
<span class="normal">663</span>
<span class="normal">664</span>
<span class="normal">665</span>
<span class="normal">666</span>
<span class="normal">667</span>
<span class="normal">668</span>
<span class="normal">669</span>
<span class="normal">670</span>
<span class="normal">671</span>
<span class="normal">672</span>
<span class="normal">673</span>
<span class="normal">674</span>
<span class="normal">675</span>
<span class="normal">676</span>
<span class="normal">677</span>
<span class="normal">678</span>
<span class="normal">679</span>
<span class="normal">680</span>
<span class="normal">681</span>
<span class="normal">682</span>
<span class="normal">683</span>
<span class="normal">684</span>
<span class="normal">685</span>
<span class="normal">686</span>
<span class="normal">687</span>
<span class="normal">688</span>
<span class="normal">689</span>
<span class="normal">690</span>
<span class="normal">691</span>
<span class="normal">692</span>
<span class="normal">693</span>
<span class="normal">694</span>
<span class="normal">695</span>
<span class="normal">696</span>
<span class="normal">697</span>
<span class="normal">698</span>
<span class="normal">699</span>
<span class="normal">700</span>
<span class="normal">701</span>
<span class="normal">702</span>
<span class="normal">703</span>
<span class="normal">704</span>
<span class="normal">705</span>
<span class="normal">706</span>
<span class="normal">707</span>
<span class="normal">708</span>
<span class="normal">709</span>
<span class="normal">710</span>
<span class="normal">711</span>
<span class="normal">712</span>
<span class="normal">713</span>
<span class="normal">714</span>
<span class="normal">715</span>
<span class="normal">716</span>
<span class="normal">717</span>
<span class="normal">718</span>
<span class="normal">719</span>
<span class="normal">720</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">train_SOM</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">profile</span><span class="p">:</span> <span class="n">prof</span><span class="o">.</span><span class="n">KeyProfile</span> <span class="o">=</span> <span class="n">prof</span><span class="o">.</span><span class="n">krumhansl_kessler</span><span class="p">,</span>
    <span class="n">max_iterations</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">24</span> <span class="o">*</span> <span class="mi">64</span><span class="p">,</span>
    <span class="n">neighborhood</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[</span>
        <span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span> <span class="nb">int</span><span class="p">],</span> <span class="nb">float</span>
    <span class="p">]</span> <span class="o">=</span> <span class="n">keysom_toroid_clamped</span><span class="p">,</span>
    <span class="n">global_decay</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="nb">int</span><span class="p">],</span> <span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="n">keysom_stepped_log_inverse_decay</span><span class="p">,</span>
    <span class="n">weights_initialization</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[</span>
        <span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]],</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span>
    <span class="p">]</span> <span class="o">=</span> <span class="n">random_SOM_init</span><span class="p">,</span>
    <span class="n">log_training</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;KeyProfileSOM&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Train a self-organizing map using the given training data and parameters.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    profile: prof.KeyProfile</span>
<span class="sd">        The key profile to use for analysis.</span>
<span class="sd">    max_iterations: int</span>
<span class="sd">        The number of iterations to train the self-organizing map for</span>

<span class="sd">        Neighborhood function, denoting the update rate component dependent</span>
<span class="sd">        on coordinate differences to the best matching unit and training</span>
<span class="sd">        iteration.</span>
<span class="sd">    global_decay: Callable[[int], float]</span>
<span class="sd">        Global decay function, denoting the update rate component dependent</span>
<span class="sd">        solely on training iteration.</span>
<span class="sd">    weights_initialization: Callable[[Tuple[int, int, int]], np.array]</span>
<span class="sd">        SOM weights initialization function, returning a numpy array of the</span>
<span class="sd">        initial SOM weights dependent on its input shape.</span>
<span class="sd">    log_training: bool</span>
<span class="sd">        Indicator flag for whether or not to keep a semi-detailed log of the</span>
<span class="sd">        training process</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    KeyProfileSOM</span>
<span class="sd">        Current object</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">attribute_names</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;major&quot;</span><span class="p">,</span> <span class="s2">&quot;minor&quot;</span><span class="p">]</span>

    <span class="n">data_multiplier</span> <span class="o">=</span> <span class="mi">6</span>

    <span class="c1"># multiplied by 6 which is the expected value of randomly initializing</span>
    <span class="c1"># the values of each neuron&#39;s map weights to a random value between</span>
    <span class="c1"># [0, 1]</span>
    <span class="c1"># think of this as &quot;normalizing&quot; the input data to the same scale as</span>
    <span class="c1"># the original map weights</span>

    <span class="c1"># this will not affect the visualization of projections of a pitch-class</span>
    <span class="c1"># distribution in any way, since we can simply multiply the SOM</span>
    <span class="c1"># globally by the requisite multiplier after it is trained</span>
    <span class="c1"># in order to obtain normalized neuron weights.</span>
    <span class="n">list_of_canonicals</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">profile</span><span class="p">[</span><span class="n">attribute</span><span class="p">]</span><span class="o">.</span><span class="n">normalize</span><span class="p">()</span><span class="o">.</span><span class="n">as_canonical_matrix</span><span class="p">()</span>
        <span class="o">*</span> <span class="n">data_multiplier</span>
        <span class="k">for</span> <span class="n">attribute</span> <span class="ow">in</span> <span class="n">attribute_names</span>
    <span class="p">]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">profile</span><span class="o">.</span><span class="n">name</span> <span class="o">+</span> <span class="s2">&quot;_SOM&quot;</span>

    <span class="c1"># stack into matrix representation to satisfy _data_selector argument</span>
    <span class="c1"># specification</span>
    <span class="c1"># Additionally, training data here is ordered (per row) in chromatic</span>
    <span class="c1"># scale order, first in major pitch profile weights then minor pitch</span>
    <span class="c1"># profile weights.</span>
    <span class="n">training_data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">(</span><span class="n">list_of_canonicals</span><span class="p">)</span>

    <span class="c1"># 12 is the input length</span>
    <span class="c1"># 36 is data width/feature width/something else?</span>
    <span class="c1"># 24 is the 12 major and 12 minor keys for the profile data</span>
    <span class="c1">#</span>
    <span class="c1"># SOM indices have been rearranged from matlab version for convenience</span>
    <span class="c1"># in this implementation</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">SOM</span> <span class="o">=</span> <span class="n">weights_initialization</span><span class="p">(</span>
        <span class="p">(</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">SOM_output_dims</span><span class="p">,</span> <span class="n">KeyProfileSOM</span><span class="o">.</span><span class="n">_input_length</span><span class="p">)</span>
    <span class="p">)</span>

    <span class="k">for</span> <span class="n">training_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">max_iterations</span><span class="p">):</span>
        <span class="n">data_idx</span><span class="p">,</span> <span class="n">data_vector</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data_selector</span><span class="p">(</span>
            <span class="n">training_data</span><span class="p">,</span> <span class="n">training_idx</span>
        <span class="p">)</span>
        <span class="n">best_match</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_best_matching_unit</span><span class="p">(</span><span class="n">data_vector</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update_SOM</span><span class="p">(</span>
            <span class="n">best_match</span><span class="o">=</span><span class="n">best_match</span><span class="p">,</span>
            <span class="n">input_data</span><span class="o">=</span><span class="n">data_vector</span><span class="p">,</span>
            <span class="n">idx</span><span class="o">=</span><span class="n">training_idx</span><span class="p">,</span>
            <span class="n">neighborhood</span><span class="o">=</span><span class="n">neighborhood</span><span class="p">,</span>
            <span class="n">global_decay</span><span class="o">=</span><span class="n">global_decay</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">log_training</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_log_training_iteration</span><span class="p">(</span><span class="n">training_idx</span><span class="p">,</span> <span class="n">data_idx</span><span class="p">,</span> <span class="n">best_match</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">label_coord_list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="c1"># need to find BMU to each of the key profile input vectors in the trained SOM</span>
    <span class="c1"># since training_data is already ordered properly, we just need to find BMU</span>
    <span class="c1"># over all the inputs</span>
    <span class="k">for</span> <span class="n">label</span><span class="p">,</span> <span class="nb">input</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">KeyProfileSOM</span><span class="o">.</span><span class="n">_labels</span><span class="p">,</span> <span class="n">training_data</span><span class="p">):</span>
        <span class="n">best_match</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_best_matching_unit</span><span class="p">(</span><span class="nb">input</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label_coord_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">best_match</span><span class="p">)</span>
        <span class="c1"># print(f&quot;label: {label}, best_match: {best_match}&quot;)</span>

    <span class="c1"># setting colorbar scale here</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">vmin</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">SOM</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">vmax</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">SOM</span><span class="p">)</span>

    <span class="k">return</span> <span class="bp">self</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="amads.pitch.key.keysomdata.KeyProfileSOM.project_input_onto_SOM" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">project_input_onto_SOM</span>


<a href="#amads.pitch.key.keysomdata.KeyProfileSOM.project_input_onto_SOM" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">project_input_onto_SOM</span><span class="p">(</span><span class="n"><a class="autorefs autorefs-internal" title="input_data (amads.pitch.key.keysomdata.KeyProfileSOM.project_input_onto_SOM(input_data))" href="#amads.pitch.key.keysomdata.KeyProfileSOM.project_input_onto_SOM(input_data)">input_data</a></span><span class="p">:</span> <span class="n"><span title="numpy.array">array</span></span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="numpy.array">array</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Compute the resulting projection weights of the input on a trained SOM.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
<h5 id="amads.pitch.key.keysomdata.KeyProfileSOM.project_input_onto_SOM(input_data)" class="doc doc-heading doc-heading-parameter">              <b><code>input_data</code></b>
<a href="#amads.pitch.key.keysomdata.KeyProfileSOM.project_input_onto_SOM(input_data)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><span title="numpy.array">array</span></code>)
          
          <div class="doc-md-description">
            <p>1-D data vector of input length containing the input weights</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><span title="numpy.array">array</span>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a>]</code>
          
          <div class="doc-md-description">
            <p>Returns a 2-D numpy array that contains the projection of the input
data onto the self-organizing map.</p>
          </div>
        </li>
    </ul>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>amads/pitch/key/keysomdata.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">725</span>
<span class="normal">726</span>
<span class="normal">727</span>
<span class="normal">728</span>
<span class="normal">729</span>
<span class="normal">730</span>
<span class="normal">731</span>
<span class="normal">732</span>
<span class="normal">733</span>
<span class="normal">734</span>
<span class="normal">735</span>
<span class="normal">736</span>
<span class="normal">737</span>
<span class="normal">738</span>
<span class="normal">739</span>
<span class="normal">740</span>
<span class="normal">741</span>
<span class="normal">742</span>
<span class="normal">743</span>
<span class="normal">744</span>
<span class="normal">745</span>
<span class="normal">746</span>
<span class="normal">747</span>
<span class="normal">748</span>
<span class="normal">749</span>
<span class="normal">750</span>
<span class="normal">751</span>
<span class="normal">752</span>
<span class="normal">753</span>
<span class="normal">754</span>
<span class="normal">755</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">project_input_onto_SOM</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">input_data</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Compute the resulting projection weights of the input on a trained SOM.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    input_data: np.array</span>
<span class="sd">        1-D data vector of input length containing the input weights</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    np.array[float]</span>
<span class="sd">        Returns a 2-D numpy array that contains the projection of the input</span>
<span class="sd">        data onto the self-organizing map.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># input data length needs to match</span>
    <span class="k">if</span> <span class="n">input_data</span><span class="o">.</span><span class="n">shape</span> <span class="o">!=</span> <span class="p">(</span><span class="n">KeyProfileSOM</span><span class="o">.</span><span class="n">_input_length</span><span class="p">,):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;input </span><span class="si">{</span><span class="n">input_data</span><span class="si">}</span><span class="s2"> is of invalid shape </span><span class="si">{</span><span class="n">input_data</span><span class="o">.</span><span class="n">shape</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>

    <span class="n">dim0</span><span class="p">,</span> <span class="n">dim1</span><span class="p">,</span> <span class="n">input_length</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">SOM</span><span class="o">.</span><span class="n">shape</span>
    <span class="k">if</span> <span class="n">input_length</span> <span class="o">!=</span> <span class="n">KeyProfileSOM</span><span class="o">.</span><span class="n">_input_length</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Corrupted SOM =</span><span class="se">\n</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">SOM</span><span class="si">}</span><span class="se">\n</span><span class="s2">of shape </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">SOM</span><span class="o">.</span><span class="n">shape</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>
    <span class="c1"># projection of input data onto current self-organizing map</span>
    <span class="c1"># matrix multiplication (tensor extension)</span>
    <span class="n">application</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">SOM</span> <span class="o">@</span> <span class="n">input_data</span>
    <span class="k">assert</span> <span class="n">application</span><span class="o">.</span><span class="n">shape</span> <span class="o">==</span> <span class="p">(</span><span class="n">dim0</span><span class="p">,</span> <span class="n">dim1</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">application</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="amads.pitch.key.keysomdata.KeyProfileSOM.project_and_visualize" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">project_and_visualize</span>


<a href="#amads.pitch.key.keysomdata.KeyProfileSOM.project_and_visualize" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">project_and_visualize</span><span class="p">(</span>
    <span class="n"><a class="autorefs autorefs-internal" title="input (amads.pitch.key.keysomdata.KeyProfileSOM.project_and_visualize(input))" href="#amads.pitch.key.keysomdata.KeyProfileSOM.project_and_visualize(input)">input</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#tuple">tuple</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a></span><span class="p">],</span>
    <span class="n"><a class="autorefs autorefs-internal" title="has_legend (amads.pitch.key.keysomdata.KeyProfileSOM.project_and_visualize(has_legend))" href="#amads.pitch.key.keysomdata.KeyProfileSOM.project_and_visualize(has_legend)">has_legend</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="scaled_legend (amads.pitch.key.keysomdata.KeyProfileSOM.project_and_visualize(scaled_legend))" href="#amads.pitch.key.keysomdata.KeyProfileSOM.project_and_visualize(scaled_legend)">scaled_legend</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="font_size (amads.pitch.key.keysomdata.KeyProfileSOM.project_and_visualize(font_size))" href="#amads.pitch.key.keysomdata.KeyProfileSOM.project_and_visualize(font_size)">font_size</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a></span> <span class="o">|</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="color_map (amads.pitch.key.keysomdata.KeyProfileSOM.project_and_visualize(color_map))" href="#amads.pitch.key.keysomdata.KeyProfileSOM.project_and_visualize(color_map)">color_map</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span> <span class="o">|</span> <span class="n"><span title="matplotlib.colors.LinearSegmentedColormap">LinearSegmentedColormap</span></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="show (amads.pitch.key.keysomdata.KeyProfileSOM.project_and_visualize(show))" href="#amads.pitch.key.keysomdata.KeyProfileSOM.project_and_visualize(show)">show</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#tuple">tuple</a></span><span class="p">[</span><span class="n"><span title="numpy.array">array</span></span><span class="p">,</span> <span class="n"><span title="matplotlib.figure.Figure">Figure</span></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Project a pitch-class distribution and visualizes it.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
<h5 id="amads.pitch.key.keysomdata.KeyProfileSOM.project_and_visualize(input)" class="doc doc-heading doc-heading-parameter">              <b><code>input</code></b>
<a href="#amads.pitch.key.keysomdata.KeyProfileSOM.project_and_visualize(input)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#tuple">tuple</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a>]</code>)
          
          <div class="doc-md-description">
            <p>a singular pitch-class distribution, in which case the visualization
is simply a heatmap of its projection onto the trained SOM.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h5 id="amads.pitch.key.keysomdata.KeyProfileSOM.project_and_visualize(has_legend)" class="doc doc-heading doc-heading-parameter">              <b><code>has_legend</code></b>
<a href="#amads.pitch.key.keysomdata.KeyProfileSOM.project_and_visualize(has_legend)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>, default:
                  <code>True</code>
)
          
          <div class="doc-md-description">
            <p>Whether or not the plot should include a color legend</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h5 id="amads.pitch.key.keysomdata.KeyProfileSOM.project_and_visualize(scaled_legend)" class="doc doc-heading doc-heading-parameter">              <b><code>scaled_legend</code></b>
<a href="#amads.pitch.key.keysomdata.KeyProfileSOM.project_and_visualize(scaled_legend)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>, default:
                  <code>False</code>
)
          
          <div class="doc-md-description">
            <p>Whether or not the color legend scales with the projection's minimum
and maximum, or (by default) scales with the trained SOM's global
minimum and maximum.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h5 id="amads.pitch.key.keysomdata.KeyProfileSOM.project_and_visualize(font_size)" class="doc doc-heading doc-heading-parameter">              <b><code>font_size</code></b>
<a href="#amads.pitch.key.keysomdata.KeyProfileSOM.project_and_visualize(font_size)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a> | <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a> | None</code>, default:
                  <code>None</code>
)
          
          <div class="doc-md-description">
            <p>Font size, either:
(1) Font size of the labels (in points) or a string option from
matplotlib
(2) None for the default font size provided by matplotlib</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h5 id="amads.pitch.key.keysomdata.KeyProfileSOM.project_and_visualize(color_map)" class="doc doc-heading doc-heading-parameter">              <b><code>color_map</code></b>
<a href="#amads.pitch.key.keysomdata.KeyProfileSOM.project_and_visualize(color_map)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a> | <span title="matplotlib.colors.LinearSegmentedColormap">LinearSegmentedColormap</span> | None</code>, default:
                  <code>None</code>
)
          
          <div class="doc-md-description">
            <p>Color map, either:
 (1) a color map provided by the matplotlib package
 (2) a custom linear segmented colormap
 (3) None for the default color scheme provided by matplotlib</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h5 id="amads.pitch.key.keysomdata.KeyProfileSOM.project_and_visualize(show)" class="doc doc-heading doc-heading-parameter">              <b><code>show</code></b>
<a href="#amads.pitch.key.keysomdata.KeyProfileSOM.project_and_visualize(show)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>, default:
                  <code>True</code>
)
          
          <div class="doc-md-description">
            <p>Whether or not we suspend execution and display the plot before
returning from this function</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#tuple">tuple</a>[<span title="numpy.array">array</span>, <span title="matplotlib.figure.Figure">Figure</span>]</code>
          
          <div class="doc-md-description">
            <p>Returns a tuple consisting of:</p>
<ol>
<li>the 2-D numpy array that contains the projection of the input
    data onto the self-organizing map.</li>
<li>Matplotlib figure that contains the axes with a plot of the
    projection</li>
</ol>
          </div>
        </li>
    </ul>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>amads/pitch/key/keysomdata.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">757</span>
<span class="normal">758</span>
<span class="normal">759</span>
<span class="normal">760</span>
<span class="normal">761</span>
<span class="normal">762</span>
<span class="normal">763</span>
<span class="normal">764</span>
<span class="normal">765</span>
<span class="normal">766</span>
<span class="normal">767</span>
<span class="normal">768</span>
<span class="normal">769</span>
<span class="normal">770</span>
<span class="normal">771</span>
<span class="normal">772</span>
<span class="normal">773</span>
<span class="normal">774</span>
<span class="normal">775</span>
<span class="normal">776</span>
<span class="normal">777</span>
<span class="normal">778</span>
<span class="normal">779</span>
<span class="normal">780</span>
<span class="normal">781</span>
<span class="normal">782</span>
<span class="normal">783</span>
<span class="normal">784</span>
<span class="normal">785</span>
<span class="normal">786</span>
<span class="normal">787</span>
<span class="normal">788</span>
<span class="normal">789</span>
<span class="normal">790</span>
<span class="normal">791</span>
<span class="normal">792</span>
<span class="normal">793</span>
<span class="normal">794</span>
<span class="normal">795</span>
<span class="normal">796</span>
<span class="normal">797</span>
<span class="normal">798</span>
<span class="normal">799</span>
<span class="normal">800</span>
<span class="normal">801</span>
<span class="normal">802</span>
<span class="normal">803</span>
<span class="normal">804</span>
<span class="normal">805</span>
<span class="normal">806</span>
<span class="normal">807</span>
<span class="normal">808</span>
<span class="normal">809</span>
<span class="normal">810</span>
<span class="normal">811</span>
<span class="normal">812</span>
<span class="normal">813</span>
<span class="normal">814</span>
<span class="normal">815</span>
<span class="normal">816</span>
<span class="normal">817</span>
<span class="normal">818</span>
<span class="normal">819</span>
<span class="normal">820</span>
<span class="normal">821</span>
<span class="normal">822</span>
<span class="normal">823</span>
<span class="normal">824</span>
<span class="normal">825</span>
<span class="normal">826</span>
<span class="normal">827</span>
<span class="normal">828</span>
<span class="normal">829</span>
<span class="normal">830</span>
<span class="normal">831</span>
<span class="normal">832</span>
<span class="normal">833</span>
<span class="normal">834</span>
<span class="normal">835</span>
<span class="normal">836</span>
<span class="normal">837</span>
<span class="normal">838</span>
<span class="normal">839</span>
<span class="normal">840</span>
<span class="normal">841</span>
<span class="normal">842</span>
<span class="normal">843</span>
<span class="normal">844</span>
<span class="normal">845</span>
<span class="normal">846</span>
<span class="normal">847</span>
<span class="normal">848</span>
<span class="normal">849</span>
<span class="normal">850</span>
<span class="normal">851</span>
<span class="normal">852</span>
<span class="normal">853</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">project_and_visualize</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="nb">input</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">],</span>
    <span class="n">has_legend</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">scaled_legend</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">font_size</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">color_map</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">mcolors</span><span class="o">.</span><span class="n">LinearSegmentedColormap</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">show</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">,</span> <span class="n">Figure</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Project a pitch-class distribution and visualizes it.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    input: Tuple[float]</span>
<span class="sd">        a singular pitch-class distribution, in which case the visualization</span>
<span class="sd">        is simply a heatmap of its projection onto the trained SOM.</span>
<span class="sd">    has_legend: bool</span>
<span class="sd">        Whether or not the plot should include a color legend</span>
<span class="sd">    scaled_legend: bool</span>
<span class="sd">        Whether or not the color legend scales with the projection&#39;s minimum</span>
<span class="sd">        and maximum, or (by default) scales with the trained SOM&#39;s global</span>
<span class="sd">        minimum and maximum.</span>
<span class="sd">    font_size: Optional[Union[float, str]] = None,</span>
<span class="sd">        Font size, either:</span>
<span class="sd">        (1) Font size of the labels (in points) or a string option from</span>
<span class="sd">        matplotlib</span>
<span class="sd">        (2) None for the default font size provided by matplotlib</span>
<span class="sd">    color_map: Optional[Union[str, mcolors.LinearSegmentedColormap]]</span>
<span class="sd">        Color map, either:</span>
<span class="sd">         (1) a color map provided by the matplotlib package</span>
<span class="sd">         (2) a custom linear segmented colormap</span>
<span class="sd">         (3) None for the default color scheme provided by matplotlib</span>
<span class="sd">    show: bool</span>
<span class="sd">        Whether or not we suspend execution and display the plot before</span>
<span class="sd">        returning from this function</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    Tuple[np.array, Figure]</span>
<span class="sd">        Returns a tuple consisting of:</span>

<span class="sd">        1. the 2-D numpy array that contains the projection of the input</span>
<span class="sd">            data onto the self-organizing map.</span>
<span class="sd">        2. Matplotlib figure that contains the axes with a plot of the</span>
<span class="sd">            projection</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">input</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;empty input not allowed&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="nb">input</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">Tuple</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;only takes pitch-class distribution data&quot;</span><span class="p">)</span>
    <span class="c1"># prep data</span>
    <span class="n">projection</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">project_input_onto_SOM</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="nb">input</span><span class="p">))</span>

    <span class="n">dim0</span><span class="p">,</span> <span class="n">dim1</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">SOM</span><span class="o">.</span><span class="n">shape</span>
    <span class="k">assert</span> <span class="n">projection</span><span class="o">.</span><span class="n">shape</span> <span class="o">==</span> <span class="p">(</span><span class="n">dim0</span><span class="p">,</span> <span class="n">dim1</span><span class="p">)</span>

    <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>

    <span class="c1"># there should be some thought put into the actual interpolation formula</span>
    <span class="c1"># cax = ax.contourf(projection)</span>
    <span class="n">cax</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span>
        <span class="n">projection</span><span class="p">,</span>
        <span class="n">aspect</span><span class="o">=</span><span class="s2">&quot;auto&quot;</span><span class="p">,</span>
        <span class="n">origin</span><span class="o">=</span><span class="s2">&quot;lower&quot;</span><span class="p">,</span>
        <span class="n">interpolation</span><span class="o">=</span><span class="s2">&quot;nearest&quot;</span><span class="p">,</span>
        <span class="n">cmap</span><span class="o">=</span><span class="n">color_map</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">label_coord_list</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">KeyProfileSOM</span><span class="o">.</span><span class="n">_labels</span><span class="p">)</span>

    <span class="c1"># key labels in the plot</span>
    <span class="k">for</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">),</span> <span class="n">label</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">label_coord_list</span><span class="p">,</span> <span class="n">KeyProfileSOM</span><span class="o">.</span><span class="n">_labels</span><span class="p">):</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">text</span><span class="p">(</span>
            <span class="n">j</span><span class="p">,</span>
            <span class="n">i</span><span class="p">,</span>
            <span class="n">label</span><span class="p">,</span>
            <span class="n">ha</span><span class="o">=</span><span class="s2">&quot;center&quot;</span><span class="p">,</span>
            <span class="n">va</span><span class="o">=</span><span class="s2">&quot;center&quot;</span><span class="p">,</span>
            <span class="n">color</span><span class="o">=</span><span class="s2">&quot;w&quot;</span><span class="p">,</span>
            <span class="n">fontsize</span><span class="o">=</span><span class="n">font_size</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="c1"># legend</span>
    <span class="k">if</span> <span class="n">has_legend</span><span class="p">:</span>
        <span class="n">actual_vmin</span><span class="p">,</span> <span class="n">actual_vmax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">vmin</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">vmax</span>

        <span class="k">if</span> <span class="n">scaled_legend</span><span class="p">:</span>
            <span class="n">actual_vmin</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">projection</span><span class="p">)</span>
            <span class="n">actual_vmax</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">projection</span><span class="p">)</span>

        <span class="n">cax</span><span class="o">.</span><span class="n">set_clim</span><span class="p">(</span><span class="n">actual_vmin</span><span class="p">,</span> <span class="n">actual_vmax</span><span class="p">)</span>
        <span class="n">fig</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span><span class="n">cax</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Proportion&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">show</span><span class="p">:</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

    <span class="k">return</span> <span class="n">projection</span><span class="p">,</span> <span class="n">fig</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="amads.pitch.key.keysomdata.KeyProfileSOM.project_and_animate" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">project_and_animate</span>


<a href="#amads.pitch.key.keysomdata.KeyProfileSOM.project_and_animate" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">project_and_animate</span><span class="p">(</span>
    <span class="n"><a class="autorefs autorefs-internal" title="input_list (amads.pitch.key.keysomdata.KeyProfileSOM.project_and_animate(input_list))" href="#amads.pitch.key.keysomdata.KeyProfileSOM.project_and_animate(input_list)">input_list</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#tuple">tuple</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a></span><span class="p">]],</span>
    <span class="n"><a class="autorefs autorefs-internal" title="has_legend (amads.pitch.key.keysomdata.KeyProfileSOM.project_and_animate(has_legend))" href="#amads.pitch.key.keysomdata.KeyProfileSOM.project_and_animate(has_legend)">has_legend</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="font_size (amads.pitch.key.keysomdata.KeyProfileSOM.project_and_animate(font_size))" href="#amads.pitch.key.keysomdata.KeyProfileSOM.project_and_animate(font_size)">font_size</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a></span> <span class="o">|</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span> <span class="o">=</span> <span class="mf">10.0</span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="color_map (amads.pitch.key.keysomdata.KeyProfileSOM.project_and_animate(color_map))" href="#amads.pitch.key.keysomdata.KeyProfileSOM.project_and_animate(color_map)">color_map</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span> <span class="o">|</span> <span class="n"><span title="matplotlib.colors.LinearSegmentedColormap">LinearSegmentedColormap</span></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="show (amads.pitch.key.keysomdata.KeyProfileSOM.project_and_animate(show))" href="#amads.pitch.key.keysomdata.KeyProfileSOM.project_and_animate(show)">show</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#tuple">tuple</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a></span><span class="p">[</span><span class="n"><span title="numpy.array">array</span></span><span class="p">],</span> <span class="n"><span title="matplotlib.animation.FuncAnimation">FuncAnimation</span></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Animate a collection of pitch-class distributions.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
<h5 id="amads.pitch.key.keysomdata.KeyProfileSOM.project_and_animate(input_list)" class="doc doc-heading doc-heading-parameter">              <b><code>input_list</code></b>
<a href="#amads.pitch.key.keysomdata.KeyProfileSOM.project_and_animate(input_list)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#tuple">tuple</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a>]]</code>)
          
          <div class="doc-md-description">
            <p>a list of pitch-class distributions, in which case the visualization
is an animation of the sequence of projections of the pitch-class
distributions onto the trained SOM.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h5 id="amads.pitch.key.keysomdata.KeyProfileSOM.project_and_animate(has_legend)" class="doc doc-heading doc-heading-parameter">              <b><code>has_legend</code></b>
<a href="#amads.pitch.key.keysomdata.KeyProfileSOM.project_and_animate(has_legend)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>, default:
                  <code>True</code>
)
          
          <div class="doc-md-description">
            <p>Whether or not the plot should include a color legend</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h5 id="amads.pitch.key.keysomdata.KeyProfileSOM.project_and_animate(font_size)" class="doc doc-heading doc-heading-parameter">              <b><code>font_size</code></b>
<a href="#amads.pitch.key.keysomdata.KeyProfileSOM.project_and_animate(font_size)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a> | <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></code>, default:
                  <code>10.0</code>
)
          
          <div class="doc-md-description">
            <p>Font size, either:</p>
<ol>
<li>Font size of the labels (in points) or a string option from
    matplotlib</li>
<li>None for the default font size provided by matplotlib</li>
</ol>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h5 id="amads.pitch.key.keysomdata.KeyProfileSOM.project_and_animate(color_map)" class="doc doc-heading doc-heading-parameter">              <b><code>color_map</code></b>
<a href="#amads.pitch.key.keysomdata.KeyProfileSOM.project_and_animate(color_map)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a> | <span title="matplotlib.colors.LinearSegmentedColormap">LinearSegmentedColormap</span> | None</code>, default:
                  <code>None</code>
)
          
          <div class="doc-md-description">
            <p>Color map, either:</p>
<ol>
<li>a color map provided by the matplotlib package</li>
<li>a custom linear segmented colormap
     (see matplotlib.LinearSegmentedColormap for more details)</li>
<li>None for the default color scheme provided by matplotlib</li>
</ol>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h5 id="amads.pitch.key.keysomdata.KeyProfileSOM.project_and_animate(show)" class="doc doc-heading doc-heading-parameter">              <b><code>show</code></b>
<a href="#amads.pitch.key.keysomdata.KeyProfileSOM.project_and_animate(show)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>, default:
                  <code>True</code>
)
          
          <div class="doc-md-description">
            <p>Whether or not we suspend execution and display the plot before
returning from this function</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#tuple">tuple</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a>[<span title="numpy.array">array</span>], <span title="ArtistAnimation">ArtistAnimation</span>]</code>
          
          <div class="doc-md-description">
            <ol>
<li>A list of 2-D numpy arrays that contain the sequence of
    projections from the list of input data onto the
    self-organizing map</li>
<li>The artist animation object of these data</li>
</ol>
          </div>
        </li>
    </ul>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>amads/pitch/key/keysomdata.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">855</span>
<span class="normal">856</span>
<span class="normal">857</span>
<span class="normal">858</span>
<span class="normal">859</span>
<span class="normal">860</span>
<span class="normal">861</span>
<span class="normal">862</span>
<span class="normal">863</span>
<span class="normal">864</span>
<span class="normal">865</span>
<span class="normal">866</span>
<span class="normal">867</span>
<span class="normal">868</span>
<span class="normal">869</span>
<span class="normal">870</span>
<span class="normal">871</span>
<span class="normal">872</span>
<span class="normal">873</span>
<span class="normal">874</span>
<span class="normal">875</span>
<span class="normal">876</span>
<span class="normal">877</span>
<span class="normal">878</span>
<span class="normal">879</span>
<span class="normal">880</span>
<span class="normal">881</span>
<span class="normal">882</span>
<span class="normal">883</span>
<span class="normal">884</span>
<span class="normal">885</span>
<span class="normal">886</span>
<span class="normal">887</span>
<span class="normal">888</span>
<span class="normal">889</span>
<span class="normal">890</span>
<span class="normal">891</span>
<span class="normal">892</span>
<span class="normal">893</span>
<span class="normal">894</span>
<span class="normal">895</span>
<span class="normal">896</span>
<span class="normal">897</span>
<span class="normal">898</span>
<span class="normal">899</span>
<span class="normal">900</span>
<span class="normal">901</span>
<span class="normal">902</span>
<span class="normal">903</span>
<span class="normal">904</span>
<span class="normal">905</span>
<span class="normal">906</span>
<span class="normal">907</span>
<span class="normal">908</span>
<span class="normal">909</span>
<span class="normal">910</span>
<span class="normal">911</span>
<span class="normal">912</span>
<span class="normal">913</span>
<span class="normal">914</span>
<span class="normal">915</span>
<span class="normal">916</span>
<span class="normal">917</span>
<span class="normal">918</span>
<span class="normal">919</span>
<span class="normal">920</span>
<span class="normal">921</span>
<span class="normal">922</span>
<span class="normal">923</span>
<span class="normal">924</span>
<span class="normal">925</span>
<span class="normal">926</span>
<span class="normal">927</span>
<span class="normal">928</span>
<span class="normal">929</span>
<span class="normal">930</span>
<span class="normal">931</span>
<span class="normal">932</span>
<span class="normal">933</span>
<span class="normal">934</span>
<span class="normal">935</span>
<span class="normal">936</span>
<span class="normal">937</span>
<span class="normal">938</span>
<span class="normal">939</span>
<span class="normal">940</span>
<span class="normal">941</span>
<span class="normal">942</span>
<span class="normal">943</span>
<span class="normal">944</span>
<span class="normal">945</span>
<span class="normal">946</span>
<span class="normal">947</span>
<span class="normal">948</span>
<span class="normal">949</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">project_and_animate</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">input_list</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">]],</span>
    <span class="n">has_legend</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">font_size</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="mf">10.0</span><span class="p">,</span>
    <span class="n">color_map</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">mcolors</span><span class="o">.</span><span class="n">LinearSegmentedColormap</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">show</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">],</span> <span class="n">FuncAnimation</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Animate a collection of pitch-class distributions.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    input_list: List[Tuple[float]]</span>
<span class="sd">        a list of pitch-class distributions, in which case the visualization</span>
<span class="sd">        is an animation of the sequence of projections of the pitch-class</span>
<span class="sd">        distributions onto the trained SOM.</span>
<span class="sd">    has_legend: bool</span>
<span class="sd">        Whether or not the plot should include a color legend</span>
<span class="sd">    font_size: Union[float, str]</span>
<span class="sd">        Font size, either:</span>

<span class="sd">        1. Font size of the labels (in points) or a string option from</span>
<span class="sd">            matplotlib</span>
<span class="sd">        2. None for the default font size provided by matplotlib</span>
<span class="sd">    color_map: Optional[Union[str, mcolors.LinearSegmentedColormap]]</span>
<span class="sd">        Color map, either:</span>

<span class="sd">         1. a color map provided by the matplotlib package</span>
<span class="sd">         2. a custom linear segmented colormap</span>
<span class="sd">             (see matplotlib.LinearSegmentedColormap for more details)</span>
<span class="sd">         3. None for the default color scheme provided by matplotlib</span>
<span class="sd">    show: bool</span>
<span class="sd">        Whether or not we suspend execution and display the plot before</span>
<span class="sd">        returning from this function</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    Tuple[List[np.array], ArtistAnimation]</span>

<span class="sd">        1. A list of 2-D numpy arrays that contain the sequence of</span>
<span class="sd">            projections from the list of input data onto the</span>
<span class="sd">            self-organizing map</span>
<span class="sd">        2. The artist animation object of these data</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># visualize</span>
    <span class="n">projection_list</span> <span class="o">=</span> <span class="p">[</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">project_input_onto_SOM</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="nb">input</span><span class="p">))</span> <span class="k">for</span> <span class="nb">input</span> <span class="ow">in</span> <span class="n">input_list</span>
    <span class="p">]</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">projection_list</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">projection_list</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Warning! No distributions provided to animate!&quot;</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>

    <span class="n">cax</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span>
        <span class="n">projection_list</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
        <span class="n">aspect</span><span class="o">=</span><span class="s2">&quot;auto&quot;</span><span class="p">,</span>
        <span class="n">origin</span><span class="o">=</span><span class="s2">&quot;lower&quot;</span><span class="p">,</span>
        <span class="n">interpolation</span><span class="o">=</span><span class="s2">&quot;nearest&quot;</span><span class="p">,</span>
        <span class="n">cmap</span><span class="o">=</span><span class="n">color_map</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">cax</span><span class="o">.</span><span class="n">set_clim</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vmin</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">vmax</span><span class="p">)</span>
    <span class="c1"># key labels in the plot</span>
    <span class="k">for</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">),</span> <span class="n">label</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">label_coord_list</span><span class="p">,</span> <span class="n">KeyProfileSOM</span><span class="o">.</span><span class="n">_labels</span><span class="p">):</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">text</span><span class="p">(</span>
            <span class="n">j</span><span class="p">,</span>
            <span class="n">i</span><span class="p">,</span>
            <span class="n">label</span><span class="p">,</span>
            <span class="n">ha</span><span class="o">=</span><span class="s2">&quot;center&quot;</span><span class="p">,</span>
            <span class="n">va</span><span class="o">=</span><span class="s2">&quot;center&quot;</span><span class="p">,</span>
            <span class="n">color</span><span class="o">=</span><span class="s2">&quot;w&quot;</span><span class="p">,</span>
            <span class="n">fontsize</span><span class="o">=</span><span class="n">font_size</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="k">if</span> <span class="n">has_legend</span><span class="p">:</span>
        <span class="n">fig</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span><span class="n">cax</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Score Expectation&quot;</span><span class="p">,</span> <span class="n">ticks</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">frame_func</span><span class="p">(</span><span class="n">frame_idx</span><span class="p">):</span>
        <span class="n">idx</span> <span class="o">=</span> <span class="n">frame_idx</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="n">projection_list</span><span class="p">)</span>
        <span class="n">cax</span><span class="o">.</span><span class="n">set_data</span><span class="p">(</span><span class="n">projection_list</span><span class="p">[</span><span class="n">idx</span><span class="p">])</span>

    <span class="n">ani</span> <span class="o">=</span> <span class="n">FuncAnimation</span><span class="p">(</span>
        <span class="n">fig</span><span class="p">,</span>
        <span class="n">frame_func</span><span class="p">,</span>
        <span class="n">frames</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">input_list</span><span class="p">),</span>
        <span class="n">interval</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span>
        <span class="n">repeat</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">repeat_delay</span><span class="o">=</span><span class="mi">2000</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">show</span><span class="p">:</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

    <span class="k">return</span> <span class="n">projection_list</span><span class="p">,</span> <span class="n">ani</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div><hr />


<div class="doc doc-object doc-function">


<h2 id="amads.pitch.key.keysomdata.pretrained_weights_script" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>            <span class="doc doc-object-name doc-function-name">pretrained_weights_script</span>


<a href="#amads.pitch.key.keysomdata.pretrained_weights_script" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">pretrained_weights_script</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-internal" title="            KeyProfileSOM (amads.pitch.key.keysomdata.KeyProfileSOM)" href="#amads.pitch.key.keysomdata.KeyProfileSOM">KeyProfileSOM</a></span>
</code></pre></div>

    <div class="doc doc-contents first">

        <p>Simple script that generates a SOM from a hand-crafted initial SOM.</p>
<p>This gives us a SOM with key labels in a determinstic grid adjacent to the
axes of the grid.</p>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><a class="autorefs autorefs-internal" title="            KeyProfileSOM (amads.pitch.key.keysomdata.KeyProfileSOM)" href="#amads.pitch.key.keysomdata.KeyProfileSOM">KeyProfileSOM</a></code>
          
          <div class="doc-md-description">
            <p>Object with training weights</p>
          </div>
        </li>
    </ul>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>amads/pitch/key/keysomdata.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">952</span>
<span class="normal">953</span>
<span class="normal">954</span>
<span class="normal">955</span>
<span class="normal">956</span>
<span class="normal">957</span>
<span class="normal">958</span>
<span class="normal">959</span>
<span class="normal">960</span>
<span class="normal">961</span>
<span class="normal">962</span>
<span class="normal">963</span>
<span class="normal">964</span>
<span class="normal">965</span>
<span class="normal">966</span>
<span class="normal">967</span>
<span class="normal">968</span>
<span class="normal">969</span>
<span class="normal">970</span>
<span class="normal">971</span>
<span class="normal">972</span>
<span class="normal">973</span>
<span class="normal">974</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">pretrained_weights_script</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">KeyProfileSOM</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Simple script that generates a SOM from a hand-crafted initial SOM.</span>

<span class="sd">    This gives us a SOM with key labels in a determinstic grid adjacent to the</span>
<span class="sd">    axes of the grid.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    KeyProfileSOM</span>
<span class="sd">        Object with training weights</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># for the pretrained version, hand-craft initialization value for the</span>
    <span class="c1"># SOM so that we get the rotation and orientation desired for the resulting</span>
    <span class="c1"># trained weights</span>
    <span class="n">obj</span> <span class="o">=</span> <span class="n">KeyProfileSOM</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">SOM_output_dims</span> <span class="o">!=</span> <span class="n">KeyProfileSOM</span><span class="o">.</span><span class="n">_default_output_dimensions</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;invalid output dimensions for default SOM&quot;</span><span class="p">)</span>

    <span class="n">obj</span><span class="o">.</span><span class="n">train_SOM</span><span class="p">(</span><span class="n">weights_initialization</span><span class="o">=</span><span class="n">handcrafted_SOM_init</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">obj</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div><hr />


<div class="doc doc-object doc-function">


<h2 id="amads.pitch.key.keysomdata.zero_SOM_init" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>            <span class="doc doc-object-name doc-function-name">zero_SOM_init</span>


<a href="#amads.pitch.key.keysomdata.zero_SOM_init" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">zero_SOM_init</span><span class="p">(</span><span class="n"><span title="amads.pitch.key.keysomdata.zero_SOM_init(shape)">shape</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#tuple">tuple</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n"><span title="numpy.array">array</span></span>
</code></pre></div>

    <div class="doc doc-contents first">

        <p>Constructs all-zero self-organizing map weights.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>amads/pitch/key/keysomdata.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">zero_SOM_init</span><span class="p">(</span><span class="n">shape</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Constructs all-zero self-organizing map weights.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># zero SOM init...</span>
    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">shape</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div><hr />


<div class="doc doc-object doc-function">


<h2 id="amads.pitch.key.keysomdata.random_SOM_init" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>            <span class="doc doc-object-name doc-function-name">random_SOM_init</span>


<a href="#amads.pitch.key.keysomdata.random_SOM_init" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">random_SOM_init</span><span class="p">(</span><span class="n"><span title="amads.pitch.key.keysomdata.random_SOM_init(shape)">shape</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#tuple">tuple</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n"><span title="numpy.array">array</span></span>
</code></pre></div>

    <div class="doc doc-contents first">

        <p>Constructs random self-organizing map weights.</p>
<p>Initial values are between 0 and 0.5 inclusive.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>amads/pitch/key/keysomdata.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">random_SOM_init</span><span class="p">(</span><span class="n">shape</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Constructs random self-organizing map weights.</span>

<span class="sd">    Initial values are between 0 and 0.5 inclusive.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="o">*</span><span class="n">shape</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div><hr />


<div class="doc doc-object doc-function">


<h2 id="amads.pitch.key.keysomdata.handcrafted_SOM_init" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>            <span class="doc doc-object-name doc-function-name">handcrafted_SOM_init</span>


<a href="#amads.pitch.key.keysomdata.handcrafted_SOM_init" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">handcrafted_SOM_init</span><span class="p">(</span><span class="n"><span title="amads.pitch.key.keysomdata.handcrafted_SOM_init(shape)">shape</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#tuple">tuple</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n"><span title="numpy.array">array</span></span>
</code></pre></div>

    <div class="doc doc-contents first">

        <p>Bespoke initialization for the pretrained weights.</p>
<p>These initial weights are intended to bias the resulting SOM
to a nicely symmetrical map with well-placed keys.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>amads/pitch/key/keysomdata.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">handcrafted_SOM_init</span><span class="p">(</span><span class="n">shape</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Bespoke initialization for the pretrained weights.</span>

<span class="sd">    These initial weights are intended to bias the resulting SOM</span>
<span class="sd">    to a nicely symmetrical map with well-placed keys.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">shape</span> <span class="o">!=</span> <span class="p">(</span>
        <span class="o">*</span><span class="n">KeyProfileSOM</span><span class="o">.</span><span class="n">_default_output_dimensions</span><span class="p">,</span>
        <span class="n">KeyProfileSOM</span><span class="o">.</span><span class="n">_input_length</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;invalid shape </span><span class="si">{</span><span class="n">shape</span><span class="si">}</span><span class="s2"> for handcrafted SOM&quot;</span><span class="p">)</span>

    <span class="n">kkprof</span> <span class="o">=</span> <span class="n">prof</span><span class="o">.</span><span class="n">krumhansl_kessler</span>
    <span class="n">list_of_majors</span> <span class="o">=</span> <span class="n">kkprof</span><span class="p">[</span><span class="s2">&quot;major&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">normalize</span><span class="p">()</span><span class="o">.</span><span class="n">as_canonical_matrix</span><span class="p">()</span>
    <span class="n">list_of_minors</span> <span class="o">=</span> <span class="n">kkprof</span><span class="p">[</span><span class="s2">&quot;minor&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">normalize</span><span class="p">()</span><span class="o">.</span><span class="n">as_canonical_matrix</span><span class="p">()</span>

    <span class="n">max_row</span><span class="p">,</span> <span class="n">max_col</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">shape</span>

    <span class="n">init_weights</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">shape</span><span class="p">)</span>

    <span class="c1"># per &quot;cell&quot; arrangement, where each cell contains a major key label and its</span>
    <span class="c1"># corresponding minor key label horizontally adjacent to it</span>

    <span class="c1"># arithmetic for a 4x3 grid of cells in a 24x36 SOM</span>
    <span class="n">row_multiplier</span> <span class="o">=</span> <span class="mi">6</span>
    <span class="n">max_row_cells</span> <span class="o">=</span> <span class="n">max_row</span> <span class="o">//</span> <span class="n">row_multiplier</span>
    <span class="n">row_offset</span> <span class="o">=</span> <span class="mi">3</span>
    <span class="c1"># twice to accomodate a cell containing 12</span>
    <span class="n">col_multiplier</span> <span class="o">=</span> <span class="mi">6</span> <span class="o">*</span> <span class="mi">2</span>
    <span class="n">max_col_cells</span> <span class="o">=</span> <span class="n">max_col</span> <span class="o">//</span> <span class="n">col_multiplier</span>
    <span class="n">col_major_offset</span> <span class="o">=</span> <span class="mi">3</span>
    <span class="n">col_minor_offset</span> <span class="o">=</span> <span class="n">col_major_offset</span> <span class="o">+</span> <span class="mi">6</span>

    <span class="n">key_idx</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="c1"># the end result should be a rectangular grid in the labels</span>
    <span class="k">for</span> <span class="n">row_cell_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">max_row_cells</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">col_cell_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">max_col_cells</span><span class="p">):</span>
            <span class="c1"># imprint major key</span>
            <span class="n">major_col_idx</span> <span class="o">=</span> <span class="n">col_cell_idx</span> <span class="o">*</span> <span class="n">col_multiplier</span> <span class="o">+</span> <span class="n">col_major_offset</span>
            <span class="n">major_row_idx</span> <span class="o">=</span> <span class="n">row_cell_idx</span> <span class="o">*</span> <span class="n">row_multiplier</span> <span class="o">+</span> <span class="n">row_offset</span>
            <span class="n">init_weights</span><span class="p">[</span><span class="n">major_row_idx</span><span class="p">,</span> <span class="n">major_col_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">list_of_majors</span><span class="p">[</span><span class="n">key_idx</span><span class="p">]</span>

            <span class="c1"># imprint minor key</span>
            <span class="n">minor_col_idx</span> <span class="o">=</span> <span class="n">col_cell_idx</span> <span class="o">*</span> <span class="n">col_multiplier</span> <span class="o">+</span> <span class="n">col_minor_offset</span>
            <span class="n">minor_row_idx</span> <span class="o">=</span> <span class="n">row_cell_idx</span> <span class="o">*</span> <span class="n">row_multiplier</span> <span class="o">+</span> <span class="n">row_offset</span>
            <span class="n">init_weights</span><span class="p">[</span><span class="n">minor_row_idx</span><span class="p">,</span> <span class="n">minor_col_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">list_of_minors</span><span class="p">[</span><span class="n">key_idx</span><span class="p">]</span>

            <span class="c1"># increment key_idx</span>
            <span class="n">key_idx</span> <span class="o">+=</span> <span class="mi">1</span>

    <span class="k">assert</span> <span class="n">key_idx</span> <span class="o">==</span> <span class="mi">12</span>

    <span class="k">return</span> <span class="n">init_weights</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div><hr />


<div class="doc doc-object doc-function">


<h2 id="amads.pitch.key.keysomdata.keysom_inverse_decay" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>            <span class="doc doc-object-name doc-function-name">keysom_inverse_decay</span>


<a href="#amads.pitch.key.keysomdata.keysom_inverse_decay" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">keysom_inverse_decay</span><span class="p">(</span><span class="n"><span title="amads.pitch.key.keysomdata.keysom_inverse_decay(idx)">idx</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a></span>
</code></pre></div>

    <div class="doc doc-contents first">

        <p>Computes inverse decay global learning rate for a given iteration.</p>
<p>Inverse to the current learning iteration...</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>amads/pitch/key/keysomdata.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">keysom_inverse_decay</span><span class="p">(</span><span class="n">idx</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Computes inverse decay global learning rate for a given iteration.</span>

<span class="sd">    Inverse to the current learning iteration...</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">assert</span> <span class="n">idx</span> <span class="o">&gt;=</span> <span class="mi">0</span>
    <span class="k">if</span> <span class="n">idx</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">1</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">1</span> <span class="o">/</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">idx</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div><hr />


<div class="doc doc-object doc-function">


<h2 id="amads.pitch.key.keysomdata.keysom_stepped_inverse_decay" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>            <span class="doc doc-object-name doc-function-name">keysom_stepped_inverse_decay</span>


<a href="#amads.pitch.key.keysomdata.keysom_stepped_inverse_decay" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">keysom_stepped_inverse_decay</span><span class="p">(</span><span class="n"><span title="amads.pitch.key.keysomdata.keysom_stepped_inverse_decay(idx)">idx</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a></span>
</code></pre></div>

    <div class="doc doc-contents first">

        <p>Compute stepped decay global learning rate for a given iteration.</p>
<p>Inverse to a stepped multiplier of the current learning iteration...</p>
<p>In this case it's stepped to allow all inputs to deterministically
pass during training (for 12 major and 12 minor key profile entries
specifically)</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>amads/pitch/key/keysomdata.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">keysom_stepped_inverse_decay</span><span class="p">(</span><span class="n">idx</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Compute stepped decay global learning rate for a given iteration.</span>

<span class="sd">    Inverse to a stepped multiplier of the current learning iteration...</span>

<span class="sd">    In this case it&#39;s stepped to allow all inputs to deterministically</span>
<span class="sd">    pass during training (for 12 major and 12 minor key profile entries</span>
<span class="sd">    specifically)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">step</span> <span class="o">=</span> <span class="n">idx</span> <span class="o">//</span> <span class="p">(</span><span class="mi">12</span> <span class="o">*</span> <span class="mi">2</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">step</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">1</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">1</span> <span class="o">/</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">step</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div><hr />


<div class="doc doc-object doc-function">


<h2 id="amads.pitch.key.keysomdata.keysom_stepped_log_inverse_decay" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>            <span class="doc doc-object-name doc-function-name">keysom_stepped_log_inverse_decay</span>


<a href="#amads.pitch.key.keysomdata.keysom_stepped_log_inverse_decay" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">keysom_stepped_log_inverse_decay</span><span class="p">(</span><span class="n"><span title="amads.pitch.key.keysomdata.keysom_stepped_log_inverse_decay(idx)">idx</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a></span>
</code></pre></div>

    <div class="doc doc-contents first">

        <p>Compute stepped log inverse decay global learning rate for a given iteration.</p>
<p>Log inverse to a stepped multiplier of the current learning iteration...</p>
<p>In this case it's stepped to allow all inputs to deterministically
pass during training (for 12 major and 12 minor key profile entries
specifically)</p>
<p>So why does inverse log work well? I like to think of it as the summation
of traversing all nodes of a subtree of an imaginary sparse information tree.
Where each layer of the information tree provides inverse decaying
returns to the whole tree.
This justification is very stretched though.
Namely, each additional data point fed provides an opportunity to add
another "symbol" to the intrinsic learned "alphabet" of the internal
representation of the SOM.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>amads/pitch/key/keysomdata.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">keysom_stepped_log_inverse_decay</span><span class="p">(</span><span class="n">idx</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Compute stepped log inverse decay global learning rate for a given iteration.</span>

<span class="sd">    Log inverse to a stepped multiplier of the current learning iteration...</span>

<span class="sd">    In this case it&#39;s stepped to allow all inputs to deterministically</span>
<span class="sd">    pass during training (for 12 major and 12 minor key profile entries</span>
<span class="sd">    specifically)</span>

<span class="sd">    So why does inverse log work well? I like to think of it as the summation</span>
<span class="sd">    of traversing all nodes of a subtree of an imaginary sparse information tree.</span>
<span class="sd">    Where each layer of the information tree provides inverse decaying</span>
<span class="sd">    returns to the whole tree.</span>
<span class="sd">    This justification is very stretched though.</span>
<span class="sd">    Namely, each additional data point fed provides an opportunity to add</span>
<span class="sd">    another &quot;symbol&quot; to the intrinsic learned &quot;alphabet&quot; of the internal</span>
<span class="sd">    representation of the SOM.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">step</span> <span class="o">=</span> <span class="n">idx</span> <span class="o">//</span> <span class="p">(</span><span class="mi">12</span> <span class="o">*</span> <span class="mi">2</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">step</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">1</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">math</span><span class="o">.</span><span class="n">log2</span><span class="p">(</span><span class="n">step</span> <span class="o">+</span> <span class="mi">2</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div><hr />


<div class="doc doc-object doc-function">


<h2 id="amads.pitch.key.keysomdata.keysom_centroid_euclidean" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>            <span class="doc doc-object-name doc-function-name">keysom_centroid_euclidean</span>


<a href="#amads.pitch.key.keysomdata.keysom_centroid_euclidean" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">keysom_centroid_euclidean</span><span class="p">(</span>
    <span class="n"><span title="amads.pitch.key.keysomdata.keysom_centroid_euclidean(coord)">coord</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#tuple">tuple</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></span><span class="p">],</span>
    <span class="n"><span title="amads.pitch.key.keysomdata.keysom_centroid_euclidean(best_match)">best_match</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#tuple">tuple</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></span><span class="p">],</span>
    <span class="n"><span title="amads.pitch.key.keysomdata.keysom_centroid_euclidean(shape)">shape</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#tuple">tuple</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></span><span class="p">],</span>
    <span class="n"><span title="amads.pitch.key.keysomdata.keysom_centroid_euclidean(idx)">idx</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a></span>
</code></pre></div>

    <div class="doc doc-contents first">

        <p>Neighborhood propagation update function.</p>
<p>Exponential decay based off of Eucliean distance on a 2-D plane
assuming the SOM output layer is a 2-D flat plane</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>amads/pitch/key/keysomdata.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">keysom_centroid_euclidean</span><span class="p">(</span>
    <span class="n">coord</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span> <span class="n">best_match</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span> <span class="n">shape</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span> <span class="n">idx</span><span class="p">:</span> <span class="nb">int</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Neighborhood propagation update function.</span>

<span class="sd">    Exponential decay based off of Eucliean distance on a 2-D plane</span>
<span class="sd">    assuming the SOM output layer is a 2-D flat plane</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">distance</span> <span class="o">=</span> <span class="n">euclidean_distance</span><span class="p">(</span><span class="n">coord</span><span class="p">,</span> <span class="n">best_match</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>

    <span class="c1"># 0.95 is purely empirical. Honestly another value might be better</span>
    <span class="k">if</span> <span class="n">distance</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">1</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">(</span><span class="mf">0.95</span><span class="p">)</span> <span class="o">**</span> <span class="n">distance</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div><hr />


<div class="doc doc-object doc-function">


<h2 id="amads.pitch.key.keysomdata.keysom_toroid_euclidean" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>            <span class="doc doc-object-name doc-function-name">keysom_toroid_euclidean</span>


<a href="#amads.pitch.key.keysomdata.keysom_toroid_euclidean" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">keysom_toroid_euclidean</span><span class="p">(</span>
    <span class="n"><span title="amads.pitch.key.keysomdata.keysom_toroid_euclidean(coord)">coord</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#tuple">tuple</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></span><span class="p">],</span>
    <span class="n"><span title="amads.pitch.key.keysomdata.keysom_toroid_euclidean(best_match)">best_match</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#tuple">tuple</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></span><span class="p">],</span>
    <span class="n"><span title="amads.pitch.key.keysomdata.keysom_toroid_euclidean(shape)">shape</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#tuple">tuple</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></span><span class="p">],</span>
    <span class="n"><span title="amads.pitch.key.keysomdata.keysom_toroid_euclidean(idx)">idx</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a></span>
</code></pre></div>

    <div class="doc doc-contents first">

        <p>Neighborhood propagation update function.</p>
<p>Exponential decay based off of Eucliean distance on a toroid
assuming the SOM output layer is a projection of a toroid onto a
2-D flat plane</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>amads/pitch/key/keysomdata.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">keysom_toroid_euclidean</span><span class="p">(</span>
    <span class="n">coord</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span> <span class="n">best_match</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span> <span class="n">shape</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span> <span class="n">idx</span><span class="p">:</span> <span class="nb">int</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Neighborhood propagation update function.</span>

<span class="sd">    Exponential decay based off of Eucliean distance on a toroid</span>
<span class="sd">    assuming the SOM output layer is a projection of a toroid onto a</span>
<span class="sd">    2-D flat plane</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">num_rows</span><span class="p">,</span> <span class="n">num_cols</span><span class="p">,</span> <span class="n">input_length</span> <span class="o">=</span> <span class="n">shape</span>
    <span class="c1"># these are easy to follow since i, j are convention</span>
    <span class="c1"># and so is i0, j0</span>
    <span class="n">i</span><span class="p">,</span> <span class="n">j</span> <span class="o">=</span> <span class="n">coord</span>
    <span class="n">i0</span><span class="p">,</span> <span class="n">j0</span> <span class="o">=</span> <span class="n">best_match</span>
    <span class="n">diff_row</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">i</span> <span class="o">-</span> <span class="n">i0</span><span class="p">)</span>
    <span class="n">diff_col</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">j</span> <span class="o">-</span> <span class="n">j0</span><span class="p">)</span>
    <span class="n">toroid_diff_row</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">diff_row</span><span class="p">,</span> <span class="n">num_rows</span> <span class="o">-</span> <span class="n">diff_row</span><span class="p">)</span>
    <span class="n">toroid_diff_col</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">diff_col</span><span class="p">,</span> <span class="n">num_cols</span> <span class="o">-</span> <span class="n">diff_col</span><span class="p">)</span>
    <span class="n">distance</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">toroid_diff_row</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="n">toroid_diff_col</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">distance</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">1</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">(</span><span class="mf">0.9</span><span class="p">)</span> <span class="o">**</span> <span class="n">distance</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div><hr />


<div class="doc doc-object doc-function">


<h2 id="amads.pitch.key.keysomdata.keysom_toroid_clamped" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>            <span class="doc doc-object-name doc-function-name">keysom_toroid_clamped</span>


<a href="#amads.pitch.key.keysomdata.keysom_toroid_clamped" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">keysom_toroid_clamped</span><span class="p">(</span>
    <span class="n"><span title="amads.pitch.key.keysomdata.keysom_toroid_clamped(coord)">coord</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#tuple">tuple</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></span><span class="p">],</span>
    <span class="n"><span title="amads.pitch.key.keysomdata.keysom_toroid_clamped(best_match)">best_match</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#tuple">tuple</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></span><span class="p">],</span>
    <span class="n"><span title="amads.pitch.key.keysomdata.keysom_toroid_clamped(shape)">shape</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#tuple">tuple</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></span><span class="p">],</span>
    <span class="n"><span title="amads.pitch.key.keysomdata.keysom_toroid_clamped(idx)">idx</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a></span>
</code></pre></div>

    <div class="doc doc-contents first">

        <p>Neighborhood propagation update function.</p>
<p>Same behavior as keysom_toroid_euclidean (see for more details),
except distances past a certain radius is clamped to 0.0001.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>amads/pitch/key/keysomdata.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">keysom_toroid_clamped</span><span class="p">(</span>
    <span class="n">coord</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span> <span class="n">best_match</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span> <span class="n">shape</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span> <span class="n">idx</span><span class="p">:</span> <span class="nb">int</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Neighborhood propagation update function.</span>

<span class="sd">    Same behavior as keysom_toroid_euclidean (see for more details),</span>
<span class="sd">    except distances past a certain radius is clamped to 0.0001.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">num_rows</span><span class="p">,</span> <span class="n">num_cols</span><span class="p">,</span> <span class="n">input_length</span> <span class="o">=</span> <span class="n">shape</span>
    <span class="c1"># these are easy to follow since i, j are convention</span>
    <span class="c1"># and so is i0, j0</span>
    <span class="n">i</span><span class="p">,</span> <span class="n">j</span> <span class="o">=</span> <span class="n">coord</span>
    <span class="n">i0</span><span class="p">,</span> <span class="n">j0</span> <span class="o">=</span> <span class="n">best_match</span>
    <span class="n">diff_row</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">i</span> <span class="o">-</span> <span class="n">i0</span><span class="p">)</span>
    <span class="n">diff_col</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">j</span> <span class="o">-</span> <span class="n">j0</span><span class="p">)</span>
    <span class="n">toroid_diff_row</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">diff_row</span><span class="p">,</span> <span class="n">num_rows</span> <span class="o">-</span> <span class="n">diff_row</span><span class="p">)</span>
    <span class="n">toroid_diff_col</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">diff_col</span><span class="p">,</span> <span class="n">num_cols</span> <span class="o">-</span> <span class="n">diff_col</span><span class="p">)</span>
    <span class="n">distance</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">toroid_diff_row</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="n">toroid_diff_col</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>

    <span class="c1"># same logic applies to clamp radius as the global learning decay rate.</span>
    <span class="c1"># Namely, each additional data point fed provides an opportunity to add</span>
    <span class="c1"># another &quot;symbol&quot; to the intrinsic learned &quot;alphabet&quot; of the internal</span>
    <span class="c1"># representation of the SOM.</span>
    <span class="c1"># diminishing returns...</span>
    <span class="n">radius</span> <span class="o">=</span> <span class="mf">36.0</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">/</span> <span class="n">math</span><span class="o">.</span><span class="n">log2</span><span class="p">(</span><span class="n">idx</span> <span class="o">//</span> <span class="mi">24</span> <span class="o">+</span> <span class="mi">2</span><span class="p">))</span>

    <span class="k">if</span> <span class="n">distance</span> <span class="o">&gt;</span> <span class="n">radius</span><span class="p">:</span>
        <span class="k">return</span> <span class="mf">0.0001</span>
    <span class="k">elif</span> <span class="n">distance</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="mf">1.0</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">(</span><span class="mf">0.9</span><span class="p">)</span> <span class="o">**</span> <span class="n">distance</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../../..", "features": ["navigation.sections", "navigation.expand", "navigation.tabs"], "search": "../../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
        <script src="../../../javascripts/fix-properties.js"></script>
      
        <script src="../../../javascripts/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>