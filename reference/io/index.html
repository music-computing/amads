
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../vector/">
      
      
        <link rel="next" href="../pitch/ismonophonic/">
      
      
        
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.2">
    
    
      
        <title>Input and Output - AMADS</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.484c7ddc.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#input" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="AMADS" class="md-header__button md-logo" aria-label="AMADS" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            AMADS
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Input and Output
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../paper/" class="md-tabs__link">
        
  
  
    
  
  Project Overview

      </a>
    </li>
  

      
        
  
  
  
    
  
  
    
    
      
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../core/" class="md-tabs__link">
          
  
  
  API Reference

        </a>
      </li>
    
  

    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../user_guide/installation/" class="md-tabs__link">
        
  
  
    
  
  Install

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../developer_notes/documentation/" class="md-tabs__link">
          
  
  
  Developer

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="AMADS" class="md-nav__button md-logo" aria-label="AMADS" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    AMADS
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../paper/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Project Overview
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    API Reference
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    API Reference
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_1" >
        
          
          <label class="md-nav__link" for="__nav_3_1" id="__nav_3_1_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Core
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    Core
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../basics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Basic Score Elements
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../basics_more/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    More Classes
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pitch/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Pitch
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../distribution/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Distribution
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../utils/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Utility Functions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../vector/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Vector Functions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Input and Output
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Input and Output
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#input" class="md-nav__link">
    <span class="md-ellipsis">
      
        Input
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.io.readscore" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;readscore
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#output" class="md-nav__link">
    <span class="md-ellipsis">
      
        Output
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.io.writescore" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;writescore
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#piano-roll-display" class="md-nav__link">
    <span class="md-ellipsis">
      
        Piano Roll Display
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.io.pianoroll" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;pianoroll
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#low-level-input-functions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Low-Level Input Functions
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.io.m21_midi_import.music21_midi_import" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;music21_midi_import
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.io.pm_midi_import.pretty_midi_midi_import" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;pretty_midi_midi_import
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.io.m21_xml_import.music21_xml_import" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;music21_xml_import
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.io.pt_xml_import.partitura_xml_import" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;partitura_xml_import
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#low-level-output-functions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Low-Level Output Functions
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.io.m21_midi_export.music21_midi_export" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;music21_midi_export
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.io.pm_midi_export.pretty_midi_midi_export" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;pretty_midi_midi_export
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.io.m21_xml_export.music21_xml_export" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;music21_xml_export
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.io.pt_xml_export.partitura_xml_export" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;partitura_xml_export
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#built-in-scores" class="md-nav__link">
    <span class="md-ellipsis">
      
        Built-In Scores
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.music.example" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;example
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_3" >
        
          
          <label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Pitch
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Pitch
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pitch/ismonophonic/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ismonophonic
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pitch/hz2midi/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Hz2midi
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pitch/intervals/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Interval Distributions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pitch/pitches/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Pitch Distributions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pitch/key/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Key Profiles
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pitch/serial/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Serial
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_4" >
        
          
          <label class="md-nav__link" for="__nav_3_4" id="__nav_3_4_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Time
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Time
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../time/durations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Duration Distributions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../time/meter/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Meter
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../time/notedensity/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Note Density
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../time/rhythm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Rhythm
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../time/swing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Swing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../time/tempo/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tempo
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../time/variability/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Variability
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_5" >
        
          
          <label class="md-nav__link" for="__nav_3_5" id="__nav_3_5_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Melody
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Melody
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../melody/boundary/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Boundary
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../melody/contour/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Contour
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../melody/segment/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Segment
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../melody/segment_gestalt/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Segment gestalt
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../melody/similarity/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Similarity
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_6" >
        
          
          <label class="md-nav__link" for="__nav_3_6" id="__nav_3_6_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Harmony
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Harmony
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../harmony/consonance/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Consonance
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../harmony/root_finding/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Root finding
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_7" >
        
          
          <label class="md-nav__link" for="__nav_3_7" id="__nav_3_7_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Polyphony
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    Polyphony
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../polyphony/skyline/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Skyline
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_8" >
        
          
          <label class="md-nav__link" for="__nav_3_8" id="__nav_3_8_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Algorithms
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    Algorithms
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../algorithms/complexity/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Complexity
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../algorithms/entropy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Entropy
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../algorithms/gcd/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    GCD
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../algorithms/mtype_tokenizer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Mtype tokenizer
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../algorithms/ngrams/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Ngrams
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../algorithms/nnotes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Nnotes
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../algorithms/norm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Norm
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../algorithms/scale/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Scale
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../algorithms/slice/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Slice
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../schema/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Schemata
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user_guide/installation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Install
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Developer
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Developer
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developer_notes/documentation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Documentation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developer_notes/making_a_release/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Making a Release
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developer_notes/modules/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Modules
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developer_notes/testing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Testing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developer_notes/contributing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Contributing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developer_notes/style/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Style
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developer_notes/github/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Github
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developer_notes/design/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Design
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developer_notes/music21/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Music21
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#input" class="md-nav__link">
    <span class="md-ellipsis">
      
        Input
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.io.readscore" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;readscore
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#output" class="md-nav__link">
    <span class="md-ellipsis">
      
        Output
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.io.writescore" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;writescore
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#piano-roll-display" class="md-nav__link">
    <span class="md-ellipsis">
      
        Piano Roll Display
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.io.pianoroll" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;pianoroll
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#low-level-input-functions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Low-Level Input Functions
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.io.m21_midi_import.music21_midi_import" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;music21_midi_import
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.io.pm_midi_import.pretty_midi_midi_import" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;pretty_midi_midi_import
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.io.m21_xml_import.music21_xml_import" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;music21_xml_import
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.io.pt_xml_import.partitura_xml_import" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;partitura_xml_import
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#low-level-output-functions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Low-Level Output Functions
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.io.m21_midi_export.music21_midi_export" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;music21_midi_export
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.io.pm_midi_export.pretty_midi_midi_export" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;pretty_midi_midi_export
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.io.m21_xml_export.music21_xml_export" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;music21_xml_export
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.io.pt_xml_export.partitura_xml_export" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;partitura_xml_export
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#built-in-scores" class="md-nav__link">
    <span class="md-ellipsis">
      
        Built-In Scores
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.music.example" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;example
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  



  <h1>Input and Output</h1>

<h2 id="input">Input<a class="headerlink" href="#input" title="Permanent link">&para;</a></h2>
<p>The main function for input is <a href="#amads.io.readscore.read_score">readscore.read_score</a> described below.
It calls upon various file readers to read Standard MIDI Files and Music XML files.
Much of the work is done by various subsystems including Music21, Partitura, and
pretty_midi. Use <code>read_score</code> to get the recommended implementation automatically.</p>


<div class="doc doc-object doc-module">



<h2 id="amads.io.readscore" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>            <span class="doc doc-object-name doc-module-name">readscore</span>


<a href="#amads.io.readscore" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents first">

        <p>Functions for music data input.</p>












<p><span class="doc-section-title">Functions:</span></p>
    <ul>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="            set_preferred_midi_reader (amads.io.readscore.set_preferred_midi_reader)" href="#amads.io.readscore.set_preferred_midi_reader">set_preferred_midi_reader</a></code></b>
            –
            <div class="doc-md-description">
              <p>Set a (new) preferred MIDI reader.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="            set_preferred_xml_reader (amads.io.readscore.set_preferred_xml_reader)" href="#amads.io.readscore.set_preferred_xml_reader">set_preferred_xml_reader</a></code></b>
            –
            <div class="doc-md-description">
              <p>Set a (new) preferred XML reader.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="            set_reader_warning_level (amads.io.readscore.set_reader_warning_level)" href="#amads.io.readscore.set_reader_warning_level">set_reader_warning_level</a></code></b>
            –
            <div class="doc-md-description">
              <p>Set the warning level for <code>readscore</code> functions.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="            import_xml (amads.io.readscore.import_xml)" href="#amads.io.readscore.import_xml">import_xml</a></code></b>
            –
            <div class="doc-md-description">
              <p>Use Partitura or music21 to import a MusicXML file.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="            import_midi (amads.io.readscore.import_midi)" href="#amads.io.readscore.import_midi">import_midi</a></code></b>
            –
            <div class="doc-md-description">
              <p>Use music21 or pretty_midi to import a Standard MIDI file.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="            read_score (amads.io.readscore.read_score)" href="#amads.io.readscore.read_score">read_score</a></code></b>
            –
            <div class="doc-md-description">
              <p>Read a file with the given format, <code>'xml'</code>, <code>'midi'</code>, <code>'kern'</code>, <code>'mei'</code>.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="            last_used_reader (amads.io.readscore.last_used_reader)" href="#amads.io.readscore.last_used_reader">last_used_reader</a></code></b>
            –
            <div class="doc-md-description">
              <p>Return the name of the last used reader function.</p>
            </div>
          </li>
    </ul>





<div class="doc doc-children">








<h3 id="amads.io.readscore-functions">Functions<a href="#amads.io.readscore-functions" class="headerlink" title="Permanent link">&para;</a></h3>

<div class="doc doc-object doc-function">


<h4 id="amads.io.readscore.set_preferred_midi_reader" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>            <span class="doc doc-object-name doc-function-name">set_preferred_midi_reader</span>


<a href="#amads.io.readscore.set_preferred_midi_reader" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">set_preferred_midi_reader</span><span class="p">(</span><span class="n"><a class="autorefs autorefs-internal" title="reader (amads.io.readscore.set_preferred_midi_reader(reader))" href="#amads.io.readscore.set_preferred_midi_reader(reader)">reader</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Set a (new) preferred MIDI reader.</p>
<p>Returns the previous reader preference. The current preference is stored
in <code>amads.io.reader.preferred_midi_reader</code>.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
<h5 id="amads.io.readscore.set_preferred_midi_reader(reader)" class="doc doc-heading doc-heading-parameter">              <b><code>reader</code></b>
<a href="#amads.io.readscore.set_preferred_midi_reader(reader)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></code>)
          –
          <div class="doc-md-description">
            <p>The name of the preferred MIDI reader. Can be "music21" or "pretty_midi".</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></code>
          –
          <div class="doc-md-description">
            <p>The previous name of the preferred MIDI reader.</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Raises:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/exceptions.html#ValueError">ValueError</a></code>
            –
          <div class="doc-md-description">
            <p>If an invalid reader is provided.</p>
          </div>
        </li>
    </ul>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>amads/io/readscore.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set_preferred_midi_reader</span><span class="p">(</span><span class="n">reader</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Set a (new) preferred MIDI reader.</span>

<span class="sd">    Returns the previous reader preference. The current preference is stored</span>
<span class="sd">    in `amads.io.reader.preferred_midi_reader`.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    reader : str</span>
<span class="sd">        The name of the preferred MIDI reader. Can be &quot;music21&quot; or &quot;pretty_midi&quot;.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    str</span>
<span class="sd">        The previous name of the preferred MIDI reader.</span>

<span class="sd">    Raises</span>
<span class="sd">    ------</span>
<span class="sd">    ValueError</span>
<span class="sd">        If an invalid reader is provided.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">preferred_midi_reader</span>
    <span class="n">allowed</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;music21&quot;</span><span class="p">,</span> <span class="s2">&quot;pretty_midi&quot;</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">reader</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">allowed</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid MIDI reader. Must be one of </span><span class="si">{</span><span class="n">allowed</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="n">previous</span> <span class="o">=</span> <span class="n">preferred_midi_reader</span>
    <span class="n">preferred_midi_reader</span> <span class="o">=</span> <span class="n">reader</span>
    <span class="k">return</span> <span class="n">previous</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="amads.io.readscore.set_preferred_xml_reader" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>            <span class="doc doc-object-name doc-function-name">set_preferred_xml_reader</span>


<a href="#amads.io.readscore.set_preferred_xml_reader" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">set_preferred_xml_reader</span><span class="p">(</span><span class="n"><a class="autorefs autorefs-internal" title="reader (amads.io.readscore.set_preferred_xml_reader(reader))" href="#amads.io.readscore.set_preferred_xml_reader(reader)">reader</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Set a (new) preferred XML reader.</p>
<p>Returns the previous reader preference. The current preference is stored
in <code>amads.io.reader.preferred_xml_reader</code>.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
<h5 id="amads.io.readscore.set_preferred_xml_reader(reader)" class="doc doc-heading doc-heading-parameter">              <b><code>reader</code></b>
<a href="#amads.io.readscore.set_preferred_xml_reader(reader)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></code>)
          –
          <div class="doc-md-description">
            <p>The name of the preferred XML reader. Can be "music21" or "partitura".</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></code>
          –
          <div class="doc-md-description">
            <p>The previous name of the preferred XML reader.</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Raises:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/exceptions.html#ValueError">ValueError</a></code>
            –
          <div class="doc-md-description">
            <p>If an invalid reader is provided.</p>
          </div>
        </li>
    </ul>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>amads/io/readscore.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span>
<span class="normal">96</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set_preferred_xml_reader</span><span class="p">(</span><span class="n">reader</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Set a (new) preferred XML reader.</span>

<span class="sd">    Returns the previous reader preference. The current preference is stored</span>
<span class="sd">    in `amads.io.reader.preferred_xml_reader`.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    reader : str</span>
<span class="sd">        The name of the preferred XML reader. Can be &quot;music21&quot; or &quot;partitura&quot;.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    str</span>
<span class="sd">        The previous name of the preferred XML reader.</span>

<span class="sd">    Raises</span>
<span class="sd">    ------</span>
<span class="sd">    ValueError</span>
<span class="sd">        If an invalid reader is provided.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">preferred_xml_reader</span>
    <span class="n">allowed</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;music21&quot;</span><span class="p">,</span> <span class="s2">&quot;partitura&quot;</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">reader</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">allowed</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid XML reader. Must be one of </span><span class="si">{</span><span class="n">allowed</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="n">previous</span> <span class="o">=</span> <span class="n">preferred_xml_reader</span>
    <span class="n">preferred_xml_reader</span> <span class="o">=</span> <span class="n">reader</span>
    <span class="k">return</span> <span class="n">previous</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="amads.io.readscore.set_reader_warning_level" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>            <span class="doc doc-object-name doc-function-name">set_reader_warning_level</span>


<a href="#amads.io.readscore.set_reader_warning_level" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">set_reader_warning_level</span><span class="p">(</span><span class="n"><a class="autorefs autorefs-internal" title="level (amads.io.readscore.set_reader_warning_level(level))" href="#amads.io.readscore.set_reader_warning_level(level)">level</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Set the warning level for <code>readscore</code> functions.</p>
<p>The translation from music data files to AMADS is not always well-defined
and may involve intermediate representations using Music21, Partitura or
others. Usually, warnings are produced when there is possible data loss or
ambiguity, but these can be more annoying than informative. The warning
level can be controlled using this function, which applies to all file
formats.</p>
<p>The current warning level is stored in
<code>amads.io.reader.reader_warning_level</code>.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
<h5 id="amads.io.readscore.set_reader_warning_level(level)" class="doc doc-heading doc-heading-parameter">              <b><code>level</code></b>
<a href="#amads.io.readscore.set_reader_warning_level(level)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></code>)
          –
          <div class="doc-md-description">
            <p>The warning level to set.
Options are "none", "low", "default", "high".</p>
<ul>
<li>"none" will suppress all warnings during <code>read_score()</code>
  and also suppresses notice of reader subsystem and file name.</li>
<li>"low" will print one notice if there are any warnings.</li>
<li>"default" will obey environment settings to control warnings.</li>
<li>"high" will print all warnings during <code>read_score()</code>, overriding
    environment settings.</li>
</ul>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></code>
          –
          <div class="doc-md-description">
            <p>Previous warning level.</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Raises:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/exceptions.html#ValueError">ValueError</a></code>
            –
          <div class="doc-md-description">
            <p>If an invalid warning level is provided.</p>
          </div>
        </li>
    </ul>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>amads/io/readscore.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set_reader_warning_level</span><span class="p">(</span><span class="n">level</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Set the warning level for `readscore` functions.</span>

<span class="sd">    The translation from music data files to AMADS is not always well-defined</span>
<span class="sd">    and may involve intermediate representations using Music21, Partitura or</span>
<span class="sd">    others. Usually, warnings are produced when there is possible data loss or</span>
<span class="sd">    ambiguity, but these can be more annoying than informative. The warning</span>
<span class="sd">    level can be controlled using this function, which applies to all file</span>
<span class="sd">    formats.</span>

<span class="sd">    The current warning level is stored in</span>
<span class="sd">    `amads.io.reader.reader_warning_level`.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    level : str</span>
<span class="sd">        The warning level to set.</span>
<span class="sd">        Options are &quot;none&quot;, &quot;low&quot;, &quot;default&quot;, &quot;high&quot;.</span>

<span class="sd">        - &quot;none&quot; will suppress all warnings during `read_score()`</span>
<span class="sd">          and also suppresses notice of reader subsystem and file name.</span>
<span class="sd">        - &quot;low&quot; will print one notice if there are any warnings.</span>
<span class="sd">        - &quot;default&quot; will obey environment settings to control warnings.</span>
<span class="sd">        - &quot;high&quot; will print all warnings during `read_score()`, overriding</span>
<span class="sd">            environment settings.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    str</span>
<span class="sd">        Previous warning level.</span>

<span class="sd">    Raises</span>
<span class="sd">    ------</span>
<span class="sd">    ValueError</span>
<span class="sd">        If an invalid warning level is provided.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">reader_warning_level</span>
    <span class="n">allowed</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;none&quot;</span><span class="p">,</span> <span class="s2">&quot;low&quot;</span><span class="p">,</span> <span class="s2">&quot;default&quot;</span><span class="p">,</span> <span class="s2">&quot;high&quot;</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">level</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">allowed</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid warning level. Must be one of </span><span class="si">{</span><span class="n">allowed</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="n">previous</span> <span class="o">=</span> <span class="n">reader_warning_level</span>
    <span class="n">reader_warning_level</span> <span class="o">=</span> <span class="n">level</span>
    <span class="k">return</span> <span class="n">previous</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="amads.io.readscore.import_xml" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>            <span class="doc doc-object-name doc-function-name">import_xml</span>


<a href="#amads.io.readscore.import_xml" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">import_xml</span><span class="p">(</span>
    <span class="n"><span title="amads.io.readscore.import_xml(filename)">filename</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span><span class="p">,</span>
    <span class="n"><span title="amads.io.readscore.import_xml(flatten)">flatten</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n"><span title="amads.io.readscore.import_xml(collapse)">collapse</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n"><span title="amads.io.readscore.import_xml(show)">show</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n"><span title="amads.io.readscore.import_xml(group_by_instrument)">group_by_instrument</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-internal" title="            Score (amads.core.basics.Score)" href="../basics/#amads.core.basics.Score">Score</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Use Partitura or music21 to import a MusicXML file.</p>
<p>In Music21, the first measure may be a partial measure containing
an anacrusis (“pickup”). This is somewhat ambiguous and does not
translate well to MIDI which is less expressive than MusicXML.</p>
<p>Therefore, if the first measure read with Music21 is not a full
measure, a rest is inserted and the remainder is shifted to
form a full measure according to its time signature.</p>
<p><small><strong>Author</strong>: Roger B. Dannenberg</small></p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>amads/io/readscore.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">import_xml</span><span class="p">(</span>
    <span class="n">filename</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">flatten</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">collapse</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">show</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">group_by_instrument</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Score</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Use Partitura or music21 to import a MusicXML file.</span>

<span class="sd">    In Music21, the first measure may be a partial measure containing</span>
<span class="sd">    an anacrusis (“pickup”). This is somewhat ambiguous and does not</span>
<span class="sd">    translate well to MIDI which is less expressive than MusicXML.</span>

<span class="sd">    Therefore, if the first measure read with Music21 is not a full</span>
<span class="sd">    measure, a rest is inserted and the remainder is shifted to</span>
<span class="sd">    form a full measure according to its time signature.</span>

<span class="sd">    &lt;small&gt;**Author**: Roger B. Dannenberg&lt;/small&gt;</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">_last_used_reader</span>
    <span class="n">import_xml_fn</span> <span class="o">=</span> <span class="n">_check_for_subsystem</span><span class="p">(</span><span class="s2">&quot;xml&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">import_xml_fn</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">_last_used_reader</span> <span class="o">=</span> <span class="n">import_xml_fn</span>
        <span class="k">if</span> <span class="n">reader_warning_level</span> <span class="o">!=</span> <span class="s2">&quot;none&quot;</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Reading </span><span class="si">{</span><span class="n">filename</span><span class="si">}</span><span class="s2"> using MusicXML reader &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;file=</span><span class="si">{</span><span class="n">import_xml_fn</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">.&quot;</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="n">import_xml_fn</span><span class="p">(</span>
            <span class="n">filename</span><span class="p">,</span> <span class="n">flatten</span><span class="p">,</span> <span class="n">collapse</span><span class="p">,</span> <span class="n">show</span><span class="p">,</span> <span class="n">group_by_instrument</span>
        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
            <span class="s2">&quot;Could not find a MusicXML import function. &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;Preferred subsystem is </span><span class="si">{</span><span class="n">preferred_xml_reader</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="amads.io.readscore.import_midi" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>            <span class="doc doc-object-name doc-function-name">import_midi</span>


<a href="#amads.io.readscore.import_midi" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">import_midi</span><span class="p">(</span>
    <span class="n"><span title="amads.io.readscore.import_midi(filename)">filename</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span><span class="p">,</span>
    <span class="n"><span title="amads.io.readscore.import_midi(flatten)">flatten</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n"><span title="amads.io.readscore.import_midi(collapse)">collapse</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n"><span title="amads.io.readscore.import_midi(show)">show</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n"><span title="amads.io.readscore.import_midi(group_by_instrument)">group_by_instrument</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-internal" title="            Score (amads.core.basics.Score)" href="../basics/#amads.core.basics.Score">Score</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Use music21 or pretty_midi to import a Standard MIDI file.</p>
<p><small><strong>Author</strong>: Roger B. Dannenberg</small></p>


<details class="note" open>
  <summary>Notes</summary>
  <p>Each Standard MIDI File track corresponds to a Staff when
creating a full AMADS Score. Everything is combined into one
part when <code>flatten</code> and <code>collapse</code> are specified.</p>
<p>AMADS assumes that instruments (midi program numbers) are fixed
for each Staff (or Part in flat scores), and MIDI channels are
not represented. The use of program change messages within a
track to change the program are ignored, but may generate warnings.</p>
<p>In general, AMADS instrument name corresponds to the MIDI track
name, and MIDI program numbers are stored as <code>"midi_program"</code>
in the <code>info</code> attribute of the Staff or Part corresponding to
the track.</p>
<p>MIDI files do not have a Part/Staff structure, but you can
write multiple tracks with the same name. Both the <code>"music21"</code>
and <code>"pretty_midi"</code> readers will group tracks with matching
names as Staffs in a single Part. This may result in an
unexpected Part/Staff hierarchy if tracks are not named or
if tracks are named something like "Piano-Treble" and
"Piano-Bass", which would produce two Parts as different
instruments as opposed to one Part with two Staffs.</p>
<p>Unless <code>flatten</code> or <code>collapse</code>, the MIDI file time signature
information will be used to form Measures with Staffs, and
Notes will be broken where they cross measure boundaries and
then tied.  The default time signature is 4/4.</p>
</details>

<details class="pretty-midi-import-notes" open>
  <summary>Pretty MIDI Import Notes</summary>
  <p>If there is no program change in a file, the <code>"pretty_midi"</code>
reader will use 0, and 0 will be stored as <code>"midi_program"</code>
in the Part or Staff's <code>info</code> (see
<a class="autorefs autorefs-internal" title="            get" href="../basics/#amads.core.basics.Event.get">get</a> and
<a class="autorefs autorefs-internal" title="            set" href="../basics/#amads.core.basics.Event.set">set</a>).</p>
<p>If there is no track name, the <code>Part.instrument</code> is derived
from the track program number (defaults to zero).</p>
<p>If the MIDI file track name is <code>"Unknown"</code>, the <code>Part.instrument</code>
is set to None. This is because when the <code>"pretty_midi"</code> writer
writes a part where <code>Part.instrument is None</code>, the name <code>"Unknown"</code>
is used instead. Therefore, the reader will recreate the AMADS
Part where <code>Part.instrument is None</code>.</p>
<p>Pretty MIDI will not insert any KeySignature unless key signature
meta-events are found.</p>
</details>

<details class="music21-midi-import-notes" open>
  <summary>Music21 MIDI Import Notes</summary>
  <p>Music21 may infer a Clef and KeySignature even though MIDI
does not even have a meta-event for clefs, and even if the
MIDI file has no key signature meta-event.</p>
</details>

            <details class="mkdocstrings-source">
              <summary>Source code in <code>amads/io/readscore.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">import_midi</span><span class="p">(</span>
    <span class="n">filename</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">flatten</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">collapse</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">show</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">group_by_instrument</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Score</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Use music21 or pretty_midi to import a Standard MIDI file.</span>

<span class="sd">    &lt;small&gt;**Author**: Roger B. Dannenberg&lt;/small&gt;</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Each Standard MIDI File track corresponds to a Staff when</span>
<span class="sd">    creating a full AMADS Score. Everything is combined into one</span>
<span class="sd">    part when `flatten` and `collapse` are specified.</span>

<span class="sd">    AMADS assumes that instruments (midi program numbers) are fixed</span>
<span class="sd">    for each Staff (or Part in flat scores), and MIDI channels are</span>
<span class="sd">    not represented. The use of program change messages within a</span>
<span class="sd">    track to change the program are ignored, but may generate warnings.</span>

<span class="sd">    In general, AMADS instrument name corresponds to the MIDI track</span>
<span class="sd">    name, and MIDI program numbers are stored as `&quot;midi_program&quot;`</span>
<span class="sd">    in the `info` attribute of the Staff or Part corresponding to</span>
<span class="sd">    the track.</span>

<span class="sd">    MIDI files do not have a Part/Staff structure, but you can</span>
<span class="sd">    write multiple tracks with the same name. Both the `&quot;music21&quot;`</span>
<span class="sd">    and `&quot;pretty_midi&quot;` readers will group tracks with matching</span>
<span class="sd">    names as Staffs in a single Part. This may result in an</span>
<span class="sd">    unexpected Part/Staff hierarchy if tracks are not named or</span>
<span class="sd">    if tracks are named something like &quot;Piano-Treble&quot; and</span>
<span class="sd">    &quot;Piano-Bass&quot;, which would produce two Parts as different</span>
<span class="sd">    instruments as opposed to one Part with two Staffs.</span>

<span class="sd">    Unless `flatten` or `collapse`, the MIDI file time signature</span>
<span class="sd">    information will be used to form Measures with Staffs, and</span>
<span class="sd">    Notes will be broken where they cross measure boundaries and</span>
<span class="sd">    then tied.  The default time signature is 4/4.</span>

<span class="sd">    Pretty MIDI Import Notes</span>
<span class="sd">    ------------------------</span>
<span class="sd">    If there is no program change in a file, the `&quot;pretty_midi&quot;`</span>
<span class="sd">    reader will use 0, and 0 will be stored as `&quot;midi_program&quot;`</span>
<span class="sd">    in the Part or Staff&#39;s `info` (see</span>
<span class="sd">    [get][amads.core.basics.Event.get] and</span>
<span class="sd">    [set][amads.core.basics.Event.set]).</span>

<span class="sd">    If there is no track name, the `Part.instrument` is derived</span>
<span class="sd">    from the track program number (defaults to zero).</span>

<span class="sd">    If the MIDI file track name is `&quot;Unknown&quot;`, the `Part.instrument`</span>
<span class="sd">    is set to None. This is because when the `&quot;pretty_midi&quot;` writer</span>
<span class="sd">    writes a part where `Part.instrument is None`, the name `&quot;Unknown&quot;`</span>
<span class="sd">    is used instead. Therefore, the reader will recreate the AMADS</span>
<span class="sd">    Part where `Part.instrument is None`.</span>

<span class="sd">    Pretty MIDI will not insert any KeySignature unless key signature</span>
<span class="sd">    meta-events are found.</span>

<span class="sd">    Music21 MIDI Import Notes</span>
<span class="sd">    -------------------------</span>
<span class="sd">    Music21 may infer a Clef and KeySignature even though MIDI</span>
<span class="sd">    does not even have a meta-event for clefs, and even if the</span>
<span class="sd">    MIDI file has no key signature meta-event.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">_last_used_reader</span>
    <span class="n">import_midi_fn</span> <span class="o">=</span> <span class="n">_check_for_subsystem</span><span class="p">(</span><span class="s2">&quot;midi&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">import_midi_fn</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">_last_used_reader</span> <span class="o">=</span> <span class="n">import_midi_fn</span>
        <span class="k">if</span> <span class="n">reader_warning_level</span> <span class="o">!=</span> <span class="s2">&quot;none&quot;</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Reading </span><span class="si">{</span><span class="n">filename</span><span class="si">}</span><span class="s2"> using MIDI reader &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">import_midi_fn</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">.&quot;</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="n">import_midi_fn</span><span class="p">(</span>
            <span class="n">filename</span><span class="p">,</span> <span class="n">flatten</span><span class="p">,</span> <span class="n">collapse</span><span class="p">,</span> <span class="n">show</span><span class="p">,</span> <span class="n">group_by_instrument</span>
        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
            <span class="s2">&quot;Could not find a MIDI file import function. &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;Preferred subsystem is </span><span class="si">{</span><span class="n">preferred_midi_reader</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="amads.io.readscore.read_score" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>            <span class="doc doc-object-name doc-function-name">read_score</span>


<a href="#amads.io.readscore.read_score" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">read_score</span><span class="p">(</span>
    <span class="n"><a class="autorefs autorefs-internal" title="filename (amads.io.readscore.read_score(filename))" href="#amads.io.readscore.read_score(filename)">filename</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="flatten (amads.io.readscore.read_score(flatten))" href="#amads.io.readscore.read_score(flatten)">flatten</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="collapse (amads.io.readscore.read_score(collapse))" href="#amads.io.readscore.read_score(collapse)">collapse</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="show (amads.io.readscore.read_score(show))" href="#amads.io.readscore.read_score(show)">show</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="format (amads.io.readscore.read_score(format))" href="#amads.io.readscore.read_score(format)">format</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="group_by_instrument (amads.io.readscore.read_score(group_by_instrument))" href="#amads.io.readscore.read_score(group_by_instrument)">group_by_instrument</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-internal" title="            Score (amads.core.basics.Score)" href="../basics/#amads.core.basics.Score">Score</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Read a file with the given format, <code>'xml'</code>, <code>'midi'</code>, <code>'kern'</code>, <code>'mei'</code>.</p>
<p>If format is None (default), the format is based on the filename
extension, which can be <code>'xml'</code>, <code>'mid'</code>, <code>'midi'</code>, <code>'smf'</code>, <code>'kern'</code>,
or <code>'mei'</code>. (Valid extensions are in
<code>amads.io.readscore.valid_score_extensions</code>.)</p>
<p><small><strong>Author</strong>: Roger B. Dannenberg</small></p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
<h5 id="amads.io.readscore.read_score(filename)" class="doc doc-heading doc-heading-parameter">              <b><code>filename</code></b>
<a href="#amads.io.readscore.read_score(filename)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></code>)
          –
          <div class="doc-md-description">
            <p>The path (relative or absolute) to the music file.
Can also be an URL.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h5 id="amads.io.readscore.read_score(flatten)" class="doc doc-heading doc-heading-parameter">              <b><code>flatten</code></b>
<a href="#amads.io.readscore.read_score(flatten)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>, default:
                  <code>False</code>
)
          –
          <div class="doc-md-description">
            <p>The returned score will be flat (Score, Parts, Notes).</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h5 id="amads.io.readscore.read_score(collapse)" class="doc doc-heading doc-heading-parameter">              <b><code>collapse</code></b>
<a href="#amads.io.readscore.read_score(collapse)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>, default:
                  <code>False</code>
)
          –
          <div class="doc-md-description">
            <p>If collapse and flatten, the parts will be merged into one.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h5 id="amads.io.readscore.read_score(show)" class="doc doc-heading doc-heading-parameter">              <b><code>show</code></b>
<a href="#amads.io.readscore.read_score(show)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>, default:
                  <code>False</code>
)
          –
          <div class="doc-md-description">
            <p>Print a text representation of the data.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h5 id="amads.io.readscore.read_score(format)" class="doc doc-heading doc-heading-parameter">              <b><code>format</code></b>
<a href="#amads.io.readscore.read_score(format)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a> | None</code>, default:
                  <code>None</code>
)
          –
          <div class="doc-md-description">
            <p>One from among limited standard options (e.g.,
<code>'xml'</code>, <code>'midi'</code>, <code>'kern'</code>, <code>'mei'</code>)</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h5 id="amads.io.readscore.read_score(group_by_instrument)" class="doc doc-heading doc-heading-parameter">              <b><code>group_by_instrument</code></b>
<a href="#amads.io.readscore.read_score(group_by_instrument)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>, default:
                  <code>True</code>
)
          –
          <div class="doc-md-description">
            <p>If True (default), when the underlying reader (e.g. for "pretty_midi",
"music21" or "partitura") reads Parts with the same instrument, their
content will be grouped into a single part. This means that if
<code>flatten</code>, then parts with the same instrument will be merged into a
single part. If <code>flatten</code> is False, then the staffs of parts with the
same instrument will be grouped within a single part.
If <code>group_by_instrument</code> is False, the parts read in by the underlying
reader will be preserved as separate parts. <code>group_by_instrument</code> is
True by default so that when reading Piano scores with separate treble
and bass staffs, the resulting AMADS Score will generally have a single
Piano part with two staffs. A score for Piano and Violin will generally
have two parts, one for Piano and one for Violin, as opposed to three
parts (Piano-Treble, Piano-Bass, Violin). On the other hand, a score for
two Violins might be represented a one part with two staffs by default,
but setting <code>group_by_instrument</code> to False will more likely keep the
two Violin parts separate. Unfortunately, exact behavior depends on the
underlying reader, MIDI track names, and/or MusicXML structure and
naming.</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><a class="autorefs autorefs-internal" title="            Score (amads.core.basics.Score)" href="../basics/#amads.core.basics.Score">Score</a></code>
          –
          <div class="doc-md-description">
            <p>The imported score</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Raises:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/exceptions.html#ValueError">ValueError</a></code>
            –
          <div class="doc-md-description">
            <p>If the format is unknown or not implemented.</p>
          </div>
        </li>
    </ul>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>amads/io/readscore.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">read_score</span><span class="p">(</span>
    <span class="n">filename</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">flatten</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">collapse</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">show</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="nb">format</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">group_by_instrument</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Score</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Read a file with the given format, `&#39;xml&#39;`, `&#39;midi&#39;`, `&#39;kern&#39;`, `&#39;mei&#39;`.</span>

<span class="sd">    If format is None (default), the format is based on the filename</span>
<span class="sd">    extension, which can be `&#39;xml&#39;`, `&#39;mid&#39;`, `&#39;midi&#39;`, `&#39;smf&#39;`, `&#39;kern&#39;`,</span>
<span class="sd">    or `&#39;mei&#39;`. (Valid extensions are in</span>
<span class="sd">    `amads.io.readscore.valid_score_extensions`.)</span>

<span class="sd">    &lt;small&gt;**Author**: Roger B. Dannenberg&lt;/small&gt;</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    filename : str</span>
<span class="sd">        The path (relative or absolute) to the music file.</span>
<span class="sd">        Can also be an URL.</span>
<span class="sd">    flatten : bool</span>
<span class="sd">        The returned score will be flat (Score, Parts, Notes).</span>
<span class="sd">    collapse: bool</span>
<span class="sd">        If collapse and flatten, the parts will be merged into one.</span>
<span class="sd">    show : bool</span>
<span class="sd">        Print a text representation of the data.</span>
<span class="sd">    format: string</span>
<span class="sd">        One from among limited standard options (e.g.,</span>
<span class="sd">        `&#39;xml&#39;`, `&#39;midi&#39;`, `&#39;kern&#39;`, `&#39;mei&#39;`)</span>
<span class="sd">    group_by_instrument : bool</span>
<span class="sd">        If True (default), when the underlying reader (e.g. for &quot;pretty_midi&quot;,</span>
<span class="sd">        &quot;music21&quot; or &quot;partitura&quot;) reads Parts with the same instrument, their</span>
<span class="sd">        content will be grouped into a single part. This means that if</span>
<span class="sd">        `flatten`, then parts with the same instrument will be merged into a</span>
<span class="sd">        single part. If `flatten` is False, then the staffs of parts with the</span>
<span class="sd">        same instrument will be grouped within a single part.</span>
<span class="sd">        If `group_by_instrument` is False, the parts read in by the underlying</span>
<span class="sd">        reader will be preserved as separate parts. `group_by_instrument` is</span>
<span class="sd">        True by default so that when reading Piano scores with separate treble</span>
<span class="sd">        and bass staffs, the resulting AMADS Score will generally have a single</span>
<span class="sd">        Piano part with two staffs. A score for Piano and Violin will generally</span>
<span class="sd">        have two parts, one for Piano and one for Violin, as opposed to three</span>
<span class="sd">        parts (Piano-Treble, Piano-Bass, Violin). On the other hand, a score for</span>
<span class="sd">        two Violins might be represented a one part with two staffs by default,</span>
<span class="sd">        but setting `group_by_instrument` to False will more likely keep the</span>
<span class="sd">        two Violin parts separate. Unfortunately, exact behavior depends on the</span>
<span class="sd">        underlying reader, MIDI track names, and/or MusicXML structure and</span>
<span class="sd">        naming.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    Score</span>
<span class="sd">        The imported score</span>

<span class="sd">    Raises</span>
<span class="sd">    ------</span>
<span class="sd">    ValueError</span>
<span class="sd">        If the format is unknown or not implemented.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">filename</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;http&quot;</span><span class="p">)</span> <span class="ow">or</span> <span class="s2">&quot;://&quot;</span> <span class="ow">in</span> <span class="n">filename</span><span class="p">:</span>
        <span class="k">with</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">NamedTemporaryFile</span><span class="p">(</span>
            <span class="n">suffix</span><span class="o">=</span><span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span><span class="o">.</span><span class="n">suffix</span> <span class="ow">or</span> <span class="s2">&quot;.tmp&quot;</span><span class="p">,</span> <span class="n">delete</span><span class="o">=</span><span class="kc">False</span>
        <span class="p">)</span> <span class="k">as</span> <span class="n">tmp_file</span><span class="p">:</span>
            <span class="n">urllib</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">urlretrieve</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">tmp_file</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
            <span class="n">filename</span> <span class="o">=</span> <span class="n">tmp_file</span><span class="o">.</span><span class="n">name</span>

    <span class="k">if</span> <span class="nb">format</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">ext</span> <span class="o">=</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span><span class="o">.</span><span class="n">suffix</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">ext</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;.xml&quot;</span><span class="p">,</span> <span class="s2">&quot;.musicxml&quot;</span><span class="p">,</span> <span class="s2">&quot;.mxl&quot;</span><span class="p">]:</span>
            <span class="nb">format</span> <span class="o">=</span> <span class="s2">&quot;xml&quot;</span>
        <span class="k">elif</span> <span class="n">ext</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;.mid&quot;</span><span class="p">,</span> <span class="s2">&quot;.midi&quot;</span><span class="p">,</span> <span class="s2">&quot;.smf&quot;</span><span class="p">]:</span>
            <span class="nb">format</span> <span class="o">=</span> <span class="s2">&quot;midi&quot;</span>
        <span class="k">elif</span> <span class="n">ext</span> <span class="o">==</span> <span class="s2">&quot;.kern&quot;</span><span class="p">:</span>
            <span class="nb">format</span> <span class="o">=</span> <span class="s2">&quot;kern&quot;</span>
        <span class="k">elif</span> <span class="n">ext</span> <span class="o">==</span> <span class="s2">&quot;.mei&quot;</span><span class="p">:</span>
            <span class="nb">format</span> <span class="o">=</span> <span class="s2">&quot;mei&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Unsupported file extension: </span><span class="si">{</span><span class="n">ext</span><span class="si">}</span><span class="s2">. &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;Valid extensions: </span><span class="si">{</span><span class="n">valid_score_extensions</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>

    <span class="c1"># File format handling</span>
    <span class="k">with</span> <span class="n">warnings</span><span class="o">.</span><span class="n">catch_warnings</span><span class="p">(</span><span class="n">record</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="k">as</span> <span class="n">w</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">reader_warning_level</span> <span class="o">==</span> <span class="s2">&quot;none&quot;</span><span class="p">:</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">simplefilter</span><span class="p">(</span><span class="s2">&quot;ignore&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">simplefilter</span><span class="p">(</span><span class="s2">&quot;always&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">format</span> <span class="o">==</span> <span class="s2">&quot;xml&quot;</span><span class="p">:</span>
            <span class="n">score</span> <span class="o">=</span> <span class="n">import_xml</span><span class="p">(</span>
                <span class="n">filename</span><span class="p">,</span>
                <span class="n">flatten</span><span class="p">,</span>
                <span class="n">collapse</span><span class="p">,</span>
                <span class="n">show</span><span class="p">,</span>
                <span class="n">group_by_instrument</span><span class="o">=</span><span class="n">group_by_instrument</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">elif</span> <span class="nb">format</span> <span class="o">==</span> <span class="s2">&quot;midi&quot;</span><span class="p">:</span>
            <span class="n">score</span> <span class="o">=</span> <span class="n">import_midi</span><span class="p">(</span>
                <span class="n">filename</span><span class="p">,</span>
                <span class="n">flatten</span><span class="p">,</span>
                <span class="n">collapse</span><span class="p">,</span>
                <span class="n">show</span><span class="p">,</span>
                <span class="n">group_by_instrument</span><span class="o">=</span><span class="n">group_by_instrument</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">elif</span> <span class="nb">format</span> <span class="o">==</span> <span class="s2">&quot;kern&quot;</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;Kern format input not implemented yet. &quot;</span>
                <span class="s2">&quot;Consider using the `kernr` package.&quot;</span>
            <span class="p">)</span>
        <span class="k">elif</span> <span class="nb">format</span> <span class="o">==</span> <span class="s2">&quot;mei&quot;</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;MEI format input not implemented yet. &quot;</span>
                <span class="s2">&quot;Consider using the `mei` package.&quot;</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="nb">format</span><span class="si">}</span><span class="s2"> format specification is unknown&quot;</span><span class="p">)</span>

        <span class="c1"># Warning handling</span>
        <span class="k">if</span> <span class="n">reader_warning_level</span> <span class="o">==</span> <span class="s2">&quot;low&quot;</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">w</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Warning: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">w</span><span class="p">)</span><span class="si">}</span><span class="s2"> warnings were generated in &quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;read_score(</span><span class="si">{</span><span class="n">filename</span><span class="si">}</span><span class="s2">).</span><span class="se">\n</span><span class="s2">&quot;</span>
                    <span class="s2">&quot;  Use amads.io.readscore.set_reader_warning_level() &quot;</span>
                    <span class="s2">&quot;for more details.&quot;</span>
                <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>  <span class="c1"># &quot;none&quot;, &quot;default&quot;, or &quot;high&quot;</span>
            <span class="k">for</span> <span class="n">warning</span> <span class="ow">in</span> <span class="n">w</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">warning</span><span class="o">.</span><span class="n">filename</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">warning</span><span class="o">.</span><span class="n">lineno</span><span class="si">}</span><span class="s2">: &quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">warning</span><span class="o">.</span><span class="n">category</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">warning</span><span class="o">.</span><span class="n">message</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>

        <span class="k">return</span> <span class="n">score</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="amads.io.readscore.last_used_reader" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>            <span class="doc doc-object-name doc-function-name">last_used_reader</span>


<a href="#amads.io.readscore.last_used_reader" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">last_used_reader</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span> <span class="o">|</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Return the name of the last used reader function.</p>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a> | None</code>
          –
          <div class="doc-md-description">
            <p>The name of the actual function used in the last call to <code>read_score</code>,
or None if no reader has been used yet.</p>
          </div>
        </li>
    </ul>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>amads/io/readscore.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">last_used_reader</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return the name of the last used reader function.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    Optional[str]</span>
<span class="sd">        The name of the actual function used in the last call to `read_score`,</span>
<span class="sd">        or None if no reader has been used yet.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">_last_used_reader</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">_last_used_reader</span><span class="o">.</span><span class="vm">__name__</span>
    <span class="k">return</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div><h2 id="output">Output<a class="headerlink" href="#output" title="Permanent link">&para;</a></h2>
<p>Similar to input functions, you should use
<a href="#amads.io.writescore.write_score">writescore.write_score</a> described
below to write an AMADS Score to a file. </p>


<div class="doc doc-object doc-module">



<h2 id="amads.io.writescore" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>            <span class="doc doc-object-name doc-module-name">writescore</span>


<a href="#amads.io.writescore" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents first">

        <p>functions for file output</p>












<p><span class="doc-section-title">Functions:</span></p>
    <ul>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="            set_preferred_midi_writer (amads.io.writescore.set_preferred_midi_writer)" href="#amads.io.writescore.set_preferred_midi_writer">set_preferred_midi_writer</a></code></b>
            –
            <div class="doc-md-description">
              <p>Set a (new) preferred MIDI writer.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="            set_preferred_xml_writer (amads.io.writescore.set_preferred_xml_writer)" href="#amads.io.writescore.set_preferred_xml_writer">set_preferred_xml_writer</a></code></b>
            –
            <div class="doc-md-description">
              <p>Set a (new) preferred XML writer.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="            set_writer_warning_level (amads.io.writescore.set_writer_warning_level)" href="#amads.io.writescore.set_writer_warning_level">set_writer_warning_level</a></code></b>
            –
            <div class="doc-md-description">
              <p>Set the warning level for writescore functions.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="            export_xml (amads.io.writescore.export_xml)" href="#amads.io.writescore.export_xml">export_xml</a></code></b>
            –
            <div class="doc-md-description">
              <p>Use Partitura or music21 to export a MusicXML file.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="            export_midi (amads.io.writescore.export_midi)" href="#amads.io.writescore.export_midi">export_midi</a></code></b>
            –
            <div class="doc-md-description">
              <p>Use music21 or pretty_midi to export a Standard MIDI file.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="            write_score (amads.io.writescore.write_score)" href="#amads.io.writescore.write_score">write_score</a></code></b>
            –
            <div class="doc-md-description">
              <p>Write a file with the given format, <code>'xml'</code>, <code>'midi'</code>, <code>'kern'</code>, <code>'mei'</code>.</p>
            </div>
          </li>
    </ul>





<div class="doc doc-children">








<h3 id="amads.io.writescore-functions">Functions<a href="#amads.io.writescore-functions" class="headerlink" title="Permanent link">&para;</a></h3>

<div class="doc doc-object doc-function">


<h4 id="amads.io.writescore.set_preferred_midi_writer" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>            <span class="doc doc-object-name doc-function-name">set_preferred_midi_writer</span>


<a href="#amads.io.writescore.set_preferred_midi_writer" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">set_preferred_midi_writer</span><span class="p">(</span><span class="n"><a class="autorefs autorefs-internal" title="writer (amads.io.writescore.set_preferred_midi_writer(writer))" href="#amads.io.writescore.set_preferred_midi_writer(writer)">writer</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Set a (new) preferred MIDI writer.</p>
<p>Returns the previous writer preference. The current preference is stored
in <code>amads.io.writer.preferred_midi_writer</code>.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
<h5 id="amads.io.writescore.set_preferred_midi_writer(writer)" class="doc doc-heading doc-heading-parameter">              <b><code>writer</code></b>
<a href="#amads.io.writescore.set_preferred_midi_writer(writer)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></code>)
          –
          <div class="doc-md-description">
            <p>The name of the preferred MIDI writer. Can be "music21" or "pretty_midi".</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></code>
          –
          <div class="doc-md-description">
            <p>The previous name of the preferred MIDI writer.</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Raises:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/exceptions.html#ValueError">ValueError</a></code>
            –
          <div class="doc-md-description">
            <p>If an invalid writer is provided.</p>
          </div>
        </li>
    </ul>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>amads/io/writescore.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set_preferred_midi_writer</span><span class="p">(</span><span class="n">writer</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Set a (new) preferred MIDI writer.</span>

<span class="sd">    Returns the previous writer preference. The current preference is stored</span>
<span class="sd">    in `amads.io.writer.preferred_midi_writer`.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    writer : str</span>
<span class="sd">        The name of the preferred MIDI writer. Can be &quot;music21&quot; or &quot;pretty_midi&quot;.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    str</span>
<span class="sd">        The previous name of the preferred MIDI writer.</span>

<span class="sd">    Raises</span>
<span class="sd">    ------</span>
<span class="sd">    ValueError</span>
<span class="sd">        If an invalid writer is provided.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">preferred_midi_writer</span>
    <span class="n">previous_writer</span> <span class="o">=</span> <span class="n">preferred_midi_writer</span>
    <span class="k">if</span> <span class="n">writer</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;music21&quot;</span><span class="p">,</span> <span class="s2">&quot;partitura&quot;</span><span class="p">,</span> <span class="s2">&quot;pretty_midi&quot;</span><span class="p">]:</span>
        <span class="n">preferred_midi_writer</span> <span class="o">=</span> <span class="n">writer</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="s2">&quot;Invalid MIDI writer. Choose &#39;music21&#39;, &#39;partitura&#39;, or &quot;</span>
            <span class="s2">&quot;&#39;pretty_midi&#39;.&quot;</span>
        <span class="p">)</span>
    <span class="k">return</span> <span class="n">previous_writer</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="amads.io.writescore.set_preferred_xml_writer" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>            <span class="doc doc-object-name doc-function-name">set_preferred_xml_writer</span>


<a href="#amads.io.writescore.set_preferred_xml_writer" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">set_preferred_xml_writer</span><span class="p">(</span><span class="n"><a class="autorefs autorefs-internal" title="writer (amads.io.writescore.set_preferred_xml_writer(writer))" href="#amads.io.writescore.set_preferred_xml_writer(writer)">writer</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Set a (new) preferred XML writer.</p>
<p>Returns the previous writer preference. The current preference is stored
in <code>amads.io.writer.preferred_xml_writer</code>.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
<h5 id="amads.io.writescore.set_preferred_xml_writer(writer)" class="doc doc-heading doc-heading-parameter">              <b><code>writer</code></b>
<a href="#amads.io.writescore.set_preferred_xml_writer(writer)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></code>)
          –
          <div class="doc-md-description">
            <p>The name of the preferred XML writer. Can be "music21" or "partitura".</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></code>
          –
          <div class="doc-md-description">
            <p>The previous name of the preferred XML writer.</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Raises:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/exceptions.html#ValueError">ValueError</a></code>
            –
          <div class="doc-md-description">
            <p>If an invalid writer is provided.</p>
          </div>
        </li>
    </ul>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>amads/io/writescore.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set_preferred_xml_writer</span><span class="p">(</span><span class="n">writer</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Set a (new) preferred XML writer.</span>

<span class="sd">    Returns the previous writer preference. The current preference is stored</span>
<span class="sd">    in `amads.io.writer.preferred_xml_writer`.</span>


<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    writer : str</span>
<span class="sd">        The name of the preferred XML writer. Can be &quot;music21&quot; or &quot;partitura&quot;.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    str</span>
<span class="sd">        The previous name of the preferred XML writer.</span>

<span class="sd">    Raises</span>
<span class="sd">    ------</span>
<span class="sd">    ValueError</span>
<span class="sd">        If an invalid writer is provided.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">preferred_xml_writer</span>
    <span class="n">previous_writer</span> <span class="o">=</span> <span class="n">preferred_xml_writer</span>
    <span class="k">if</span> <span class="n">writer</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;music21&quot;</span><span class="p">,</span> <span class="s2">&quot;partitura&quot;</span><span class="p">]:</span>
        <span class="n">preferred_xml_writer</span> <span class="o">=</span> <span class="n">writer</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Invalid XML writer. Choose &#39;music21&#39; or &#39;partitura&#39;.&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">previous_writer</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="amads.io.writescore.set_writer_warning_level" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>            <span class="doc doc-object-name doc-function-name">set_writer_warning_level</span>


<a href="#amads.io.writescore.set_writer_warning_level" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">set_writer_warning_level</span><span class="p">(</span><span class="n"><a class="autorefs autorefs-internal" title="level (amads.io.writescore.set_writer_warning_level(level))" href="#amads.io.writescore.set_writer_warning_level(level)">level</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Set the warning level for writescore functions.</p>
<p>The translation from AMADS to music data files is not always well-defined
and may involve intermediate representations using Music21, Partitura or
others. Usually, warnings are produced when there is possible data loss or
ambiguity, but these can be more annoying than informative. The warning
level can be controlled using this function, which applies to all file
formats.</p>
<p>The current warning level is stored in
<code>amads.io.writer.writer_warning_level</code>.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
<h5 id="amads.io.writescore.set_writer_warning_level(level)" class="doc doc-heading doc-heading-parameter">              <b><code>level</code></b>
<a href="#amads.io.writescore.set_writer_warning_level(level)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></code>)
          –
          <div class="doc-md-description">
            <p>The warning level to set. Can be "none", "low", "default", "high".</p>
<ul>
<li>"none" - will suppress all warnings during write_score().</li>
<li>"low" - will show print one notice if there are any warnings.</li>
<li>"default" - will obey environment settings to control warnings.</li>
<li>"high" - will print all warnings during write_score(), overriding
    environment settings.</li>
</ul>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></code>
          –
          <div class="doc-md-description">
            <p>Previous warning level.</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Raises:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/exceptions.html#ValueError">ValueError</a></code>
            –
          <div class="doc-md-description">
            <p>If an invalid warning level is provided.</p>
          </div>
        </li>
    </ul>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>amads/io/writescore.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set_writer_warning_level</span><span class="p">(</span><span class="n">level</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Set the warning level for writescore functions.</span>

<span class="sd">    The translation from AMADS to music data files is not always well-defined</span>
<span class="sd">    and may involve intermediate representations using Music21, Partitura or</span>
<span class="sd">    others. Usually, warnings are produced when there is possible data loss or</span>
<span class="sd">    ambiguity, but these can be more annoying than informative. The warning</span>
<span class="sd">    level can be controlled using this function, which applies to all file</span>
<span class="sd">    formats.</span>

<span class="sd">    The current warning level is stored in</span>
<span class="sd">    `amads.io.writer.writer_warning_level`.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    level : str</span>
<span class="sd">        The warning level to set. Can be &quot;none&quot;, &quot;low&quot;, &quot;default&quot;, &quot;high&quot;.</span>

<span class="sd">        - &quot;none&quot; - will suppress all warnings during write_score().</span>
<span class="sd">        - &quot;low&quot; - will show print one notice if there are any warnings.</span>
<span class="sd">        - &quot;default&quot; - will obey environment settings to control warnings.</span>
<span class="sd">        - &quot;high&quot; - will print all warnings during write_score(), overriding</span>
<span class="sd">            environment settings.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    str</span>
<span class="sd">        Previous warning level.</span>

<span class="sd">    Raises</span>
<span class="sd">    -------</span>
<span class="sd">    ValueError</span>
<span class="sd">        If an invalid warning level is provided.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">writer_warning_level</span>
    <span class="n">previous_level</span> <span class="o">=</span> <span class="n">writer_warning_level</span>
    <span class="k">if</span> <span class="n">level</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;none&quot;</span><span class="p">,</span> <span class="s2">&quot;low&quot;</span><span class="p">,</span> <span class="s2">&quot;default&quot;</span><span class="p">,</span> <span class="s2">&quot;high&quot;</span><span class="p">]:</span>
        <span class="n">writer_warning_level</span> <span class="o">=</span> <span class="n">level</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="s2">&quot;Invalid warning level. Choose &#39;none&#39;, &#39;low&#39;, &#39;default&#39;, or &#39;high&#39;.&quot;</span>
        <span class="p">)</span>
    <span class="k">return</span> <span class="n">previous_level</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="amads.io.writescore.export_xml" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>            <span class="doc doc-object-name doc-function-name">export_xml</span>


<a href="#amads.io.writescore.export_xml" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">export_xml</span><span class="p">(</span><span class="n"><span title="amads.io.writescore.export_xml(score)">score</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            Score (amads.core.basics.Score)" href="../basics/#amads.core.basics.Score">Score</a></span><span class="p">,</span> <span class="n"><span title="amads.io.writescore.export_xml(filename)">filename</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span><span class="p">,</span> <span class="n"><span title="amads.io.writescore.export_xml(show)">show</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Use Partitura or music21 to export a MusicXML file.</p>
<p>Partitura does not seem to support per-staff key signatures,
so key signatures from AMADS are simply added to Partitura
parts. When there are multiple staffs, there could be
duplicate key signatures (to be tested).</p>
<p><small><strong>Author</strong>: Roger B. Dannenberg</small></p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>amads/io/writescore.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">export_xml</span><span class="p">(</span>
    <span class="n">score</span><span class="p">:</span> <span class="n">Score</span><span class="p">,</span>
    <span class="n">filename</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">show</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Use Partitura or music21 to export a MusicXML file.</span>

<span class="sd">    Partitura does not seem to support per-staff key signatures,</span>
<span class="sd">    so key signatures from AMADS are simply added to Partitura</span>
<span class="sd">    parts. When there are multiple staffs, there could be</span>
<span class="sd">    duplicate key signatures (to be tested).</span>

<span class="sd">    &lt;small&gt;**Author**: Roger B. Dannenberg&lt;/small&gt;</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">export_xml_fn</span> <span class="o">=</span> <span class="n">_check_for_subsystem</span><span class="p">(</span><span class="s2">&quot;xml&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">export_xml_fn</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">writer_warning_level</span> <span class="o">!=</span> <span class="s2">&quot;none&quot;</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Exporting </span><span class="si">{</span><span class="n">filename</span><span class="si">}</span><span class="s2"> using MusicXML writer&quot;</span>
                <span class="sa">f</span><span class="s2">&quot; </span><span class="si">{</span><span class="n">export_xml_fn</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">.&quot;</span>
            <span class="p">)</span>
        <span class="n">export_xml_fn</span><span class="p">(</span><span class="n">score</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">show</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
            <span class="s2">&quot;Could not find a MusicXML export function. &quot;</span>
            <span class="s2">&quot;Preferred subsystem is &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">preferred_xml_writer</span><span class="p">)</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="amads.io.writescore.export_midi" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>            <span class="doc doc-object-name doc-function-name">export_midi</span>


<a href="#amads.io.writescore.export_midi" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">export_midi</span><span class="p">(</span><span class="n"><span title="amads.io.writescore.export_midi(score)">score</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            Score (amads.core.basics.Score)" href="../basics/#amads.core.basics.Score">Score</a></span><span class="p">,</span> <span class="n"><span title="amads.io.writescore.export_midi(filename)">filename</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span><span class="p">,</span> <span class="n"><span title="amads.io.writescore.export_midi(show)">show</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Use music21 or pretty_midi to export a Standard MIDI file.</p>
<p><small><strong>Author</strong>: Roger B. Dannenberg</small></p>


<details class="note" open>
  <summary>Notes</summary>
  <p>AMADS assumes that instruments (midi program numbers) are fixed
for each Staff (or Part in flat scores), and MIDI channels are
not represented. This corresponds to some DAWs such as LogicPro,
which represents channels but ignores them when tracks are
synthesized in software by a single instrument. The MIDI program
is stored as info (see <a class="autorefs autorefs-internal" title="            get" href="../basics/#amads.core.basics.Event.get">get</a> and
<a class="autorefs autorefs-internal" title="            set" href="../basics/#amads.core.basics.Event.set">set</a>) under key <code>"midi_program"</code>
on the Staff, or if there is no Staff or no <code>"midi_program"</code> on
the Staff, under key <code>"midi_program"</code> on the Part.</p>
<p>Parts also have an <code>instrument</code> attribute, which is stored as
the MIDI track name. (Therefore, if a Part has two Staffs, there
will be two tracks with the same name.)  If there is no MIDI
program for the track, the <code>'pretty_midi'</code> writer will use
<code>pretty_midi.instrument_name_to_program</code> to determine a program
number since a program number is required. (As opposed to Standard
MIDI Files, which need not have any MIDI program message at all.)
If <code>pretty_midi.instrument_name_to_program</code> fails, the program is
set to 0 (“Acoustic Grand Piano”).</p>
<p>Pretty MIDI also requires an instrument name. If the AMADS Part
<code>instrument</code> attribute is <code>None</code>, then <code>"Unknown"</code> is used. The
Pretty MIDI reader will convert <code>"Unknown"</code> back to <code>None</code>.</p>
</details>

            <details class="mkdocstrings-source">
              <summary>Source code in <code>amads/io/writescore.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">export_midi</span><span class="p">(</span>
    <span class="n">score</span><span class="p">:</span> <span class="n">Score</span><span class="p">,</span>
    <span class="n">filename</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">show</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Use music21 or pretty_midi to export a Standard MIDI file.</span>

<span class="sd">    &lt;small&gt;**Author**: Roger B. Dannenberg&lt;/small&gt;</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    AMADS assumes that instruments (midi program numbers) are fixed</span>
<span class="sd">    for each Staff (or Part in flat scores), and MIDI channels are</span>
<span class="sd">    not represented. This corresponds to some DAWs such as LogicPro,</span>
<span class="sd">    which represents channels but ignores them when tracks are</span>
<span class="sd">    synthesized in software by a single instrument. The MIDI program</span>
<span class="sd">    is stored as info (see [get][amads.core.basics.Event.get] and</span>
<span class="sd">    [set][amads.core.basics.Event.set]) under key `&quot;midi_program&quot;`</span>
<span class="sd">    on the Staff, or if there is no Staff or no `&quot;midi_program&quot;` on</span>
<span class="sd">    the Staff, under key `&quot;midi_program&quot;` on the Part.</span>

<span class="sd">    Parts also have an `instrument` attribute, which is stored as</span>
<span class="sd">    the MIDI track name. (Therefore, if a Part has two Staffs, there</span>
<span class="sd">    will be two tracks with the same name.)  If there is no MIDI</span>
<span class="sd">    program for the track, the `&#39;pretty_midi&#39;` writer will use</span>
<span class="sd">    `pretty_midi.instrument_name_to_program` to determine a program</span>
<span class="sd">    number since a program number is required. (As opposed to Standard</span>
<span class="sd">    MIDI Files, which need not have any MIDI program message at all.)</span>
<span class="sd">    If `pretty_midi.instrument_name_to_program` fails, the program is</span>
<span class="sd">    set to 0 (“Acoustic Grand Piano”).</span>

<span class="sd">    Pretty MIDI also requires an instrument name. If the AMADS Part</span>
<span class="sd">    `instrument` attribute is `None`, then `&quot;Unknown&quot;` is used. The</span>
<span class="sd">    Pretty MIDI reader will convert `&quot;Unknown&quot;` back to `None`.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">export_midi_fn</span> <span class="o">=</span> <span class="n">_check_for_subsystem</span><span class="p">(</span><span class="s2">&quot;midi&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">export_midi_fn</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">writer_warning_level</span> <span class="o">!=</span> <span class="s2">&quot;none&quot;</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Exporting </span><span class="si">{</span><span class="n">filename</span><span class="si">}</span><span class="s2"> using MIDI writer&quot;</span>
                <span class="sa">f</span><span class="s2">&quot; </span><span class="si">{</span><span class="n">export_midi_fn</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">.&quot;</span>
            <span class="p">)</span>
        <span class="n">export_midi_fn</span><span class="p">(</span><span class="n">score</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">show</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
            <span class="s2">&quot;Could not find a MIDI file export function. &quot;</span>
            <span class="s2">&quot;Preferred subsystem is &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">preferred_midi_writer</span><span class="p">)</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="amads.io.writescore.write_score" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>            <span class="doc doc-object-name doc-function-name">write_score</span>


<a href="#amads.io.writescore.write_score" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">write_score</span><span class="p">(</span>
    <span class="n"><a class="autorefs autorefs-internal" title="score (amads.io.writescore.write_score(score))" href="#amads.io.writescore.write_score(score)">score</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            Score (amads.core.basics.Score)" href="../basics/#amads.core.basics.Score">Score</a></span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-internal" title="filename (amads.io.writescore.write_score(filename))" href="#amads.io.writescore.write_score(filename)">filename</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-internal" title="show (amads.io.writescore.write_score(show))" href="#amads.io.writescore.write_score(show)">show</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-internal" title="format (amads.io.writescore.write_score(format))" href="#amads.io.writescore.write_score(format)">format</a></span><span class="o">=</span><span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Write a file with the given format, <code>'xml'</code>, <code>'midi'</code>, <code>'kern'</code>, <code>'mei'</code>.</p>
<p>If format is None (default), the format is based on the filename
extension, which can be <code>'xml'</code>, <code>'mid'</code>, <code>'midi'</code>, <code>'smf'</code>, <code>'kern'</code>,
or <code>'mei'</code></p>
<p><small><strong>Author</strong>: Roger B. Dannenberg</small></p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
<h5 id="amads.io.writescore.write_score(score)" class="doc doc-heading doc-heading-parameter">              <b><code>score</code></b>
<a href="#amads.io.writescore.write_score(score)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><a class="autorefs autorefs-internal" title="            Score (amads.core.basics.Score)" href="../basics/#amads.core.basics.Score">Score</a></code>)
          –
          <div class="doc-md-description">
            <p>the score to write</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h5 id="amads.io.writescore.write_score(filename)" class="doc doc-heading doc-heading-parameter">              <b><code>filename</code></b>
<a href="#amads.io.writescore.write_score(filename)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></code>)
          –
          <div class="doc-md-description">
            <p>the path (relative or absolute) to the music file</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h5 id="amads.io.writescore.write_score(show)" class="doc doc-heading doc-heading-parameter">              <b><code>show</code></b>
<a href="#amads.io.writescore.write_score(show)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>, default:
                  <code>False</code>
)
          –
          <div class="doc-md-description">
            <p>print a text representation of the data</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h5 id="amads.io.writescore.write_score(format)" class="doc doc-heading doc-heading-parameter">              <b><code>format</code></b>
<a href="#amads.io.writescore.write_score(format)" class="headerlink" title="Permanent link">&para;</a></h5>          –
          <div class="doc-md-description">
            <p>one of <code>'xml'</code>, <code>'midi'</code>, <code>'kern'</code>, <code>'mei'</code></p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Raises:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/exceptions.html#ValueError">ValueError</a></code>
            –
          <div class="doc-md-description">
            <p>if format is unknown</p>
          </div>
        </li>
    </ul>


<details class="note" open>
  <summary>Note</summary>
  <p>See individual export methods, e.g. midi_export, xml_export, etc.,
for details on how they handle various features like instrument,
MIDI metadata, etc.</p>
</details>

            <details class="mkdocstrings-source">
              <summary>Source code in <code>amads/io/writescore.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">write_score</span><span class="p">(</span>
    <span class="n">score</span><span class="p">:</span> <span class="n">Score</span><span class="p">,</span>
    <span class="n">filename</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">show</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="nb">format</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Write a file with the given format, `&#39;xml&#39;`, `&#39;midi&#39;`, `&#39;kern&#39;`, `&#39;mei&#39;`.</span>

<span class="sd">    If format is None (default), the format is based on the filename</span>
<span class="sd">    extension, which can be `&#39;xml&#39;`, `&#39;mid&#39;`, `&#39;midi&#39;`, `&#39;smf&#39;`, `&#39;kern&#39;`,</span>
<span class="sd">    or `&#39;mei&#39;`</span>

<span class="sd">    &lt;small&gt;**Author**: Roger B. Dannenberg&lt;/small&gt;</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    score : Score</span>
<span class="sd">        the score to write</span>
<span class="sd">    filename : str</span>
<span class="sd">        the path (relative or absolute) to the music file</span>
<span class="sd">    show : bool</span>
<span class="sd">        print a text representation of the data</span>
<span class="sd">    format: string</span>
<span class="sd">        one of `&#39;xml&#39;`, `&#39;midi&#39;`, `&#39;kern&#39;`, `&#39;mei&#39;`</span>

<span class="sd">    Raises</span>
<span class="sd">    ------</span>
<span class="sd">    ValueError</span>
<span class="sd">        if format is unknown</span>

<span class="sd">    Note</span>
<span class="sd">    ----</span>
<span class="sd">    See individual export methods, e.g. midi_export, xml_export, etc.,</span>
<span class="sd">    for details on how they handle various features like instrument,</span>
<span class="sd">    MIDI metadata, etc.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">with</span> <span class="n">warnings</span><span class="o">.</span><span class="n">catch_warnings</span><span class="p">(</span><span class="n">record</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="k">as</span> <span class="n">w</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">writer_warning_level</span> <span class="o">==</span> <span class="s2">&quot;none&quot;</span><span class="p">:</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">simplefilter</span><span class="p">(</span><span class="s2">&quot;ignore&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">simplefilter</span><span class="p">(</span><span class="s2">&quot;always&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">format</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">ext</span> <span class="o">=</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span><span class="o">.</span><span class="n">suffix</span>
            <span class="k">if</span> <span class="n">ext</span> <span class="o">==</span> <span class="s2">&quot;.xml&quot;</span><span class="p">:</span>
                <span class="nb">format</span> <span class="o">=</span> <span class="s2">&quot;xml&quot;</span>
            <span class="k">elif</span> <span class="n">ext</span> <span class="o">==</span> <span class="s2">&quot;.mid&quot;</span> <span class="ow">or</span> <span class="n">ext</span> <span class="o">==</span> <span class="s2">&quot;.midi&quot;</span> <span class="ow">or</span> <span class="n">ext</span> <span class="o">==</span> <span class="s2">&quot;.smf&quot;</span><span class="p">:</span>
                <span class="nb">format</span> <span class="o">=</span> <span class="s2">&quot;midi&quot;</span>
            <span class="k">elif</span> <span class="n">ext</span> <span class="o">==</span> <span class="s2">&quot;.kern&quot;</span><span class="p">:</span>
                <span class="nb">format</span> <span class="o">=</span> <span class="s2">&quot;kern&quot;</span>
            <span class="k">elif</span> <span class="n">ext</span> <span class="o">==</span> <span class="s2">&quot;.mei&quot;</span><span class="p">:</span>
                <span class="nb">format</span> <span class="o">=</span> <span class="s2">&quot;mei&quot;</span>
        <span class="k">if</span> <span class="nb">format</span> <span class="o">==</span> <span class="s2">&quot;xml&quot;</span><span class="p">:</span>
            <span class="n">export_xml</span><span class="p">(</span><span class="n">score</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">show</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">format</span> <span class="o">==</span> <span class="s2">&quot;midi&quot;</span><span class="p">:</span>
            <span class="n">export_midi</span><span class="p">(</span><span class="n">score</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">show</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">format</span> <span class="o">==</span> <span class="s2">&quot;kern&quot;</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Kern format output not implemented&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">format</span> <span class="o">==</span> <span class="s2">&quot;mei&quot;</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;MEI format output not implemented&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="nb">format</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot; format specification is unknown&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">writer_warning_level</span> <span class="o">==</span> <span class="s2">&quot;low&quot;</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">w</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Warning: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">w</span><span class="p">)</span><span class="si">}</span><span class="s2"> warnings were generated in&quot;</span>
                    <span class="sa">f</span><span class="s2">&quot; write_score(</span><span class="si">{</span><span class="n">filename</span><span class="si">}</span><span class="s2">). Use&quot;</span>
                    <span class="s2">&quot; amads.io.writescore.set_writer_warning_level() for&quot;</span>
                    <span class="s2">&quot; more details.&quot;</span>
                <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>  <span class="c1"># &quot;none&quot;, &quot;default&quot;, or &quot;high&quot;</span>
            <span class="k">for</span> <span class="n">warning</span> <span class="ow">in</span> <span class="n">w</span><span class="p">:</span>
                <span class="n">formatted</span> <span class="o">=</span> <span class="n">warnings</span><span class="o">.</span><span class="n">formatwarning</span><span class="p">(</span>
                    <span class="n">warning</span><span class="o">.</span><span class="n">message</span><span class="p">,</span>
                    <span class="n">warning</span><span class="o">.</span><span class="n">category</span><span class="p">,</span>
                    <span class="n">warning</span><span class="o">.</span><span class="n">filename</span><span class="p">,</span>
                    <span class="n">warning</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">formatted</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div><h2 id="piano-roll-display">Piano Roll Display<a class="headerlink" href="#piano-roll-display" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<h2 id="amads.io.pianoroll" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>            <span class="doc doc-object-name doc-module-name">pianoroll</span>


<a href="#amads.io.pianoroll" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents first">

        <p>Ports <code>pianoroll</code> Function</p>
<p>Original Doc: https://citeseerx.ist.psu.edu/document?repid=rep1&amp;type=pdf&amp;doi=6e06906ca1ba0bf0ac8f2cb1a929f3be95eeadfa#page=82</p>












<p><span class="doc-section-title">Functions:</span></p>
    <ul>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="            pianoroll (amads.io.pianoroll.pianoroll)" href="#amads.io.pianoroll.pianoroll">pianoroll</a></code></b>
            –
            <div class="doc-md-description">
              <p>Converts a Score to a piano roll display of a musical score.</p>
            </div>
          </li>
    </ul>





<div class="doc doc-children">








<h3 id="amads.io.pianoroll-functions">Functions<a href="#amads.io.pianoroll-functions" class="headerlink" title="Permanent link">&para;</a></h3>

<div class="doc doc-object doc-function">


<h4 id="amads.io.pianoroll.pianoroll" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>            <span class="doc doc-object-name doc-function-name">pianoroll</span>


<a href="#amads.io.pianoroll.pianoroll" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">pianoroll</span><span class="p">(</span>
    <span class="n"><a class="autorefs autorefs-internal" title="score (amads.io.pianoroll.pianoroll(score))" href="#amads.io.pianoroll.pianoroll(score)">score</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            Score (amads.core.basics.Score)" href="../basics/#amads.core.basics.Score">Score</a></span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="title (amads.io.pianoroll.pianoroll(title))" href="#amads.io.pianoroll.pianoroll(title)">title</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span> <span class="o">=</span> <span class="s2">&quot;Piano Roll&quot;</span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="y_label (amads.io.pianoroll.pianoroll(y_label))" href="#amads.io.pianoroll.pianoroll(y_label)">y_label</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span> <span class="o">=</span> <span class="s2">&quot;name&quot;</span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="x_label (amads.io.pianoroll.pianoroll(x_label))" href="#amads.io.pianoroll.pianoroll(x_label)">x_label</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span> <span class="o">=</span> <span class="s2">&quot;quarter&quot;</span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="color (amads.io.pianoroll.pianoroll(color))" href="#amads.io.pianoroll.pianoroll(color)">color</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span> <span class="o">=</span> <span class="s2">&quot;skyblue&quot;</span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="accidental (amads.io.pianoroll.pianoroll(accidental))" href="#amads.io.pianoroll.pianoroll(accidental)">accidental</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span> <span class="o">=</span> <span class="s2">&quot;sharp&quot;</span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="show (amads.io.pianoroll.pianoroll(show))" href="#amads.io.pianoroll.pianoroll(show)">show</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><span title="matplotlib.figure.Figure">Figure</span></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Converts a Score to a piano roll display of a musical score.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
<h5 id="amads.io.pianoroll.pianoroll(score)" class="doc doc-heading doc-heading-parameter">              <b><code>score</code></b>
<a href="#amads.io.pianoroll.pianoroll(score)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><a class="autorefs autorefs-internal" title="            Score (amads.core.basics.Score)" href="../basics/#amads.core.basics.Score">Score</a></code>)
          –
          <div class="doc-md-description">
            <p>The musical score to display</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h5 id="amads.io.pianoroll.pianoroll(title)" class="doc doc-heading doc-heading-parameter">              <b><code>title</code></b>
<a href="#amads.io.pianoroll.pianoroll(title)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></code>, default:
                  <code>&#39;Piano Roll&#39;</code>
)
          –
          <div class="doc-md-description">
            <p>The title of the plot. Defaults to "Piano Roll".</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h5 id="amads.io.pianoroll.pianoroll(y_label)" class="doc doc-heading doc-heading-parameter">              <b><code>y_label</code></b>
<a href="#amads.io.pianoroll.pianoroll(y_label)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></code>, default:
                  <code>&#39;name&#39;</code>
)
          –
          <div class="doc-md-description">
            <p>Determines whether the y-axis is
labeled with note names or MIDI numbers.
Valid Input: 'name' (default) or 'num'.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h5 id="amads.io.pianoroll.pianoroll(x_label)" class="doc doc-heading doc-heading-parameter">              <b><code>x_label</code></b>
<a href="#amads.io.pianoroll.pianoroll(x_label)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></code>, default:
                  <code>&#39;quarter&#39;</code>
)
          –
          <div class="doc-md-description">
            <p>Determines whether the x-axis is labeled with quarters or
seconds. Valid input: 'quarter' (default) or 'sec'.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h5 id="amads.io.pianoroll.pianoroll(color)" class="doc doc-heading doc-heading-parameter">              <b><code>color</code></b>
<a href="#amads.io.pianoroll.pianoroll(color)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></code>, default:
                  <code>&#39;skyblue&#39;</code>
)
          –
          <div class="doc-md-description">
            <p>The color of the note rectangles. Defaults to 'skyblue'.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h5 id="amads.io.pianoroll.pianoroll(accidental)" class="doc doc-heading doc-heading-parameter">              <b><code>accidental</code></b>
<a href="#amads.io.pianoroll.pianoroll(accidental)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></code>, default:
                  <code>&#39;sharp&#39;</code>
)
          –
          <div class="doc-md-description">
            <p>Determines whether the y-axis is
labeled with sharps or flats. Only useful if argument
y_label is 'name'. Raises exception on inputs that's not
'sharp', 'flat', or 'both'. Defaults to 'sharp', which is
what is done in miditoolbox. 'both' means use AMADS defaults
which are C#, Eb, F#, G#, Bb.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h5 id="amads.io.pianoroll.pianoroll(show)" class="doc doc-heading doc-heading-parameter">              <b><code>show</code></b>
<a href="#amads.io.pianoroll.pianoroll(show)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>, default:
                  <code>True</code>
)
          –
          <div class="doc-md-description">
            <p>If True (default), the plot is displayed.</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><span title="Figure">Figure</span></code>
          –
          <div class="doc-md-description">
            <p>A matplotlib.figure.Figure of a pianoroll diagram.</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Raises:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/exceptions.html#ValueError">ValueError</a></code>
            –
          <div class="doc-md-description">
            <p>If there are invalid input arguments</p>
          </div>
        </li>
    </ul>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>amads/io/pianoroll.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 15</span>
<span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">pianoroll</span><span class="p">(</span>
    <span class="n">score</span><span class="p">:</span> <span class="n">Score</span><span class="p">,</span>
    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;Piano Roll&quot;</span><span class="p">,</span>
    <span class="n">y_label</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;name&quot;</span><span class="p">,</span>
    <span class="n">x_label</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;quarter&quot;</span><span class="p">,</span>
    <span class="n">color</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;skyblue&quot;</span><span class="p">,</span>
    <span class="n">accidental</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;sharp&quot;</span><span class="p">,</span>
    <span class="n">show</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">figure</span><span class="o">.</span><span class="n">Figure</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Converts a Score to a piano roll display of a musical score.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    score : Score</span>
<span class="sd">        The musical score to display</span>
<span class="sd">    title : str, optional</span>
<span class="sd">        The title of the plot. Defaults to &quot;Piano Roll&quot;.</span>
<span class="sd">    y_label : str, optional</span>
<span class="sd">        Determines whether the y-axis is</span>
<span class="sd">        labeled with note names or MIDI numbers.</span>
<span class="sd">        Valid Input: &#39;name&#39; (default) or &#39;num&#39;.</span>
<span class="sd">    x_label : str, optional</span>
<span class="sd">        Determines whether the x-axis is labeled with quarters or</span>
<span class="sd">        seconds. Valid input: &#39;quarter&#39; (default) or &#39;sec&#39;.</span>
<span class="sd">    color : str, optional</span>
<span class="sd">        The color of the note rectangles. Defaults to &#39;skyblue&#39;.</span>
<span class="sd">    accidental : str, optional</span>
<span class="sd">        Determines whether the y-axis is</span>
<span class="sd">        labeled with sharps or flats. Only useful if argument</span>
<span class="sd">        y_label is &#39;name&#39;. Raises exception on inputs that&#39;s not</span>
<span class="sd">        &#39;sharp&#39;, &#39;flat&#39;, or &#39;both&#39;. Defaults to &#39;sharp&#39;, which is</span>
<span class="sd">        what is done in miditoolbox. &#39;both&#39; means use AMADS defaults</span>
<span class="sd">        which are C#, Eb, F#, G#, Bb.</span>
<span class="sd">    show : bool, optional</span>
<span class="sd">        If True (default), the plot is displayed.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    Figure</span>
<span class="sd">        A matplotlib.figure.Figure of a pianoroll diagram.</span>

<span class="sd">    Raises</span>
<span class="sd">    ------</span>
<span class="sd">    ValueError</span>
<span class="sd">        If there are invalid input arguments</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># remove ties and make a sorted list of all notes:</span>
    <span class="n">score</span> <span class="o">=</span> <span class="n">score</span><span class="o">.</span><span class="n">flatten</span><span class="p">(</span><span class="n">collapse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="c1"># Check for correct x_label input argument</span>
    <span class="k">if</span> <span class="n">x_label</span> <span class="o">!=</span> <span class="s2">&quot;quarter&quot;</span> <span class="ow">and</span> <span class="n">x_label</span> <span class="o">!=</span> <span class="s2">&quot;sec&quot;</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Invalid x_label type&quot;</span><span class="p">)</span>

    <span class="c1"># Check for correct accidental input argument</span>
    <span class="k">if</span> <span class="n">accidental</span> <span class="o">!=</span> <span class="s2">&quot;sharp&quot;</span> <span class="ow">and</span> <span class="n">accidental</span> <span class="o">!=</span> <span class="s2">&quot;flat&quot;</span> <span class="ow">and</span> <span class="n">accidental</span> <span class="o">!=</span> <span class="s2">&quot;both&quot;</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Invalid accidental type&quot;</span><span class="p">)</span>

    <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>

    <span class="n">min_note</span><span class="p">,</span> <span class="n">max_note</span> <span class="o">=</span> <span class="mf">127.0</span><span class="p">,</span> <span class="mf">0.0</span>
    <span class="n">max_time</span> <span class="o">=</span> <span class="mi">1</span>  <span class="c1"># plot at least 1 second or beat</span>
    <span class="c1"># now score has one part that is all notes</span>
    <span class="k">for</span> <span class="n">note</span> <span class="ow">in</span> <span class="n">cast</span><span class="p">(</span><span class="n">Part</span><span class="p">,</span> <span class="nb">next</span><span class="p">(</span><span class="n">score</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="n">Part</span><span class="p">)))</span><span class="o">.</span><span class="n">content</span><span class="p">:</span>
        <span class="n">note</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">Note</span><span class="p">,</span> <span class="n">note</span><span class="p">)</span>
        <span class="n">onset_time</span> <span class="o">=</span> <span class="n">note</span><span class="o">.</span><span class="n">onset</span>
        <span class="n">offset_time</span> <span class="o">=</span> <span class="n">note</span><span class="o">.</span><span class="n">offset</span>
        <span class="n">pitch</span> <span class="o">=</span> <span class="n">note</span><span class="o">.</span><span class="n">key_num</span> <span class="o">-</span> <span class="mf">0.5</span>  <span class="c1"># to center note rectangle</span>

        <span class="c1"># Conditionally converts beat to sec</span>
        <span class="k">if</span> <span class="n">x_label</span> <span class="o">==</span> <span class="s2">&quot;sec&quot;</span> <span class="ow">and</span> <span class="n">score</span><span class="o">.</span><span class="n">units_are_quarters</span><span class="p">:</span>
            <span class="n">onset_time</span> <span class="o">=</span> <span class="n">score</span><span class="o">.</span><span class="n">time_map</span><span class="o">.</span><span class="n">quarter_to_time</span><span class="p">(</span><span class="n">onset_time</span><span class="p">)</span>
            <span class="n">offset_time</span> <span class="o">=</span> <span class="n">score</span><span class="o">.</span><span class="n">time_map</span><span class="o">.</span><span class="n">quarter_to_time</span><span class="p">(</span><span class="n">offset_time</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">x_label</span> <span class="o">==</span> <span class="s2">&quot;quarter&quot;</span> <span class="ow">and</span> <span class="n">score</span><span class="o">.</span><span class="n">units_are_seconds</span><span class="p">:</span>
            <span class="n">onset_time</span> <span class="o">=</span> <span class="n">score</span><span class="o">.</span><span class="n">time_map</span><span class="o">.</span><span class="n">time_to_quarter</span><span class="p">(</span><span class="n">onset_time</span><span class="p">)</span>
            <span class="n">offset_time</span> <span class="o">=</span> <span class="n">score</span><span class="o">.</span><span class="n">time_map</span><span class="o">.</span><span class="n">time_to_quarter</span><span class="p">(</span><span class="n">offset_time</span><span class="p">)</span>
        <span class="c1"># Stores min and max note for y_axis labeling</span>
        <span class="k">if</span> <span class="n">pitch</span> <span class="o">&lt;</span> <span class="n">min_note</span><span class="p">:</span>
            <span class="n">min_note</span> <span class="o">=</span> <span class="n">pitch</span>
        <span class="k">if</span> <span class="n">pitch</span> <span class="o">&gt;</span> <span class="n">max_note</span><span class="p">:</span>
            <span class="n">max_note</span> <span class="o">=</span> <span class="n">pitch</span>

        <span class="c1"># Stores max note start time + note duration for x_axis limit</span>
        <span class="k">if</span> <span class="n">offset_time</span> <span class="o">&gt;</span> <span class="n">max_time</span><span class="p">:</span>
            <span class="n">max_time</span> <span class="o">=</span> <span class="n">offset_time</span>

        <span class="c1"># Draws the note</span>
        <span class="n">rect</span> <span class="o">=</span> <span class="n">patches</span><span class="o">.</span><span class="n">Rectangle</span><span class="p">(</span>
            <span class="p">(</span><span class="n">onset_time</span><span class="p">,</span> <span class="n">pitch</span><span class="p">),</span>
            <span class="n">offset_time</span> <span class="o">-</span> <span class="n">onset_time</span><span class="p">,</span>
            <span class="mi">1</span><span class="p">,</span>
            <span class="n">edgecolor</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">,</span>
            <span class="n">facecolor</span><span class="o">=</span><span class="n">color</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">add_patch</span><span class="p">(</span><span class="n">rect</span><span class="p">)</span>

    <span class="c1"># Determines correct axis labels</span>
    <span class="k">if</span> <span class="n">min_note</span> <span class="o">==</span> <span class="mi">127</span> <span class="ow">and</span> <span class="n">max_note</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>  <span class="c1"># &quot;fake&quot; better axes:</span>
        <span class="n">min_note</span> <span class="o">=</span> <span class="mi">59</span>
        <span class="n">max_note</span> <span class="o">=</span> <span class="mi">59</span>

    <span class="n">midi_numbers</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">min_note</span><span class="p">),</span> <span class="nb">int</span><span class="p">(</span><span class="n">max_note</span> <span class="o">+</span> <span class="mi">2</span><span class="p">)))</span>

    <span class="k">match</span> <span class="n">y_label</span><span class="p">:</span>
        <span class="k">case</span> <span class="s2">&quot;num&quot;</span><span class="p">:</span>
            <span class="n">notes</span> <span class="o">=</span> <span class="n">midi_numbers</span>
            <span class="n">y_label</span> <span class="o">=</span> <span class="s2">&quot;MIDI Key (Pitch) Number&quot;</span>
        <span class="k">case</span> <span class="s2">&quot;name&quot;</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">accidental</span> <span class="o">==</span> <span class="s2">&quot;both&quot;</span><span class="p">:</span>
                <span class="n">accidental</span> <span class="o">=</span> <span class="s2">&quot;default&quot;</span>  <span class="c1"># for simplest_enharmonic</span>
            <span class="n">notes</span> <span class="o">=</span> <span class="p">[</span>
                <span class="n">Pitch</span><span class="p">(</span><span class="n">mn</span><span class="p">)</span><span class="o">.</span><span class="n">simplest_enharmonic</span><span class="p">(</span><span class="n">accidental</span><span class="p">)</span><span class="o">.</span><span class="n">name_with_octave</span>
                <span class="k">for</span> <span class="n">mn</span> <span class="ow">in</span> <span class="n">midi_numbers</span>
            <span class="p">]</span>
            <span class="n">y_label</span> <span class="o">=</span> <span class="s2">&quot;Pitch Name&quot;</span>
        <span class="k">case</span><span class="w"> </span><span class="k">_</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Invalid y_label type&quot;</span><span class="p">)</span>

    <span class="c1"># Plots the graph</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="n">title</span><span class="p">)</span>

    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Quarters&quot;</span> <span class="k">if</span> <span class="n">x_label</span> <span class="o">==</span> <span class="s2">&quot;quarter&quot;</span> <span class="k">else</span> <span class="s2">&quot;Seconds&quot;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="n">y_label</span><span class="p">)</span>

    <span class="n">ax</span><span class="o">.</span><span class="n">set_yticks</span><span class="p">(</span><span class="n">midi_numbers</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_yticklabels</span><span class="p">([</span><span class="nb">str</span><span class="p">(</span><span class="n">note</span><span class="p">)</span> <span class="k">for</span> <span class="n">note</span> <span class="ow">in</span> <span class="n">notes</span><span class="p">])</span>

    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">max_time</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="n">midi_numbers</span><span class="p">),</span> <span class="nb">max</span><span class="p">(</span><span class="n">midi_numbers</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>

    <span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">show</span><span class="p">:</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

    <span class="k">return</span> <span class="n">fig</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div><h2 id="low-level-input-functions">Low-Level Input Functions<a class="headerlink" href="#low-level-input-functions" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-function">


<h2 id="amads.io.m21_midi_import.music21_midi_import" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>            <span class="doc doc-object-name doc-function-name">music21_midi_import</span>


<a href="#amads.io.m21_midi_import.music21_midi_import" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">music21_midi_import</span><span class="p">(</span>
    <span class="n"><a class="autorefs autorefs-internal" title="filename (amads.io.m21_midi_import.music21_midi_import(filename))" href="#amads.io.m21_midi_import.music21_midi_import(filename)">filename</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="flatten (amads.io.m21_midi_import.music21_midi_import(flatten))" href="#amads.io.m21_midi_import.music21_midi_import(flatten)">flatten</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="collapse (amads.io.m21_midi_import.music21_midi_import(collapse))" href="#amads.io.m21_midi_import.music21_midi_import(collapse)">collapse</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="show (amads.io.m21_midi_import.music21_midi_import(show))" href="#amads.io.m21_midi_import.music21_midi_import(show)">show</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="group_by_instrument (amads.io.m21_midi_import.music21_midi_import(group_by_instrument))" href="#amads.io.m21_midi_import.music21_midi_import(group_by_instrument)">group_by_instrument</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-internal" title="            Score (amads.core.basics.Score)" href="../basics/#amads.core.basics.Score">Score</a></span>
</code></pre></div>

    <div class="doc doc-contents first">

        <p>Use music21 to import a MIDI file and convert it to a Score.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
<h3 id="amads.io.m21_midi_import.music21_midi_import(filename)" class="doc doc-heading doc-heading-parameter">              <b><code>filename</code></b>
<a href="#amads.io.m21_midi_import.music21_midi_import(filename)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></code>)
          –
          <div class="doc-md-description">
            <p>The path to the MIDI file.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h3 id="amads.io.m21_midi_import.music21_midi_import(flatten)" class="doc doc-heading doc-heading-parameter">              <b><code>flatten</code></b>
<a href="#amads.io.m21_midi_import.music21_midi_import(flatten)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>, default:
                  <code>False</code>
)
          –
          <div class="doc-md-description">
            <p>If True, flatten the score structure.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h3 id="amads.io.m21_midi_import.music21_midi_import(collapse)" class="doc doc-heading doc-heading-parameter">              <b><code>collapse</code></b>
<a href="#amads.io.m21_midi_import.music21_midi_import(collapse)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>, default:
                  <code>False</code>
)
          –
          <div class="doc-md-description">
            <p>If True and flatten is true, also collapse parts.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h3 id="amads.io.m21_midi_import.music21_midi_import(show)" class="doc doc-heading doc-heading-parameter">              <b><code>show</code></b>
<a href="#amads.io.m21_midi_import.music21_midi_import(show)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>, default:
                  <code>False</code>
)
          –
          <div class="doc-md-description">
            <p>If True, print the music21 score structure for debugging.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h3 id="amads.io.m21_midi_import.music21_midi_import(group_by_instrument)" class="doc doc-heading doc-heading-parameter">              <b><code>group_by_instrument</code></b>
<a href="#amads.io.m21_midi_import.music21_midi_import(group_by_instrument)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>, default:
                  <code>True</code>
)
          –
          <div class="doc-md-description">
            <p>If True, group parts by instrument name into staffs. Defaults to True.
See <code>music21_to_score</code> for details.</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><a class="autorefs autorefs-internal" title="            Score (amads.core.basics.Score)" href="../basics/#amads.core.basics.Score">Score</a></code>
          –
          <div class="doc-md-description">
            <p>The converted AMADS Score object.</p>
          </div>
        </li>
    </ul>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>amads/io/m21_midi_import.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">music21_midi_import</span><span class="p">(</span>
    <span class="n">filename</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">flatten</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">collapse</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">show</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">group_by_instrument</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Score</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Use music21 to import a MIDI file and convert it to a Score.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    filename : str</span>
<span class="sd">        The path to the MIDI file.</span>
<span class="sd">    flatten : bool, optional</span>
<span class="sd">        If True, flatten the score structure.</span>
<span class="sd">    collapse : bool, optional</span>
<span class="sd">        If True and flatten is true, also collapse parts.</span>
<span class="sd">    show : bool, optional</span>
<span class="sd">        If True, print the music21 score structure for debugging.</span>
<span class="sd">    group_by_instrument: bool, optional</span>
<span class="sd">        If True, group parts by instrument name into staffs. Defaults to True.</span>
<span class="sd">        See `music21_to_score` for details.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    Score</span>
<span class="sd">        The converted AMADS Score object.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Load the MIDI file using music21</span>
    <span class="n">m21score</span> <span class="o">=</span> <span class="n">converter</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span>
        <span class="n">filename</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;midi&quot;</span><span class="p">,</span> <span class="n">forceSource</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">quantizePost</span><span class="o">=</span><span class="kc">False</span>
    <span class="p">)</span>
    <span class="n">m21score</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">m21Score</span><span class="p">,</span> <span class="n">m21score</span><span class="p">)</span>
    <span class="n">score</span> <span class="o">=</span> <span class="n">music21_to_score</span><span class="p">(</span>
        <span class="n">m21score</span><span class="p">,</span>
        <span class="n">flatten</span><span class="p">,</span>
        <span class="n">collapse</span><span class="p">,</span>
        <span class="n">show</span><span class="p">,</span>
        <span class="n">filename</span><span class="p">,</span>
        <span class="n">group_by_instrument</span><span class="o">=</span><span class="n">group_by_instrument</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">score</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="amads.io.pm_midi_import.pretty_midi_midi_import" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>            <span class="doc doc-object-name doc-function-name">pretty_midi_midi_import</span>


<a href="#amads.io.pm_midi_import.pretty_midi_midi_import" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">pretty_midi_midi_import</span><span class="p">(</span>
    <span class="n"><a class="autorefs autorefs-internal" title="filename (amads.io.pm_midi_import.pretty_midi_midi_import(filename))" href="#amads.io.pm_midi_import.pretty_midi_midi_import(filename)">filename</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="flatten (amads.io.pm_midi_import.pretty_midi_midi_import(flatten))" href="#amads.io.pm_midi_import.pretty_midi_midi_import(flatten)">flatten</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="collapse (amads.io.pm_midi_import.pretty_midi_midi_import(collapse))" href="#amads.io.pm_midi_import.pretty_midi_midi_import(collapse)">collapse</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="show (amads.io.pm_midi_import.pretty_midi_midi_import(show))" href="#amads.io.pm_midi_import.pretty_midi_midi_import(show)">show</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="group_by_instrument (amads.io.pm_midi_import.pretty_midi_midi_import(group_by_instrument))" href="#amads.io.pm_midi_import.pretty_midi_midi_import(group_by_instrument)">group_by_instrument</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-internal" title="            Score (amads.core.basics.Score)" href="../basics/#amads.core.basics.Score">Score</a></span>
</code></pre></div>

    <div class="doc doc-contents first">

        <p>Use PrettyMIDI to import a MIDI file and convert it to a Score.</p>
<p><small><strong>Author</strong>: Roger B. Dannenberg</small></p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
<h3 id="amads.io.pm_midi_import.pretty_midi_midi_import(filename)" class="doc doc-heading doc-heading-parameter">              <b><code>filename</code></b>
<a href="#amads.io.pm_midi_import.pretty_midi_midi_import(filename)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><span title="Union">Union</span>(<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>, <span title="PosixPath">PosixPath</span>)</code>)
          –
          <div class="doc-md-description">
            <p>The path to the MIDI file to import.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h3 id="amads.io.pm_midi_import.pretty_midi_midi_import(flatten)" class="doc doc-heading doc-heading-parameter">              <b><code>flatten</code></b>
<a href="#amads.io.pm_midi_import.pretty_midi_midi_import(flatten)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>, default:
                  <code>False</code>
)
          –
          <div class="doc-md-description">
            <p>If True, create a flat score where notes are direct children of
parts. Defaults to collapse, which defaults to False.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h3 id="amads.io.pm_midi_import.pretty_midi_midi_import(collapse)" class="doc doc-heading doc-heading-parameter">              <b><code>collapse</code></b>
<a href="#amads.io.pm_midi_import.pretty_midi_midi_import(collapse)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>, default:
                  <code>False</code>
)
          –
          <div class="doc-md-description">
            <p>If True, merge all parts into a single part. Implies flatten=True.
Defaults to False.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h3 id="amads.io.pm_midi_import.pretty_midi_midi_import(show)" class="doc doc-heading doc-heading-parameter">              <b><code>show</code></b>
<a href="#amads.io.pm_midi_import.pretty_midi_midi_import(show)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>, default:
                  <code>False</code>
)
          –
          <div class="doc-md-description">
            <p>If True, print the PrettyMIDI score structure for debugging.
Defaults to False.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h3 id="amads.io.pm_midi_import.pretty_midi_midi_import(group_by_instrument)" class="doc doc-heading doc-heading-parameter">              <b><code>group_by_instrument</code></b>
<a href="#amads.io.pm_midi_import.pretty_midi_midi_import(group_by_instrument)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>, default:
                  <code>True</code>
)
          –
          <div class="doc-md-description">
            <p>If True, group parts by instrument name into staffs. Defaults to True.
See read_midi() for more details.</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><a class="autorefs autorefs-internal" title="            Score (amads.core.basics.Score)" href="../basics/#amads.core.basics.Score">Score</a></code>
          –
          <div class="doc-md-description">
            <p>The converted Score object containing the imported MIDI data.</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Examples:</span></p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">amads.io.pm_midi_import</span><span class="w"> </span><span class="kn">import</span> <span class="n">pretty_midi_midi_import</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">amads.music</span><span class="w"> </span><span class="kn">import</span> <span class="n">example</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">score</span> <span class="o">=</span> <span class="n">pretty_midi_midi_import</span><span class="p">(</span>                     <span class="n">example</span><span class="o">.</span><span class="n">fullpath</span><span class="p">(</span><span class="s2">&quot;midi/sarabande.mid&quot;</span><span class="p">),</span>                     <span class="n">flatten</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>  <span class="c1"># show=True to see PrettyMIDI data</span>
</code></pre></div>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>amads/io/pm_midi_import.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">pretty_midi_midi_import</span><span class="p">(</span>
    <span class="n">filename</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">flatten</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">collapse</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">show</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">group_by_instrument</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Score</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Use PrettyMIDI to import a MIDI file and convert it to a Score.</span>

<span class="sd">    &lt;small&gt;**Author**: Roger B. Dannenberg&lt;/small&gt;</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    filename : Union(str, PosixPath)</span>
<span class="sd">        The path to the MIDI file to import.</span>
<span class="sd">    flatten : bool, optional</span>
<span class="sd">        If True, create a flat score where notes are direct children of</span>
<span class="sd">        parts. Defaults to collapse, which defaults to False.</span>
<span class="sd">    collapse : bool, optional</span>
<span class="sd">        If True, merge all parts into a single part. Implies flatten=True.</span>
<span class="sd">        Defaults to False.</span>
<span class="sd">    show : bool, optional</span>
<span class="sd">        If True, print the PrettyMIDI score structure for debugging.</span>
<span class="sd">        Defaults to False.</span>
<span class="sd">    group_by_instrument : bool, optional</span>
<span class="sd">        If True, group parts by instrument name into staffs. Defaults to True.</span>
<span class="sd">        See read_midi() for more details.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    Score</span>
<span class="sd">        The converted Score object containing the imported MIDI data.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; from amads.io.pm_midi_import import pretty_midi_midi_import</span>
<span class="sd">    &gt;&gt;&gt; from amads.music import example</span>
<span class="sd">    &gt;&gt;&gt; score = pretty_midi_midi_import( \</span>
<span class="sd">                    example.fullpath(&quot;midi/sarabande.mid&quot;), \</span>
<span class="sd">                    flatten=True)  # show=True to see PrettyMIDI data</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">flatten</span> <span class="o">=</span> <span class="n">flatten</span> <span class="ow">or</span> <span class="n">collapse</span>  <span class="c1"># collapse implies flatten</span>

    <span class="c1"># Load the MIDI file using PrettyMidi</span>
    <span class="n">filename</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
    <span class="n">pmscore</span> <span class="o">=</span> <span class="n">PrettyMIDI</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">show</span><span class="p">:</span>
        <span class="kn">from</span><span class="w"> </span><span class="nn">amads.io.pm_show</span><span class="w"> </span><span class="kn">import</span> <span class="n">pretty_midi_show</span>

        <span class="n">pretty_midi_show</span><span class="p">(</span><span class="n">pmscore</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>

    <span class="c1"># Create an empty Score object</span>
    <span class="n">time_map</span> <span class="o">=</span> <span class="n">_time_map_from_tick_scales</span><span class="p">(</span>
        <span class="n">pmscore</span><span class="o">.</span><span class="n">_tick_scales</span><span class="p">,</span> <span class="n">pmscore</span><span class="o">.</span><span class="n">resolution</span>
    <span class="p">)</span>
    <span class="n">score</span> <span class="o">=</span> <span class="n">Score</span><span class="p">(</span><span class="n">time_map</span><span class="o">=</span><span class="n">time_map</span><span class="p">)</span>
    <span class="n">score</span><span class="o">.</span><span class="n">convert_to_seconds</span><span class="p">()</span>  <span class="c1"># convert to seconds for PrettyMIDI</span>

    <span class="c1"># Iterate over instruments of the PrettyMIDI score and build parts and notes</span>
    <span class="c1"># Then if collapse, merge and sort the notes</span>
    <span class="c1"># Then if not flatten, remove each part content, and staff and measures,</span>
    <span class="c1"># and move notes into measures, creating ties where they cross</span>

    <span class="c1"># This helps orgainize parts by instrument name. Parts with the same</span>
    <span class="c1"># instrument name are grouped together as staffs in a single Part.</span>
    <span class="n">instrument_groups</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">list</span><span class="p">[</span><span class="n">Part</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="c1"># Iterate over instruments of the PrettyMIDI score and build parts and notes</span>
    <span class="n">duration</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">no_name_id</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">for</span> <span class="n">ins</span> <span class="ow">in</span> <span class="n">pmscore</span><span class="o">.</span><span class="n">instruments</span><span class="p">:</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">ins</span><span class="o">.</span><span class="n">name</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">ins</span><span class="o">.</span><span class="n">name</span><span class="p">:</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">program_to_instrument_name</span><span class="p">(</span><span class="n">ins</span><span class="o">.</span><span class="n">program</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;Unknown&quot;</span><span class="p">:</span>  <span class="c1"># AMADS uses &quot;Unknown&quot; to represent None.</span>
            <span class="c1"># Of course, if a user really names an instrument &quot;Unknown&quot;,</span>
            <span class="c1"># that particular name will not be stored in the Part.</span>
            <span class="n">name</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="n">part</span> <span class="o">=</span> <span class="n">Part</span><span class="p">(</span><span class="n">parent</span><span class="o">=</span><span class="n">score</span><span class="p">,</span> <span class="n">onset</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">instrument</span><span class="o">=</span><span class="n">name</span><span class="p">)</span>

        <span class="c1"># now that we&#39;ve put the name in the Part, change None to a unique name</span>
        <span class="c1"># so that we can make the part a named instrument group. If we are not</span>
        <span class="c1"># grouping by instrument, we want each part in its own group, so we</span>
        <span class="c1"># give each part a unique name in that case too.</span>
        <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">group_by_instrument</span><span class="p">:</span>
            <span class="n">name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;_None~@_</span><span class="si">{</span><span class="n">no_name_id</span><span class="si">}</span><span class="s2">&quot;</span>  <span class="c1"># something unlikely to be a name</span>
            <span class="n">no_name_id</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">group</span> <span class="o">=</span> <span class="n">instrument_groups</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="p">[])</span>
        <span class="n">group</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">part</span><span class="p">)</span>
        <span class="n">instrument_groups</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">group</span>

        <span class="k">for</span> <span class="n">note</span> <span class="ow">in</span> <span class="n">ins</span><span class="o">.</span><span class="n">notes</span><span class="p">:</span>
            <span class="c1"># Create a Note object and associate it with the Part</span>
            <span class="n">Note</span><span class="p">(</span>
                <span class="n">parent</span><span class="o">=</span><span class="n">part</span><span class="p">,</span>
                <span class="n">onset</span><span class="o">=</span><span class="n">note</span><span class="o">.</span><span class="n">start</span><span class="p">,</span>
                <span class="n">duration</span><span class="o">=</span><span class="n">note</span><span class="o">.</span><span class="n">get_duration</span><span class="p">(),</span>
                <span class="n">pitch</span><span class="o">=</span><span class="n">Pitch</span><span class="p">(</span><span class="n">note</span><span class="o">.</span><span class="n">pitch</span><span class="p">),</span>
                <span class="n">dynamic</span><span class="o">=</span><span class="n">note</span><span class="o">.</span><span class="n">velocity</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">duration</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">duration</span><span class="p">,</span> <span class="n">note</span><span class="o">.</span><span class="n">end</span><span class="p">)</span>
        <span class="k">assert</span> <span class="ow">not</span> <span class="n">has_staff</span><span class="p">(</span>
            <span class="n">part</span>
        <span class="p">),</span> <span class="s2">&quot;Part should not have Staffs before flattening&quot;</span>

    <span class="n">score</span><span class="o">.</span><span class="n">duration</span> <span class="o">=</span> <span class="n">duration</span>
    <span class="k">for</span> <span class="n">part</span> <span class="ow">in</span> <span class="n">score</span><span class="o">.</span><span class="n">content</span><span class="p">:</span>
        <span class="n">part</span><span class="o">.</span><span class="n">duration</span> <span class="o">=</span> <span class="n">duration</span>  <span class="c1"># all parts get same max duration</span>
        <span class="k">assert</span> <span class="ow">not</span> <span class="n">has_staff</span><span class="p">(</span><span class="n">part</span><span class="p">),</span> <span class="s2">&quot;Part should not have Staffs&quot;</span>

    <span class="c1"># Then if collapse, merge and sort the notes</span>
    <span class="k">if</span> <span class="n">collapse</span><span class="p">:</span>
        <span class="n">score</span> <span class="o">=</span> <span class="n">score</span><span class="o">.</span><span class="n">flatten</span><span class="p">(</span><span class="n">collapse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="n">score</span><span class="o">.</span><span class="n">convert_to_quarters</span><span class="p">()</span>  <span class="c1"># we want to return with quarters as time unit</span>

    <span class="c1"># TODO: remove this block</span>
    <span class="k">for</span> <span class="n">groups</span> <span class="ow">in</span> <span class="n">instrument_groups</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
        <span class="k">for</span> <span class="n">part</span> <span class="ow">in</span> <span class="n">groups</span><span class="p">:</span>
            <span class="k">assert</span> <span class="ow">not</span> <span class="n">has_staff</span><span class="p">(</span><span class="n">part</span><span class="p">),</span> <span class="s2">&quot;Part should not have Staffs 2&quot;</span>

    <span class="c1"># Then if not flatten, remove each part content, and staff and measures,</span>
    <span class="c1"># and move notes into measures, creating ties where they cross. This maybe</span>
    <span class="c1"># does some extra work if not grouping by instrument, because we already</span>
    <span class="c1"># have the right set of parts, but the real work here is creating the staffs</span>
    <span class="c1"># and measures, and moving notes into measures with ties, so we have</span>
    <span class="c1"># eliminated the small extra work of copying parts when not grouping.</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">flatten</span><span class="p">:</span>
        <span class="n">score</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>  <span class="c1"># remove parts from score</span>
        <span class="k">for</span> <span class="n">group</span> <span class="ow">in</span> <span class="n">instrument_groups</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
            <span class="n">new_part</span> <span class="o">=</span> <span class="n">group</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">insert_emptycopy_into</span><span class="p">(</span><span class="n">score</span><span class="p">)</span>
            <span class="n">new_part</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">Part</span><span class="p">,</span> <span class="n">new_part</span><span class="p">)</span>
            <span class="n">new_part</span><span class="o">.</span><span class="n">duration</span> <span class="o">=</span> <span class="n">score</span><span class="o">.</span><span class="n">duration</span>
            <span class="k">for</span> <span class="n">old_part</span> <span class="ow">in</span> <span class="n">group</span><span class="p">:</span>
                <span class="k">assert</span> <span class="ow">not</span> <span class="n">has_staff</span><span class="p">(</span>
                    <span class="n">old_part</span>
                <span class="p">),</span> <span class="s2">&quot;Part should not have Staffs before creating staffs&quot;</span>
                <span class="n">old_part</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">Part</span><span class="p">,</span> <span class="n">old_part</span><span class="p">)</span>
                <span class="n">notes</span> <span class="o">=</span> <span class="n">old_part</span><span class="o">.</span><span class="n">content</span>
                <span class="c1"># now notes have part as parent, but parent does not have notes</span>
                <span class="n">staff</span> <span class="o">=</span> <span class="n">Staff</span><span class="p">(</span>
                    <span class="n">parent</span><span class="o">=</span><span class="n">new_part</span><span class="p">,</span> <span class="n">onset</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="n">new_part</span><span class="o">.</span><span class="n">duration</span>
                <span class="p">)</span>
                <span class="c1"># in principle we could do this once for the first staff and</span>
                <span class="c1"># then copy the created staff with measures for any other</span>
                <span class="c1"># staff, but then we would have to save off the notes and</span>
                <span class="c1"># write another loop to insert each note list to a corresponding</span>
                <span class="c1"># staff. Besides, _create_measures might even be faster than</span>
                <span class="c1"># calling deepcopy on a Staff to copy the measures.</span>
                <span class="n">_create_measures</span><span class="p">(</span><span class="n">staff</span><span class="p">,</span> <span class="n">score</span><span class="o">.</span><span class="n">time_map</span><span class="p">,</span> <span class="n">pmscore</span><span class="p">)</span>
                <span class="n">notes</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span>
                    <span class="nb">list</span><span class="p">[</span><span class="n">Note</span><span class="p">],</span> <span class="n">notes</span>
                <span class="p">)</span>  <span class="c1"># tell type checker notes is list of Note</span>
                <span class="n">_add_notes_to_measures</span><span class="p">(</span>
                    <span class="n">notes</span><span class="p">,</span>
                    <span class="n">cast</span><span class="p">(</span><span class="nb">list</span><span class="p">[</span><span class="n">Measure</span><span class="p">],</span> <span class="n">staff</span><span class="o">.</span><span class="n">content</span><span class="p">),</span>
                    <span class="n">pmscore</span><span class="o">.</span><span class="n">resolution</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="n">old_part</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>  <span class="c1"># clean up</span>

    <span class="k">return</span> <span class="n">score</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="amads.io.m21_xml_import.music21_xml_import" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>            <span class="doc doc-object-name doc-function-name">music21_xml_import</span>


<a href="#amads.io.m21_xml_import.music21_xml_import" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">music21_xml_import</span><span class="p">(</span>
    <span class="n"><a class="autorefs autorefs-internal" title="filename (amads.io.m21_xml_import.music21_xml_import(filename))" href="#amads.io.m21_xml_import.music21_xml_import(filename)">filename</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="flatten (amads.io.m21_xml_import.music21_xml_import(flatten))" href="#amads.io.m21_xml_import.music21_xml_import(flatten)">flatten</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="collapse (amads.io.m21_xml_import.music21_xml_import(collapse))" href="#amads.io.m21_xml_import.music21_xml_import(collapse)">collapse</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="show (amads.io.m21_xml_import.music21_xml_import(show))" href="#amads.io.m21_xml_import.music21_xml_import(show)">show</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="group_by_instrument (amads.io.m21_xml_import.music21_xml_import(group_by_instrument))" href="#amads.io.m21_xml_import.music21_xml_import(group_by_instrument)">group_by_instrument</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-internal" title="            Score (amads.core.basics.Score)" href="../basics/#amads.core.basics.Score">Score</a></span>
</code></pre></div>

    <div class="doc doc-contents first">

        <p>Use music21 to import a MusicXML file and convert it to a Score.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
<h3 id="amads.io.m21_xml_import.music21_xml_import(filename)" class="doc doc-heading doc-heading-parameter">              <b><code>filename</code></b>
<a href="#amads.io.m21_xml_import.music21_xml_import(filename)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></code>)
          –
          <div class="doc-md-description">
            <p>The path to the MusicXML file.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h3 id="amads.io.m21_xml_import.music21_xml_import(flatten)" class="doc doc-heading doc-heading-parameter">              <b><code>flatten</code></b>
<a href="#amads.io.m21_xml_import.music21_xml_import(flatten)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>, default:
                  <code>False</code>
)
          –
          <div class="doc-md-description">
            <p>If True, flatten the score structure.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h3 id="amads.io.m21_xml_import.music21_xml_import(collapse)" class="doc doc-heading doc-heading-parameter">              <b><code>collapse</code></b>
<a href="#amads.io.m21_xml_import.music21_xml_import(collapse)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>, default:
                  <code>False</code>
)
          –
          <div class="doc-md-description">
            <p>If True and flatten is true, also collapse parts.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h3 id="amads.io.m21_xml_import.music21_xml_import(show)" class="doc doc-heading doc-heading-parameter">              <b><code>show</code></b>
<a href="#amads.io.m21_xml_import.music21_xml_import(show)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>, default:
                  <code>False</code>
)
          –
          <div class="doc-md-description">
            <p>If True, print the music21 score structure for debugging.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h3 id="amads.io.m21_xml_import.music21_xml_import(group_by_instrument)" class="doc doc-heading doc-heading-parameter">              <b><code>group_by_instrument</code></b>
<a href="#amads.io.m21_xml_import.music21_xml_import(group_by_instrument)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>, default:
                  <code>True</code>
)
          –
          <div class="doc-md-description">
            <p>If True, group parts by instrument name into staffs. Defaults to True.
See music21_to_score() for more details.</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><a class="autorefs autorefs-internal" title="            Score (amads.core.basics.Score)" href="../basics/#amads.core.basics.Score">Score</a></code>
          –
          <div class="doc-md-description">
            <p>The converted AMADS Score object.</p>
          </div>
        </li>
    </ul>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>amads/io/m21_xml_import.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">music21_xml_import</span><span class="p">(</span>
    <span class="n">filename</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">flatten</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">collapse</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">show</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">group_by_instrument</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Score</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Use music21 to import a MusicXML file and convert it to a Score.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    filename : str</span>
<span class="sd">        The path to the MusicXML file.</span>
<span class="sd">    flatten : bool, optional</span>
<span class="sd">        If True, flatten the score structure.</span>
<span class="sd">    collapse : bool, optional</span>
<span class="sd">        If True and flatten is true, also collapse parts.</span>
<span class="sd">    show : bool, optional</span>
<span class="sd">        If True, print the music21 score structure for debugging.</span>
<span class="sd">    group_by_instrument : bool, optional</span>
<span class="sd">        If True, group parts by instrument name into staffs. Defaults to True.</span>
<span class="sd">        See music21_to_score() for more details.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    Score</span>
<span class="sd">        The converted AMADS Score object.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Load the MusicXML file using music21</span>
    <span class="n">m21score</span> <span class="o">=</span> <span class="n">converter</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;xml&quot;</span><span class="p">)</span>

    <span class="c1"># m21score can be an Opus, but this is checked in music21_to_score, so we</span>
    <span class="c1"># can ignore the type error here:</span>
    <span class="n">score</span> <span class="o">=</span> <span class="n">music21_to_score</span><span class="p">(</span>
        <span class="n">m21score</span><span class="p">,</span>
        <span class="n">flatten</span><span class="p">,</span>
        <span class="n">collapse</span><span class="p">,</span>
        <span class="n">show</span><span class="p">,</span>  <span class="c1"># type: ignore</span>
        <span class="n">group_by_instrument</span><span class="o">=</span><span class="n">group_by_instrument</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">score</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="amads.io.pt_xml_import.partitura_xml_import" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>            <span class="doc doc-object-name doc-function-name">partitura_xml_import</span>


<a href="#amads.io.pt_xml_import.partitura_xml_import" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">partitura_xml_import</span><span class="p">(</span>
    <span class="n"><a class="autorefs autorefs-internal" title="filename (amads.io.pt_xml_import.partitura_xml_import(filename))" href="#amads.io.pt_xml_import.partitura_xml_import(filename)">filename</a></span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="flatten (amads.io.pt_xml_import.partitura_xml_import(flatten))" href="#amads.io.pt_xml_import.partitura_xml_import(flatten)">flatten</a></span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="collapse (amads.io.pt_xml_import.partitura_xml_import(collapse))" href="#amads.io.pt_xml_import.partitura_xml_import(collapse)">collapse</a></span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="show (amads.io.pt_xml_import.partitura_xml_import(show))" href="#amads.io.pt_xml_import.partitura_xml_import(show)">show</a></span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="group_by_instrument (amads.io.pt_xml_import.partitura_xml_import(group_by_instrument))" href="#amads.io.pt_xml_import.partitura_xml_import(group_by_instrument)">group_by_instrument</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-internal" title="            Score (amads.core.basics.Score)" href="../basics/#amads.core.basics.Score">Score</a></span>
</code></pre></div>

    <div class="doc doc-contents first">

        <p>Use Partitura to import a MusicXML file.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
<h3 id="amads.io.pt_xml_import.partitura_xml_import(filename)" class="doc doc-heading doc-heading-parameter">              <b><code>filename</code></b>
<a href="#amads.io.pt_xml_import.partitura_xml_import(filename)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></code>)
          –
          <div class="doc-md-description">
            <p>The path (relative or absolute) to the music file.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h3 id="amads.io.pt_xml_import.partitura_xml_import(flatten)" class="doc doc-heading doc-heading-parameter">              <b><code>flatten</code></b>
<a href="#amads.io.pt_xml_import.partitura_xml_import(flatten)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code>bool = False</code>, default:
                  <code>False</code>
)
          –
          <div class="doc-md-description">
            <p>Returns a flat score (see <code>amads.core.basics.Part.flatten</code>)</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h3 id="amads.io.pt_xml_import.partitura_xml_import(collapse)" class="doc doc-heading doc-heading-parameter">              <b><code>collapse</code></b>
<a href="#amads.io.pt_xml_import.partitura_xml_import(collapse)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code>bool = False</code>, default:
                  <code>False</code>
)
          –
          <div class="doc-md-description">
            <p>If <code>flatten</code> is True, all Notes are merged (collapsed) into
a single Part in the resulting Score.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h3 id="amads.io.pt_xml_import.partitura_xml_import(show)" class="doc doc-heading doc-heading-parameter">              <b><code>show</code></b>
<a href="#amads.io.pt_xml_import.partitura_xml_import(show)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code>bool = False</code>, default:
                  <code>False</code>
)
          –
          <div class="doc-md-description">
            <p>Print a text representation of the data.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h3 id="amads.io.pt_xml_import.partitura_xml_import(group_by_instrument)" class="doc doc-heading doc-heading-parameter">              <b><code>group_by_instrument</code></b>
<a href="#amads.io.pt_xml_import.partitura_xml_import(group_by_instrument)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code>bool = True</code>, default:
                  <code>True</code>
)
          –
          <div class="doc-md-description">
            <p>This parameter is ignored by Partitura, which automatically
produces parts with multiple staffs. The Partitura grouping
is respected, and <code>group_by_instrument</code> is ignored.</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><a class="autorefs autorefs-internal" title="            Score (amads.core.basics.Score)" href="../basics/#amads.core.basics.Score">Score</a></code>
          –
          <div class="doc-md-description">
            <p>The imported Score</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
              <code>&lt;small&gt;**Author**: Roger B. Dannenberg&lt;/small&gt;</code>
          –
          <div class="doc-md-description">
            
          </div>
        </li>
    </ul>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>amads/io/pt_xml_import.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">partitura_xml_import</span><span class="p">(</span>
    <span class="n">filename</span><span class="p">,</span>
    <span class="n">flatten</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">collapse</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">show</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">group_by_instrument</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Score</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Use Partitura to import a MusicXML file.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    filename : str</span>
<span class="sd">        The path (relative or absolute) to the music file.</span>
<span class="sd">    flatten : bool = False</span>
<span class="sd">        Returns a flat score (see `amads.core.basics.Part.flatten`)</span>
<span class="sd">    collapse : bool = False</span>
<span class="sd">        If `flatten` is True, all Notes are merged (collapsed) into</span>
<span class="sd">        a single Part in the resulting Score.</span>
<span class="sd">    show : bool = False</span>
<span class="sd">        Print a text representation of the data.</span>
<span class="sd">    group_by_instrument : bool = True</span>
<span class="sd">        This parameter is ignored by Partitura, which automatically</span>
<span class="sd">        produces parts with multiple staffs. The Partitura grouping</span>
<span class="sd">        is respected, and `group_by_instrument` is ignored.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    Score</span>
<span class="sd">        The imported Score</span>

<span class="sd">    &lt;small&gt;**Author**: Roger B. Dannenberg&lt;/small&gt;</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">filename</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">filename</span> <span class="o">=</span> <span class="n">pt</span><span class="o">.</span><span class="n">EXAMPLE_MUSICXML</span>

    <span class="c1"># Partitura.load_score claims to accept a file-like object, but</span>
    <span class="c1"># it has been problematic for us in the past, so we use a string filename.</span>
    <span class="n">filename</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>

    <span class="n">ptscore</span> <span class="o">=</span> <span class="n">pt</span><span class="o">.</span><span class="n">load_score</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">show</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Partitura score structure from </span><span class="si">{</span><span class="n">filename</span><span class="si">}</span><span class="s2">:&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">ptpart</span> <span class="ow">in</span> <span class="n">ptscore</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">ptpart</span><span class="o">.</span><span class="n">pretty</span><span class="p">())</span>
    <span class="n">score</span> <span class="o">=</span> <span class="n">Score</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">ptpart</span> <span class="ow">in</span> <span class="n">ptscore</span><span class="o">.</span><span class="n">parts</span><span class="p">:</span>
        <span class="n">partitura_convert_part</span><span class="p">(</span><span class="n">ptpart</span><span class="p">,</span> <span class="n">score</span><span class="p">)</span>
    <span class="n">score</span><span class="o">.</span><span class="n">inherit_duration</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">flatten</span> <span class="ow">or</span> <span class="n">collapse</span><span class="p">:</span>
        <span class="n">score</span> <span class="o">=</span> <span class="n">score</span><span class="o">.</span><span class="n">flatten</span><span class="p">(</span><span class="n">collapse</span><span class="o">=</span><span class="n">collapse</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">score</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div><h2 id="low-level-output-functions">Low-Level Output Functions<a class="headerlink" href="#low-level-output-functions" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-function">


<h2 id="amads.io.m21_midi_export.music21_midi_export" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>            <span class="doc doc-object-name doc-function-name">music21_midi_export</span>


<a href="#amads.io.m21_midi_export.music21_midi_export" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">music21_midi_export</span><span class="p">(</span>
    <span class="n"><a class="autorefs autorefs-internal" title="score (amads.io.m21_midi_export.music21_midi_export(score))" href="#amads.io.m21_midi_export.music21_midi_export(score)">score</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            Score (amads.core.basics.Score)" href="../basics/#amads.core.basics.Score">Score</a></span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-internal" title="filename (amads.io.m21_midi_export.music21_midi_export(filename))" href="#amads.io.m21_midi_export.music21_midi_export(filename)">filename</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-internal" title="show (amads.io.m21_midi_export.music21_midi_export(show))" href="#amads.io.m21_midi_export.music21_midi_export(show)">show</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">False</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents first">

        <p>Save a Score to a file in MIDI format using music21.</p>
<p><small><strong>Author</strong>: Roger B. Dannenberg</small></p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
<h3 id="amads.io.m21_midi_export.music21_midi_export(score)" class="doc doc-heading doc-heading-parameter">              <b><code>score</code></b>
<a href="#amads.io.m21_midi_export.music21_midi_export(score)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-internal" title="            Score (amads.core.basics.Score)" href="../basics/#amads.core.basics.Score">Score</a></code>)
          –
          <div class="doc-md-description">
            <p>The Score to export.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h3 id="amads.io.m21_midi_export.music21_midi_export(filename)" class="doc doc-heading doc-heading-parameter">              <b><code>filename</code></b>
<a href="#amads.io.m21_midi_export.music21_midi_export(filename)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></code>)
          –
          <div class="doc-md-description">
            <p>The name of the file to save the MIDI data.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h3 id="amads.io.m21_midi_export.music21_midi_export(show)" class="doc doc-heading doc-heading-parameter">              <b><code>show</code></b>
<a href="#amads.io.m21_midi_export.music21_midi_export(show)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>, default:
                  <code>False</code>
)
          –
          <div class="doc-md-description">
            <p>If True, print the music21 score structure for debugging.</p>
          </div>
        </li>
    </ul>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>amads/io/m21_midi_export.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">music21_midi_export</span><span class="p">(</span>
    <span class="n">score</span><span class="p">:</span> <span class="n">Score</span><span class="p">,</span>
    <span class="n">filename</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">show</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Save a Score to a file in MIDI format using music21.</span>

<span class="sd">    &lt;small&gt;**Author**: Roger B. Dannenberg&lt;/small&gt;</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    score : Score</span>
<span class="sd">        The Score to export.</span>
<span class="sd">    filename : str</span>
<span class="sd">        The name of the file to save the MIDI data.</span>
<span class="sd">    show : bool, optional</span>
<span class="sd">        If True, print the music21 score structure for debugging.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">m21score</span> <span class="o">=</span> <span class="n">score_to_music21</span><span class="p">(</span><span class="n">score</span><span class="p">,</span> <span class="n">show</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>
    <span class="n">m21score</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;midi&quot;</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="amads.io.pm_midi_export.pretty_midi_midi_export" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>            <span class="doc doc-object-name doc-function-name">pretty_midi_midi_export</span>


<a href="#amads.io.pm_midi_export.pretty_midi_midi_export" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">pretty_midi_midi_export</span><span class="p">(</span>
    <span class="n"><a class="autorefs autorefs-internal" title="score (amads.io.pm_midi_export.pretty_midi_midi_export(score))" href="#amads.io.pm_midi_export.pretty_midi_midi_export(score)">score</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            Score (amads.core.basics.Score)" href="../basics/#amads.core.basics.Score">Score</a></span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-internal" title="filename (amads.io.pm_midi_export.pretty_midi_midi_export(filename))" href="#amads.io.pm_midi_export.pretty_midi_midi_export(filename)">filename</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-internal" title="show (amads.io.pm_midi_export.pretty_midi_midi_export(show))" href="#amads.io.pm_midi_export.pretty_midi_midi_export(show)">show</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">False</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents first">

        <p>Export a Score as a standard MIDI file using PrettyMIDI library.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
<h3 id="amads.io.pm_midi_export.pretty_midi_midi_export(score)" class="doc doc-heading doc-heading-parameter">              <b><code>score</code></b>
<a href="#amads.io.pm_midi_export.pretty_midi_midi_export(score)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-internal" title="            Score (amads.core.basics.Score)" href="../basics/#amads.core.basics.Score">Score</a></code>)
          –
          <div class="doc-md-description">
            <p>The Score object to export.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h3 id="amads.io.pm_midi_export.pretty_midi_midi_export(filename)" class="doc doc-heading doc-heading-parameter">              <b><code>filename</code></b>
<a href="#amads.io.pm_midi_export.pretty_midi_midi_export(filename)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></code>)
          –
          <div class="doc-md-description">
            <p>The path to the output MIDI file.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h3 id="amads.io.pm_midi_export.pretty_midi_midi_export(show)" class="doc doc-heading doc-heading-parameter">              <b><code>show</code></b>
<a href="#amads.io.pm_midi_export.pretty_midi_midi_export(show)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>, default:
                  <code>False</code>
)
          –
          <div class="doc-md-description">
            <p>Print a text representation of the data.</p>
          </div>
        </li>
    </ul>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>amads/io/pm_midi_export.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">pretty_midi_midi_export</span><span class="p">(</span>
    <span class="n">score</span><span class="p">:</span> <span class="n">Score</span><span class="p">,</span> <span class="n">filename</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">show</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Export a Score as a standard MIDI file using PrettyMIDI library.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    score : Score</span>
<span class="sd">        The Score object to export.</span>
<span class="sd">    filename : str</span>
<span class="sd">        The path to the output MIDI file.</span>
<span class="sd">    show : bool</span>
<span class="sd">        Print a text representation of the data.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">tied_to_notes</span>  <span class="c1"># helps to merge tied notes</span>
    <span class="n">tied_to_notes</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="n">score</span><span class="o">.</span><span class="n">convert_to_seconds</span><span class="p">()</span>
    <span class="n">score</span><span class="o">.</span><span class="n">merge_tied_notes</span><span class="p">()</span>

    <span class="c1"># 600 gives 1 ms resolution at 100 bpm</span>
    <span class="n">pmscore</span> <span class="o">=</span> <span class="n">pm</span><span class="o">.</span><span class="n">PrettyMIDI</span><span class="p">(</span><span class="n">resolution</span><span class="o">=</span><span class="mi">600</span><span class="p">)</span>

    <span class="c1"># Create tempo changes from TimeMap</span>
    <span class="n">tm</span> <span class="o">=</span> <span class="n">score</span><span class="o">.</span><span class="n">time_map</span>
    <span class="k">if</span> <span class="n">tm</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">tick_scales</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">tm</span><span class="o">.</span><span class="n">changes</span><span class="p">)):</span>
            <span class="n">bpm</span> <span class="o">=</span> <span class="n">tm</span><span class="o">.</span><span class="n">get_tempo_at</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
            <span class="n">resolution</span> <span class="o">=</span> <span class="n">pmscore</span><span class="o">.</span><span class="n">resolution</span>
            <span class="c1"># form breakpoints with units of (ticks, seconds/tick)</span>
            <span class="n">tick_scale</span> <span class="o">=</span> <span class="mf">60.0</span> <span class="o">/</span> <span class="p">(</span><span class="n">bpm</span> <span class="o">*</span> <span class="n">resolution</span><span class="p">)</span>
            <span class="n">tick_scales</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                <span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">tm</span><span class="o">.</span><span class="n">changes</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">quarter</span> <span class="o">*</span> <span class="n">resolution</span><span class="p">),</span> <span class="n">tick_scale</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="n">pmscore</span><span class="o">.</span><span class="n">_tick_scales</span> <span class="o">=</span> <span class="n">tick_scales</span>

    <span class="c1"># We want to write every Part or Staff as a separate PrettyMIDI Instrument</span>
    <span class="c1"># Gather the EventGroups to write. Note that the reader may reconstruct</span>
    <span class="c1"># The Part/Staff hierarchy if all Parts have different instruments and</span>
    <span class="c1"># read_score is invoked with the default group_by_instrument=True.</span>
    <span class="n">evgroups</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Part</span> <span class="o">|</span> <span class="n">Staff</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">part</span> <span class="ow">in</span> <span class="n">score</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="n">Part</span><span class="p">):</span>  <span class="c1"># type: ignore</span>
        <span class="c1"># search Part for any Notes at the top level</span>
        <span class="n">part</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">Part</span><span class="p">,</span> <span class="n">part</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">ev</span><span class="p">,</span> <span class="n">Note</span><span class="p">)</span> <span class="k">for</span> <span class="n">ev</span> <span class="ow">in</span> <span class="n">part</span><span class="o">.</span><span class="n">content</span><span class="p">):</span>
            <span class="n">evgroups</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">part</span><span class="p">)</span>
        <span class="c1"># search for Staffs within Part</span>
        <span class="k">for</span> <span class="n">staff</span> <span class="ow">in</span> <span class="n">part</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="n">Staff</span><span class="p">):</span>
            <span class="n">staff</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">Staff</span><span class="p">,</span> <span class="n">staff</span><span class="p">)</span>
            <span class="n">evgroups</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">staff</span><span class="p">)</span>
    <span class="n">key_signatures</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># Collect key signatures for pmscore</span>

    <span class="c1"># Create instruments and add notes</span>
    <span class="k">for</span> <span class="n">evgroup</span> <span class="ow">in</span> <span class="n">evgroups</span><span class="p">:</span>
        <span class="c1"># determine a name for the pm.Instrument</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">evgroup</span><span class="p">,</span> <span class="n">Part</span><span class="p">):</span>
            <span class="n">part</span><span class="p">:</span> <span class="n">Part</span> <span class="o">=</span> <span class="n">evgroup</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">part</span> <span class="o">=</span> <span class="n">evgroup</span><span class="o">.</span><span class="n">part</span>  <span class="c1"># type: ignore</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">part</span><span class="o">.</span><span class="n">instrument</span>
        <span class="n">program</span> <span class="o">=</span> <span class="n">part</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;midi_program&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">program</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">program</span> <span class="o">=</span> <span class="n">pm</span><span class="o">.</span><span class="n">instrument_name_to_program</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
                <span class="n">program</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">program</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">program</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c1"># Acoustic Grand Piano as default</span>
        <span class="n">instrument</span> <span class="o">=</span> <span class="n">pm</span><span class="o">.</span><span class="n">Instrument</span><span class="p">(</span>
            <span class="n">program</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">name</span> <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="s2">&quot;Unknown&quot;</span>
        <span class="p">)</span>

        <span class="n">add_eventgroup_to_instrument</span><span class="p">(</span><span class="n">evgroup</span><span class="p">,</span> <span class="n">instrument</span><span class="p">,</span> <span class="n">key_signatures</span><span class="p">)</span>
        <span class="n">pmscore</span><span class="o">.</span><span class="n">instruments</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">instrument</span><span class="p">)</span>

    <span class="c1"># Create time signature changes</span>
    <span class="k">for</span> <span class="n">ts</span> <span class="ow">in</span> <span class="n">score</span><span class="o">.</span><span class="n">time_signatures</span><span class="p">:</span>
        <span class="c1"># Convert onset (in quarters) to seconds using time_map</span>
        <span class="n">time_in_seconds</span> <span class="o">=</span> <span class="n">score</span><span class="o">.</span><span class="n">time_map</span><span class="o">.</span><span class="n">quarter_to_time</span><span class="p">(</span><span class="n">ts</span><span class="o">.</span><span class="n">time</span><span class="p">)</span>
        <span class="n">pm_ts</span> <span class="o">=</span> <span class="n">pm</span><span class="o">.</span><span class="n">TimeSignature</span><span class="p">(</span>
            <span class="n">numerator</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">ts</span><span class="o">.</span><span class="n">upper</span><span class="p">),</span>
            <span class="n">denominator</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">ts</span><span class="o">.</span><span class="n">lower</span><span class="p">),</span>
            <span class="n">time</span><span class="o">=</span><span class="n">time_in_seconds</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">pmscore</span><span class="o">.</span><span class="n">time_signature_changes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pm_ts</span><span class="p">)</span>

    <span class="c1"># Add key signatures to pmscore</span>
    <span class="n">pmscore</span><span class="o">.</span><span class="n">key_signature_changes</span> <span class="o">=</span> <span class="n">key_signatures</span>

    <span class="c1"># Force pretty_midi to use custom _tick_scales before writing:</span>
    <span class="n">_</span> <span class="o">=</span> <span class="n">pmscore</span><span class="o">.</span><span class="n">get_end_time</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">show</span><span class="p">:</span>
        <span class="kn">from</span><span class="w"> </span><span class="nn">amads.io.pm_show</span><span class="w"> </span><span class="kn">import</span> <span class="n">pretty_midi_show</span>

        <span class="n">pretty_midi_show</span><span class="p">(</span><span class="n">pmscore</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>

    <span class="c1"># Write to MIDI file</span>
    <span class="n">pmscore</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
    <span class="n">tied_to_notes</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># clear global variable after use</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="amads.io.m21_xml_export.music21_xml_export" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>            <span class="doc doc-object-name doc-function-name">music21_xml_export</span>


<a href="#amads.io.m21_xml_export.music21_xml_export" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">music21_xml_export</span><span class="p">(</span>
    <span class="n"><a class="autorefs autorefs-internal" title="score (amads.io.m21_xml_export.music21_xml_export(score))" href="#amads.io.m21_xml_export.music21_xml_export(score)">score</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            Score (amads.core.basics.Score)" href="../basics/#amads.core.basics.Score">Score</a></span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-internal" title="filename (amads.io.m21_xml_export.music21_xml_export(filename))" href="#amads.io.m21_xml_export.music21_xml_export(filename)">filename</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-internal" title="show (amads.io.m21_xml_export.music21_xml_export(show))" href="#amads.io.m21_xml_export.music21_xml_export(show)">show</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">False</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents first">

        <p>Save a Score to a file in musicxml format using music21.</p>
<p><small><strong>Author</strong>: Roger B. Dannenberg</small></p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
<h3 id="amads.io.m21_xml_export.music21_xml_export(score)" class="doc doc-heading doc-heading-parameter">              <b><code>score</code></b>
<a href="#amads.io.m21_xml_export.music21_xml_export(score)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-internal" title="            Score (amads.core.basics.Score)" href="../basics/#amads.core.basics.Score">Score</a></code>)
          –
          <div class="doc-md-description">
            <p>The Score to export.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h3 id="amads.io.m21_xml_export.music21_xml_export(filename)" class="doc doc-heading doc-heading-parameter">              <b><code>filename</code></b>
<a href="#amads.io.m21_xml_export.music21_xml_export(filename)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></code>)
          –
          <div class="doc-md-description">
            <p>The name of the file to save the MusicXML data.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h3 id="amads.io.m21_xml_export.music21_xml_export(show)" class="doc doc-heading doc-heading-parameter">              <b><code>show</code></b>
<a href="#amads.io.m21_xml_export.music21_xml_export(show)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>, default:
                  <code>False</code>
)
          –
          <div class="doc-md-description">
            <p>If True, print the music21 score structure for debugging.</p>
          </div>
        </li>
    </ul>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>amads/io/m21_xml_export.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">music21_xml_export</span><span class="p">(</span>
    <span class="n">score</span><span class="p">:</span> <span class="n">Score</span><span class="p">,</span>
    <span class="n">filename</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">show</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Save a Score to a file in musicxml format using music21.</span>

<span class="sd">    &lt;small&gt;**Author**: Roger B. Dannenberg&lt;/small&gt;</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    score : Score</span>
<span class="sd">        The Score to export.</span>
<span class="sd">    filename : str</span>
<span class="sd">        The name of the file to save the MusicXML data.</span>
<span class="sd">    show : bool, optional</span>
<span class="sd">        If True, print the music21 score structure for debugging.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">m21score</span> <span class="o">=</span> <span class="n">score_to_music21</span><span class="p">(</span><span class="n">score</span><span class="p">,</span> <span class="n">show</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>

    <span class="c1"># Export as text and fix part id&#39;s</span>
    <span class="n">exporter</span> <span class="o">=</span> <span class="n">musicxml</span><span class="o">.</span><span class="n">m21ToXml</span><span class="o">.</span><span class="n">GeneralObjectExporter</span><span class="p">(</span><span class="n">m21score</span><span class="p">)</span>
    <span class="n">musicxml_bytes</span> <span class="o">=</span> <span class="n">exporter</span><span class="o">.</span><span class="n">parse</span><span class="p">()</span>
    <span class="n">musicxml_str</span> <span class="o">=</span> <span class="n">musicxml_bytes</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
    <span class="n">fixed_xml</span> <span class="o">=</span> <span class="n">fix_part_ids</span><span class="p">(</span><span class="n">musicxml_str</span><span class="p">)</span>

    <span class="c1"># Finally, write the file</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">fixed_xml</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="amads.io.pt_xml_export.partitura_xml_export" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>            <span class="doc doc-object-name doc-function-name">partitura_xml_export</span>


<a href="#amads.io.pt_xml_export.partitura_xml_export" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">partitura_xml_export</span><span class="p">(</span>
    <span class="n"><a class="autorefs autorefs-internal" title="score (amads.io.pt_xml_export.partitura_xml_export(score))" href="#amads.io.pt_xml_export.partitura_xml_export(score)">score</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            Score (amads.core.basics.Score)" href="../basics/#amads.core.basics.Score">Score</a></span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-internal" title="filename (amads.io.pt_xml_export.partitura_xml_export(filename))" href="#amads.io.pt_xml_export.partitura_xml_export(filename)">filename</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-internal" title="show (amads.io.pt_xml_export.partitura_xml_export(show))" href="#amads.io.pt_xml_export.partitura_xml_export(show)">show</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">False</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents first">

        <p>Save a Score to a file in musicxml format using Partitura.</p>
<p><small><strong>Author</strong>: Roger B. Dannenberg</small></p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
<h3 id="amads.io.pt_xml_export.partitura_xml_export(score)" class="doc doc-heading doc-heading-parameter">              <b><code>score</code></b>
<a href="#amads.io.pt_xml_export.partitura_xml_export(score)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-internal" title="            Score (amads.core.basics.Score)" href="../basics/#amads.core.basics.Score">Score</a></code>)
          –
          <div class="doc-md-description">
            <p>The Score to export.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h3 id="amads.io.pt_xml_export.partitura_xml_export(filename)" class="doc doc-heading doc-heading-parameter">              <b><code>filename</code></b>
<a href="#amads.io.pt_xml_export.partitura_xml_export(filename)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></code>)
          –
          <div class="doc-md-description">
            <p>The name of the file to save the MusicXML data.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h3 id="amads.io.pt_xml_export.partitura_xml_export(show)" class="doc doc-heading doc-heading-parameter">              <b><code>show</code></b>
<a href="#amads.io.pt_xml_export.partitura_xml_export(show)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>, default:
                  <code>False</code>
)
          –
          <div class="doc-md-description">
            <p>If True, print the partitura score structure for debugging.</p>
          </div>
        </li>
    </ul>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>amads/io/pt_xml_export.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">partitura_xml_export</span><span class="p">(</span>
    <span class="n">score</span><span class="p">:</span> <span class="n">Score</span><span class="p">,</span>
    <span class="n">filename</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">show</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Save a Score to a file in musicxml format using Partitura.</span>

<span class="sd">    &lt;small&gt;**Author**: Roger B. Dannenberg&lt;/small&gt;</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    score : Score</span>
<span class="sd">        The Score to export.</span>
<span class="sd">    filename : str</span>
<span class="sd">        The name of the file to save the MusicXML data.</span>
<span class="sd">    show : bool, optional</span>
<span class="sd">        If True, print the partitura score structure for debugging.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">ptscore</span> <span class="o">=</span> <span class="n">score_to_partitura</span><span class="p">(</span><span class="n">score</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">show</span><span class="p">)</span>
    <span class="n">save_musicxml</span><span class="p">(</span><span class="n">ptscore</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div><h2 id="built-in-scores">Built-In Scores<a class="headerlink" href="#built-in-scores" title="Permanent link">&para;</a></h2>


<div class="doc doc-object doc-module">



<h2 id="amads.music.example" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>            <span class="doc doc-object-name doc-module-name">example</span>


<a href="#amads.music.example" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents first">












<p><span class="doc-section-title">Functions:</span></p>
    <ul>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="            fullpath (amads.music.example.fullpath)" href="#amads.music.example.fullpath">fullpath</a></code></b>
            –
            <div class="doc-md-description">
              <p>Construct a full path name for an example file.</p>
            </div>
          </li>
    </ul>





<div class="doc doc-children">








<h3 id="amads.music.example-functions">Functions<a href="#amads.music.example-functions" class="headerlink" title="Permanent link">&para;</a></h3>

<div class="doc doc-object doc-function">


<h4 id="amads.music.example.fullpath" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>            <span class="doc doc-object-name doc-function-name">fullpath</span>


<a href="#amads.music.example.fullpath" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">fullpath</span><span class="p">(</span><span class="n"><span title="amads.music.example.fullpath(example)">example</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span> <span class="o">|</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Construct a full path name for an example file.
For example, fullpath("midi/sarabande.mid") returns a path to a
readable file from this package.  This uses importlib so that
we can read files even from compressed packages (we hope).</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>amads/music/example.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">fullpath</span><span class="p">(</span><span class="n">example</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Construct a full path name for an example file.</span>
<span class="sd">    For example, fullpath(&quot;midi/sarabande.mid&quot;) returns a path to a</span>
<span class="sd">    readable file from this package.  This uses importlib so that</span>
<span class="sd">    we can read files even from compressed packages (we hope).</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">trim_path</span><span class="p">(</span><span class="n">full</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;remove first part of path to construct valid parameter value&quot;&quot;&quot;</span>
        <span class="n">first_part</span> <span class="o">=</span> <span class="s2">&quot;amads/music/&quot;</span>
        <span class="n">index</span> <span class="o">=</span> <span class="n">full</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">first_part</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">full</span> <span class="k">if</span> <span class="n">index</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span> <span class="k">else</span> <span class="n">full</span><span class="p">[</span><span class="n">index</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="n">first_part</span><span class="p">)</span> <span class="p">:]</span>

    <span class="n">path</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">resources</span><span class="o">.</span><span class="n">files</span><span class="p">(</span><span class="s2">&quot;amads&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">joinpath</span><span class="p">(</span><span class="s2">&quot;music/&quot;</span> <span class="o">+</span> <span class="n">example</span><span class="p">))</span>

    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">path</span><span class="p">)</span> <span class="ow">and</span> <span class="n">os</span><span class="o">.</span><span class="n">access</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">R_OK</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">path</span>

    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;In amads.example.fullpath(&quot;</span> <span class="o">+</span> <span class="n">example</span> <span class="o">+</span> <span class="s2">&quot;):&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;    File was not found. Try one of these:&quot;</span><span class="p">)</span>

    <span class="n">spec</span> <span class="o">=</span> <span class="n">util</span><span class="o">.</span><span class="n">find_spec</span><span class="p">(</span><span class="s2">&quot;amads&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">spec</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Error: Package amads not found&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="n">spec</span><span class="o">.</span><span class="n">submodule_search_locations</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Error: Package amads has no submodule search locations&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span>
    <span class="n">package_path</span> <span class="o">=</span> <span class="n">spec</span><span class="o">.</span><span class="n">submodule_search_locations</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

    <span class="c1"># Walk through the directory hierarchy</span>
    <span class="k">for</span> <span class="n">root</span><span class="p">,</span> <span class="n">dirs</span><span class="p">,</span> <span class="n">files</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">walk</span><span class="p">(</span><span class="n">package_path</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">ext</span> <span class="ow">in</span> <span class="n">music_extensions</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">file</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">ext</span><span class="p">):</span>
                    <span class="n">parameter_option</span> <span class="o">=</span> <span class="n">trim_path</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">file</span><span class="p">))</span>
                    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;   &quot;</span><span class="si">{</span><span class="n">parameter_option</span><span class="si">}</span><span class="s1">&quot;&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": ["navigation.sections", "navigation.expand", "navigation.tabs"], "search": "../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
        <script src="../../javascripts/fix-properties.js"></script>
      
        <script src="../../javascripts/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>