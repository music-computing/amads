
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../scale/">
      
      
        <link rel="next" href="../../schema/">
      
      
        
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.2">
    
    
      
        <title>Slice - AMADS</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.484c7ddc.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#amads.algorithms.slice.salami" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="AMADS" class="md-header__button md-logo" aria-label="AMADS" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            AMADS
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Slice
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../paper/" class="md-tabs__link">
        
  
  
    
  
  Project Overview

      </a>
    </li>
  

      
        
  
  
  
    
  
  
    
    
      
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../../core/" class="md-tabs__link">
          
  
  
  API Reference

        </a>
      </li>
    
  

    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../user_guide/installation/" class="md-tabs__link">
        
  
  
    
  
  Install

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../developer_notes/documentation/" class="md-tabs__link">
          
  
  
  Developer

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="AMADS" class="md-nav__button md-logo" aria-label="AMADS" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    AMADS
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../paper/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Project Overview
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    API Reference
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    API Reference
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_1" >
        
          
          <label class="md-nav__link" for="__nav_3_1" id="__nav_3_1_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Core
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    Core
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../core/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../basics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Basic Score Elements
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../basics_more/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    More Classes
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../pitch/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Pitch
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../distribution/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Distribution
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../utils/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Utility Functions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../vector/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Vector Functions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../io/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Input and Output
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_3" >
        
          
          <label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Pitch
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Pitch
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../pitch/ismonophonic/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ismonophonic
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../pitch/hz2midi/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Hz2midi
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../pitch/intervals/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Interval Distributions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../pitch/pitches/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Pitch Distributions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../pitch/key/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Key Profiles
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../pitch/serial/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Serial
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_4" >
        
          
          <label class="md-nav__link" for="__nav_3_4" id="__nav_3_4_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Time
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Time
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../time/durations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Duration Distributions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../time/meter/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Meter
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../time/notedensity/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Note Density
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../time/rhythm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Rhythm
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../time/swing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Swing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../time/tempo/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tempo
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../time/variability/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Variability
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_5" >
        
          
          <label class="md-nav__link" for="__nav_3_5" id="__nav_3_5_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Melody
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Melody
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../melody/boundary/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Boundary
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../melody/contour/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Contour
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../melody/segment/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Segment
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../melody/segment_gestalt/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Segment gestalt
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../melody/similarity/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Similarity
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_6" >
        
          
          <label class="md-nav__link" for="__nav_3_6" id="__nav_3_6_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Harmony
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Harmony
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../harmony/consonance/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Consonance
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../harmony/root_finding/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Root finding
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_7" >
        
          
          <label class="md-nav__link" for="__nav_3_7" id="__nav_3_7_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Polyphony
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    Polyphony
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../polyphony/skyline/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Skyline
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_8" checked>
        
          
          <label class="md-nav__link" for="__nav_3_8" id="__nav_3_8_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Algorithms
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_8_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    Algorithms
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../complexity/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Complexity
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../entropy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Entropy
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../gcd/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    GCD
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mtype_tokenizer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Mtype tokenizer
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ngrams/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Ngrams
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../nnotes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Nnotes
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../norm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Norm
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../scale/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Scale
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Slice
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Slice
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#amads.algorithms.slice.salami" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;salami
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.algorithms.slice.salami.Timepoint" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;Timepoint
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.algorithms.slice.salami.salami_slice" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;salami_slice
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.algorithms.slice.slice.Slice" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;Slice
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.algorithms.slice.window.Window" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;Window
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.algorithms.slice.window.sliding_window" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;sliding_window
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../schema/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Schemata
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../user_guide/installation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Install
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Developer
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Developer
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer_notes/documentation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Documentation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer_notes/making_a_release/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Making a Release
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer_notes/modules/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Modules
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer_notes/testing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Testing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer_notes/contributing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Contributing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer_notes/style/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Style
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer_notes/github/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Github
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer_notes/design/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Design
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer_notes/music21/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Music21
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#amads.algorithms.slice.salami" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;salami
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.algorithms.slice.salami.Timepoint" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;Timepoint
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.algorithms.slice.salami.salami_slice" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;salami_slice
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.algorithms.slice.slice.Slice" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;Slice
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.algorithms.slice.window.Window" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;Window
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.algorithms.slice.window.sliding_window" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;sliding_window
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  



  <h1>Slice</h1>

<p>The <code>algorithms/slice</code> directory contains software pertaining
to breaking scores into sequences of “vertical slices,” e.g,
the portions of all notes within a sequence of time intervals.</p>
<p>In the “Salami Slice” algorithm, time intervals are non-overlapping
and their boundaries are all note onset and offset times. A list of
slices can be created by calling the
<a href="#amads.algorithms.slice.salami.salami_slice"><code>salami_slice</code></a> function.
The returned slices are instances of the
<a href="#amads.algorithms.slice.slice.Slice"><code>Slice</code></a> class.</p>
<p>A more basic way to slice a score is to construct a
<a href="#amads.algorithms.slice.window.Window"><code>Window</code></a>, which is basically
just a <a href="#amads.algorithms.slice.slice.Slice"><code>Slice</code></a> with a special
constructor that selects and clips notes that fall within a given
time interval, resulting in a single slice. You can create a sequence
of <a href="#amads.algorithms.slice.window.Window"><code>Window</code></a>s
using any criteria for time intervals, including overlapping windows.</p>


<div class="doc doc-object doc-module">



<h2 id="amads.algorithms.slice.salami" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>            <span class="doc doc-object-name doc-module-name">salami</span>


<a href="#amads.algorithms.slice.salami" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents first">

        <p>Salami slice algorithm for segmenting musical scores.</p>
<p>This module implements the salami slice algorithm, which segments a musical score
into vertical slices at each note onset and offset. Each slice contains all notes
that are sounding at that point in time.</p>
<p><small><strong>Author</strong>: Peter Harrison</small></p>
<p><strong>Note</strong>: The algorithm is named after the way a salami sausage is
sliced into thin, vertical segments.</p>















<div class="doc doc-children">












  </div>

    </div>

</div><hr />


<div class="doc doc-object doc-class">



<h2 id="amads.algorithms.slice.salami.Timepoint" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">Timepoint</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#amads.algorithms.slice.salami.Timepoint" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">Timepoint</span><span class="p">(</span>
    <span class="n"><a class="autorefs autorefs-internal" title="time (amads.algorithms.slice.salami.Timepoint(time))" href="#amads.algorithms.slice.salami.Timepoint(time)">time</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a></span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="note_ons (amads.algorithms.slice.salami.Timepoint(note_ons))" href="#amads.algorithms.slice.salami.Timepoint(note_ons)">note_ons</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-internal" title="            Note (amads.core.basics.Note)" href="../../basics/#amads.core.basics.Note">Note</a></span><span class="p">]</span> <span class="o">=</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a></span><span class="p">(),</span>
    <span class="n"><a class="autorefs autorefs-internal" title="note_offs (amads.algorithms.slice.salami.Timepoint(note_offs))" href="#amads.algorithms.slice.salami.Timepoint(note_offs)">note_offs</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-internal" title="            Note (amads.core.basics.Note)" href="../../basics/#amads.core.basics.Note">Note</a></span><span class="p">]</span> <span class="o">=</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a></span><span class="p">(),</span>
    <span class="n"><a class="autorefs autorefs-internal" title="sounding_notes (amads.algorithms.slice.salami.Timepoint(sounding_notes))" href="#amads.algorithms.slice.salami.Timepoint(sounding_notes)">sounding_notes</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#set">set</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-internal" title="            Note (amads.core.basics.Note)" href="../../basics/#amads.core.basics.Note">Note</a></span><span class="p">]</span> <span class="o">=</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#set">set</a></span><span class="p">(),</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents first">



        <p>A point in time with associated note events.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
<h3 id="amads.algorithms.slice.salami.Timepoint(time)" class="doc doc-heading doc-heading-parameter">              <b><code>time</code></b>
<a href="#amads.algorithms.slice.salami.Timepoint(time)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a></code>)
          –
          <div class="doc-md-description">
            <p>The time in seconds</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h3 id="amads.algorithms.slice.salami.Timepoint(note_ons)" class="doc doc-heading doc-heading-parameter">              <b><code>note_ons</code></b>
<a href="#amads.algorithms.slice.salami.Timepoint(note_ons)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a>[<a class="autorefs autorefs-internal" title="            Note (amads.core.basics.Note)" href="../../basics/#amads.core.basics.Note">Note</a>]</code>, default:
                  <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a>()</code>
)
          –
          <div class="doc-md-description">
            <p>Notes that start at this timepoint</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h3 id="amads.algorithms.slice.salami.Timepoint(note_offs)" class="doc doc-heading doc-heading-parameter">              <b><code>note_offs</code></b>
<a href="#amads.algorithms.slice.salami.Timepoint(note_offs)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a>[<a class="autorefs autorefs-internal" title="            Note (amads.core.basics.Note)" href="../../basics/#amads.core.basics.Note">Note</a>]</code>, default:
                  <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a>()</code>
)
          –
          <div class="doc-md-description">
            <p>Notes that end at this timepoint</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h3 id="amads.algorithms.slice.salami.Timepoint(sounding_notes)" class="doc doc-heading doc-heading-parameter">              <b><code>sounding_notes</code></b>
<a href="#amads.algorithms.slice.salami.Timepoint(sounding_notes)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#set">set</a>[<a class="autorefs autorefs-internal" title="            Note (amads.core.basics.Note)" href="../../basics/#amads.core.basics.Note">Note</a>]</code>, default:
                  <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#set">set</a>()</code>
)
          –
          <div class="doc-md-description">
            <p>All notes that are sounding at this timepoint</p>
          </div>
        </li>
    </ul>












<p><span class="doc-section-title">Methods:</span></p>
    <ul>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="            from_notes


  
      classmethod
   (amads.algorithms.slice.salami.Timepoint.from_notes)" href="#amads.algorithms.slice.salami.Timepoint.from_notes">from_notes</a></code></b>
            –
            <div class="doc-md-description">
              <p>Create a sequence of timepoints from a list of notes.</p>
            </div>
          </li>
    </ul>




<p><span class="doc-section-title">Attributes:</span></p>
    <ul>
        <li class="doc-section-item field-body">
          <b><code><a class="autorefs autorefs-internal" title="            last_note_end


  
      property
   (amads.algorithms.slice.salami.Timepoint.last_note_end)" href="#amads.algorithms.slice.salami.Timepoint.last_note_end">last_note_end</a></code></b>
          –
          <div class="doc-md-description">
            <p>Get the end time of the last note sounding at this timepoint.</p>
          </div>
        </li>
    </ul>




<div class="doc doc-children">





<h3 id="amads.algorithms.slice.salami.Timepoint-attributes">Attributes<a href="#amads.algorithms.slice.salami.Timepoint-attributes" class="headerlink" title="Permanent link">&para;</a></h3>

<div class="doc doc-object doc-attribute">



<h4 id="amads.algorithms.slice.salami.Timepoint.last_note_end" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code>            <span class="doc doc-object-name doc-attribute-name">last_note_end</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

<a href="#amads.algorithms.slice.salami.Timepoint.last_note_end" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">last_note_end</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Get the end time of the last note sounding at this timepoint.</p>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a></code>
          –
          <div class="doc-md-description">
            <p>The end time</p>
          </div>
        </li>
    </ul>

    </div>

</div>


<h3 id="amads.algorithms.slice.salami.Timepoint-functions">Functions<a href="#amads.algorithms.slice.salami.Timepoint-functions" class="headerlink" title="Permanent link">&para;</a></h3>

<div class="doc doc-object doc-function">


<h4 id="amads.algorithms.slice.salami.Timepoint.from_notes" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">from_notes</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

<a href="#amads.algorithms.slice.salami.Timepoint.from_notes" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">from_notes</span><span class="p">(</span>
    <span class="n"><a class="autorefs autorefs-internal" title="notes (amads.algorithms.slice.salami.Timepoint.from_notes(notes))" href="#amads.algorithms.slice.salami.Timepoint.from_notes(notes)">notes</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-internal" title="            Note (amads.core.basics.Note)" href="../../basics/#amads.core.basics.Note">Note</a></span><span class="p">],</span> <span class="n"><a class="autorefs autorefs-internal" title="time_n_digits (amads.algorithms.slice.salami.Timepoint.from_notes(time_n_digits))" href="#amads.algorithms.slice.salami.Timepoint.from_notes(time_n_digits)">time_n_digits</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-internal" title="            Timepoint


  
      dataclass
   (amads.algorithms.slice.salami.Timepoint)" href="#amads.algorithms.slice.salami.Timepoint">Timepoint</a></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Create a sequence of timepoints from a list of notes.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
<h5 id="amads.algorithms.slice.salami.Timepoint.from_notes(notes)" class="doc doc-heading doc-heading-parameter">              <b><code>notes</code></b>
<a href="#amads.algorithms.slice.salami.Timepoint.from_notes(notes)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a>[<a class="autorefs autorefs-internal" title="            Note (amads.core.basics.Note)" href="../../basics/#amads.core.basics.Note">Note</a>]</code>)
          –
          <div class="doc-md-description">
            <p>The notes to process</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h5 id="amads.algorithms.slice.salami.Timepoint.from_notes(time_n_digits)" class="doc doc-heading doc-heading-parameter">              <b><code>time_n_digits</code></b>
<a href="#amads.algorithms.slice.salami.Timepoint.from_notes(time_n_digits)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>, default:
                  <code>None</code>
)
          –
          <div class="doc-md-description">
            <p>Number of decimal places to round times to</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a>[<a class="autorefs autorefs-internal" title="            Timepoint


  
      dataclass
   (amads.algorithms.slice.salami.Timepoint)" href="#amads.algorithms.slice.salami.Timepoint">Timepoint</a>]</code>
          –
          <div class="doc-md-description">
            <p>Sequence of timepoints with associated note events</p>
          </div>
        </li>
    </ul>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>amads/algorithms/slice/salami.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">from_notes</span><span class="p">(</span>
    <span class="bp">cls</span><span class="p">,</span> <span class="n">notes</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Note</span><span class="p">],</span> <span class="n">time_n_digits</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="s2">&quot;Timepoint&quot;</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create a sequence of timepoints from a list of notes.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    notes : List[Note]</span>
<span class="sd">        The notes to process</span>
<span class="sd">    time_n_digits : int, optional</span>
<span class="sd">        Number of decimal places to round times to</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    List[Timepoint]</span>
<span class="sd">        Sequence of timepoints with associated note events</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">note_ons</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">list</span><span class="p">)</span>
    <span class="n">note_offs</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">list</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">note</span> <span class="ow">in</span> <span class="n">notes</span><span class="p">:</span>
        <span class="n">note_on</span> <span class="o">=</span> <span class="n">note</span><span class="o">.</span><span class="n">onset</span>
        <span class="n">note_off</span> <span class="o">=</span> <span class="n">note</span><span class="o">.</span><span class="n">offset</span>

        <span class="k">if</span> <span class="n">time_n_digits</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">note_on</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">note_on</span><span class="p">,</span> <span class="n">time_n_digits</span><span class="p">)</span>
            <span class="n">note_off</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">note_off</span><span class="p">,</span> <span class="n">time_n_digits</span><span class="p">)</span>

        <span class="n">note_ons</span><span class="p">[</span><span class="n">note_on</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">note</span><span class="p">)</span>
        <span class="n">note_offs</span><span class="p">[</span><span class="n">note_off</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">note</span><span class="p">)</span>

    <span class="n">times</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">note_ons</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span> <span class="o">|</span> <span class="nb">set</span><span class="p">(</span><span class="n">note_offs</span><span class="o">.</span><span class="n">keys</span><span class="p">()))</span>

    <span class="n">timepoints</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">sounding_notes</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>

    <span class="k">for</span> <span class="n">time</span> <span class="ow">in</span> <span class="n">times</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">note</span> <span class="ow">in</span> <span class="n">note_offs</span><span class="p">[</span><span class="n">time</span><span class="p">]:</span>
            <span class="n">sounding_notes</span><span class="o">.</span><span class="n">discard</span><span class="p">(</span><span class="n">note</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">note</span> <span class="ow">in</span> <span class="n">note_ons</span><span class="p">[</span><span class="n">time</span><span class="p">]:</span>
            <span class="n">sounding_notes</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">note</span><span class="p">)</span>

        <span class="n">timepoints</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
            <span class="n">Timepoint</span><span class="p">(</span>
                <span class="n">time</span><span class="o">=</span><span class="n">time</span><span class="p">,</span>
                <span class="n">note_ons</span><span class="o">=</span><span class="n">note_ons</span><span class="p">[</span><span class="n">time</span><span class="p">],</span>
                <span class="n">note_offs</span><span class="o">=</span><span class="n">note_offs</span><span class="p">[</span><span class="n">time</span><span class="p">],</span>
                <span class="n">sounding_notes</span><span class="o">=</span><span class="nb">sorted</span><span class="p">(</span>
                    <span class="nb">list</span><span class="p">(</span><span class="n">sounding_notes</span><span class="p">),</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">n</span><span class="p">:</span> <span class="n">n</span><span class="o">.</span><span class="n">key_num</span>
                <span class="p">),</span>
            <span class="p">)</span>
        <span class="p">)</span>

    <span class="k">return</span> <span class="n">timepoints</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div><hr />


<div class="doc doc-object doc-function">


<h2 id="amads.algorithms.slice.salami.salami_slice" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>            <span class="doc doc-object-name doc-function-name">salami_slice</span>


<a href="#amads.algorithms.slice.salami.salami_slice" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">salami_slice</span><span class="p">(</span>
    <span class="n"><a class="autorefs autorefs-internal" title="passage (amads.algorithms.slice.salami.salami_slice(passage))" href="#amads.algorithms.slice.salami.salami_slice(passage)">passage</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            Score (amads.core.basics.Score)" href="../../basics/#amads.core.basics.Score">Score</a></span> <span class="o">|</span> <span class="n"><a class="autorefs autorefs-external" title="typing.Iterable" href="https://docs.python.org/3/library/typing.html#typing.Iterable">Iterable</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-internal" title="            Note (amads.core.basics.Note)" href="../../basics/#amads.core.basics.Note">Note</a></span><span class="p">],</span>
    <span class="n"><a class="autorefs autorefs-internal" title="remove_duplicated_pitches (amads.algorithms.slice.salami.salami_slice(remove_duplicated_pitches))" href="#amads.algorithms.slice.salami.salami_slice(remove_duplicated_pitches)">remove_duplicated_pitches</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="include_empty_slices (amads.algorithms.slice.salami.salami_slice(include_empty_slices))" href="#amads.algorithms.slice.salami.salami_slice(include_empty_slices)">include_empty_slices</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="include_note_end_slices (amads.algorithms.slice.salami.salami_slice(include_note_end_slices))" href="#amads.algorithms.slice.salami.salami_slice(include_note_end_slices)">include_note_end_slices</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="min_slice_duration (amads.algorithms.slice.salami.salami_slice(min_slice_duration))" href="#amads.algorithms.slice.salami.salami_slice(min_slice_duration)">min_slice_duration</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a></span> <span class="o">=</span> <span class="mf">0.01</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-internal" title="            Slice (amads.algorithms.slice.slice.Slice)" href="#amads.algorithms.slice.slice.Slice">Slice</a></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents first">

        <p>Segment a musical passage into vertical slices at note onsets and offsets ('salami slices').</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
<h3 id="amads.algorithms.slice.salami.salami_slice(passage)" class="doc doc-heading doc-heading-parameter">              <b><code>passage</code></b>
<a href="#amads.algorithms.slice.salami.salami_slice(passage)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-internal" title="            Score (amads.core.basics.Score)" href="../../basics/#amads.core.basics.Score">Score</a> or <a class="autorefs autorefs-external" title="typing.Iterable" href="https://docs.python.org/3/library/typing.html#typing.Iterable">Iterable</a>[<a class="autorefs autorefs-internal" title="            Note (amads.core.basics.Note)" href="../../basics/#amads.core.basics.Note">Note</a>]</code>)
          –
          <div class="doc-md-description">
            <p>The musical passage to slice</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h3 id="amads.algorithms.slice.salami.salami_slice(remove_duplicated_pitches)" class="doc doc-heading doc-heading-parameter">              <b><code>remove_duplicated_pitches</code></b>
<a href="#amads.algorithms.slice.salami.salami_slice(remove_duplicated_pitches)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>, default:
                  <code>True</code>
)
          –
          <div class="doc-md-description">
            <p>Whether to remove duplicate pitches within each slice</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h3 id="amads.algorithms.slice.salami.salami_slice(include_empty_slices)" class="doc doc-heading doc-heading-parameter">              <b><code>include_empty_slices</code></b>
<a href="#amads.algorithms.slice.salami.salami_slice(include_empty_slices)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>, default:
                  <code>False</code>
)
          –
          <div class="doc-md-description">
            <p>Whether to include slices with no sounding notes</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h3 id="amads.algorithms.slice.salami.salami_slice(include_note_end_slices)" class="doc doc-heading doc-heading-parameter">              <b><code>include_note_end_slices</code></b>
<a href="#amads.algorithms.slice.salami.salami_slice(include_note_end_slices)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>, default:
                  <code>True</code>
)
          –
          <div class="doc-md-description">
            <p>Whether to create slices at note ends</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h3 id="amads.algorithms.slice.salami.salami_slice(min_slice_duration)" class="doc doc-heading doc-heading-parameter">              <b><code>min_slice_duration</code></b>
<a href="#amads.algorithms.slice.salami.salami_slice(min_slice_duration)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a></code>, default:
                  <code>0.01</code>
)
          –
          <div class="doc-md-description">
            <p>Minimum duration for a slice to be included</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a>[<a class="autorefs autorefs-internal" title="            Slice (amads.algorithms.slice.slice.Slice)" href="#amads.algorithms.slice.slice.Slice">Slice</a>]</code>
          –
          <div class="doc-md-description">
            <p>The sequence of vertical slices</p>
          </div>
        </li>
    </ul>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>amads/algorithms/slice/salami.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">salami_slice</span><span class="p">(</span>
    <span class="n">passage</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Score</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Note</span><span class="p">]],</span>
    <span class="n">remove_duplicated_pitches</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">include_empty_slices</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">include_note_end_slices</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">min_slice_duration</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.01</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Slice</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Segment a musical passage into vertical slices at note onsets and offsets (&#39;salami slices&#39;).</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    passage : Score or Iterable[Note]</span>
<span class="sd">        The musical passage to slice</span>
<span class="sd">    remove_duplicated_pitches : bool, default=True</span>
<span class="sd">        Whether to remove duplicate pitches within each slice</span>
<span class="sd">    include_empty_slices : bool, default=False</span>
<span class="sd">        Whether to include slices with no sounding notes</span>
<span class="sd">    include_note_end_slices : bool, default=True</span>
<span class="sd">        Whether to create slices at note ends</span>
<span class="sd">    min_slice_duration : float, default=0.01</span>
<span class="sd">        Minimum duration for a slice to be included</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    List[Slice]</span>
<span class="sd">        The sequence of vertical slices</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">passage</span><span class="p">,</span> <span class="n">Score</span><span class="p">):</span>
        <span class="n">notes</span> <span class="o">=</span> <span class="n">passage</span><span class="o">.</span><span class="n">get_sorted_notes</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">notes</span> <span class="o">=</span> <span class="n">passage</span>

    <span class="n">timepoints</span> <span class="o">=</span> <span class="n">Timepoint</span><span class="o">.</span><span class="n">from_notes</span><span class="p">(</span><span class="n">notes</span><span class="p">)</span>
    <span class="n">slices</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">timepoint</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">timepoints</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">timepoint</span><span class="o">.</span><span class="n">note_ons</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="p">(</span>
            <span class="n">include_note_end_slices</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">timepoint</span><span class="o">.</span><span class="n">note_offs</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span>
        <span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">next_timepoint</span> <span class="o">=</span> <span class="n">timepoints</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
            <span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>
                <span class="n">next_timepoint</span> <span class="o">=</span> <span class="kc">None</span>

            <span class="n">is_last_timepoint</span> <span class="o">=</span> <span class="n">next_timepoint</span> <span class="ow">is</span> <span class="kc">None</span>
            <span class="n">is_empty_slice</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">timepoint</span><span class="o">.</span><span class="n">sounding_notes</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span>

            <span class="k">if</span> <span class="n">is_empty_slice</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">include_empty_slices</span><span class="p">:</span>
                    <span class="k">continue</span>
                <span class="k">if</span> <span class="n">is_last_timepoint</span><span class="p">:</span>
                    <span class="c1"># Don&#39;t include empty slices at the end of the score</span>
                    <span class="k">continue</span>

            <span class="n">slice_onset</span> <span class="o">=</span> <span class="n">timepoint</span><span class="o">.</span><span class="n">time</span>

            <span class="k">if</span> <span class="n">next_timepoint</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">timepoint</span><span class="o">.</span><span class="n">sounding_notes</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="k">continue</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">slice_end</span> <span class="o">=</span> <span class="n">timepoint</span><span class="o">.</span><span class="n">last_note_end</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">slice_end</span> <span class="o">=</span> <span class="n">next_timepoint</span><span class="o">.</span><span class="n">time</span>

            <span class="n">slice_duration</span> <span class="o">=</span> <span class="n">slice_end</span> <span class="o">-</span> <span class="n">slice_onset</span>

            <span class="k">if</span> <span class="n">slice_duration</span> <span class="o">&lt;</span> <span class="n">min_slice_duration</span><span class="p">:</span>
                <span class="k">continue</span>

            <span class="n">pitches</span> <span class="o">=</span> <span class="p">[</span><span class="n">note</span><span class="o">.</span><span class="n">pitch</span> <span class="k">for</span> <span class="n">note</span> <span class="ow">in</span> <span class="n">timepoint</span><span class="o">.</span><span class="n">sounding_notes</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">remove_duplicated_pitches</span><span class="p">:</span>
                <span class="n">pitches</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">pitches</span><span class="p">))</span>

            <span class="nb">slice</span> <span class="o">=</span> <span class="n">Slice</span><span class="p">(</span>
                <span class="n">timepoint</span><span class="o">.</span><span class="n">sounding_notes</span><span class="p">,</span> <span class="n">slice_onset</span><span class="p">,</span> <span class="n">slice_end</span> <span class="o">-</span> <span class="n">slice_onset</span>
            <span class="p">)</span>

            <span class="c1"># construct a new Note for each pitch and add it to the slice</span>
            <span class="k">for</span> <span class="n">pitch</span> <span class="ow">in</span> <span class="n">pitches</span><span class="p">:</span>
                <span class="n">Note</span><span class="p">(</span><span class="nb">slice</span><span class="p">,</span> <span class="n">slice_onset</span><span class="p">,</span> <span class="n">slice_duration</span><span class="p">,</span> <span class="n">pitch</span><span class="p">)</span>

            <span class="n">slices</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">slice</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">slices</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div><hr />


<div class="doc doc-object doc-class">



<h2 id="amads.algorithms.slice.slice.Slice" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">Slice</span>


<a href="#amads.algorithms.slice.slice.Slice" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">Slice</span><span class="p">(</span>
    <span class="n"><a class="autorefs autorefs-internal" title="original_notes (amads.algorithms.slice.slice.Slice(original_notes))" href="#amads.algorithms.slice.slice.Slice(original_notes)">original_notes</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-internal" title="            Note (amads.core.basics.Note)" href="../../basics/#amads.core.basics.Note">Note</a></span><span class="p">],</span> <span class="n"><a class="autorefs autorefs-internal" title="onset (amads.algorithms.slice.slice.Slice(onset))" href="#amads.algorithms.slice.slice.Slice(onset)">onset</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a></span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-internal" title="duration (amads.algorithms.slice.slice.Slice(duration))" href="#amads.algorithms.slice.slice.Slice(duration)">duration</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a></span> <span class="o">=</span> <span class="mi">0</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="            Concurrence (amads.core.basics.Concurrence)" href="../../basics_more/#amads.core.basics.Concurrence">Concurrence</a></code></p>



        <p>A slice of a musical score between two timepoints.</p>
<p>This is the base class for different slicing algorithms like salami slicing and
windowing. A slice contains a list of notes that are sounding between its start
and end times, as well as references to the original notes from which these
were derived.</p>
<p><small><strong>Author</strong>: Peter Harrison</small></p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
<h3 id="amads.algorithms.slice.slice.Slice(original_notes)" class="doc doc-heading doc-heading-parameter">              <b><code>original_notes</code></b>
<a href="#amads.algorithms.slice.slice.Slice(original_notes)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a>[<a class="autorefs autorefs-internal" title="            Note (amads.core.basics.Note)" href="../../basics/#amads.core.basics.Note">Note</a>]</code>)
          –
          <div class="doc-md-description">
            <p>The original unmodified notes from which the slice notes were derived</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h3 id="amads.algorithms.slice.slice.Slice(onset)" class="doc doc-heading doc-heading-parameter">              <b><code>onset</code></b>
<a href="#amads.algorithms.slice.slice.Slice(onset)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a></code>, default:
                  <code>0</code>
)
          –
          <div class="doc-md-description">
            <p>The start time offset of the slice</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h3 id="amads.algorithms.slice.slice.Slice(duration)" class="doc doc-heading doc-heading-parameter">              <b><code>duration</code></b>
<a href="#amads.algorithms.slice.slice.Slice(duration)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a></code>, default:
                  <code>0</code>
)
          –
          <div class="doc-md-description">
            <p>The duration of the slice</p>
          </div>
        </li>
    </ul>













                  <details class="mkdocstrings-source">
                    <summary>Source code in <code>amads/algorithms/slice/slice.py</code></summary>
                    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">original_notes</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Note</span><span class="p">],</span>
    <span class="n">onset</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">duration</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
<span class="p">):</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
        <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">onset</span><span class="o">=</span><span class="n">onset</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="n">duration</span><span class="p">,</span> <span class="n">content</span><span class="o">=</span><span class="p">[]</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">original_notes</span> <span class="o">=</span> <span class="n">original_notes</span>
</code></pre></div></td></tr></table></div>
                  </details>



<div class="doc doc-children">












  </div>

    </div>

</div><hr />


<div class="doc doc-object doc-class">



<h2 id="amads.algorithms.slice.window.Window" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">Window</span>


<a href="#amads.algorithms.slice.window.Window" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">Window</span><span class="p">(</span>
    <span class="n"><a class="autorefs autorefs-internal" title="time (amads.algorithms.slice.window.Window(time))" href="#amads.algorithms.slice.window.Window(time)">time</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a></span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="size (amads.algorithms.slice.window.Window(size))" href="#amads.algorithms.slice.window.Window(size)">size</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a></span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="align (amads.algorithms.slice.window.Window(align))" href="#amads.algorithms.slice.window.Window(align)">align</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="candidate_notes (amads.algorithms.slice.window.Window(candidate_notes))" href="#amads.algorithms.slice.window.Window(candidate_notes)">candidate_notes</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" title="typing.Iterable" href="https://docs.python.org/3/library/typing.html#typing.Iterable">Iterable</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-internal" title="            Note (amads.core.basics.Note)" href="../../basics/#amads.core.basics.Note">Note</a></span><span class="p">],</span>
    <span class="n"><a class="autorefs autorefs-internal" title="skip (amads.algorithms.slice.window.Window(skip))" href="#amads.algorithms.slice.window.Window(skip)">skip</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="            Slice (amads.algorithms.slice.slice.Slice)" href="#amads.algorithms.slice.slice.Slice">Slice</a></code></p>



        <p>A fixed-size window of a musical score. candidate_notes that overlap
with this interval are copied and clipped to fit within the window.
Notes that overlap less than 1.0e-6 duration units (whether beats or
seconds) are mostly excluded from the window to reduce numerical issues.
An exception is made for notes that are so short that they do not overlap
any window by at least 1.0e-6 duration units. (This seems far-fetched,
but zero-length notes representing grace notes are one possibility to
consider; there may be others.)</p>
<p>Additional details that you may not need: For very short notes, the
window is considered closed on the left and open on the right, so
that the window is considered to contain the note if it starts at
the same time as the window, and a note is not in the window if it
starts at the offset time of the window. To guarantee that
zero-length notes are included in only one window, the offset of a
window should be identical to the onset of the next window.
sliding_window() takes care of this by default, but if the Window
constructor is used directly where arithmetic with time and size is
inexact, this may not be the case.</p>
<p><small><strong>Author</strong>: Peter Harrison</small></p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
<h3 id="amads.algorithms.slice.window.Window(time)" class="doc doc-heading doc-heading-parameter">              <b><code>time</code></b>
<a href="#amads.algorithms.slice.window.Window(time)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a></code>)
          –
          <div class="doc-md-description">
            <p>The reference time for this window</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h3 id="amads.algorithms.slice.window.Window(size)" class="doc doc-heading doc-heading-parameter">              <b><code>size</code></b>
<a href="#amads.algorithms.slice.window.Window(size)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a></code>)
          –
          <div class="doc-md-description">
            <p>The size of the window in time units</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h3 id="amads.algorithms.slice.window.Window(align)" class="doc doc-heading doc-heading-parameter">              <b><code>align</code></b>
<a href="#amads.algorithms.slice.window.Window(align)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></code>)
          –
          <div class="doc-md-description">
            <p>How to align the window relative to the reference time:
"left": window starts at reference time, "center": reference time
is at window center, or "right": window ends at reference time.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h3 id="amads.algorithms.slice.window.Window(candidate_notes)" class="doc doc-heading doc-heading-parameter">              <b><code>candidate_notes</code></b>
<a href="#amads.algorithms.slice.window.Window(candidate_notes)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" title="typing.Iterable" href="https://docs.python.org/3/library/typing.html#typing.Iterable">Iterable</a>[<a class="autorefs autorefs-internal" title="            Note (amads.core.basics.Note)" href="../../basics/#amads.core.basics.Note">Note</a>]</code>)
          –
          <div class="doc-md-description">
            <p>Notes to consider for inclusion in this window, sorted by onset
time and pitch</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h3 id="amads.algorithms.slice.window.Window(skip)" class="doc doc-heading doc-heading-parameter">              <b><code>skip</code></b>
<a href="#amads.algorithms.slice.window.Window(skip)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>, default:
                  <code>0</code>
)
          –
          <div class="doc-md-description">
            <p>Index to start searching from in candidate_notes. This is used
to optimize performance when iterating through multiple
windows - each window can tell the next window which notes
it can safely skip because they end before the window starts.</p>
          </div>
        </li>
    </ul>













                  <details class="mkdocstrings-source">
                    <summary>Source code in <code>amads/algorithms/slice/window.py</code></summary>
                    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">time</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
    <span class="n">size</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
    <span class="n">align</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">candidate_notes</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Note</span><span class="p">],</span>
    <span class="n">skip</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
<span class="p">):</span>
    <span class="k">match</span> <span class="n">align</span><span class="p">:</span>
        <span class="k">case</span> <span class="s2">&quot;left&quot;</span><span class="p">:</span>
            <span class="n">onset</span> <span class="o">=</span> <span class="n">time</span>
        <span class="k">case</span> <span class="s2">&quot;center&quot;</span><span class="p">:</span>
            <span class="n">onset</span> <span class="o">=</span> <span class="n">time</span> <span class="o">-</span> <span class="n">size</span> <span class="o">/</span> <span class="mi">2</span>
        <span class="k">case</span> <span class="s2">&quot;right&quot;</span><span class="p">:</span>
            <span class="n">onset</span> <span class="o">=</span> <span class="n">time</span> <span class="o">-</span> <span class="n">size</span>
        <span class="k">case</span><span class="w"> </span><span class="k">_</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid value passed to `align`: </span><span class="si">{</span><span class="n">align</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="n">offset</span> <span class="o">=</span> <span class="n">onset</span> <span class="o">+</span> <span class="n">size</span>

    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
        <span class="n">original_notes</span><span class="o">=</span><span class="p">[],</span>
        <span class="n">onset</span><span class="o">=</span><span class="n">onset</span><span class="p">,</span>
        <span class="n">duration</span><span class="o">=</span><span class="n">size</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">time</span> <span class="o">=</span> <span class="n">time</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">align</span> <span class="o">=</span> <span class="n">align</span>
    <span class="c1"># skip logic: skip is the lowest index of candidate_notes for which</span>
    <span class="c1"># candidate_notes[skip].offset &gt;= onset. The next window can start</span>
    <span class="c1"># searching from this index.</span>

    <span class="n">candidate_notes</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">candidate_notes</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">skip</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">candidate_notes</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">skip</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">candidate_notes</span><span class="p">)):</span>
        <span class="n">note</span> <span class="o">=</span> <span class="n">candidate_notes</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">note</span><span class="o">.</span><span class="n">offset</span> <span class="o">&lt;</span> <span class="n">onset</span><span class="p">:</span>
            <span class="c1"># The note finished before the window starts.</span>
            <span class="k">continue</span>
        <span class="k">else</span><span class="p">:</span>  <span class="c1"># note overlaps window, start no later than this</span>
            <span class="c1"># when searching for overlaps with the next window</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">skip</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">skip</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">note</span><span class="o">.</span><span class="n">onset</span> <span class="o">&gt;=</span> <span class="n">offset</span><span class="p">:</span>
            <span class="c1"># The note starts after the window finishes.</span>
            <span class="c1"># All the remaining notes in candidate_notes will have even later onsets,</span>
            <span class="c1"># so we don&#39;t need to check them for this window.</span>
            <span class="c1"># They might be caught by future windows though.</span>
            <span class="k">break</span>

        <span class="c1"># note.onset &lt; offset, so it starts in window</span>
        <span class="k">if</span> <span class="n">note</span><span class="o">.</span><span class="n">offset</span> <span class="o">-</span> <span class="n">offset</span> <span class="o">&lt;</span> <span class="mf">1.0e-6</span><span class="p">:</span>
            <span class="c1"># The note will not overlap with the next window.</span>
            <span class="c1"># Since it starts in this window, include it.</span>
            <span class="k">pass</span>
        <span class="k">elif</span> <span class="n">offset</span> <span class="o">-</span> <span class="n">note</span><span class="o">.</span><span class="n">onset</span> <span class="o">&lt;</span> <span class="mf">1.0e-6</span><span class="p">:</span>
            <span class="c1"># after clipping to window boundaries, this note</span>
            <span class="c1"># will be shorter than 1.0e-6, but it extends into</span>
            <span class="c1"># the next window, so ignore the small overlap here</span>
            <span class="k">continue</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">original_notes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">note</span><span class="p">)</span>

        <span class="c1"># We use deepcopy_into instead of creating a new Note because we want to</span>
        <span class="c1"># preserve any other attributes that might be useful in downstream tasks.</span>
        <span class="n">note</span> <span class="o">=</span> <span class="n">note</span><span class="o">.</span><span class="n">insert_copy_into</span><span class="p">(</span><span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
        <span class="c1"># Clip the note to fit within the window</span>
        <span class="n">note</span><span class="o">.</span><span class="n">onset</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">note</span><span class="o">.</span><span class="n">onset</span><span class="p">,</span> <span class="n">onset</span><span class="p">)</span>
        <span class="n">note</span><span class="o">.</span><span class="n">offset</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">note</span><span class="o">.</span><span class="n">offset</span><span class="p">,</span> <span class="n">offset</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
                  </details>



<div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="amads.algorithms.slice.window.sliding_window" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>            <span class="doc doc-object-name doc-function-name">sliding_window</span>


<a href="#amads.algorithms.slice.window.sliding_window" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">sliding_window</span><span class="p">(</span>
    <span class="n"><a class="autorefs autorefs-internal" title="passage (amads.algorithms.slice.window.sliding_window(passage))" href="#amads.algorithms.slice.window.sliding_window(passage)">passage</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="            Score (amads.core.basics.Score)" href="../../basics/#amads.core.basics.Score">Score</a></span> <span class="o">|</span> <span class="n"><a class="autorefs autorefs-external" title="typing.Iterable" href="https://docs.python.org/3/library/typing.html#typing.Iterable">Iterable</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-internal" title="            Note (amads.core.basics.Note)" href="../../basics/#amads.core.basics.Note">Note</a></span><span class="p">],</span>
    <span class="n"><a class="autorefs autorefs-internal" title="size (amads.algorithms.slice.window.sliding_window(size))" href="#amads.algorithms.slice.window.sliding_window(size)">size</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a></span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="step (amads.algorithms.slice.window.sliding_window(step))" href="#amads.algorithms.slice.window.sliding_window(step)">step</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a></span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="align (amads.algorithms.slice.window.sliding_window(align))" href="#amads.algorithms.slice.window.sliding_window(align)">align</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span> <span class="o">=</span> <span class="s2">&quot;right&quot;</span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="onset (amads.algorithms.slice.window.sliding_window(onset))" href="#amads.algorithms.slice.window.sliding_window(onset)">onset</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a></span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="offset (amads.algorithms.slice.window.sliding_window(offset))" href="#amads.algorithms.slice.window.sliding_window(offset)">offset</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="times (amads.algorithms.slice.window.sliding_window(times))" href="#amads.algorithms.slice.window.sliding_window(times)">times</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" title="typing.Iterable" href="https://docs.python.org/3/library/typing.html#typing.Iterable">Iterable</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a></span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-external" title="typing.Iterator" href="https://docs.python.org/3/library/typing.html#typing.Iterator">Iterator</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-internal" title="            Window (amads.algorithms.slice.window.Window)" href="#amads.algorithms.slice.window.Window">Window</a></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents first">

        <p>Slice a score into (possibly overlapping) windows of a given size.</p>
<p><small><strong>Author</strong>: Peter Harrison</small></p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
<h3 id="amads.algorithms.slice.window.sliding_window(passage)" class="doc doc-heading doc-heading-parameter">              <b><code>passage</code></b>
<a href="#amads.algorithms.slice.window.sliding_window(passage)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-internal" title="            Score (amads.core.basics.Score)" href="../../basics/#amads.core.basics.Score">Score</a> or <a class="autorefs autorefs-external" title="typing.Iterable" href="https://docs.python.org/3/library/typing.html#typing.Iterable">Iterable</a>[<a class="autorefs autorefs-internal" title="            Note (amads.core.basics.Note)" href="../../basics/#amads.core.basics.Note">Note</a>]</code>)
          –
          <div class="doc-md-description">
            <p>The musical passage to be windowed</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h3 id="amads.algorithms.slice.window.sliding_window(size)" class="doc doc-heading doc-heading-parameter">              <b><code>size</code></b>
<a href="#amads.algorithms.slice.window.sliding_window(size)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a></code>)
          –
          <div class="doc-md-description">
            <p>The size (duration) of each window (time units)</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h3 id="amads.algorithms.slice.window.sliding_window(step)" class="doc doc-heading doc-heading-parameter">              <b><code>step</code></b>
<a href="#amads.algorithms.slice.window.sliding_window(step)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a></code>, default:
                  <code>1.0</code>
)
          –
          <div class="doc-md-description">
            <p>The step size to take between windows (time units).
For example, if step is 0.1, then a given slice will start 0.1 time units
after the previous slice started. Note that if step is smaller than size,
successive windows will overlap</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h3 id="amads.algorithms.slice.window.sliding_window(align)" class="doc doc-heading doc-heading-parameter">              <b><code>align</code></b>
<a href="#amads.algorithms.slice.window.sliding_window(align)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></code>, default:
                  <code>&#34;right&#34;</code>
)
          –
          <div class="doc-md-description">
            <p>Each generated window has a <code>time</code> property that points to a
particular timepoint in the musical passage. The <code>align</code> parameter determines
how the window is aligned to this timepoint:
- "left": the window starts at <code>window.time</code>
- "center": <code>window.time</code> corresponds to the midpoint of the window
- "right": the window finishes at <code>window.time</code></p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h3 id="amads.algorithms.slice.window.sliding_window(onset)" class="doc doc-heading doc-heading-parameter">              <b><code>onset</code></b>
<a href="#amads.algorithms.slice.window.sliding_window(onset)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a></code>, default:
                  <code>0.0</code>
)
          –
          <div class="doc-md-description">
            <p>The desired time of the first window</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h3 id="amads.algorithms.slice.window.sliding_window(offset)" class="doc doc-heading doc-heading-parameter">              <b><code>offset</code></b>
<a href="#amads.algorithms.slice.window.sliding_window(offset)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a></code>, default:
                  <code>None</code>
)
          –
          <div class="doc-md-description">
            <p>If set, the windowing will stop once the offset time is reached.
Following the behaviour of Python's built-in range function,
<code>offset</code> is not treated inclusively, i.e. the last window will
not include <code>offset</code>. The returned iterator will stop early
the last window is empty (i.e. contains no notes) and there are
no more notes to process.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h3 id="amads.algorithms.slice.window.sliding_window(times)" class="doc doc-heading doc-heading-parameter">              <b><code>times</code></b>
<a href="#amads.algorithms.slice.window.sliding_window(times)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" title="typing.Iterable" href="https://docs.python.org/3/library/typing.html#typing.Iterable">Iterable</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a>]</code>, default:
                  <code>None</code>
)
          –
          <div class="doc-md-description">
            <p>Optional iterable of times to generate windows for. If provided,
<code>onset</code> and <code>offset</code> are ignored. The returned iterator will
stop once all times have been processed or when an empty window
is generated and there are no more notes to process.</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><a class="autorefs autorefs-external" title="typing.Iterator" href="https://docs.python.org/3/library/typing.html#typing.Iterator">Iterator</a>[<a class="autorefs autorefs-internal" title="            Window (amads.algorithms.slice.window.Window)" href="#amads.algorithms.slice.window.Window">Window</a>]</code>
          –
          <div class="doc-md-description">
            <p>Iterator over the windows</p>
          </div>
        </li>
    </ul>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>amads/algorithms/slice/window.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">sliding_window</span><span class="p">(</span>
    <span class="n">passage</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Score</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">Note</span><span class="p">]],</span>
    <span class="n">size</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
    <span class="n">step</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
    <span class="n">align</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;right&quot;</span><span class="p">,</span>
    <span class="n">onset</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">,</span>
    <span class="n">offset</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">times</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Iterable</span><span class="p">[</span><span class="nb">float</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">Window</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Slice a score into (possibly overlapping) windows of a given size.</span>

<span class="sd">    &lt;small&gt;**Author**: Peter Harrison&lt;/small&gt;</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    passage : Score or Iterable[Note]</span>
<span class="sd">        The musical passage to be windowed</span>
<span class="sd">    size : float</span>
<span class="sd">        The size (duration) of each window (time units)</span>
<span class="sd">    step : float, default=1.0</span>
<span class="sd">        The step size to take between windows (time units).</span>
<span class="sd">        For example, if step is 0.1, then a given slice will start 0.1 time units</span>
<span class="sd">        after the previous slice started. Note that if step is smaller than size,</span>
<span class="sd">        successive windows will overlap</span>
<span class="sd">    align : str, default=&quot;right&quot;</span>
<span class="sd">        Each generated window has a `time` property that points to a</span>
<span class="sd">        particular timepoint in the musical passage. The `align` parameter determines</span>
<span class="sd">        how the window is aligned to this timepoint:</span>
<span class="sd">        - &quot;left&quot;: the window starts at ``window.time``</span>
<span class="sd">        - &quot;center&quot;: ``window.time`` corresponds to the midpoint of the window</span>
<span class="sd">        - &quot;right&quot;: the window finishes at ``window.time``</span>
<span class="sd">    onset : float, default=0.0</span>
<span class="sd">        The desired time of the first window</span>
<span class="sd">    offset : float, optional</span>
<span class="sd">        If set, the windowing will stop once the offset time is reached.</span>
<span class="sd">        Following the behaviour of Python&#39;s built-in range function,</span>
<span class="sd">        ``offset`` is not treated inclusively, i.e. the last window will</span>
<span class="sd">        not include ``offset``. The returned iterator will stop early</span>
<span class="sd">        the last window is empty (i.e. contains no notes) and there are</span>
<span class="sd">        no more notes to process.</span>
<span class="sd">    times : Iterable[float], optional</span>
<span class="sd">        Optional iterable of times to generate windows for. If provided,</span>
<span class="sd">        `onset` and `offset` are ignored. The returned iterator will</span>
<span class="sd">        stop once all times have been processed or when an empty window</span>
<span class="sd">        is generated and there are no more notes to process.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    Iterator[Window]</span>
<span class="sd">        Iterator over the windows</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">passage</span><span class="p">,</span> <span class="n">Score</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">passage</span><span class="o">.</span><span class="n">is_flat_and_collapsed</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span>
                <span class="s2">&quot;Currently this function only supports flat scores with a &quot;</span>
                <span class="s2">&quot;single Part. You can flatten a score using &quot;</span>
                <span class="s2">&quot;`score.flatten(collapse=True)`.&quot;</span>
            <span class="p">)</span>
        <span class="n">notes</span> <span class="o">=</span> <span class="n">passage</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="n">Note</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">notes</span> <span class="o">=</span> <span class="n">passage</span>

    <span class="n">notes</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="n">List</span><span class="p">[</span><span class="n">Note</span><span class="p">],</span> <span class="nb">list</span><span class="p">(</span><span class="n">notes</span><span class="p">))</span>
    <span class="n">notes</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">n</span><span class="p">:</span> <span class="p">(</span><span class="n">n</span><span class="o">.</span><span class="n">onset</span><span class="p">,</span> <span class="n">n</span><span class="o">.</span><span class="n">pitch</span><span class="p">))</span>

    <span class="c1"># We could rely on Window to obey `align`, but here we convert onset and</span>
    <span class="c1"># offset to always use &quot;left&quot;. By using left, we can guarantee when</span>
    <span class="c1"># step == size that each window time computed by repeated addition of</span>
    <span class="c1"># step will exactly equal each previous window offset, computed as</span>
    <span class="c1"># onset + size in Window. This avoids any floating point rounding error</span>
    <span class="c1"># that could affect the windowing. (This is not a problem in the typical</span>
    <span class="c1"># cases where window size is 1 or a power of 2 that will be computed</span>
    <span class="c1"># exactly due to binary representations of floats.)</span>
    <span class="k">match</span> <span class="n">align</span><span class="p">:</span>
        <span class="k">case</span> <span class="s2">&quot;left&quot;</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">case</span> <span class="s2">&quot;center&quot;</span><span class="p">:</span>
            <span class="n">onset</span> <span class="o">-=</span> <span class="n">size</span> <span class="o">/</span> <span class="mi">2</span>
            <span class="k">if</span> <span class="n">offset</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">offset</span> <span class="o">-=</span> <span class="n">size</span> <span class="o">/</span> <span class="mi">2</span>
        <span class="k">case</span> <span class="s2">&quot;right&quot;</span><span class="p">:</span>
            <span class="n">onset</span> <span class="o">-=</span> <span class="n">size</span>
            <span class="k">if</span> <span class="n">offset</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">offset</span> <span class="o">-=</span> <span class="n">size</span>
        <span class="k">case</span><span class="w"> </span><span class="k">_</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid value passed to `align`: </span><span class="si">{</span><span class="n">align</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">times</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">window_times</span> <span class="o">=</span> <span class="n">float_range</span><span class="p">(</span><span class="n">onset</span><span class="p">,</span> <span class="n">offset</span><span class="p">,</span> <span class="n">step</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">par</span><span class="p">,</span> <span class="n">default</span> <span class="ow">in</span> <span class="p">[(</span><span class="s2">&quot;onset&quot;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;offset&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;step&quot;</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)]:</span>
            <span class="n">provided</span> <span class="o">=</span> <span class="nb">globals</span><span class="p">()[</span><span class="n">par</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">provided</span> <span class="o">!=</span> <span class="n">default</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;`</span><span class="si">{</span><span class="n">par</span><span class="si">}</span><span class="s2">` was set to </span><span class="si">{</span><span class="n">provided</span><span class="si">}</span><span class="s2"> but `times` was also provided&quot;</span>
                <span class="p">)</span>

        <span class="n">window_times</span> <span class="o">=</span> <span class="n">times</span>

    <span class="n">skip</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">for</span> <span class="n">time</span> <span class="ow">in</span> <span class="n">window_times</span><span class="p">:</span>
        <span class="n">window</span> <span class="o">=</span> <span class="n">Window</span><span class="p">(</span><span class="n">time</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="s2">&quot;left&quot;</span><span class="p">,</span> <span class="n">notes</span><span class="p">,</span> <span class="n">skip</span><span class="p">)</span>

        <span class="k">yield</span> <span class="n">window</span>

        <span class="n">skip</span> <span class="o">=</span> <span class="n">window</span><span class="o">.</span><span class="n">skip</span>

        <span class="k">if</span> <span class="n">skip</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">notes</span><span class="p">):</span>
            <span class="k">break</span>

    <span class="n">skip</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">if</span> <span class="n">times</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">par</span><span class="p">,</span> <span class="n">default</span> <span class="ow">in</span> <span class="p">[(</span><span class="s2">&quot;onset&quot;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;offset&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;step&quot;</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)]:</span>
            <span class="n">provided</span> <span class="o">=</span> <span class="nb">globals</span><span class="p">()[</span><span class="n">par</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">provided</span> <span class="o">!=</span> <span class="n">default</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;`</span><span class="si">{</span><span class="n">par</span><span class="si">}</span><span class="s2">` was set to </span><span class="si">{</span><span class="n">provided</span><span class="si">}</span><span class="s2"> but `times` was also provided&quot;</span>
                <span class="p">)</span>
        <span class="k">for</span> <span class="n">time</span> <span class="ow">in</span> <span class="n">times</span><span class="p">:</span>
            <span class="n">window</span> <span class="o">=</span> <span class="n">Window</span><span class="p">(</span><span class="n">time</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">align</span><span class="p">,</span> <span class="n">notes</span><span class="p">,</span> <span class="n">skip</span><span class="p">)</span>

            <span class="k">yield</span> <span class="n">window</span>

            <span class="n">skip</span> <span class="o">=</span> <span class="n">window</span><span class="o">.</span><span class="n">skip</span>
            <span class="k">if</span> <span class="n">skip</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">notes</span><span class="p">):</span>
                <span class="k">break</span>
    <span class="k">else</span><span class="p">:</span>  <span class="c1"># compute windows equally spaced by step</span>
        <span class="k">match</span> <span class="n">align</span><span class="p">:</span>
            <span class="k">case</span> <span class="s2">&quot;left&quot;</span><span class="p">:</span>
                <span class="n">time</span> <span class="o">=</span> <span class="n">onset</span>
            <span class="k">case</span> <span class="s2">&quot;center&quot;</span><span class="p">:</span>
                <span class="n">time</span> <span class="o">=</span> <span class="n">onset</span> <span class="o">-</span> <span class="n">size</span> <span class="o">/</span> <span class="mi">2</span>
            <span class="k">case</span> <span class="s2">&quot;right&quot;</span><span class="p">:</span>
                <span class="n">time</span> <span class="o">=</span> <span class="n">onset</span> <span class="o">-</span> <span class="n">size</span>
            <span class="k">case</span><span class="w"> </span><span class="k">_</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid value passed to `align`: </span><span class="si">{</span><span class="n">align</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">while</span> <span class="p">(</span><span class="n">offset</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">time</span> <span class="o">&lt;</span> <span class="n">offset</span><span class="p">):</span>
            <span class="n">window</span> <span class="o">=</span> <span class="n">Window</span><span class="p">(</span><span class="n">time</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="s2">&quot;left&quot;</span><span class="p">,</span> <span class="n">notes</span><span class="p">,</span> <span class="n">skip</span><span class="p">)</span>

            <span class="k">yield</span> <span class="n">window</span>

            <span class="c1"># if step == size, windows are back-to-back, so the next onset</span>
            <span class="c1"># is exactly equal to the previous offset. Avoid</span>
            <span class="n">onset</span> <span class="o">=</span> <span class="n">window</span><span class="o">.</span><span class="n">offset</span> <span class="k">if</span> <span class="n">step</span> <span class="o">==</span> <span class="n">size</span> <span class="k">else</span> <span class="n">onset</span> <span class="o">+</span> <span class="n">step</span>
            <span class="n">time</span> <span class="o">+=</span> <span class="n">step</span>
            <span class="n">skip</span> <span class="o">=</span> <span class="n">window</span><span class="o">.</span><span class="n">skip</span>
            <span class="k">if</span> <span class="n">skip</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">notes</span><span class="p">):</span>
                <span class="k">break</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../../..", "features": ["navigation.sections", "navigation.expand", "navigation.tabs"], "search": "../../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
        <script src="../../../javascripts/fix-properties.js"></script>
      
        <script src="../../../javascripts/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>