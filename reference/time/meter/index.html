
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../durations/">
      
      
        <link rel="next" href="../notedensity/">
      
      
        
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.2">
    
    
      
        <title>Meter - AMADS</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.484c7ddc.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#amads.time.meter.attractor_tempos.MetricalSalience" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="AMADS" class="md-header__button md-logo" aria-label="AMADS" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            AMADS
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Meter
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../paper/" class="md-tabs__link">
        
  
  
    
  
  Project Overview

      </a>
    </li>
  

      
        
  
  
  
    
  
  
    
    
      
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../../core/" class="md-tabs__link">
          
  
  
  API Reference

        </a>
      </li>
    
  

    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../user_guide/installation/" class="md-tabs__link">
        
  
  
    
  
  Install

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../developer_notes/documentation/" class="md-tabs__link">
          
  
  
  Developer

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="AMADS" class="md-nav__button md-logo" aria-label="AMADS" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    AMADS
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../paper/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Project Overview
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    API Reference
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    API Reference
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_1" >
        
          
          <label class="md-nav__link" for="__nav_3_1" id="__nav_3_1_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Core
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    Core
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../core/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../basics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Basic Score Elements
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../basics_more/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    More Classes
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../pitch/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Pitch
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../distribution/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Distribution
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../utils/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Utility Functions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../vector/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Vector Functions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../io/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Input and Output
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_3" >
        
          
          <label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Pitch
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Pitch
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../pitch/ismonophonic/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ismonophonic
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../pitch/hz2midi/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Hz2midi
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../pitch/intervals/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Interval Distributions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../pitch/pitches/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Pitch Distributions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../pitch/key/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Key Profiles
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../pitch/serial/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Serial
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4" checked>
        
          
          <label class="md-nav__link" for="__nav_3_4" id="__nav_3_4_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Time
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Time
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../durations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Duration Distributions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Meter
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Meter
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#amads.time.meter.attractor_tempos.MetricalSalience" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;MetricalSalience
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.time.meter.attractor_tempos.log_gaussian" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;log_gaussian
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.time.meter.break_it_up.MetricalSplitter" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;MetricalSplitter
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.time.meter.grid" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;grid
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.time.meter.grid.starts_to_int_relative_counter" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;starts_to_int_relative_counter
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.time.meter.grid.approximate_pulse_match_with_priority_list" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;approximate_pulse_match_with_priority_list
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.time.meter.grid.generate_n_smooth_numbers" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;generate_n_smooth_numbers
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.time.meter.grid.get_tatum_from_priorities" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;get_tatum_from_priorities
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.time.meter.profiles" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;profiles
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.time.meter.representations" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;representations
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.time.meter.representations.StartTimeHierarchy" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;StartTimeHierarchy
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.time.meter.representations.TimeSignature" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;TimeSignature
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.time.meter.representations.PulseLengths" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;PulseLengths
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.time.meter.representations.BeatPattern" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;BeatPattern
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.time.meter.representations.is_non_negative_integer_power_of_two" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;is_non_negative_integer_power_of_two
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.time.meter.representations.switch_pulse_length_beat_type" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;switch_pulse_length_beat_type
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.time.meter.syncopation.SyncopationMetric" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;SyncopationMetric
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.time.meter.syncopation.vector_to_onset_beat" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;vector_to_onset_beat
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.time.meter.tatum.score_to_offsets" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;score_to_offsets
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.time.meter.tatum.starts_to_indices" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;starts_to_indices
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notedensity/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Note Density
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../rhythm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Rhythm
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../swing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Swing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tempo/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tempo
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../variability/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Variability
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_5" >
        
          
          <label class="md-nav__link" for="__nav_3_5" id="__nav_3_5_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Melody
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Melody
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../melody/boundary/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Boundary
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../melody/contour/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Contour
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../melody/segment/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Segment
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../melody/segment_gestalt/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Segment gestalt
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../melody/similarity/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Similarity
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_6" >
        
          
          <label class="md-nav__link" for="__nav_3_6" id="__nav_3_6_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Harmony
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Harmony
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../harmony/consonance/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Consonance
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../harmony/root_finding/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Root finding
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_7" >
        
          
          <label class="md-nav__link" for="__nav_3_7" id="__nav_3_7_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Polyphony
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    Polyphony
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../polyphony/skyline/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Skyline
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_8" >
        
          
          <label class="md-nav__link" for="__nav_3_8" id="__nav_3_8_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Algorithms
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    Algorithms
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../algorithms/complexity/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Complexity
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../algorithms/entropy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Entropy
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../algorithms/gcd/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    GCD
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../algorithms/mtype_tokenizer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Mtype tokenizer
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../algorithms/ngrams/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Ngrams
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../algorithms/nnotes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Nnotes
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../algorithms/norm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Norm
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../algorithms/scale/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Scale
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../algorithms/slice/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Slice
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../schema/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Schemata
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../user_guide/installation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Install
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Developer
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Developer
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer_notes/documentation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Documentation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer_notes/making_a_release/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Making a Release
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer_notes/modules/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Modules
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer_notes/testing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Testing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer_notes/contributing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Contributing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer_notes/style/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Style
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer_notes/github/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Github
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer_notes/design/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Design
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer_notes/music21/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Music21
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#amads.time.meter.attractor_tempos.MetricalSalience" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;MetricalSalience
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.time.meter.attractor_tempos.log_gaussian" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;log_gaussian
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.time.meter.break_it_up.MetricalSplitter" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;MetricalSplitter
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.time.meter.grid" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;grid
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.time.meter.grid.starts_to_int_relative_counter" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;starts_to_int_relative_counter
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.time.meter.grid.approximate_pulse_match_with_priority_list" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;approximate_pulse_match_with_priority_list
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.time.meter.grid.generate_n_smooth_numbers" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;generate_n_smooth_numbers
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.time.meter.grid.get_tatum_from_priorities" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;get_tatum_from_priorities
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.time.meter.profiles" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;profiles
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.time.meter.representations" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;representations
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.time.meter.representations.StartTimeHierarchy" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;StartTimeHierarchy
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.time.meter.representations.TimeSignature" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;TimeSignature
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.time.meter.representations.PulseLengths" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;PulseLengths
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.time.meter.representations.BeatPattern" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;BeatPattern
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.time.meter.representations.is_non_negative_integer_power_of_two" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;is_non_negative_integer_power_of_two
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.time.meter.representations.switch_pulse_length_beat_type" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;switch_pulse_length_beat_type
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.time.meter.syncopation.SyncopationMetric" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;SyncopationMetric
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.time.meter.syncopation.vector_to_onset_beat" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;vector_to_onset_beat
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.time.meter.tatum.score_to_offsets" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;score_to_offsets
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#amads.time.meter.tatum.starts_to_indices" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-function"></code>&nbsp;starts_to_indices
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  



  <h1>Meter</h1>

<div class="doc doc-object doc-class">



<h2 id="amads.time.meter.attractor_tempos.MetricalSalience" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">MetricalSalience</span>


<a href="#amads.time.meter.attractor_tempos.MetricalSalience" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">MetricalSalience</span><span class="p">(</span>
    <span class="n"><a class="autorefs autorefs-internal" title="symbolic_pulses (amads.time.meter.attractor_tempos.MetricalSalience(symbolic_pulses))" href="#amads.time.meter.attractor_tempos.MetricalSalience(symbolic_pulses)">symbolic_pulses</a></span><span class="p">:</span> <span class="n"><span title="numpy.ndarray">ndarray</span></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="quarter_bpm (amads.time.meter.attractor_tempos.MetricalSalience(quarter_bpm))" href="#amads.time.meter.attractor_tempos.MetricalSalience(quarter_bpm)">quarter_bpm</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="mu (amads.time.meter.attractor_tempos.MetricalSalience(mu))" href="#amads.time.meter.attractor_tempos.MetricalSalience(mu)">mu</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a></span> <span class="o">=</span> <span class="mf">0.6</span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="sig (amads.time.meter.attractor_tempos.MetricalSalience(sig))" href="#amads.time.meter.attractor_tempos.MetricalSalience(sig)">sig</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a></span> <span class="o">=</span> <span class="mf">0.3</span><span class="p">,</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents first">



        <p>Methods for storing array representations of metrical structure and derived salience values.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
<h3 id="amads.time.meter.attractor_tempos.MetricalSalience(symbolic_pulses)" class="doc doc-heading doc-heading-parameter">              <b><code>symbolic_pulses</code></b>
<a href="#amads.time.meter.attractor_tempos.MetricalSalience(symbolic_pulses)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><span title="numpy.ndarray">ndarray</span> | None</code>, default:
                  <code>None</code>
)
          –
          <div class="doc-md-description">
            <p>A NumPy array representing the symbolic pulse lengths by level.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h3 id="amads.time.meter.attractor_tempos.MetricalSalience(quarter_bpm)" class="doc doc-heading doc-heading-parameter">              <b><code>quarter_bpm</code></b>
<a href="#amads.time.meter.attractor_tempos.MetricalSalience(quarter_bpm)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a> | None</code>, default:
                  <code>None</code>
)
          –
          <div class="doc-md-description">
            <p>The beats-per-minute corresponding to the symbolic value of a pulse length 1.0 in symbolic time.
The user sets this value if/when calculating absolute length and salience values.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h3 id="amads.time.meter.attractor_tempos.MetricalSalience(mu)" class="doc doc-heading doc-heading-parameter">              <b><code>mu</code></b>
<a href="#amads.time.meter.attractor_tempos.MetricalSalience(mu)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a></code>, default:
                  <code>0.6</code>
)
          –
          <div class="doc-md-description">
            <p>The mean of the Gaussian.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h3 id="amads.time.meter.attractor_tempos.MetricalSalience(sig)" class="doc doc-heading doc-heading-parameter">              <b><code>sig</code></b>
<a href="#amads.time.meter.attractor_tempos.MetricalSalience(sig)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a></code>, default:
                  <code>0.3</code>
)
          –
          <div class="doc-md-description">
            <p>The standard deviation of the Gaussian.</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Attributes:</span></p>
    <ul>
        <li class="doc-section-item field-body">
          <b><code><span title="amads.time.meter.attractor_tempos.MetricalSalience.symbolic_pulses">symbolic_pulses</span></code></b>
          –
          <div class="doc-md-description">
            <p>As above.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
          <b><code><span title="amads.time.meter.attractor_tempos.MetricalSalience.absolute_pulses">absolute_pulses</span></code></b>
          –
          <div class="doc-md-description">
            <p>An adaptation of the symbolic pulse lengths array that maps each value from symbolic to seconds.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
          <b><code><span title="amads.time.meter.attractor_tempos.MetricalSalience.salience_values">salience_values</span></code></b>
          –
          <div class="doc-md-description">
            <p>An adaptation of the absolute pulse lengths to the equivalent salience values (see notes on <code>log_gaussian</code>).</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
          <b><code><span title="amads.time.meter.attractor_tempos.MetricalSalience.cumulative_salience_values">cumulative_salience_values</span></code></b>
          –
          <div class="doc-md-description">
            <p>A 1D array summation of the absolute salience values by column (one value per metrical position).</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
          <b><code><span title="amads.time.meter.attractor_tempos.MetricalSalience.indicator">indicator</span></code></b>
          –
          <div class="doc-md-description">
            <p>An indicator array for the (non-)presence of values at each position of the symbolic pulse lengths array.
This can serve, for example, as the symbolic equivalent of the (absolute) <code>salience_values</code> array.</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Examples:</span></p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">amads.time.meter.representations</span><span class="w"> </span><span class="kn">import</span> <span class="n">PulseLengths</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pl</span> <span class="o">=</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pls</span> <span class="o">=</span> <span class="n">PulseLengths</span><span class="p">(</span><span class="n">pulse_lengths</span><span class="o">=</span><span class="n">pl</span><span class="p">,</span> <span class="n">cycle_length</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">arr</span> <span class="o">=</span> <span class="n">pls</span><span class="o">.</span><span class="n">to_array</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">arr</span>
<span class="go">array([[4. , 0. , 0. , 0. , 0. , 0. , 0. , 0. ],</span>
<span class="go">       [2. , 0. , 0. , 0. , 2. , 0. , 0. , 0. ],</span>
<span class="go">       [1. , 0. , 1. , 0. , 1. , 0. , 1. , 0. ],</span>
<span class="go">       [0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5]])</span>
</code></pre></div>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">ms</span> <span class="o">=</span> <span class="n">MetricalSalience</span><span class="p">(</span><span class="n">symbolic_pulses</span><span class="o">=</span><span class="n">arr</span><span class="p">,</span> <span class="n">quarter_bpm</span><span class="o">=</span><span class="mi">120</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ms</span><span class="o">.</span><span class="n">absolute_pulses</span>
<span class="go">array([[2.  , 0.  , 0.  , 0.  , 0.  , 0.  , 0.  , 0.  ],</span>
<span class="go">       [1.  , 0.  , 0.  , 0.  , 1.  , 0.  , 0.  , 0.  ],</span>
<span class="go">       [0.5 , 0.  , 0.5 , 0.  , 0.5 , 0.  , 0.5 , 0.  ],</span>
<span class="go">       [0.25, 0.25, 0.25, 0.25, 0.25, 0.25, 0.25, 0.25]])</span>
</code></pre></div>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">ms</span><span class="o">.</span><span class="n">cumulative_salience_values</span>
<span class="go">array([2.39342011, 0.44793176, 1.4136999 , 0.44793176, 2.17446773,</span>
<span class="go">       0.44793176, 1.4136999 , 0.44793176])</span>
</code></pre></div>












<p><span class="doc-section-title">Methods:</span></p>
    <ul>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="            calculate_absolute_pulse_lengths (amads.time.meter.attractor_tempos.MetricalSalience.calculate_absolute_pulse_lengths)" href="#amads.time.meter.attractor_tempos.MetricalSalience.calculate_absolute_pulse_lengths">calculate_absolute_pulse_lengths</a></code></b>
            –
            <div class="doc-md-description">
              <p>Calculate absolute pulse lengths from</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="            calculate_salience_values (amads.time.meter.attractor_tempos.MetricalSalience.calculate_salience_values)" href="#amads.time.meter.attractor_tempos.MetricalSalience.calculate_salience_values">calculate_salience_values</a></code></b>
            –
            <div class="doc-md-description">
              <p>Calculate salience values for items in the <code>symbolic_pulses</code></p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="            calculate_cumulative_salience_values (amads.time.meter.attractor_tempos.MetricalSalience.calculate_cumulative_salience_values)" href="#amads.time.meter.attractor_tempos.MetricalSalience.calculate_cumulative_salience_values">calculate_cumulative_salience_values</a></code></b>
            –
            <div class="doc-md-description">
              <p>Calculate cumulative salience values by summing over columns.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="            make_indicator (amads.time.meter.attractor_tempos.MetricalSalience.make_indicator)" href="#amads.time.meter.attractor_tempos.MetricalSalience.make_indicator">make_indicator</a></code></b>
            –
            <div class="doc-md-description">
              <p>Make a 2D indicator vector for the presence/absense of a pulse value at each position.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="            plot (amads.time.meter.attractor_tempos.MetricalSalience.plot)" href="#amads.time.meter.attractor_tempos.MetricalSalience.plot">plot</a></code></b>
            –
            <div class="doc-md-description">
              <p>Plot the salience values with their respective contribution.</p>
            </div>
          </li>
    </ul>



                  <details class="mkdocstrings-source">
                    <summary>Source code in <code>amads/time/meter/attractor_tempos.py</code></summary>
                    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">symbolic_pulses</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">quarter_bpm</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">mu</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.6</span><span class="p">,</span>
    <span class="n">sig</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.3</span><span class="p">,</span>
<span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">symbolic_pulses</span> <span class="o">=</span> <span class="n">symbolic_pulses</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">quarter_bpm</span> <span class="o">=</span> <span class="n">quarter_bpm</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">mu</span> <span class="o">=</span> <span class="n">mu</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">sig</span> <span class="o">=</span> <span class="n">sig</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">absolute_pulses</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">calculate_absolute_pulse_lengths</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">salience_values</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">calculate_salience_values</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">cumulative_salience_values</span> <span class="o">=</span> <span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">calculate_cumulative_salience_values</span><span class="p">()</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">indicator</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">make_indicator</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
                  </details>



<div class="doc doc-children">








<h3 id="amads.time.meter.attractor_tempos.MetricalSalience-functions">Functions<a href="#amads.time.meter.attractor_tempos.MetricalSalience-functions" class="headerlink" title="Permanent link">&para;</a></h3>

<div class="doc doc-object doc-function">


<h4 id="amads.time.meter.attractor_tempos.MetricalSalience.calculate_absolute_pulse_lengths" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">calculate_absolute_pulse_lengths</span>


<a href="#amads.time.meter.attractor_tempos.MetricalSalience.calculate_absolute_pulse_lengths" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">calculate_absolute_pulse_lengths</span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Calculate absolute pulse lengths from
the symbolic lengths (<code>symbolic_pulses</code>) and
the BPM provided here for the 'quarter note' as reference value.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>amads/time/meter/attractor_tempos.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">calculate_absolute_pulse_lengths</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calculate absolute pulse lengths from</span>
<span class="sd">    the symbolic lengths (`symbolic_pulses`) and</span>
<span class="sd">    the BPM provided here for the &#39;quarter note&#39; as reference value.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">symbolic_pulses</span> <span class="o">*</span> <span class="p">(</span><span class="mi">60</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">quarter_bpm</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="amads.time.meter.attractor_tempos.MetricalSalience.calculate_salience_values" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">calculate_salience_values</span>


<a href="#amads.time.meter.attractor_tempos.MetricalSalience.calculate_salience_values" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">calculate_salience_values</span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Calculate salience values for items in the <code>symbolic_pulses</code>
using <code>log_gaussian</code> (see notes on that function).</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>amads/time/meter/attractor_tempos.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">calculate_salience_values</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calculate salience values for items in the `symbolic_pulses`</span>
<span class="sd">    using `log_gaussian` (see notes on that function).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">log_gaussian</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">absolute_pulses</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">mu</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sig</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="amads.time.meter.attractor_tempos.MetricalSalience.calculate_cumulative_salience_values" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">calculate_cumulative_salience_values</span>


<a href="#amads.time.meter.attractor_tempos.MetricalSalience.calculate_cumulative_salience_values" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">calculate_cumulative_salience_values</span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Calculate cumulative salience values by summing over columns.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>amads/time/meter/attractor_tempos.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">calculate_cumulative_salience_values</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calculate cumulative salience values by summing over columns.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">salience_values</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="amads.time.meter.attractor_tempos.MetricalSalience.make_indicator" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">make_indicator</span>


<a href="#amads.time.meter.attractor_tempos.MetricalSalience.make_indicator" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">make_indicator</span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Make a 2D indicator vector for the presence/absense of a pulse value at each position.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>amads/time/meter/attractor_tempos.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">make_indicator</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Make a 2D indicator vector for the presence/absense of a pulse value at each position.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">symbolic_pulses</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="amads.time.meter.attractor_tempos.MetricalSalience.plot" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">plot</span>


<a href="#amads.time.meter.attractor_tempos.MetricalSalience.plot" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">plot</span><span class="p">(</span>
    <span class="n"><a class="autorefs autorefs-internal" title="symbolic_not_absolute (amads.time.meter.attractor_tempos.MetricalSalience.plot(symbolic_not_absolute))" href="#amads.time.meter.attractor_tempos.MetricalSalience.plot(symbolic_not_absolute)">symbolic_not_absolute</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="reverse_to_plot (amads.time.meter.attractor_tempos.MetricalSalience.plot(reverse_to_plot))" href="#amads.time.meter.attractor_tempos.MetricalSalience.plot(reverse_to_plot)">reverse_to_plot</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n"><span title="amads.time.meter.attractor_tempos.MetricalSalience.plot(show)">show</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Plot the salience values with their respective contribution.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
<h5 id="amads.time.meter.attractor_tempos.MetricalSalience.plot(symbolic_not_absolute)" class="doc doc-heading doc-heading-parameter">              <b><code>symbolic_not_absolute</code></b>
<a href="#amads.time.meter.attractor_tempos.MetricalSalience.plot(symbolic_not_absolute)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>, default:
                  <code>False</code>
)
          –
          <div class="doc-md-description">
            <p>If False (default), plot the tempo- and meter-sensitive, weighted salience values.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h5 id="amads.time.meter.attractor_tempos.MetricalSalience.plot(reverse_to_plot)" class="doc doc-heading doc-heading-parameter">              <b><code>reverse_to_plot</code></b>
<a href="#amads.time.meter.attractor_tempos.MetricalSalience.plot(reverse_to_plot)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>, default:
                  <code>True</code>
)
          –
          <div class="doc-md-description">
            
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><span title="Figure">Figure</span></code>
          –
          <div class="doc-md-description">
            <p>A matplotlib.figure.Figure of the plotted salience values.</p>
          </div>
        </li>
    </ul>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>amads/time/meter/attractor_tempos.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">plot</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">symbolic_not_absolute</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">reverse_to_plot</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">show</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Plot the salience values with their respective contribution.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    symbolic_not_absolute: If True, plot only the indicator values (one per level).</span>
<span class="sd">        If False (default), plot the tempo- and meter-sensitive, weighted salience values.</span>
<span class="sd">    reverse_to_plot: If True (default), plot the fastest values at the bottom.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    Figure</span>
<span class="sd">        A matplotlib.figure.Figure of the plotted salience values.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">symbolic_not_absolute</span><span class="p">:</span>
        <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">indicator</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">salience_values</span>

    <span class="n">pulse_values_for_labels</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">symbolic_pulses</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span>

    <span class="k">if</span> <span class="n">reverse_to_plot</span><span class="p">:</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>  <span class="c1"># TODO maybe revisit for elegance, checks</span>
        <span class="n">pulse_values_for_labels</span> <span class="o">=</span> <span class="n">pulse_values_for_labels</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

    <span class="n">num_layers</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">num_cols</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
    <span class="n">bottom</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">num_cols</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_layers</span><span class="p">):</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span>
            <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">num_cols</span><span class="p">),</span>
            <span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">],</span>
            <span class="n">bottom</span><span class="o">=</span><span class="n">bottom</span><span class="p">,</span>
            <span class="n">label</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Pulse=</span><span class="si">{</span><span class="n">pulse_values_for_labels</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="si">}</span><span class="s2">; IOI=</span><span class="si">{</span><span class="n">pulse_values_for_labels</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">60</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="bp">self</span><span class="o">.</span><span class="n">quarter_bpm</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">bottom</span> <span class="o">+=</span> <span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>

    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Cycle-relative position&quot;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;Weighting&quot;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">show</span><span class="p">:</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">fig</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div><hr />


<div class="doc doc-object doc-function">


<h2 id="amads.time.meter.attractor_tempos.log_gaussian" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>            <span class="doc doc-object-name doc-function-name">log_gaussian</span>


<a href="#amads.time.meter.attractor_tempos.log_gaussian" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">log_gaussian</span><span class="p">(</span><span class="n"><span title="amads.time.meter.attractor_tempos.log_gaussian(arr)">arr</span></span><span class="p">:</span> <span class="n"><span title="numpy.ndarray">ndarray</span></span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-internal" title="mu (amads.time.meter.attractor_tempos.log_gaussian(mu))" href="#amads.time.meter.attractor_tempos.log_gaussian(mu)">mu</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a></span> <span class="o">=</span> <span class="mf">0.6</span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-internal" title="sig (amads.time.meter.attractor_tempos.log_gaussian(sig))" href="#amads.time.meter.attractor_tempos.log_gaussian(sig)">sig</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a></span> <span class="o">=</span> <span class="mf">0.3</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents first">

        <p>Compute a log-linear Gaussian which is the basis of individual pulse salience values.
To avoid log(0) issues, <code>np.clip</code> values to be always greater than 0.
See also <a class="autorefs autorefs-internal" title="            calculate_salience_values" href="#amads.time.meter.attractor_tempos.MetricalSalience.calculate_salience_values">MetricalSalience.calculate_salience_values</a>.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
<h3 id="amads.time.meter.attractor_tempos.log_gaussian(mu)" class="doc doc-heading doc-heading-parameter">              <b><code>mu</code></b>
<a href="#amads.time.meter.attractor_tempos.log_gaussian(mu)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a></code>, default:
                  <code>0.6</code>
)
          –
          <div class="doc-md-description">
            <p>The mean of the Gaussian.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h3 id="amads.time.meter.attractor_tempos.log_gaussian(sig)" class="doc doc-heading doc-heading-parameter">              <b><code>sig</code></b>
<a href="#amads.time.meter.attractor_tempos.log_gaussian(sig)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a></code>, default:
                  <code>0.3</code>
)
          –
          <div class="doc-md-description">
            <p>The standard deviation of the Gaussian.</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Examples:</span></p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">log_gaussian</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.06</span><span class="p">,</span> <span class="mf">0.6</span><span class="p">,</span> <span class="mf">6.0</span><span class="p">]))</span> <span class="c1"># demo log-lin symmetry</span>
<span class="go">array([0.00386592, 1.        , 0.00386592])</span>
</code></pre></div>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">log_gaussian</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">1.</span><span class="p">,</span> <span class="mf">2.</span><span class="p">]))</span> <span class="c1"># 2x between levels</span>
<span class="go">array([0.96576814, 0.76076784, 0.21895238])</span>
</code></pre></div>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>amads/time/meter/attractor_tempos.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">log_gaussian</span><span class="p">(</span><span class="n">arr</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">mu</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.6</span><span class="p">,</span> <span class="n">sig</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.3</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Compute a log-linear Gaussian which is the basis of individual pulse salience values.</span>
<span class="sd">    To avoid log(0) issues, `np.clip` values to be always greater than 0.</span>
<span class="sd">    See also [MetricalSalience.calculate_salience_values]</span>
<span class="sd">    [amads.time.meter.attractor_tempos.MetricalSalience.calculate_salience_values].</span>


<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    mu: float</span>
<span class="sd">        The mean of the Gaussian.</span>
<span class="sd">    sig: float</span>
<span class="sd">        The standard deviation of the Gaussian.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>

<span class="sd">    &gt;&gt;&gt; log_gaussian(np.array([0.06, 0.6, 6.0])) # demo log-lin symmetry</span>
<span class="sd">    array([0.00386592, 1.        , 0.00386592])</span>

<span class="sd">    &gt;&gt;&gt; log_gaussian(np.array([0.5, 1., 2.])) # 2x between levels</span>
<span class="sd">    array([0.96576814, 0.76076784, 0.21895238])</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">sig</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Standard deviation (`sig`) must be positive.&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">mu</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Mean (`mu`) must be positive.&quot;</span><span class="p">)</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">clip</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="mf">1e-9</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">x</span> <span class="o">/</span> <span class="n">mu</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">/</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">sig</span><span class="o">**</span><span class="mi">2</span><span class="p">)))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div><hr />


<div class="doc doc-object doc-class">



<h2 id="amads.time.meter.break_it_up.MetricalSplitter" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">MetricalSplitter</span>


<a href="#amads.time.meter.break_it_up.MetricalSplitter" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">MetricalSplitter</span><span class="p">(</span>
    <span class="n"><a class="autorefs autorefs-internal" title="note_start (amads.time.meter.break_it_up.MetricalSplitter(note_start))" href="#amads.time.meter.break_it_up.MetricalSplitter(note_start)">note_start</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a></span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="note_length (amads.time.meter.break_it_up.MetricalSplitter(note_length))" href="#amads.time.meter.break_it_up.MetricalSplitter(note_length)">note_length</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a></span><span class="p">,</span>
    <span class="n"><span title="amads.time.meter.break_it_up.MetricalSplitter(start_hierarchy)">start_hierarchy</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a></span><span class="p">],</span>
    <span class="n"><a class="autorefs autorefs-internal" title="split_same_level (amads.time.meter.break_it_up.MetricalSplitter(split_same_level))" href="#amads.time.meter.break_it_up.MetricalSplitter(split_same_level)">split_same_level</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents first">



        <p>Split up notes and/or rests to reflect a specified metrical hierarchy.</p>
<p>This class
takes in a representation of a note in terms of the start position and duration,
along with a metrical context
and returns a list of start-duration pairs for the constituent parts of the broken-up note.</p>
<p>The metrical context should be expressed in the form of a <code>start_hierarchy</code>
(effectively a list of lists for the hierarchy).
This can be provided directly or made via various classes in the meter module (see notes there).</p>
<p>The basic premise here is that a single note can only traverse metrical boundaries
for levels lower than the one it starts on.
If it traverses the metrical boundary of a higher level, then
it is split at that position into two note-heads.
This split registers as a case of syncopation for those algorithms
and as a case for two note-heads to be connected by a tie in notation.</p>
<p>There are many variants on this basic setup.
This class aims to support almost any such variant, while providing easy defaults
for simple, standard practice.</p>
<p>The flexibility comes from the definition of a metrical structure
(for which see the <code>MetricalHierarchy</code> class).</p>
<p>Each split of the note duration serves to move up one metrical level.
For instance, for the 4/4 example above, a note of duration 2.0 starting at start
0.25 connects to 0.5 in level 3 (duration = 0.25), then
0.5 connects to 1.0 in level 2 (duration = 0.5), then
1.0 connects to 2.0 in level 1 (duration = 1.0), and
this leaves a duration of 0.25 to start on 2.0.
The data is returned as a list of (position, duration) tuples.
The values for the example would be:
[(0.25, 0.25),
(0.5, 0.5),
(1.0, 1.0),
(1.0, 0.25)]
as demonstrated below.</p>
<p>If the note runs past the end of the metrical span,
the remaining value is stored with the
<code>start_duration_pairs</code> recording the within-measure pairs
and <code>remaining_length</code> attribute for the rest.</p>
<p>If the <code>note_start</code> is not in the hierarchy,
then the first step is to map to the next nearest value in the lowest level.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
<h3 id="amads.time.meter.break_it_up.MetricalSplitter(note_start)" class="doc doc-heading doc-heading-parameter">              <b><code>note_start</code></b>
<a href="#amads.time.meter.break_it_up.MetricalSplitter(note_start)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a></code>)
          –
          <div class="doc-md-description">
            <p>The starting position of the note (or rest).</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h3 id="amads.time.meter.break_it_up.MetricalSplitter(note_length)" class="doc doc-heading doc-heading-parameter">              <b><code>note_length</code></b>
<a href="#amads.time.meter.break_it_up.MetricalSplitter(note_length)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a></code>)
          –
          <div class="doc-md-description">
            <p>The length (duration) of the note (or rest).</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h3 id="amads.time.meter.break_it_up.MetricalSplitter(split_same_level)" class="doc doc-heading doc-heading-parameter">              <b><code>split_same_level</code></b>
<a href="#amads.time.meter.break_it_up.MetricalSplitter(split_same_level)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>, default:
                  <code>True</code>
)
          –
          <div class="doc-md-description">
            <p>When creating hierarchies, decide whether to split elements at the same level, e.g., 1/8 and 2/8 in 6/8.
In cases of metrical structures with a 3-grouping
(two "weak" events between a "strong" in compound signatures like 6/8),
some conventions choose to split notes within-level as well as between them.
For instance, with a quarter note starting on the second eighth note (start 0.5) of 6/8,
some will want to split that into two 1/8th notes, divided on the third eighth note position,
while others will want to leave this intact.
The <code>split_same_level</code> option accommodates this:
it affects the within-level split when set to True and not otherwise (default).</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Examples:</span></p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">amads.time.meter.representations</span><span class="w"> </span><span class="kn">import</span> <span class="n">TimeSignature</span><span class="p">,</span> <span class="n">PulseLengths</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span> <span class="o">=</span> <span class="n">TimeSignature</span><span class="p">(</span><span class="n">as_string</span><span class="o">=</span><span class="s2">&quot;4/4&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">start_hierarchy</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">to_start_hierarchy</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">start_hierarchy</span>
<span class="go">[[0.0, 4.0], [0.0, 1.0, 2.0, 3.0, 4.0]]</span>
</code></pre></div>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">split</span> <span class="o">=</span> <span class="n">MetricalSplitter</span><span class="p">(</span><span class="mf">0.25</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="n">start_hierarchy</span><span class="o">=</span><span class="n">start_hierarchy</span><span class="p">,</span> <span class="n">split_same_level</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">split</span><span class="o">.</span><span class="n">start_duration_pairs</span>
<span class="go">[(0.25, 0.75), (1.0, 1.25)]</span>
</code></pre></div>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">split</span> <span class="o">=</span> <span class="n">MetricalSplitter</span><span class="p">(</span><span class="mf">0.25</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="n">start_hierarchy</span><span class="o">=</span><span class="n">start_hierarchy</span><span class="p">,</span> <span class="n">split_same_level</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">split</span><span class="o">.</span><span class="n">start_duration_pairs</span>
<span class="go">[(0.25, 0.75), (1.0, 1.0), (2.0, 0.25)]</span>
</code></pre></div>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">m</span><span class="o">.</span><span class="n">fill_2s_3s</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">start_hierarchy</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">to_start_hierarchy</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">start_hierarchy</span>
<span class="go">[[0.0, 4.0], [0.0, 2.0, 4.0], [0.0, 1.0, 2.0, 3.0, 4.0]]</span>
</code></pre></div>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">meter_from_pulses</span> <span class="o">=</span> <span class="n">PulseLengths</span><span class="p">([</span><span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">],</span> <span class="n">cycle_length</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">start_hierarchy</span> <span class="o">=</span> <span class="n">meter_from_pulses</span><span class="o">.</span><span class="n">to_start_hierarchy</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">start_hierarchy</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="go">[0.0, 0.25, 0.5, 0.75, 1.0, 1.25, 1.5, 1.75, 2.0, 2.25, 2.5, 2.75, 3.0, 3.25, 3.5, 3.75, 4.0]</span>
</code></pre></div>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">split</span> <span class="o">=</span> <span class="n">MetricalSplitter</span><span class="p">(</span><span class="mf">0.25</span><span class="p">,</span> <span class="mf">4.0</span><span class="p">,</span> <span class="n">start_hierarchy</span><span class="o">=</span><span class="n">start_hierarchy</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">split</span><span class="o">.</span><span class="n">start_duration_pairs</span>
<span class="go">[(0.25, 0.25), (0.5, 0.5), (1.0, 1.0), (2.0, 2.0)]</span>
</code></pre></div>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">split</span><span class="o">.</span><span class="n">remaining_length</span>
<span class="go">0.25</span>
</code></pre></div>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">split</span> <span class="o">=</span> <span class="n">MetricalSplitter</span><span class="p">(</span><span class="mf">0.05</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="n">start_hierarchy</span><span class="o">=</span><span class="n">start_hierarchy</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">split</span><span class="o">.</span><span class="n">start_duration_pairs</span>
<span class="go">[(0.05, 0.2), (0.25, 0.25), (0.5, 0.5), (1.0, 1.0), (2.0, 0.05)]</span>
</code></pre></div>












<p><span class="doc-section-title">Methods:</span></p>
    <ul>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="            level_pass (amads.time.meter.break_it_up.MetricalSplitter.level_pass)" href="#amads.time.meter.break_it_up.MetricalSplitter.level_pass">level_pass</a></code></b>
            –
            <div class="doc-md-description">
              <p>Given a <code>start_hierarchy</code>,</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="            advance_step (amads.time.meter.break_it_up.MetricalSplitter.advance_step)" href="#amads.time.meter.break_it_up.MetricalSplitter.advance_step">advance_step</a></code></b>
            –
            <div class="doc-md-description">
              <p>For a start position, and a metrical level expressed as a list of starts,</p>
            </div>
          </li>
    </ul>



                  <details class="mkdocstrings-source">
                    <summary>Source code in <code>amads/time/meter/break_it_up.py</code></summary>
                    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">note_start</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
    <span class="n">note_length</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
    <span class="n">start_hierarchy</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">list</span><span class="p">],</span>
    <span class="n">split_same_level</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">):</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">note_length</span> <span class="o">=</span> <span class="n">note_length</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">note_start</span> <span class="o">=</span> <span class="n">note_start</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">start_hierarchy</span> <span class="o">=</span> <span class="n">start_hierarchy</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">split_same_level</span> <span class="o">=</span> <span class="n">split_same_level</span>

    <span class="c1"># Initialise</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">start_duration_pairs</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">updated_start</span> <span class="o">=</span> <span class="n">note_start</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">remaining_length</span> <span class="o">=</span> <span class="n">note_length</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">level_pass</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
                  </details>



<div class="doc doc-children">








<h3 id="amads.time.meter.break_it_up.MetricalSplitter-functions">Functions<a href="#amads.time.meter.break_it_up.MetricalSplitter-functions" class="headerlink" title="Permanent link">&para;</a></h3>

<div class="doc doc-object doc-function">


<h4 id="amads.time.meter.break_it_up.MetricalSplitter.level_pass" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">level_pass</span>


<a href="#amads.time.meter.break_it_up.MetricalSplitter.level_pass" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">level_pass</span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Given a <code>start_hierarchy</code>,
this method iterates across the levels of that hierarchy to find the
current start position, and (through <code>advance_step</code>) the start
position to map to.</p>
<p>This method runs once for each such mapping, typically advancing
up one (or more) layer of the metrical hierarchy with each call.
“Typically” because <code>split_same_level</code> is supported where relevant.</p>
<p>Each iteration creates a new start-duration pair
stored in the start_duration_pairs list
that records the constituent parts of the split note.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>amads/time/meter/break_it_up.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">level_pass</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a `start_hierarchy`,</span>
<span class="sd">    this method iterates across the levels of that hierarchy to find the</span>
<span class="sd">    current start position, and (through `advance_step`) the start</span>
<span class="sd">    position to map to.</span>

<span class="sd">    This method runs once for each such mapping, typically advancing</span>
<span class="sd">    up one (or more) layer of the metrical hierarchy with each call.</span>
<span class="sd">    “Typically” because `split_same_level` is supported where relevant.</span>

<span class="sd">    Each iteration creates a new start-duration pair</span>
<span class="sd">    stored in the start_duration_pairs list</span>
<span class="sd">    that records the constituent parts of the split note.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">for</span> <span class="n">level_index</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">start_hierarchy</span><span class="p">)):</span>

        <span class="k">if</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">remaining_length</span> <span class="o">&lt;=</span> <span class="mi">0</span>
        <span class="p">):</span>  <span class="c1"># sic, here due to the various routes through</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">updated_start</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">start_hierarchy</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="p">):</span>  <span class="c1"># finished metrical span</span>
            <span class="k">return</span>

        <span class="n">this_level</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">start_hierarchy</span><span class="p">[</span><span class="n">level_index</span><span class="p">]</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">updated_start</span> <span class="ow">in</span> <span class="n">this_level</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">level_index</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>  <span class="c1"># i.e., updated_start == 0</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">start_duration_pairs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                    <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">updated_start</span><span class="p">,</span> <span class="nb">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">remaining_length</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
                <span class="p">)</span>
                <span class="k">return</span>
            <span class="k">else</span><span class="p">:</span>  <span class="c1"># level up. NB: duplicates in nested hierarchy help here</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">split_same_level</span><span class="p">:</span>  <span class="c1"># relevant option for e.g., 6/8</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">advance_step</span><span class="p">(</span><span class="n">this_level</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>  <span class="c1"># usually</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">advance_step</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">start_hierarchy</span><span class="p">[</span><span class="n">level_index</span> <span class="o">-</span> <span class="mi">1</span><span class="p">])</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">remaining_length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>  <span class="c1"># start not in the hierarchy at all</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">advance_step</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">start_hierarchy</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="p">)</span>  <span class="c1"># get to the lowest level</span>
        <span class="c1"># Now start the process with the metrical structure:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">level_pass</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="amads.time.meter.break_it_up.MetricalSplitter.advance_step" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">advance_step</span>


<a href="#amads.time.meter.break_it_up.MetricalSplitter.advance_step" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">advance_step</span><span class="p">(</span><span class="n"><span title="amads.time.meter.break_it_up.MetricalSplitter.advance_step(positions_list)">positions_list</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a></span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>For a start position, and a metrical level expressed as a list of starts,
find the next higher value from those levels.
Used for determining iterative divisions.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>amads/time/meter/break_it_up.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">advance_step</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">positions_list</span><span class="p">:</span> <span class="nb">list</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    For a start position, and a metrical level expressed as a list of starts,</span>
<span class="sd">    find the next higher value from those levels.</span>
<span class="sd">    Used for determining iterative divisions.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">positions_list</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">p</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">updated_start</span><span class="p">:</span>
            <span class="n">duration_to_next_position</span> <span class="o">=</span> <span class="n">p</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">updated_start</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">remaining_length</span> <span class="o">&lt;=</span> <span class="n">duration_to_next_position</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">start_duration_pairs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                    <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">updated_start</span><span class="p">,</span> <span class="nb">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">remaining_length</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
                <span class="p">)</span>
                <span class="c1"># done but still reduce `remaining_length` to end the whole process in level_pass</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">remaining_length</span> <span class="o">-=</span> <span class="n">duration_to_next_position</span>
                <span class="k">return</span>
            <span class="k">else</span><span class="p">:</span>  <span class="c1"># self.remaining_length &gt; duration_to_next_position:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">start_duration_pairs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                    <span class="p">(</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">updated_start</span><span class="p">,</span>
                        <span class="nb">round</span><span class="p">(</span><span class="n">duration_to_next_position</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span>
                    <span class="p">)</span>
                <span class="p">)</span>
                <span class="c1"># Updated start and position; run again</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">updated_start</span> <span class="o">=</span> <span class="n">p</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">remaining_length</span> <span class="o">-=</span> <span class="n">duration_to_next_position</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">level_pass</span><span class="p">()</span>  <span class="c1"># NB: to re-start from top as may have jumped a level</span>
                <span class="k">return</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div><hr />


<div class="doc doc-object doc-module">



<h2 id="amads.time.meter.grid" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>            <span class="doc doc-object-name doc-module-name">grid</span>


<a href="#amads.time.meter.grid" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents first">

        <p>The module seeks to find the smallest metrical pulse level (broadly, “tatum”)
in response to a source and user tolerance settings.</p>
<p>In the simplest case, a source records its metrical positions exactly,
including fractional values as needed.
We provide functionality for standard, general algorithms in these cases
(greatest common denominator and fraction estimation)
which are battle-tested and computationally efficient.</p>
<p>In metrically simple and regular cases like chorales, this value might be
the eighth note, for instance.
In other cases, it gets more complex.
For example, Beethoven's Opus 10 Nr.2 Movement 1 includes
a triplet 16th turn figure in measure 1
(tatum = 1/6 division of the quarter note)
and also dotted rhythms that pair a dotted 16th with a 32nd note from measure 5
(tatum = 1/8 division of the quarter).
So to catch these cases in the first 5 measures, we need the
lowest common multiple of 6 and 8, i.e., 24 per quarter (or 48 bins per 2/4 measure).</p>
<p>In cases of extreme complexity, there may be a “need” for a
considerably shorter tatum pulse (and, equivalently, a greater number of bins).
This is relevant for some modern music, as well as cases where
grace notes are assigned a specific metrical position/duration
(though in many encoded standards, grace notes are not assigned
separate metrical positions).</p>
<p>Moreover, there are musical sources that do not encode fractional time
values, but rather approximation with floats. These include any:</p>
<ul>
<li>frame-wise representations of time (including MIDI and any attempted
    transcription from audio),</li>
<li>processing via code libraries that likewise convert fractions to floats,</li>
<li>secondary representations like most CSVs.</li>
</ul>
<p>As division by 3 leads to rounding, approximation, and floating point errors,
and as much music involves those divisions, this is widely relevant.</p>
<p>The standard algorithms often fail in these contexts, largely because symbolic music
tends to prioritise certain metrical divisions over others.
For example, 15/16 is a commonly used metrical position (largely because 16 is a power of 2), but 14/15 is not.
That being the case, while 14/15 might be a better mathematical fit for approximating a value,
it is typically incorrect as the musical solution.
We can use the term “incorrect” advisedly here because
the floats are secondary representations of a known fractional ground truth.
Doctests demonstrate some of these cases.</p>
<p><small><strong>Author</strong>: Mark Gotham</small></p>















<div class="doc doc-children">












  </div>

    </div>

</div><hr />


<div class="doc doc-object doc-function">


<h2 id="amads.time.meter.grid.starts_to_int_relative_counter" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>            <span class="doc doc-object-name doc-function-name">starts_to_int_relative_counter</span>


<a href="#amads.time.meter.grid.starts_to_int_relative_counter" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">starts_to_int_relative_counter</span><span class="p">(</span>
    <span class="n"><span title="amads.time.meter.grid.starts_to_int_relative_counter(starts)">starts</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" title="typing.Iterable" href="https://docs.python.org/3/library/typing.html#typing.Iterable">Iterable</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a></span><span class="p">],</span> <span class="n"><span title="amads.time.meter.grid.starts_to_int_relative_counter(decimal_places)">decimal_places</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></span> <span class="o">=</span> <span class="mi">5</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents first">

        <p>Find and count all fractional parts of an iterable.</p>
<p>Simple wrapper function to create a Counter (dict) that
maps the fractional parts of starts ($start - int(start)$, e.g.,
1.5 becomes 0.5) to the number of occurrences of that fraction
(e.g., starts 1.5 and 2.5 produce the mapping 0.5: 2 in the result).</p>
<p>Fractional parts are rounded to <code>decimal_places</code> decimal points (default 5),
which gives a tolerance down to 0.00001 and accommodates common musical
fractions such as thirds (0.33333) and sixths (0.16667).</p>


<p><span class="doc-section-title">Examples:</span></p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">test_list</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">,</span> <span class="mf">1.75</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mf">2.3333333333</span><span class="p">,</span> <span class="mf">2.666667</span><span class="p">,</span> <span class="mf">3.00000000000000001</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">starts_to_int_relative_counter</span><span class="p">(</span><span class="n">test_list</span><span class="p">)</span>
<span class="go">Counter({0.0: 5, 0.5: 2, 0.75: 1, 0.33333: 1, 0.66667: 1})</span>
</code></pre></div>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>amads/time/meter/grid.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">starts_to_int_relative_counter</span><span class="p">(</span>
    <span class="n">starts</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">float</span><span class="p">],</span> <span class="n">decimal_places</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">5</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Find and count all fractional parts of an iterable.</span>

<span class="sd">    Simple wrapper function to create a Counter (dict) that</span>
<span class="sd">    maps the fractional parts of starts ($start - int(start)$, e.g.,</span>
<span class="sd">    1.5 becomes 0.5) to the number of occurrences of that fraction</span>
<span class="sd">    (e.g., starts 1.5 and 2.5 produce the mapping 0.5: 2 in the result).</span>

<span class="sd">    Fractional parts are rounded to `decimal_places` decimal points (default 5),</span>
<span class="sd">    which gives a tolerance down to 0.00001 and accommodates common musical</span>
<span class="sd">    fractions such as thirds (0.33333) and sixths (0.16667).</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; test_list = [0.0, 0.0, 0.5, 1.0, 1.5, 1.75, 2.0, 2.3333333333, 2.666667, 3.00000000000000001]</span>
<span class="sd">    &gt;&gt;&gt; starts_to_int_relative_counter(test_list)</span>
<span class="sd">    Counter({0.0: 5, 0.5: 2, 0.75: 1, 0.33333: 1, 0.66667: 1})</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">starts</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">Number</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;All items in `starts` must be numeric (int or float). Found: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">item</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>

    <span class="k">return</span> <span class="n">Counter</span><span class="p">([</span><span class="nb">round</span><span class="p">(</span><span class="n">x</span> <span class="o">-</span> <span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="n">decimal_places</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">starts</span><span class="p">])</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div><hr />


<div class="doc doc-object doc-function">


<h2 id="amads.time.meter.grid.approximate_pulse_match_with_priority_list" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>            <span class="doc doc-object-name doc-function-name">approximate_pulse_match_with_priority_list</span>


<a href="#amads.time.meter.grid.approximate_pulse_match_with_priority_list" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">approximate_pulse_match_with_priority_list</span><span class="p">(</span>
    <span class="n"><a class="autorefs autorefs-internal" title="x (amads.time.meter.grid.approximate_pulse_match_with_priority_list(x))" href="#amads.time.meter.grid.approximate_pulse_match_with_priority_list(x)">x</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a></span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="distance_threshold (amads.time.meter.grid.approximate_pulse_match_with_priority_list(distance_threshold))" href="#amads.time.meter.grid.approximate_pulse_match_with_priority_list(distance_threshold)">distance_threshold</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a></span> <span class="o">=</span> <span class="mf">0.001</span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="pulse_priority_list (amads.time.meter.grid.approximate_pulse_match_with_priority_list(pulse_priority_list))" href="#amads.time.meter.grid.approximate_pulse_match_with_priority_list(pulse_priority_list)">pulse_priority_list</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-external" title="fractions.Fraction" href="https://docs.python.org/3/library/fractions.html#fractions.Fraction">Fraction</a></span> <span class="o">|</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents first">

        <p>Takes a float and an ordered list of possible pulses,
returning the first pulse in the list to approximate the input float.</p>
<p>This is a new function by MG as reported in [1].</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
<h3 id="amads.time.meter.grid.approximate_pulse_match_with_priority_list(x)" class="doc doc-heading doc-heading-parameter">              <b><code>x</code></b>
<a href="#amads.time.meter.grid.approximate_pulse_match_with_priority_list(x)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a></code>)
          –
          <div class="doc-md-description">
            <p>Input value to be approximated as a fraction.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h3 id="amads.time.meter.grid.approximate_pulse_match_with_priority_list(distance_threshold)" class="doc doc-heading doc-heading-parameter">              <b><code>distance_threshold</code></b>
<a href="#amads.time.meter.grid.approximate_pulse_match_with_priority_list(distance_threshold)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a></code>, default:
                  <code>0.001</code>
)
          –
          <div class="doc-md-description">
            <p>The distance threshold.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h3 id="amads.time.meter.grid.approximate_pulse_match_with_priority_list(pulse_priority_list)" class="doc doc-heading doc-heading-parameter">              <b><code>pulse_priority_list</code></b>
<a href="#amads.time.meter.grid.approximate_pulse_match_with_priority_list(pulse_priority_list)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a>[<a class="autorefs autorefs-external" title="fractions.Fraction" href="https://docs.python.org/3/library/fractions.html#fractions.Fraction">Fraction</a>]</code>, default:
                  <code>None</code>
)
          –
          <div class="doc-md-description">
            <p>Ordered list of pulse values to try.
If unspecified, this defaults to 4, 3, 2, 1.5, 1, and the
default output of <code>generate_n_smooth_numbers</code>.</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><span title="Union">Union</span>(None, <a class="autorefs autorefs-external" title="fractions.Fraction" href="https://docs.python.org/3/library/fractions.html#fractions.Fraction">Fraction</a>)</code>
          –
          <div class="doc-md-description">
            <p>None for no match, or a Fraction(numerator, denominator).</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Raises:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/exceptions.html#ValueError">ValueError</a></code>
            –
          <div class="doc-md-description">
            <p>If <code>pulse_priority_list</code> contains 0 or None.</p>
          </div>
        </li>
    </ul>


<details class="references" open>
  <summary>References</summary>
  <p>[1] Gotham, Mark R. H. (2025). Keeping Score: Computational Methods for the
Analysis of Encoded ("Symbolic") Musical Scores (v0.3+) Zenodo.
https://doi.org/10.5281/zenodo.14938027</p>
</details>

<p><span class="doc-section-title">Examples:</span></p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">approximate_pulse_match_with_priority_list</span><span class="p">(</span><span class="mi">5</span><span class="o">/</span><span class="mi">6</span><span class="p">)</span>
<span class="go">Fraction(1, 6)</span>
</code></pre></div>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">test_case</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="mi">11</span><span class="o">/</span><span class="mi">12</span><span class="p">),</span> <span class="mi">5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test_case</span>
<span class="go">0.91667</span>
</code></pre></div>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">approximate_pulse_match_with_priority_list</span><span class="p">(</span><span class="n">test_case</span><span class="p">)</span>
<span class="go">Fraction(1, 12)</span>
</code></pre></div>
    <p>Note that <code>Fraction(1, 12)</code> is included in the default list,
while <code>Fraction(11, 12)</code> is not as that would be an extremely unusual tatum value.</p>
<p>If the <code>distance_threshold</code> is very coarse, expect errors:</p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">approximate_pulse_match_with_priority_list</span><span class="p">(</span><span class="mi">29</span> <span class="o">+</span> <span class="mi">1</span><span class="o">/</span><span class="mi">12</span><span class="p">,</span> <span class="n">distance_threshold</span><span class="o">=</span><span class="mf">0.1</span><span class="p">)</span>
<span class="go">Fraction(1, 1)</span>
</code></pre></div>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">approximate_pulse_match_with_priority_list</span><span class="p">(</span><span class="mi">29</span> <span class="o">+</span> <span class="mi">1</span><span class="o">/</span><span class="mi">12</span><span class="p">,</span> <span class="n">distance_threshold</span><span class="o">=</span><span class="mf">0.01</span><span class="p">)</span>
<span class="go">Fraction(1, 12)</span>
</code></pre></div>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>amads/time/meter/grid.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">approximate_pulse_match_with_priority_list</span><span class="p">(</span>
    <span class="n">x</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
    <span class="n">distance_threshold</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.001</span><span class="p">,</span>
    <span class="n">pulse_priority_list</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">list</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Fraction</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Takes a float and an ordered list of possible pulses,</span>
<span class="sd">    returning the first pulse in the list to approximate the input float.</span>

<span class="sd">    This is a new function by MG as reported in [1].</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    x : float</span>
<span class="sd">        Input value to be approximated as a fraction.</span>
<span class="sd">    distance_threshold : float</span>
<span class="sd">        The distance threshold.</span>
<span class="sd">    pulse_priority_list : list[Fraction]</span>
<span class="sd">        Ordered list of pulse values to try.</span>
<span class="sd">        If unspecified, this defaults to 4, 3, 2, 1.5, 1, and the</span>
<span class="sd">        default output of `generate_n_smooth_numbers`.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    Union(None, Fraction)</span>
<span class="sd">        None for no match, or a Fraction(numerator, denominator).</span>

<span class="sd">    Raises</span>
<span class="sd">    ------</span>
<span class="sd">    ValueError</span>
<span class="sd">        If `pulse_priority_list` contains 0 or None.</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    [1] Gotham, Mark R. H. (2025). Keeping Score: Computational Methods for the</span>
<span class="sd">    Analysis of Encoded (&quot;Symbolic&quot;) Musical Scores (v0.3+) Zenodo.</span>
<span class="sd">    https://doi.org/10.5281/zenodo.14938027</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; approximate_pulse_match_with_priority_list(5/6)</span>
<span class="sd">    Fraction(1, 6)</span>

<span class="sd">    &gt;&gt;&gt; test_case = round(float(11/12), 5)</span>
<span class="sd">    &gt;&gt;&gt; test_case</span>
<span class="sd">    0.91667</span>

<span class="sd">    &gt;&gt;&gt; approximate_pulse_match_with_priority_list(test_case)</span>
<span class="sd">    Fraction(1, 12)</span>

<span class="sd">    Note that `Fraction(1, 12)` is included in the default list,</span>
<span class="sd">    while `Fraction(11, 12)` is not as that would be an extremely unusual tatum value.</span>

<span class="sd">    If the `distance_threshold` is very coarse, expect errors:</span>
<span class="sd">    &gt;&gt;&gt; approximate_pulse_match_with_priority_list(29 + 1/12, distance_threshold=0.1)</span>
<span class="sd">    Fraction(1, 1)</span>

<span class="sd">    &gt;&gt;&gt; approximate_pulse_match_with_priority_list(29 + 1/12, distance_threshold=0.01)</span>
<span class="sd">    Fraction(1, 12)</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">pulse_priority_list</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">pulse_priority_list</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">Fraction</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>  <span class="c1"># 4</span>
            <span class="n">Fraction</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>  <span class="c1"># 3</span>
            <span class="n">Fraction</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>  <span class="c1"># 2</span>
            <span class="n">Fraction</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>  <span class="c1"># 1.5</span>
        <span class="p">]</span>
        <span class="n">pulse_priority_list</span> <span class="o">+=</span> <span class="n">generate_n_smooth_numbers</span><span class="p">(</span>
            <span class="n">invert</span><span class="o">=</span><span class="kc">True</span>
        <span class="p">)</span>  <span class="c1"># 1, 1/2, 1/3, ...</span>

    <span class="k">if</span> <span class="mi">0</span> <span class="ow">in</span> <span class="n">pulse_priority_list</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;`pulse_priority_list` must not contain 0.&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="kc">None</span> <span class="ow">in</span> <span class="n">pulse_priority_list</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;`pulse_priority_list` must not contain None.&quot;</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">pulse_priority_list</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="p">(</span><span class="n">Fraction</span><span class="p">,</span> <span class="nb">int</span><span class="p">)):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;All entries in `pulse_priority_list` must be Fraction or int. Found: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">p</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
        <span class="n">test_case</span> <span class="o">=</span> <span class="n">x</span> <span class="o">/</span> <span class="n">p</span>
        <span class="n">diff</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">test_case</span><span class="p">)</span> <span class="o">-</span> <span class="n">test_case</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">diff</span> <span class="o">&lt;</span> <span class="n">distance_threshold</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">p</span>

    <span class="k">return</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div><hr />


<div class="doc doc-object doc-function">


<h2 id="amads.time.meter.grid.generate_n_smooth_numbers" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>            <span class="doc doc-object-name doc-function-name">generate_n_smooth_numbers</span>


<a href="#amads.time.meter.grid.generate_n_smooth_numbers" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">generate_n_smooth_numbers</span><span class="p">(</span>
    <span class="n"><a class="autorefs autorefs-internal" title="bases (amads.time.meter.grid.generate_n_smooth_numbers(bases))" href="#amads.time.meter.grid.generate_n_smooth_numbers(bases)">bases</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="n"><a class="autorefs autorefs-internal" title="max_value (amads.time.meter.grid.generate_n_smooth_numbers(max_value))" href="#amads.time.meter.grid.generate_n_smooth_numbers(max_value)">max_value</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-internal" title="invert (amads.time.meter.grid.generate_n_smooth_numbers(invert))" href="#amads.time.meter.grid.generate_n_smooth_numbers(invert)">invert</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">True</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a></span>
</code></pre></div>

    <div class="doc doc-contents first">

        <p>Generates a sorted list of "N-smooth" numbers up to a specified maximum value.</p>
<p>An N-smooth number is a positive integer whose prime factors are all
less than or equal to the largest number in the <code>bases</code> list.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
<h3 id="amads.time.meter.grid.generate_n_smooth_numbers(max_value)" class="doc doc-heading doc-heading-parameter">              <b><code>max_value</code></b>
<a href="#amads.time.meter.grid.generate_n_smooth_numbers(max_value)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>, default:
                  <code>100</code>
)
          –
          <div class="doc-md-description">
            <p>The maximum value to generate numbers up to. Defaults to 100.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h3 id="amads.time.meter.grid.generate_n_smooth_numbers(bases)" class="doc doc-heading doc-heading-parameter">              <b><code>bases</code></b>
<a href="#amads.time.meter.grid.generate_n_smooth_numbers(bases)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a></code>, default:
                  <code>[2, 3]</code>
)
          –
          <div class="doc-md-description">
            <p>A list of base values (integers &gt; 1) representing the maximum allowed
prime factor. Defaults to [2, 3].</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h3 id="amads.time.meter.grid.generate_n_smooth_numbers(invert)" class="doc doc-heading doc-heading-parameter">              <b><code>invert</code></b>
<a href="#amads.time.meter.grid.generate_n_smooth_numbers(invert)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>, default:
                  <code>True</code>
)
          –
          <div class="doc-md-description">
            <p>If True, return Fraction(1, x) for each smooth number x instead of x itself.
Defaults to True.</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a></code>
          –
          <div class="doc-md-description">
            <p>A sorted list of N-smooth numbers (or their reciprocals if <code>invert=True</code>).</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Raises:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/exceptions.html#ValueError">ValueError</a></code>
            –
          <div class="doc-md-description">
            <p>If <code>bases</code> contains non-integers or values &lt;= 1, or if <code>max_value</code> is
not a positive integer.</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Examples:</span></p>
    <p>Our metrical default:</p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">generate_n_smooth_numbers</span><span class="p">(</span><span class="n">invert</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>  <span class="c1"># all defaults `max_value=100`, `bases [2, 3]`</span>
<span class="go">[1, 2, 3, 4, 6, 8, 9, 12, 16, 18, 24, 27, 32, 36, 48, 54, 64, 72, 81, 96]</span>
</code></pre></div>
    <p>Other cases:</p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">generate_n_smooth_numbers</span><span class="p">(</span><span class="n">max_value</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">bases</span><span class="o">=</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">invert</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="go">[1, 2, 4, 8]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">generate_n_smooth_numbers</span><span class="p">(</span><span class="n">max_value</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">bases</span><span class="o">=</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="n">invert</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="go">[1, 2, 3, 4, 6, 8, 9, 12, 16, 18]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">generate_n_smooth_numbers</span><span class="p">(</span><span class="n">max_value</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">bases</span><span class="o">=</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span> <span class="n">invert</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="go">[1, 2, 3, 4, 5, 6, 8, 9, 10, 12, 15, 16, 18, 20, 24, 25, 27, 30, 32, 36, 40, 45, 48, 50]</span>
</code></pre></div>
    <p>By default, invert is True:</p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">generate_n_smooth_numbers</span><span class="p">()[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="go">Fraction(1, 96)</span>
</code></pre></div>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>amads/time/meter/grid.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">generate_n_smooth_numbers</span><span class="p">(</span>
    <span class="n">bases</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="n">max_value</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span> <span class="n">invert</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Generates a sorted list of &quot;N-smooth&quot; numbers up to a specified maximum value.</span>

<span class="sd">    An N-smooth number is a positive integer whose prime factors are all</span>
<span class="sd">    less than or equal to the largest number in the `bases` list.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    max_value : int, optional</span>
<span class="sd">        The maximum value to generate numbers up to. Defaults to 100.</span>
<span class="sd">    bases : list, optional</span>
<span class="sd">        A list of base values (integers &gt; 1) representing the maximum allowed</span>
<span class="sd">        prime factor. Defaults to [2, 3].</span>
<span class="sd">    invert : bool</span>
<span class="sd">        If True, return Fraction(1, x) for each smooth number x instead of x itself.</span>
<span class="sd">        Defaults to True.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    list</span>
<span class="sd">        A sorted list of N-smooth numbers (or their reciprocals if `invert=True`).</span>

<span class="sd">    Raises</span>
<span class="sd">    ------</span>
<span class="sd">    ValueError</span>
<span class="sd">        If `bases` contains non-integers or values &lt;= 1, or if `max_value` is</span>
<span class="sd">        not a positive integer.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    Our metrical default:</span>
<span class="sd">    &gt;&gt;&gt; generate_n_smooth_numbers(invert=False)  # all defaults `max_value=100`, `bases [2, 3]`</span>
<span class="sd">    [1, 2, 3, 4, 6, 8, 9, 12, 16, 18, 24, 27, 32, 36, 48, 54, 64, 72, 81, 96]</span>

<span class="sd">    Other cases:</span>
<span class="sd">    &gt;&gt;&gt; generate_n_smooth_numbers(max_value=10, bases=[2], invert=False)</span>
<span class="sd">    [1, 2, 4, 8]</span>
<span class="sd">    &gt;&gt;&gt; generate_n_smooth_numbers(max_value=20, bases=[2, 3], invert=False)</span>
<span class="sd">    [1, 2, 3, 4, 6, 8, 9, 12, 16, 18]</span>
<span class="sd">    &gt;&gt;&gt; generate_n_smooth_numbers(max_value=50, bases=[2, 3, 5], invert=False)</span>
<span class="sd">    [1, 2, 3, 4, 5, 6, 8, 9, 10, 12, 15, 16, 18, 20, 24, 25, 27, 30, 32, 36, 40, 45, 48, 50]</span>

<span class="sd">    By default, invert is True:</span>
<span class="sd">    &gt;&gt;&gt; generate_n_smooth_numbers()[-1]</span>
<span class="sd">    Fraction(1, 96)</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">all</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span> <span class="ow">and</span> <span class="n">b</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">bases</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Bases must be a list of integers greater than 1.&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">max_value</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span> <span class="ow">or</span> <span class="n">max_value</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;max_value must be a positive integer.&quot;</span><span class="p">)</span>

    <span class="n">seen</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">}</span>
    <span class="n">queue</span> <span class="o">=</span> <span class="n">deque</span><span class="p">([</span><span class="mi">1</span><span class="p">])</span>

    <span class="k">while</span> <span class="n">queue</span><span class="p">:</span>
        <span class="n">current</span> <span class="o">=</span> <span class="n">queue</span><span class="o">.</span><span class="n">popleft</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">base</span> <span class="ow">in</span> <span class="n">bases</span><span class="p">:</span>
            <span class="n">next_num</span> <span class="o">=</span> <span class="n">current</span> <span class="o">*</span> <span class="n">base</span>
            <span class="k">if</span> <span class="n">next_num</span> <span class="o">&lt;=</span> <span class="n">max_value</span> <span class="ow">and</span> <span class="n">next_num</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">seen</span><span class="p">:</span>
                <span class="n">seen</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">next_num</span><span class="p">)</span>
                <span class="n">queue</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">next_num</span><span class="p">)</span>

    <span class="n">smooth_numbers</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">seen</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">invert</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">Fraction</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">smooth_numbers</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">smooth_numbers</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div><hr />


<div class="doc doc-object doc-function">


<h2 id="amads.time.meter.grid.get_tatum_from_priorities" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>            <span class="doc doc-object-name doc-function-name">get_tatum_from_priorities</span>


<a href="#amads.time.meter.grid.get_tatum_from_priorities" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">get_tatum_from_priorities</span><span class="p">(</span>
    <span class="n"><a class="autorefs autorefs-internal" title="starts (amads.time.meter.grid.get_tatum_from_priorities(starts))" href="#amads.time.meter.grid.get_tatum_from_priorities(starts)">starts</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" title="typing.Iterable" href="https://docs.python.org/3/library/typing.html#typing.Iterable">Iterable</a></span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="pulse_priority_list (amads.time.meter.grid.get_tatum_from_priorities(pulse_priority_list))" href="#amads.time.meter.grid.get_tatum_from_priorities(pulse_priority_list)">pulse_priority_list</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="distance_threshold (amads.time.meter.grid.get_tatum_from_priorities(distance_threshold))" href="#amads.time.meter.grid.get_tatum_from_priorities(distance_threshold)">distance_threshold</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a></span> <span class="o">=</span> <span class="mi">1</span> <span class="o">/</span> <span class="mi">24</span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="proportion_threshold (amads.time.meter.grid.get_tatum_from_priorities(proportion_threshold))" href="#amads.time.meter.grid.get_tatum_from_priorities(proportion_threshold)">proportion_threshold</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="mf">0.999</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-external" title="fractions.Fraction" href="https://docs.python.org/3/library/fractions.html#fractions.Fraction">Fraction</a></span>
</code></pre></div>

    <div class="doc doc-contents first">

        <p>Estimate metrical positions from floats.</p>
<p>This function serves cases where temporal position values are defined
relative to some origin, such as the time elapsed since:</p>
<ul>
<li>the start of a piece (or section) in quarter notes (or some other
    consistent symbolic value)</li>
<li>the start of a measure (or other container), assuming those measures
    are of a constant duration.</li>
</ul>
<p>Use cases include the attempted retrieval of true metrical
positions (fractions) from rounded versions thereof (floats).
See also notes at the top of this module
for why standard algorithms fail at this task in a musical setting.</p>
<p>This function serves those common cases where there is a need to balance
between capturing event positions as accurately as possible while not
making excessive complexity to account for a few anomalous notes.
Most importantly, it enables the explicit prioritisation of common pulse
divisions. Defaults prioritse 16x divsion over 15x, for example.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
<h3 id="amads.time.meter.grid.get_tatum_from_priorities(starts)" class="doc doc-heading doc-heading-parameter">              <b><code>starts</code></b>
<a href="#amads.time.meter.grid.get_tatum_from_priorities(starts)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" title="typing.Iterable" href="https://docs.python.org/3/library/typing.html#typing.Iterable">Iterable</a></code>)
          –
          <div class="doc-md-description">
            <p>Any iterable giving the starting position of events.
Each constituent start must be expressed relative to a reference value such that
X.0 is the start of a unit,
X.5 is the mid-point, etc.
Floats are the main expected type here (as above); we seek to reverse engineer a plausible fraction from each.
If any start is already an exact Fraction or int, then it stays as it is, whatever the user setting:
this functionality serves to improve the accuracy of timing data; there's no question of ever reducing it,
even if user settings suggest that.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h3 id="amads.time.meter.grid.get_tatum_from_priorities(pulse_priority_list)" class="doc doc-heading doc-heading-parameter">              <b><code>pulse_priority_list</code></b>
<a href="#amads.time.meter.grid.get_tatum_from_priorities(pulse_priority_list)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a> | None</code>, default:
                  <code>None</code>
)
          –
          <div class="doc-md-description">
            <p>The point of this function is to encode musically common pulse values.
This argument defaults to numbers under 100 with prime
factors of only 2 and 3 (“3-smooth”), in increasing order.
The user can define any alternative list, optionally making use of
<code>generate_n_smooth_numbers</code> for the purpose.
See notes at <code>approximate_fraction_with_priorities</code>.
Make sure this list is exhaustive: the function will raise an error if no match is found.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h3 id="amads.time.meter.grid.get_tatum_from_priorities(distance_threshold)" class="doc doc-heading doc-heading-parameter">              <b><code>distance_threshold</code></b>
<a href="#amads.time.meter.grid.get_tatum_from_priorities(distance_threshold)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a></code>, default:
                  <code>1 / 24</code>
)
          –
          <div class="doc-md-description">
            <p>The rounding tolerance between a temporal position multiplied by
the bin value and the nearest integer.
This is essential when working with floats.
Defaults to 1/24, but can be set to any value.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h3 id="amads.time.meter.grid.get_tatum_from_priorities(proportion_threshold)" class="doc doc-heading doc-heading-parameter">              <b><code>proportion_threshold</code></b>
<a href="#amads.time.meter.grid.get_tatum_from_priorities(proportion_threshold)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a> | None</code>, default:
                  <code>0.999</code>
)
          –
          <div class="doc-md-description">
            <p>Optionally, set a proportional number of events notes to account for.
This option requires that the <code>starts</code> be expressed as a Counter,
ordered from most to least common.  The default of .999 means that
once at least 99.9% of the source's notes are handled, we ignore the rest.
This is achieved by iterating through the Counter object of values relative
to the unit (e.g., 1.5 -&gt; 0.5).
This option should be chosen with care as, in this case,
only the unit value and equal divisions thereof are considered.</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Examples:</span></p>
    <p>A simple case, expressed in different ways.</p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">tatum_1_6</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span> <span class="n">Fraction</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="mi">1</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">get_tatum_from_priorities</span><span class="p">(</span><span class="n">tatum_1_6</span><span class="p">)</span>
<span class="go">Fraction(1, 6)</span>
</code></pre></div>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">tatum_1_6</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.333</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">get_tatum_from_priorities</span><span class="p">(</span><span class="n">tatum_1_6</span><span class="p">)</span>
<span class="go">Fraction(1, 6)</span>
</code></pre></div>
    <p>An example of values from the BPSD dataset (Zeitler et al.).</p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">amads.time.meter</span><span class="w"> </span><span class="kn">import</span> <span class="n">profiles</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bpsd_Op027No1</span> <span class="o">=</span> <span class="n">profiles</span><span class="o">.</span><span class="n">BPSD</span><span class="p">()</span><span class="o">.</span><span class="n">op027No1_01</span> <span class="c1"># /16 divisions of the measure and /12 too (from m.48). Tatum 1/48</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">get_tatum_from_priorities</span><span class="p">(</span><span class="n">bpsd_Op027No1</span><span class="p">,</span> <span class="n">distance_threshold</span><span class="o">=</span><span class="mi">1</span><span class="o">/</span><span class="mi">24</span><span class="p">)</span> <span class="c1"># proportion_threshold=0.999</span>
<span class="go">Fraction(1, 48)</span>
</code></pre></div>
    <p>Change the <code>distance_threshold</code></p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">get_tatum_from_priorities</span><span class="p">(</span><span class="n">bpsd_Op027No1</span><span class="p">,</span> <span class="n">distance_threshold</span><span class="o">=</span><span class="mi">1</span><span class="o">/</span><span class="mi">6</span><span class="p">)</span> <span class="c1"># proportion_threshold=0.999</span>
<span class="go">Fraction(1, 12)</span>
</code></pre></div>
    <p>Change the <code>proportion_threshold</code>:</p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">get_tatum_from_priorities</span><span class="p">(</span><span class="n">bpsd_Op027No1</span><span class="p">,</span> <span class="n">distance_threshold</span><span class="o">=</span><span class="mi">1</span><span class="o">/</span><span class="mi">24</span><span class="p">,</span> <span class="n">proportion_threshold</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
<span class="go">Fraction(1, 24)</span>
</code></pre></div>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">get_tatum_from_priorities</span><span class="p">(</span><span class="n">bpsd_Op027No1</span><span class="p">,</span> <span class="n">distance_threshold</span><span class="o">=</span><span class="mi">1</span><span class="o">/</span><span class="mi">24</span><span class="p">,</span> <span class="n">proportion_threshold</span><span class="o">=</span><span class="mf">0.9</span><span class="p">)</span>
<span class="go">Fraction(1, 48)</span>
</code></pre></div>
    <p>This also works without any floats (and therefore, no priorities needed)</p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">get_tatum_from_priorities</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
<span class="go">Fraction(1, 1)</span>
</code></pre></div>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">get_tatum_from_priorities</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
<span class="go">Fraction(3, 1)</span>
</code></pre></div>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">get_tatum_from_priorities</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="n">Fraction</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="n">Fraction</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">)])</span>
<span class="go">Fraction(1, 3)</span>
</code></pre></div>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>amads/time/meter/grid.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_tatum_from_priorities</span><span class="p">(</span>
    <span class="n">starts</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">,</span>
    <span class="n">pulse_priority_list</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">list</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">distance_threshold</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">/</span> <span class="mi">24</span><span class="p">,</span>
    <span class="n">proportion_threshold</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.999</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Fraction</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Estimate metrical positions from floats.</span>

<span class="sd">    This function serves cases where temporal position values are defined</span>
<span class="sd">    relative to some origin, such as the time elapsed since:</span>

<span class="sd">    - the start of a piece (or section) in quarter notes (or some other</span>
<span class="sd">        consistent symbolic value)</span>
<span class="sd">    - the start of a measure (or other container), assuming those measures</span>
<span class="sd">        are of a constant duration.</span>

<span class="sd">    Use cases include the attempted retrieval of true metrical</span>
<span class="sd">    positions (fractions) from rounded versions thereof (floats).</span>
<span class="sd">    See also notes at the top of this module</span>
<span class="sd">    for why standard algorithms fail at this task in a musical setting.</span>

<span class="sd">    This function serves those common cases where there is a need to balance</span>
<span class="sd">    between capturing event positions as accurately as possible while not</span>
<span class="sd">    making excessive complexity to account for a few anomalous notes.</span>
<span class="sd">    Most importantly, it enables the explicit prioritisation of common pulse</span>
<span class="sd">    divisions. Defaults prioritse 16x divsion over 15x, for example.</span>


<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    starts</span>
<span class="sd">        Any iterable giving the starting position of events.</span>
<span class="sd">        Each constituent start must be expressed relative to a reference value such that</span>
<span class="sd">        X.0 is the start of a unit,</span>
<span class="sd">        X.5 is the mid-point, etc.</span>
<span class="sd">        Floats are the main expected type here (as above); we seek to reverse engineer a plausible fraction from each.</span>
<span class="sd">        If any start is already an exact Fraction or int, then it stays as it is, whatever the user setting:</span>
<span class="sd">        this functionality serves to improve the accuracy of timing data; there&#39;s no question of ever reducing it,</span>
<span class="sd">        even if user settings suggest that.</span>
<span class="sd">    pulse_priority_list</span>
<span class="sd">        The point of this function is to encode musically common pulse values.</span>
<span class="sd">        This argument defaults to numbers under 100 with prime</span>
<span class="sd">        factors of only 2 and 3 (“3-smooth”), in increasing order.</span>
<span class="sd">        The user can define any alternative list, optionally making use of</span>
<span class="sd">        `generate_n_smooth_numbers` for the purpose.</span>
<span class="sd">        See notes at `approximate_fraction_with_priorities`.</span>
<span class="sd">        Make sure this list is exhaustive: the function will raise an error if no match is found.</span>
<span class="sd">    distance_threshold</span>
<span class="sd">        The rounding tolerance between a temporal position multiplied by</span>
<span class="sd">        the bin value and the nearest integer.</span>
<span class="sd">        This is essential when working with floats.</span>
<span class="sd">        Defaults to 1/24, but can be set to any value.</span>
<span class="sd">    proportion_threshold</span>
<span class="sd">        Optionally, set a proportional number of events notes to account for.</span>
<span class="sd">        This option requires that the `starts` be expressed as a Counter,</span>
<span class="sd">        ordered from most to least common.  The default of .999 means that</span>
<span class="sd">        once at least 99.9% of the source&#39;s notes are handled, we ignore the rest.</span>
<span class="sd">        This is achieved by iterating through the Counter object of values relative</span>
<span class="sd">        to the unit (e.g., 1.5 -&gt; 0.5).</span>
<span class="sd">        This option should be chosen with care as, in this case,</span>
<span class="sd">        only the unit value and equal divisions thereof are considered.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>

<span class="sd">    A simple case, expressed in different ways.</span>

<span class="sd">    &gt;&gt;&gt; tatum_1_6 = [0, 1/3, Fraction(1, 2), 1]</span>
<span class="sd">    &gt;&gt;&gt; get_tatum_from_priorities(tatum_1_6)</span>
<span class="sd">    Fraction(1, 6)</span>

<span class="sd">    &gt;&gt;&gt; tatum_1_6 = [0, 0.333, 0.5, 1]</span>
<span class="sd">    &gt;&gt;&gt; get_tatum_from_priorities(tatum_1_6)</span>
<span class="sd">    Fraction(1, 6)</span>

<span class="sd">    An example of values from the BPSD dataset (Zeitler et al.).</span>

<span class="sd">    &gt;&gt;&gt; from amads.time.meter import profiles</span>
<span class="sd">    &gt;&gt;&gt; bpsd_Op027No1 = profiles.BPSD().op027No1_01 # /16 divisions of the measure and /12 too (from m.48). Tatum 1/48</span>
<span class="sd">    &gt;&gt;&gt; get_tatum_from_priorities(bpsd_Op027No1, distance_threshold=1/24) # proportion_threshold=0.999</span>
<span class="sd">    Fraction(1, 48)</span>

<span class="sd">    Change the `distance_threshold`</span>
<span class="sd">    &gt;&gt;&gt; get_tatum_from_priorities(bpsd_Op027No1, distance_threshold=1/6) # proportion_threshold=0.999</span>
<span class="sd">    Fraction(1, 12)</span>

<span class="sd">    Change the `proportion_threshold`:</span>
<span class="sd">    &gt;&gt;&gt; get_tatum_from_priorities(bpsd_Op027No1, distance_threshold=1/24, proportion_threshold=0.5)</span>
<span class="sd">    Fraction(1, 24)</span>

<span class="sd">    &gt;&gt;&gt; get_tatum_from_priorities(bpsd_Op027No1, distance_threshold=1/24, proportion_threshold=0.9)</span>
<span class="sd">    Fraction(1, 48)</span>

<span class="sd">    This also works without any floats (and therefore, no priorities needed)</span>

<span class="sd">    &gt;&gt;&gt; get_tatum_from_priorities([1, 3])</span>
<span class="sd">    Fraction(1, 1)</span>

<span class="sd">    &gt;&gt;&gt; get_tatum_from_priorities([0, 3])</span>
<span class="sd">    Fraction(3, 1)</span>

<span class="sd">    &gt;&gt;&gt; get_tatum_from_priorities([0, Fraction(1, 3), Fraction(4, 6)])</span>
<span class="sd">    Fraction(1, 3)</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">floats</span> <span class="o">=</span> <span class="p">[</span><span class="n">num</span> <span class="k">for</span> <span class="n">num</span> <span class="ow">in</span> <span class="n">starts</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">num</span><span class="p">,</span> <span class="nb">float</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">num</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)]</span>
    <span class="n">ints_fractions</span> <span class="o">=</span> <span class="p">[</span><span class="n">num</span> <span class="k">for</span> <span class="n">num</span> <span class="ow">in</span> <span class="n">starts</span> <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">num</span><span class="p">,</span> <span class="nb">float</span><span class="p">)]</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">floats</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">fraction_gcd</span><span class="p">(</span><span class="n">ints_fractions</span><span class="p">)</span>  <span class="c1"># No further action</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="mf">0.0</span> <span class="o">&lt;</span> <span class="n">distance_threshold</span> <span class="o">&lt;</span> <span class="mf">1.0</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="s2">&quot;The `distance_threshold` tolerance must be between 0 and 1.&quot;</span>
        <span class="p">)</span>

    <span class="k">if</span> <span class="n">pulse_priority_list</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">pulse_priority_list</span> <span class="o">=</span> <span class="n">generate_n_smooth_numbers</span><span class="p">(</span>
            <span class="n">invert</span><span class="o">=</span><span class="kc">True</span>
        <span class="p">)</span>  <span class="c1"># 1, 1/2, 1/3, ...</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pulse_priority_list</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The `pulse_priority_list` must be a list.&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">pulse_priority_list</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">Fraction</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="s2">&quot;The `pulse_priority_list` must consist entirely of Fraction objects &quot;</span>
                    <span class="s2">&quot;(which can include integers expressed as Fractions such as `Fraction(2, 1)`).&quot;</span>
                <span class="p">)</span>
            <span class="k">if</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="s2">&quot;The `pulse_priority_list` items must be positive.&quot;</span>
                <span class="p">)</span>

    <span class="n">use_proportion</span> <span class="o">=</span> <span class="n">proportion_threshold</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="n">use_proportion</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="mf">0.0</span> <span class="o">&lt;</span> <span class="n">proportion_threshold</span> <span class="o">&lt;</span> <span class="mf">1.0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;When used (not `None`), the `proportion_threshold` must be between 0 and 1.&quot;</span>
            <span class="p">)</span>
        <span class="n">total</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">starts</span><span class="p">)</span>
        <span class="n">cumulative_count</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">ints_fractions</span><span class="p">)</span> <span class="o">/</span> <span class="n">total</span>
        <span class="n">starts</span> <span class="o">=</span> <span class="n">starts_to_int_relative_counter</span><span class="p">(</span><span class="n">floats</span><span class="p">)</span>

    <span class="n">pulses_needed</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">ints_fractions</span> <span class="k">if</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">]</span>
    <span class="c1"># print(pulses_needed, cumulative_count)</span>

    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">floats</span><span class="p">:</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">x</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span>
            <span class="n">approximate_pulse_match_with_priority_list</span><span class="p">(</span>
                <span class="n">x</span><span class="p">,</span>
                <span class="n">pulse_priority_list</span><span class="o">=</span><span class="n">pulses_needed</span><span class="p">,</span>  <span class="c1"># Try those we&#39;re committed to first</span>
                <span class="n">distance_threshold</span><span class="o">=</span><span class="n">distance_threshold</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="ow">is</span> <span class="kc">None</span>
        <span class="p">):</span>  <span class="c1"># No fit among those we have, try other user-permitted alternatives.</span>
            <span class="n">new_pulse</span> <span class="o">=</span> <span class="n">approximate_pulse_match_with_priority_list</span><span class="p">(</span>
                <span class="n">x</span><span class="p">,</span>
                <span class="n">pulse_priority_list</span><span class="o">=</span><span class="n">pulse_priority_list</span><span class="p">,</span>
                <span class="n">distance_threshold</span><span class="o">=</span><span class="n">distance_threshold</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="n">new_pulse</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">pulses_needed</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new_pulse</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>  <span class="c1"># No fit among user-permitted alternatives.</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;No match found for time point </span><span class="si">{</span><span class="n">x</span><span class="si">}</span><span class="s2">, with the given arguments. &quot;</span>
                    <span class="s2">&quot;Try relaxing the `distance_threshold` or expanding the `pulse_priority_list`.&quot;</span>
                <span class="p">)</span>

        <span class="k">if</span> <span class="n">use_proportion</span><span class="p">:</span>
            <span class="n">cumulative_count</span> <span class="o">+=</span> <span class="n">starts</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">/</span> <span class="n">total</span>
            <span class="k">if</span> <span class="n">cumulative_count</span> <span class="o">&gt;</span> <span class="n">proportion_threshold</span><span class="p">:</span>
                <span class="k">break</span>

    <span class="k">return</span> <span class="n">fraction_gcd</span><span class="p">(</span><span class="n">pulses_needed</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div><hr />


<div class="doc doc-object doc-module">



<h2 id="amads.time.meter.profiles" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>            <span class="doc doc-object-name doc-module-name">profiles</span>


<a href="#amads.time.meter.profiles" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents first">

        <p>Profiles of metrical position usage provided or deduced from the literature.</p>
<p>See the code for details. Data includes:</p>
<ul>
<li><strong>WorldSample16</strong><ul>
<li>shiko</li>
<li>son</li>
<li>rumba</li>
<li>soukous</li>
<li>gahu</li>
<li>bossa_nova</li>
</ul>
</li>
<li><strong>WorldSample12</strong><ul>
<li>soli</li>
<li>tambú</li>
<li>bembé</li>
<li>bembé_2</li>
<li>yoruba</li>
<li>tonada</li>
<li>asaadua</li>
<li>sorsonet</li>
<li>bemba</li>
<li>ashanti</li>
</ul>
</li>
<li><strong>BPSD</strong> (Beethoven piano sonata dataset)<ul>
<li>op002No2_01</li>
<li>op054_01</li>
<li>op027No1_01</li>
<li>op049No1_01</li>
<li>op013_01</li>
<li>op101_01</li>
<li>op111_01</li>
<li>op031No2_01</li>
<li>op014No1_01</li>
<li>op010No2_01</li>
<li>op007_01</li>
<li>op078_01</li>
<li>op109_01</li>
<li>op081a_01</li>
<li>op028_01</li>
<li>op002No3_01</li>
<li>op010No1_01</li>
<li>op090_01</li>
<li>op031No1_01</li>
<li>op014No2_01</li>
<li>op010No3_01</li>
<li>op031No3_01</li>
<li>op110_01</li>
<li>op026_01</li>
<li>op049No2_01</li>
<li>op002No1_01</li>
<li>op027No2_01</li>
<li>op057_01</li>
<li>op053_01</li>
<li>op022_01</li>
<li>op106_01</li>
<li>op079_01</li>
<li>all</li>
</ul>
</li>
</ul>
<p><small><strong>Author</strong>: Mark Gotham</small></p>















<div class="doc doc-children">












  </div>

    </div>

</div><hr />


<div class="doc doc-object doc-module">



<h2 id="amads.time.meter.representations" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>            <span class="doc doc-object-name doc-module-name">representations</span>


<a href="#amads.time.meter.representations" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents first">

        <p>This module serves to map out metrical hierarchies in a number of different ways and
to express the relationship between
the notes in
and
the hierarchy of
a metrical cycle.</p>
<p>Uses include identifying notes that traverse metrical levels,
for analysis (e.g., as a cycle of syncopation)
and notation (e.g., re-notating to reflect the
within-cycle notational conventions).</p>
<p><small><strong>Author</strong>: Mark Gotham</small></p>















<div class="doc doc-children">












  </div>

    </div>

</div><hr />


<div class="doc doc-object doc-class">



<h2 id="amads.time.meter.representations.StartTimeHierarchy" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">StartTimeHierarchy</span>


<a href="#amads.time.meter.representations.StartTimeHierarchy" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">StartTimeHierarchy</span><span class="p">(</span>
    <span class="n"><a class="autorefs autorefs-internal" title="start_hierarchy (amads.time.meter.representations.StartTimeHierarchy(start_hierarchy))" href="#amads.time.meter.representations.StartTimeHierarchy(start_hierarchy)">start_hierarchy</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a></span><span class="p">],</span> <span class="n"><a class="autorefs autorefs-internal" title="names (amads.time.meter.representations.StartTimeHierarchy(names))" href="#amads.time.meter.representations.StartTimeHierarchy(names)">names</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents first">



        <p>Encoding metrical structure as a hierarchy of start times.</p>
<p>A representation of metrical levels in terms of starts expressed by quarter length
from the start of the cycle.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
<h3 id="amads.time.meter.representations.StartTimeHierarchy(start_hierarchy)" class="doc doc-heading doc-heading-parameter">              <b><code>start_hierarchy</code></b>
<a href="#amads.time.meter.representations.StartTimeHierarchy(start_hierarchy)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a>]</code>)
          –
          <div class="doc-md-description">
            <p>Users can specify the <code>start_hierarchy</code> directly and completely from scratch.
Use this for advanced, non-standard metrical structures
including those without 2-/3- grouping, or even nested hierarchies,
as well as for (optionally) encoding micro-timing directly into the
metrical structure.
The only “well-formed” criteria we expect are
use of 0.0 and full cycle length at the top level, and
presence of all timepoints from one level in each subsequent level.
For creating this information from pulse lengths, time signatures,
and more see the <code>to_start_hierarchy</code> methods on those classes.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h3 id="amads.time.meter.representations.StartTimeHierarchy(names)" class="doc doc-heading doc-heading-parameter">              <b><code>names</code></b>
<a href="#amads.time.meter.representations.StartTimeHierarchy(names)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#dict">dict</a> | None</code>, default:
                  <code>None</code>
)
          –
          <div class="doc-md-description">
            <p>Optionally create a dict mapping temporal positions to names.
Currently, this supports one textual value per temporal position (key),
e.g., {0.0: "ta", 1.0: "ka", 2.0: "di", 3.0: "mi"}.</p>
          </div>
        </li>
    </ul>












<p><span class="doc-section-title">Methods:</span></p>
    <ul>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="            coincident_pulse_list (amads.time.meter.representations.StartTimeHierarchy.coincident_pulse_list)" href="#amads.time.meter.representations.StartTimeHierarchy.coincident_pulse_list">coincident_pulse_list</a></code></b>
            –
            <div class="doc-md-description">
              <p>Create a flat list setting out the</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="            to_pulse_lengths (amads.time.meter.representations.StartTimeHierarchy.to_pulse_lengths)" href="#amads.time.meter.representations.StartTimeHierarchy.to_pulse_lengths">to_pulse_lengths</a></code></b>
            –
            <div class="doc-md-description">
              <p>Check if levels have a regular pulse and if so, return the pulse length value.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="            add_faster_levels (amads.time.meter.representations.StartTimeHierarchy.add_faster_levels)" href="#amads.time.meter.representations.StartTimeHierarchy.add_faster_levels">add_faster_levels</a></code></b>
            –
            <div class="doc-md-description">
              <p>Recursively add faster levels until the <code>minimum_beat_type</code> value</p>
            </div>
          </li>
    </ul>



                  <details class="mkdocstrings-source">
                    <summary>Source code in <code>amads/time/meter/representations.py</code></summary>
                    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">start_hierarchy</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">list</span><span class="p">],</span>
    <span class="n">names</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">start_hierarchy</span> <span class="o">=</span> <span class="n">start_hierarchy</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">cycle_length</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">start_hierarchy</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">pulse_lengths</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">if</span> <span class="n">names</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">names</span><span class="p">:</span>
            <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="nb">float</span><span class="p">)</span>
            <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">names</span><span class="p">[</span><span class="n">key</span><span class="p">],</span> <span class="nb">str</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">names</span> <span class="o">=</span> <span class="n">names</span>
</code></pre></div></td></tr></table></div>
                  </details>



<div class="doc doc-children">








<h3 id="amads.time.meter.representations.StartTimeHierarchy-functions">Functions<a href="#amads.time.meter.representations.StartTimeHierarchy-functions" class="headerlink" title="Permanent link">&para;</a></h3>

<div class="doc doc-object doc-function">


<h4 id="amads.time.meter.representations.StartTimeHierarchy.coincident_pulse_list" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">coincident_pulse_list</span>


<a href="#amads.time.meter.representations.StartTimeHierarchy.coincident_pulse_list" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">coincident_pulse_list</span><span class="p">(</span><span class="n"><a class="autorefs autorefs-internal" title="granular_pulse (amads.time.meter.representations.StartTimeHierarchy.coincident_pulse_list(granular_pulse))" href="#amads.time.meter.representations.StartTimeHierarchy.coincident_pulse_list(granular_pulse)">granular_pulse</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a></span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Create a flat list setting out the
number of intersecting pulses at each successive position in a metrical cycle.</p>
<p>For example,
the output [4, 1, 2, 1, 3, 1, 2, 1]
refers to a base pulse unit of 1,
with addition pulse streams accenting every 2nd, 4th, and 8th position.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
<h5 id="amads.time.meter.representations.StartTimeHierarchy.coincident_pulse_list(granular_pulse)" class="doc doc-heading doc-heading-parameter">              <b><code>granular_pulse</code></b>
<a href="#amads.time.meter.representations.StartTimeHierarchy.coincident_pulse_list(granular_pulse)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a></code>)
          –
          <div class="doc-md-description">
            <p>The pulse value of the fastest level to consider e.g., 1, or 0.25.</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Examples:</span></p>
    <p>You can currently set the <code>granular_pulse</code> value to anything (this may change).
For instance, in the pair of examples below,
first we have a <code>granular_pulse</code> that's present in the input,
and then a case using a faster level that's not present (this simply pads the data out):</p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">hierarchy</span> <span class="o">=</span> <span class="n">StartTimeHierarchy</span><span class="p">([[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">4.0</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mf">4.0</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">,</span> <span class="mf">4.0</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">hierarchy</span><span class="o">.</span><span class="n">coincident_pulse_list</span><span class="p">(</span><span class="n">granular_pulse</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="go">[3, 1, 2, 1]</span>
</code></pre></div>
    <p>Now, changing the <code>granular_pulse</code> for a bit of over-sampling:</p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">hierarchy</span><span class="o">.</span><span class="n">coincident_pulse_list</span><span class="p">(</span><span class="n">granular_pulse</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
<span class="go">[3, 0, 1, 0, 2, 0, 1, 0]</span>
</code></pre></div>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>amads/time/meter/representations.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">coincident_pulse_list</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">granular_pulse</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create a flat list setting out the</span>
<span class="sd">    number of intersecting pulses at each successive position in a metrical cycle.</span>

<span class="sd">    For example,</span>
<span class="sd">    the output [4, 1, 2, 1, 3, 1, 2, 1]</span>
<span class="sd">    refers to a base pulse unit of 1,</span>
<span class="sd">    with addition pulse streams accenting every 2nd, 4th, and 8th position.</span>


<span class="sd">    Parameters</span>
<span class="sd">    --------</span>
<span class="sd">    granular_pulse</span>
<span class="sd">        The pulse value of the fastest level to consider e.g., 1, or 0.25.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>

<span class="sd">    You can currently set the `granular_pulse` value to anything (this may change).</span>
<span class="sd">    For instance, in the pair of examples below,</span>
<span class="sd">    first we have a `granular_pulse` that&#39;s present in the input,</span>
<span class="sd">    and then a case using a faster level that&#39;s not present (this simply pads the data out):</span>

<span class="sd">    &gt;&gt;&gt; hierarchy = StartTimeHierarchy([[0.0, 4.0], [0.0, 2.0, 4.0], [0.0, 1.0, 2.0, 3.0, 4.0]])</span>
<span class="sd">    &gt;&gt;&gt; hierarchy.coincident_pulse_list(granular_pulse=1)</span>
<span class="sd">    [3, 1, 2, 1]</span>

<span class="sd">    Now, changing the `granular_pulse` for a bit of over-sampling:</span>

<span class="sd">    &gt;&gt;&gt; hierarchy.coincident_pulse_list(granular_pulse=0.5)</span>
<span class="sd">    [3, 0, 1, 0, 2, 0, 1, 0]</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">cycle_length</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">start_hierarchy</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

    <span class="k">for</span> <span class="n">level</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">start_hierarchy</span><span class="p">:</span>
        <span class="k">assert</span> <span class="n">level</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="n">cycle_length</span>

    <span class="n">steps</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">cycle_length</span> <span class="o">/</span> <span class="n">granular_pulse</span><span class="p">)</span>
    <span class="n">granular_level</span> <span class="o">=</span> <span class="p">[</span><span class="n">granular_pulse</span> <span class="o">*</span> <span class="n">count</span> <span class="k">for</span> <span class="n">count</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">steps</span><span class="p">)]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">count_instances</span><span class="p">(</span><span class="n">nested_list</span><span class="p">,</span> <span class="n">target</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">sum</span><span class="p">([</span><span class="n">sublist</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">target</span><span class="p">)</span> <span class="k">for</span> <span class="n">sublist</span> <span class="ow">in</span> <span class="n">nested_list</span><span class="p">])</span>

    <span class="n">coincidences</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">target</span> <span class="ow">in</span> <span class="n">granular_level</span><span class="p">:</span>
        <span class="n">coincidences</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">count_instances</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">start_hierarchy</span><span class="p">,</span> <span class="n">target</span><span class="p">))</span>

    <span class="k">return</span> <span class="n">coincidences</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="amads.time.meter.representations.StartTimeHierarchy.to_pulse_lengths" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">to_pulse_lengths</span>


<a href="#amads.time.meter.representations.StartTimeHierarchy.to_pulse_lengths" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">to_pulse_lengths</span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Check if levels have a regular pulse and if so, return the pulse length value.</p>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a></code>
          –
          <div class="doc-md-description">
            <p>Returns a list of pulse values corresponding to the start hierarchy, of the same length.
If a level is not regular, the list is populated with None.</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Examples:</span></p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">hierarchy</span> <span class="o">=</span> <span class="n">StartTimeHierarchy</span><span class="p">([[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">4.0</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mf">4.0</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">,</span> <span class="mf">4.0</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">hierarchy</span><span class="o">.</span><span class="n">to_pulse_lengths</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">hierarchy</span><span class="o">.</span><span class="n">pulse_lengths</span>
<span class="go">[4.0, 2.0, 1.0]</span>
</code></pre></div>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">uneven</span> <span class="o">=</span> <span class="n">StartTimeHierarchy</span><span class="p">([[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">4.0</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">,</span> <span class="mf">4.0</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">,</span> <span class="mf">4.0</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">uneven</span><span class="o">.</span><span class="n">to_pulse_lengths</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">uneven</span><span class="o">.</span><span class="n">pulse_lengths</span>
<span class="go">[4.0, None, 1.0]</span>
</code></pre></div>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>amads/time/meter/representations.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">to_pulse_lengths</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Check if levels have a regular pulse and if so, return the pulse length value.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    list</span>
<span class="sd">        Returns a list of pulse values corresponding to the start hierarchy, of the same length.</span>
<span class="sd">        If a level is not regular, the list is populated with None.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>

<span class="sd">    &gt;&gt;&gt; hierarchy = StartTimeHierarchy([[0.0, 4.0], [0.0, 2.0, 4.0], [0.0, 1.0, 2.0, 3.0, 4.0]])</span>
<span class="sd">    &gt;&gt;&gt; hierarchy.to_pulse_lengths()</span>
<span class="sd">    &gt;&gt;&gt; hierarchy.pulse_lengths</span>
<span class="sd">    [4.0, 2.0, 1.0]</span>

<span class="sd">    &gt;&gt;&gt; uneven = StartTimeHierarchy([[0.0, 4.0], [0.0, 3.0, 4.0], [0.0, 1.0, 2.0, 3.0, 4.0]])</span>
<span class="sd">    &gt;&gt;&gt; uneven.to_pulse_lengths()</span>
<span class="sd">    &gt;&gt;&gt; uneven.pulse_lengths</span>
<span class="sd">    [4.0, None, 1.0]</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">test_one</span><span class="p">(</span><span class="n">level</span><span class="p">:</span> <span class="nb">list</span><span class="p">):</span>
        <span class="n">diffs</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span>
            <span class="p">[</span><span class="n">level</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">level</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">level</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)]</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">diffs</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">diffs</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">pulse_lengths</span> <span class="o">=</span> <span class="p">[</span><span class="n">test_one</span><span class="p">(</span><span class="n">level</span><span class="p">)</span> <span class="k">for</span> <span class="n">level</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">start_hierarchy</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="amads.time.meter.representations.StartTimeHierarchy.add_faster_levels" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">add_faster_levels</span>


<a href="#amads.time.meter.representations.StartTimeHierarchy.add_faster_levels" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">add_faster_levels</span><span class="p">(</span><span class="n"><a class="autorefs autorefs-internal" title="minimum_beat_type (amads.time.meter.representations.StartTimeHierarchy.add_faster_levels(minimum_beat_type))" href="#amads.time.meter.representations.StartTimeHierarchy.add_faster_levels(minimum_beat_type)">minimum_beat_type</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></span> <span class="o">=</span> <span class="mi">64</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Recursively add faster levels until the <code>minimum_beat_type</code> value
The <code>minimum_beat_type</code> is subject to the same constraints as the <code>beat_types</code> ("denominators")
i.e., powers of 2 (1, 2, 4, 8, 16, 32, 64, ...).
The default = 64 for 64th note.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
<h5 id="amads.time.meter.representations.StartTimeHierarchy.add_faster_levels(minimum_beat_type)" class="doc doc-heading doc-heading-parameter">              <b><code>minimum_beat_type</code></b>
<a href="#amads.time.meter.representations.StartTimeHierarchy.add_faster_levels(minimum_beat_type)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>, default:
                  <code>64</code>
)
          –
          <div class="doc-md-description">
            <p>Recursively create further levels down to this value.
Must be power of two.
Defaults to 64 for 64th notes.</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Raises:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/exceptions.html#ValueError">ValueError</a></code>
            –
          <div class="doc-md-description">
            <p>if the currently fastest level of a <code>starts_hierarchy</code> is not periodic,
or if either of the fastest level or <code>minimum_beat_type</code> are not powers
of 2. Set the <code>starts_hierarchy</code> manually in these non-standard cases.</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Examples:</span></p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">hierarchy</span> <span class="o">=</span> <span class="n">StartTimeHierarchy</span><span class="p">([[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">4.0</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mf">4.0</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">hierarchy</span><span class="o">.</span><span class="n">start_hierarchy</span>
<span class="go">[[0.0, 4.0], [0.0, 2.0, 4.0]]</span>
</code></pre></div>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">hierarchy</span><span class="o">.</span><span class="n">to_pulse_lengths</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">hierarchy</span><span class="o">.</span><span class="n">pulse_lengths</span>
<span class="go">[4.0, 2.0]</span>
</code></pre></div>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">hierarchy</span><span class="o">.</span><span class="n">add_faster_levels</span><span class="p">(</span><span class="n">minimum_beat_type</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">hierarchy</span><span class="o">.</span><span class="n">start_hierarchy</span>
<span class="go">[[0.0, 4.0], [0.0, 2.0, 4.0], [0.0, 1.0, 2.0, 3.0, 4.0]]</span>
</code></pre></div>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">hierarchy</span><span class="o">.</span><span class="n">pulse_lengths</span>
<span class="go">[4.0, 2.0, 1.0]</span>
</code></pre></div>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">hierarchy</span><span class="o">.</span><span class="n">add_faster_levels</span><span class="p">(</span><span class="n">minimum_beat_type</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">hierarchy</span><span class="o">.</span><span class="n">start_hierarchy</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="go">[0.0, 0.5, 1.0, 1.5, 2.0, 2.5, 3.0, 3.5, 4.0]</span>
</code></pre></div>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">hierarchy</span><span class="o">.</span><span class="n">start_hierarchy</span><span class="p">)</span>
<span class="go">4</span>
</code></pre></div>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">hierarchy</span><span class="o">.</span><span class="n">pulse_lengths</span>
<span class="go">[4.0, 2.0, 1.0, 0.5]</span>
</code></pre></div>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>amads/time/meter/representations.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">add_faster_levels</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">minimum_beat_type</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">64</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Recursively add faster levels until the `minimum_beat_type` value</span>
<span class="sd">    The `minimum_beat_type` is subject to the same constraints as the `beat_types` (&quot;denominators&quot;)</span>
<span class="sd">    i.e., powers of 2 (1, 2, 4, 8, 16, 32, 64, ...).</span>
<span class="sd">    The default = 64 for 64th note.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    minimum_beat_type</span>
<span class="sd">        Recursively create further levels down to this value.</span>
<span class="sd">        Must be power of two.</span>
<span class="sd">        Defaults to 64 for 64th notes.</span>

<span class="sd">    Raises</span>
<span class="sd">    ------</span>
<span class="sd">    ValueError</span>
<span class="sd">        if the currently fastest level of a `starts_hierarchy` is not periodic,</span>
<span class="sd">        or if either of the fastest level or `minimum_beat_type` are not powers</span>
<span class="sd">        of 2. Set the `starts_hierarchy` manually in these non-standard cases.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; hierarchy = StartTimeHierarchy([[0.0, 4.0], [0.0, 2.0, 4.0]])</span>
<span class="sd">    &gt;&gt;&gt; hierarchy.start_hierarchy</span>
<span class="sd">    [[0.0, 4.0], [0.0, 2.0, 4.0]]</span>

<span class="sd">    &gt;&gt;&gt; hierarchy.to_pulse_lengths()</span>
<span class="sd">    &gt;&gt;&gt; hierarchy.pulse_lengths</span>
<span class="sd">    [4.0, 2.0]</span>

<span class="sd">    &gt;&gt;&gt; hierarchy.add_faster_levels(minimum_beat_type=4)</span>
<span class="sd">    &gt;&gt;&gt; hierarchy.start_hierarchy</span>
<span class="sd">    [[0.0, 4.0], [0.0, 2.0, 4.0], [0.0, 1.0, 2.0, 3.0, 4.0]]</span>

<span class="sd">    &gt;&gt;&gt; hierarchy.pulse_lengths</span>
<span class="sd">    [4.0, 2.0, 1.0]</span>

<span class="sd">    &gt;&gt;&gt; hierarchy.add_faster_levels(minimum_beat_type=8)</span>
<span class="sd">    &gt;&gt;&gt; hierarchy.start_hierarchy[-1]</span>
<span class="sd">    [0.0, 0.5, 1.0, 1.5, 2.0, 2.5, 3.0, 3.5, 4.0]</span>

<span class="sd">    &gt;&gt;&gt; len(hierarchy.start_hierarchy)</span>
<span class="sd">    4</span>

<span class="sd">    &gt;&gt;&gt; hierarchy.pulse_lengths</span>
<span class="sd">    [4.0, 2.0, 1.0, 0.5]</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">to_pulse_lengths</span><span class="p">()</span>
    <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">pulse_lengths</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;&quot;</span>
    <span class="n">fastest</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pulse_lengths</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">fastest</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="s2">&quot;Fastest level is not regular. Use case unsupported.&quot;</span>
        <span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">is_non_negative_integer_power_of_two</span><span class="p">(</span>
        <span class="n">switch_pulse_length_beat_type</span><span class="p">(</span>
            <span class="n">fastest</span>
        <span class="p">)</span>  <span class="c1"># from pulse length to beat type</span>
    <span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Fastest level (</span><span class="si">{</span><span class="n">fastest</span><span class="si">}</span><span class="s2">) is not a power of 2. Use case unsupported.&quot;</span>
        <span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">is_non_negative_integer_power_of_two</span><span class="p">(</span><span class="n">minimum_beat_type</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;The `minimum_beat_type` (</span><span class="si">{</span><span class="n">minimum_beat_type</span><span class="si">}</span><span class="s2">) is not a power of 2. Use case unsupported.&quot;</span>
        <span class="p">)</span>

    <span class="n">fastest_beat_type</span> <span class="o">=</span> <span class="n">switch_pulse_length_beat_type</span><span class="p">(</span><span class="n">fastest</span><span class="p">)</span>  <span class="c1"># TODO</span>
    <span class="n">fastest_beat_type_exponent</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">log2</span><span class="p">(</span><span class="n">fastest_beat_type</span><span class="p">))</span>
    <span class="n">minimum_beat_type_exponent</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">log2</span><span class="p">(</span><span class="n">minimum_beat_type</span><span class="p">))</span>

    <span class="n">new_beat_types</span> <span class="o">=</span> <span class="p">[</span>
        <span class="mi">2</span><span class="o">**</span><span class="n">x</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span>
            <span class="n">fastest_beat_type_exponent</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">minimum_beat_type_exponent</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="p">)</span>
    <span class="p">]</span>
    <span class="n">new_pulses</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">switch_pulse_length_beat_type</span><span class="p">(</span><span class="n">beat_type</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">beat_type</span> <span class="ow">in</span> <span class="n">new_beat_types</span>
    <span class="p">]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">pulse_lengths</span> <span class="o">+=</span> <span class="n">new_pulses</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">pulse_lengths</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">pulse_lengths</span> <span class="k">if</span> <span class="n">x</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">pulse_lengths</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span>
        <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pulse_lengths</span><span class="p">)),</span> <span class="n">key</span><span class="o">=</span><span class="nb">abs</span><span class="p">,</span> <span class="n">reverse</span><span class="o">=</span><span class="kc">True</span>
    <span class="p">)</span>
    <span class="n">fake_meter</span> <span class="o">=</span> <span class="n">PulseLengths</span><span class="p">(</span>
        <span class="n">pulse_lengths</span><span class="o">=</span><span class="n">new_pulses</span><span class="p">,</span> <span class="n">cycle_length</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">cycle_length</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">start_hierarchy</span> <span class="o">+=</span> <span class="n">fake_meter</span><span class="o">.</span><span class="n">to_start_hierarchy</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div><hr />


<div class="doc doc-object doc-class">



<h2 id="amads.time.meter.representations.TimeSignature" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">TimeSignature</span>


<a href="#amads.time.meter.representations.TimeSignature" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">TimeSignature</span><span class="p">(</span>
    <span class="n"><a class="autorefs autorefs-internal" title="beats (amads.time.meter.representations.TimeSignature(beats))" href="#amads.time.meter.representations.TimeSignature(beats)">beats</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#tuple">tuple</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="beat_type (amads.time.meter.representations.TimeSignature(beat_type))" href="#amads.time.meter.representations.TimeSignature(beat_type)">beat_type</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="as_string (amads.time.meter.representations.TimeSignature(as_string))" href="#amads.time.meter.representations.TimeSignature(as_string)">as_string</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents first">



        <p>Represent the <em>notational</em> time signature object.</p>
<h3 id="amads.time.meter.representations.TimeSignature--todo-consider-aligning-and-merging-with-basicstimesignature-this-pr-shows-some-of-how-that-would-work">TODO consider aligning and merging with basics.TimeSignature, this PR shows some of how that would work.<a class="headerlink" href="#amads.time.meter.representations.TimeSignature--todo-consider-aligning-and-merging-with-basicstimesignature-this-pr-shows-some-of-how-that-would-work" title="Permanent link">&para;</a></h3>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
<h3 id="amads.time.meter.representations.TimeSignature(beats)" class="doc doc-heading doc-heading-parameter">              <b><code>beats</code></b>
<a href="#amads.time.meter.representations.TimeSignature(beats)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#tuple">tuple</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a>] | None</code>, default:
                  <code>None</code>
)
          –
          <div class="doc-md-description">
            <p>The "numerator" of the time signature: beats per cycle, a number (int or fraction) or a lists thereof.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h3 id="amads.time.meter.representations.TimeSignature(beat_type)" class="doc doc-heading doc-heading-parameter">              <b><code>beat_type</code></b>
<a href="#amads.time.meter.representations.TimeSignature(beat_type)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a> | None</code>, default:
                  <code>None</code>
)
          –
          <div class="doc-md-description">
            <p>the so-called "denominator" of the time signature: a whole number power of 2
(1, 2, 4, 8, 16, 32, 64, ...).
No so-called "irrational" meters yet (e.g., 2/3), sorry!</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h3 id="amads.time.meter.representations.TimeSignature(as_string)" class="doc doc-heading doc-heading-parameter">              <b><code>as_string</code></b>
<a href="#amads.time.meter.representations.TimeSignature(as_string)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a> | None</code>, default:
                  <code>None</code>
)
          –
          <div class="doc-md-description">
            <p>An alternative way of creating this object from a string representation.
See notes at <code>TimeSignature.from_string</code>.</p>
          </div>
        </li>
    </ul>












<p><span class="doc-section-title">Methods:</span></p>
    <ul>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="            from_string (amads.time.meter.representations.TimeSignature.from_string)" href="#amads.time.meter.representations.TimeSignature.from_string">from_string</a></code></b>
            –
            <div class="doc-md-description">
              <p>Given a signature string, extract the constituent parts and create an object.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="            check_valid (amads.time.meter.representations.TimeSignature.check_valid)" href="#amads.time.meter.representations.TimeSignature.check_valid">check_valid</a></code></b>
            –
            <div class="doc-md-description">
              <p>Check the validity of the input.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="            get_pulses (amads.time.meter.representations.TimeSignature.get_pulses)" href="#amads.time.meter.representations.TimeSignature.get_pulses">get_pulses</a></code></b>
            –
            <div class="doc-md-description">
              <p>Create an unordered set for the regular pulses present in this time signature.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="            fill_2s_3s (amads.time.meter.representations.TimeSignature.fill_2s_3s)" href="#amads.time.meter.representations.TimeSignature.fill_2s_3s">fill_2s_3s</a></code></b>
            –
            <div class="doc-md-description">
              <p>Optionally, add pulse values to follow the conventions of the time signatures.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="            to_start_hierarchy (amads.time.meter.representations.TimeSignature.to_start_hierarchy)" href="#amads.time.meter.representations.TimeSignature.to_start_hierarchy">to_start_hierarchy</a></code></b>
            –
            <div class="doc-md-description">
              <p>Create a start hierarchy for almost any time signature</p>
            </div>
          </li>
    </ul>



                  <details class="mkdocstrings-source">
                    <summary>Source code in <code>amads/time/meter/representations.py</code></summary>
                    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">beats</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">beat_type</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="c1"># delta: Optional[float] = 0,  # TODO if merging with basics</span>
    <span class="n">as_string</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">beats</span> <span class="o">=</span> <span class="n">beats</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">one_beat_value</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">beat_type</span> <span class="o">=</span> <span class="n">beat_type</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">as_string</span> <span class="o">=</span> <span class="n">as_string</span>
    <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">beats</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">beat_type</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">from_string</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">check_valid</span><span class="p">()</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">cycle_length</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">beats</span><span class="p">)</span> <span class="o">*</span> <span class="mi">4</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">beat_type</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">pulses</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">get_pulses</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
                  </details>



<div class="doc doc-children">








<h3 id="amads.time.meter.representations.TimeSignature-functions">Functions<a href="#amads.time.meter.representations.TimeSignature-functions" class="headerlink" title="Permanent link">&para;</a></h3>

<div class="doc doc-object doc-function">


<h4 id="amads.time.meter.representations.TimeSignature.from_string" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">from_string</span>


<a href="#amads.time.meter.representations.TimeSignature.from_string" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">from_string</span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Given a signature string, extract the constituent parts and create an object.
The string must take the form <code>&lt;beat&gt;/&lt;beat_type&gt;</code>
with exactly one “/” separating the two (spaces are ignored).
The string does not change.</p>
<p>The <code>&lt;beat&gt;</code> (“numerator”) part may be a number (including 5 and 7 which
are supported) or more than one number separated by the “+” symbol.
For example, when encoding “5/4”, use the total value only to avoid
segmentation above the denominator level (“5/4”)
or the X+Y form to explicitly distinguish between “2+3” and “3+2”.
I.e., “5/” time signatures have no 3+2 or 2+3 division by default.
See examples on <code>TimeSignature.to_starts_hierarchy</code>.</p>
<p>Finally, although we support and provide defaults for time signatures
in the form “2+3/8”, there is no such support for more than one “/”
(i.e., the user must build cases like “4/4 + 3/8” explicitly
according to how they see it).</p>


<p><span class="doc-section-title">Examples:</span></p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">ts_4_4</span> <span class="o">=</span> <span class="n">TimeSignature</span><span class="p">(</span><span class="n">as_string</span><span class="o">=</span><span class="s2">&quot;4/4&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ts_4_4</span><span class="o">.</span><span class="n">beats</span> <span class="c1"># Tuple of one element</span>
<span class="go">(4,)</span>
</code></pre></div>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">ts_4_4</span><span class="o">.</span><span class="n">beat_type</span>
<span class="go">4</span>
</code></pre></div>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>amads/time/meter/representations.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">from_string</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a signature string, extract the constituent parts and create an object.</span>
<span class="sd">    The string must take the form `&lt;beat&gt;/&lt;beat_type&gt;`</span>
<span class="sd">    with exactly one “/” separating the two (spaces are ignored).</span>
<span class="sd">    The string does not change.</span>

<span class="sd">    The `&lt;beat&gt;` (“numerator”) part may be a number (including 5 and 7 which</span>
<span class="sd">    are supported) or more than one number separated by the “+” symbol.</span>
<span class="sd">    For example, when encoding “5/4”, use the total value only to avoid</span>
<span class="sd">    segmentation above the denominator level (“5/4”)</span>
<span class="sd">    or the X+Y form to explicitly distinguish between “2+3” and “3+2”.</span>
<span class="sd">    I.e., “5/” time signatures have no 3+2 or 2+3 division by default.</span>
<span class="sd">    See examples on `TimeSignature.to_starts_hierarchy`.</span>

<span class="sd">    Finally, although we support and provide defaults for time signatures</span>
<span class="sd">    in the form “2+3/8”, there is no such support for more than one “/”</span>
<span class="sd">    (i.e., the user must build cases like “4/4 + 3/8” explicitly</span>
<span class="sd">    according to how they see it).</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>

<span class="sd">    &gt;&gt;&gt; ts_4_4 = TimeSignature(as_string=&quot;4/4&quot;)</span>
<span class="sd">    &gt;&gt;&gt; ts_4_4.beats # Tuple of one element</span>
<span class="sd">    (4,)</span>

<span class="sd">    &gt;&gt;&gt; ts_4_4.beat_type</span>
<span class="sd">    4</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">beats</span><span class="p">,</span> <span class="n">beat_type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">as_string</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">beats</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">([</span><span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">beats</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;+&quot;</span><span class="p">)])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">beat_type</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">beat_type</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="amads.time.meter.representations.TimeSignature.check_valid" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">check_valid</span>


<a href="#amads.time.meter.representations.TimeSignature.check_valid" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">check_valid</span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Check the validity of the input.</p>
<ul>
<li><code>.beats</code> must be an integer or a list/tuple thereof.</li>
<li><code>.beat_type</code> must be a single integer power of two.</li>
</ul>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>amads/time/meter/representations.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">check_valid</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Check the validity of the input.</span>

<span class="sd">     - `.beats` must be an integer or a list/tuple thereof.</span>
<span class="sd">     - `.beat_type` must be a single integer power of two.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># beats  # TODO this check may be overdoing it</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">beats</span><span class="p">:</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">beats</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">beats</span><span class="p">:</span>
            <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>

    <span class="c1"># beat_type  # TODO this is the part we want to actively check</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">is_non_negative_integer_power_of_two</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">beat_type</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Beat type set as </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">beat_type</span><span class="si">}</span><span class="s2"> is invalid: must be a non-negative integer power of 2.&quot;</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="amads.time.meter.representations.TimeSignature.get_pulses" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">get_pulses</span>


<a href="#amads.time.meter.representations.TimeSignature.get_pulses" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">get_pulses</span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Create an unordered set for the regular pulses present in this time signature.</p>
<p>This will include the full cycle and beat type (“denominator”) value,
e.g., in “3/4” the pulse lengths are 3.0 (full cycle) and 1.0 (beat type).
If there are other regular levels between the two, they will be added
only if the user has first called <code>fill_2s_3s</code> (it does not run by default).
For instance, the splitting of 4 into 2+2 is user choice (see <code>fill_2s_3s</code>)
With this split, this “4/4” has pulse lengths of 4.0 (full cycle)
and 1.0 (beat type) as well as 2.0 given that the two twos are of one kind.
In “2+3/4” there is no such 2.0 (or 3.0) regularity, and so no pulse is
created for that level.</p>


<p><span class="doc-section-title">Examples:</span></p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">ts_4_4</span> <span class="o">=</span> <span class="n">TimeSignature</span><span class="p">(</span><span class="n">as_string</span><span class="o">=</span><span class="s2">&quot;4/4&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ts_4_4</span><span class="o">.</span><span class="n">pulses</span>
<span class="go">[4.0, 1.0]</span>
</code></pre></div>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">ts_4_4</span><span class="o">.</span><span class="n">fill_2s_3s</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ts_4_4</span><span class="o">.</span><span class="n">pulses</span>
<span class="go">[4.0, 2.0, 1.0]</span>
</code></pre></div>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">ts_6_8</span> <span class="o">=</span> <span class="n">TimeSignature</span><span class="p">(</span><span class="n">as_string</span><span class="o">=</span><span class="s2">&quot;6/8&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ts_6_8</span><span class="o">.</span><span class="n">pulses</span>
<span class="go">[3.0, 0.5]</span>
</code></pre></div>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">ts_6_8</span><span class="o">.</span><span class="n">fill_2s_3s</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ts_6_8</span><span class="o">.</span><span class="n">pulses</span>
<span class="go">[3.0, 1.5, 0.5]</span>
</code></pre></div>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>amads/time/meter/representations.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_pulses</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create an unordered set for the regular pulses present in this time signature.</span>

<span class="sd">    This will include the full cycle and beat type (“denominator”) value,</span>
<span class="sd">    e.g., in “3/4” the pulse lengths are 3.0 (full cycle) and 1.0 (beat type).</span>
<span class="sd">    If there are other regular levels between the two, they will be added</span>
<span class="sd">    only if the user has first called `fill_2s_3s` (it does not run by default).</span>
<span class="sd">    For instance, the splitting of 4 into 2+2 is user choice (see `fill_2s_3s`)</span>
<span class="sd">    With this split, this “4/4” has pulse lengths of 4.0 (full cycle)</span>
<span class="sd">    and 1.0 (beat type) as well as 2.0 given that the two twos are of one kind.</span>
<span class="sd">    In “2+3/4” there is no such 2.0 (or 3.0) regularity, and so no pulse is</span>
<span class="sd">    created for that level.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; ts_4_4 = TimeSignature(as_string=&quot;4/4&quot;)</span>
<span class="sd">    &gt;&gt;&gt; ts_4_4.pulses</span>
<span class="sd">    [4.0, 1.0]</span>

<span class="sd">    &gt;&gt;&gt; ts_4_4.fill_2s_3s()</span>
<span class="sd">    &gt;&gt;&gt; ts_4_4.pulses</span>
<span class="sd">    [4.0, 2.0, 1.0]</span>

<span class="sd">    &gt;&gt;&gt; ts_6_8 = TimeSignature(as_string=&quot;6/8&quot;)</span>
<span class="sd">    &gt;&gt;&gt; ts_6_8.pulses</span>
<span class="sd">    [3.0, 0.5]</span>

<span class="sd">    &gt;&gt;&gt; ts_6_8.fill_2s_3s()</span>
<span class="sd">    &gt;&gt;&gt; ts_6_8.pulses</span>
<span class="sd">    [3.0, 1.5, 0.5]</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">pulses</span> <span class="o">=</span> <span class="p">[</span><span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cycle_length</span><span class="p">),</span> <span class="mi">4</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">beat_type</span><span class="p">]</span>

    <span class="n">first_beat_to_pulse</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">beats</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="mi">4</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">beat_type</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">beats</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>  <span class="c1"># one beat type</span>
        <span class="n">pulses</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">first_beat_to_pulse</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">one_beat_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">beats</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">beats</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>  <span class="c1"># 2+ beats</span>
        <span class="k">if</span> <span class="p">(</span>
            <span class="nb">len</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">beats</span><span class="p">))</span> <span class="o">==</span> <span class="mi">1</span>
        <span class="p">):</span>  <span class="c1"># duplicate of the same e.g., (2, 2), so still one consistent pulse.</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">one_beat_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">beats</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">pulses</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">first_beat_to_pulse</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">pulses</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">pulses</span><span class="p">)),</span> <span class="n">key</span><span class="o">=</span><span class="nb">abs</span><span class="p">,</span> <span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="amads.time.meter.representations.TimeSignature.fill_2s_3s" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">fill_2s_3s</span>


<a href="#amads.time.meter.representations.TimeSignature.fill_2s_3s" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">fill_2s_3s</span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Optionally, add pulse values to follow the conventions of the time signatures.</p>
<p>Enforcing 2- and 3-grouping, this only applies to cases with a
single beat in the "numerator". For instance,
given a “4/4” signature, this method will add the half-cycle (pulse value 2.0),
given a “6/8”, it will again add the half-cycle (pulse value 1.5),
and given a “12/8”, it will add both the half- and quarter-cycle
(pulse values 3.0 and 1.5),</p>
<p>This functionality is factored out and does not run by default.
Even if this runs, the original time signature string is unchanged,
as is the <code>beats</code> attribute.</p>


<p><span class="doc-section-title">Examples:</span></p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">ts_4_4</span> <span class="o">=</span> <span class="n">TimeSignature</span><span class="p">(</span><span class="n">as_string</span><span class="o">=</span><span class="s2">&quot;4/4&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ts_4_4</span><span class="o">.</span><span class="n">pulses</span>
<span class="go">[4.0, 1.0]</span>
</code></pre></div>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">ts_4_4</span><span class="o">.</span><span class="n">fill_2s_3s</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ts_4_4</span><span class="o">.</span><span class="n">pulses</span>
<span class="go">[4.0, 2.0, 1.0]</span>
</code></pre></div>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">ts_6_8</span> <span class="o">=</span> <span class="n">TimeSignature</span><span class="p">(</span><span class="n">as_string</span><span class="o">=</span><span class="s2">&quot;6/8&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ts_6_8</span><span class="o">.</span><span class="n">pulses</span>
<span class="go">[3.0, 0.5]</span>
</code></pre></div>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">ts_6_8</span><span class="o">.</span><span class="n">fill_2s_3s</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ts_6_8</span><span class="o">.</span><span class="n">pulses</span>
<span class="go">[3.0, 1.5, 0.5]</span>
</code></pre></div>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>amads/time/meter/representations.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">fill_2s_3s</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Optionally, add pulse values to follow the conventions of the time signatures.</span>

<span class="sd">    Enforcing 2- and 3-grouping, this only applies to cases with a</span>
<span class="sd">    single beat in the &quot;numerator&quot;. For instance,</span>
<span class="sd">    given a “4/4” signature, this method will add the half-cycle (pulse value 2.0),</span>
<span class="sd">    given a “6/8”, it will again add the half-cycle (pulse value 1.5),</span>
<span class="sd">    and given a “12/8”, it will add both the half- and quarter-cycle</span>
<span class="sd">    (pulse values 3.0 and 1.5),</span>

<span class="sd">    This functionality is factored out and does not run by default.</span>
<span class="sd">    Even if this runs, the original time signature string is unchanged,</span>
<span class="sd">    as is the `beats` attribute.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; ts_4_4 = TimeSignature(as_string=&quot;4/4&quot;)</span>
<span class="sd">    &gt;&gt;&gt; ts_4_4.pulses</span>
<span class="sd">    [4.0, 1.0]</span>

<span class="sd">    &gt;&gt;&gt; ts_4_4.fill_2s_3s()</span>
<span class="sd">    &gt;&gt;&gt; ts_4_4.pulses</span>
<span class="sd">    [4.0, 2.0, 1.0]</span>

<span class="sd">    &gt;&gt;&gt; ts_6_8 = TimeSignature(as_string=&quot;6/8&quot;)</span>
<span class="sd">    &gt;&gt;&gt; ts_6_8.pulses</span>
<span class="sd">    [3.0, 0.5]</span>

<span class="sd">    &gt;&gt;&gt; ts_6_8.fill_2s_3s()</span>
<span class="sd">    &gt;&gt;&gt; ts_6_8.pulses</span>
<span class="sd">    [3.0, 1.5, 0.5]</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">metrical_mappings</span> <span class="o">=</span> <span class="p">{</span><span class="mi">4</span><span class="p">:</span> <span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="mi">6</span><span class="p">:</span> <span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="mi">9</span><span class="p">:</span> <span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="mi">12</span><span class="p">:</span> <span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">3</span><span class="p">]}</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">one_beat_value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">one_beat_value</span> <span class="ow">in</span> <span class="n">metrical_mappings</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pulses</span> <span class="o">+=</span> <span class="p">[</span>
                <span class="n">x</span> <span class="o">*</span> <span class="mi">4</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">beat_type</span>
                <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">metrical_mappings</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">one_beat_value</span><span class="p">]</span>
            <span class="p">]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">pulses</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pulses</span><span class="p">)),</span> <span class="n">key</span><span class="o">=</span><span class="nb">abs</span><span class="p">,</span> <span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="amads.time.meter.representations.TimeSignature.to_start_hierarchy" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">to_start_hierarchy</span>


<a href="#amads.time.meter.representations.TimeSignature.to_start_hierarchy" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">to_start_hierarchy</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Create a start hierarchy for almost any time signature</p>
<p>(with constraints as noted in the top level class description
and in the <code>.from_string</code> method).
See below for several examples of how this handles
specific time signatures and related assumptions,
and note the effect of running <code>fill_2s_3s()</code>.</p>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a></code>
          –
          <div class="doc-md-description">
            <p>Returns a list of lists with start positions by level.</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Examples:</span></p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">ts_4_4</span> <span class="o">=</span> <span class="n">TimeSignature</span><span class="p">(</span><span class="n">as_string</span><span class="o">=</span><span class="s2">&quot;4/4&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ts_4_4</span><span class="o">.</span><span class="n">pulses</span>
<span class="go">[4.0, 1.0]</span>
</code></pre></div>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">test_1</span> <span class="o">=</span> <span class="n">ts_4_4</span><span class="o">.</span><span class="n">to_start_hierarchy</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test_1</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="go">[0.0, 4.0]</span>
</code></pre></div>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">test_1</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="go">[0.0, 1.0, 2.0, 3.0, 4.0]</span>
</code></pre></div>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">ts_4_4</span><span class="o">.</span><span class="n">fill_2s_3s</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ts_4_4</span><span class="o">.</span><span class="n">pulses</span>
<span class="go">[4.0, 2.0, 1.0]</span>
</code></pre></div>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">test_2</span> <span class="o">=</span> <span class="n">ts_4_4</span><span class="o">.</span><span class="n">to_start_hierarchy</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test_2</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="go">[0.0, 4.0]</span>
</code></pre></div>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">test_2</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="go">[0.0, 2.0, 4.0]</span>
</code></pre></div>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">test_2</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
<span class="go">[0.0, 1.0, 2.0, 3.0, 4.0]</span>
</code></pre></div>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">ts_2_2</span> <span class="o">=</span> <span class="n">TimeSignature</span><span class="p">(</span><span class="n">as_string</span><span class="o">=</span><span class="s2">&quot;2/2&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ts_2_2</span><span class="o">.</span><span class="n">pulses</span>
<span class="go">[4.0, 2.0]</span>
</code></pre></div>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">test_3</span> <span class="o">=</span> <span class="n">ts_2_2</span><span class="o">.</span><span class="n">to_start_hierarchy</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test_3</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="go">[0.0, 4.0]</span>
</code></pre></div>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">test_3</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="go">[0.0, 2.0, 4.0]</span>
</code></pre></div>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">ts_2_2</span><span class="o">.</span><span class="n">fill_2s_3s</span><span class="p">()</span> <span class="c1"># no effect, unchanged</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ts_2_2</span><span class="o">.</span><span class="n">pulses</span>
<span class="go">[4.0, 2.0]</span>
</code></pre></div>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">test_4</span> <span class="o">=</span> <span class="n">ts_2_2</span><span class="o">.</span><span class="n">to_start_hierarchy</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test_4</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="go">[0.0, 4.0]</span>
</code></pre></div>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">test_4</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="go">[0.0, 2.0, 4.0]</span>
</code></pre></div>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">ts_6_8</span> <span class="o">=</span> <span class="n">TimeSignature</span><span class="p">(</span><span class="n">as_string</span><span class="o">=</span><span class="s2">&quot;6/8&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ts_6_8</span><span class="o">.</span><span class="n">pulses</span>
<span class="go">[3.0, 0.5]</span>
</code></pre></div>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">test_5</span> <span class="o">=</span> <span class="n">ts_6_8</span><span class="o">.</span><span class="n">to_start_hierarchy</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test_5</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="go">[0.0, 3.0]</span>
</code></pre></div>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">test_5</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="go">[0.0, 0.5, 1.0, 1.5, 2.0, 2.5, 3.0]</span>
</code></pre></div>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">ts_6_8</span><span class="o">.</span><span class="n">fill_2s_3s</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ts_6_8</span><span class="o">.</span><span class="n">pulses</span>
<span class="go">[3.0, 1.5, 0.5]</span>
</code></pre></div>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">test_6</span> <span class="o">=</span> <span class="n">ts_6_8</span><span class="o">.</span><span class="n">to_start_hierarchy</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test_6</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="go">[0.0, 3.0]</span>
</code></pre></div>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">test_6</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="go">[0.0, 1.5, 3.0]</span>
</code></pre></div>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">test_6</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
<span class="go">[0.0, 0.5, 1.0, 1.5, 2.0, 2.5, 3.0]</span>
</code></pre></div>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">ts_5_4</span> <span class="o">=</span> <span class="n">TimeSignature</span><span class="p">(</span><span class="n">as_string</span><span class="o">=</span><span class="s2">&quot;5/4&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ts_5_4</span><span class="o">.</span><span class="n">pulses</span>
<span class="go">[5.0, 1.0]</span>
</code></pre></div>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">test_7</span> <span class="o">=</span> <span class="n">ts_5_4</span><span class="o">.</span><span class="n">to_start_hierarchy</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test_7</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="go">[0.0, 5.0]</span>
</code></pre></div>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">test_7</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="go">[0.0, 1.0, 2.0, 3.0, 4.0, 5.0]</span>
</code></pre></div>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">ts_2_3_4</span> <span class="o">=</span> <span class="n">TimeSignature</span><span class="p">(</span><span class="n">as_string</span><span class="o">=</span><span class="s2">&quot;2+3/4&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ts_2_3_4</span><span class="o">.</span><span class="n">pulses</span> <span class="c1"># as before</span>
<span class="go">[5.0, 1.0]</span>
</code></pre></div>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">test_8</span> <span class="o">=</span> <span class="n">ts_2_3_4</span><span class="o">.</span><span class="n">to_start_hierarchy</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test_8</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="go">[0.0, 5.0]</span>
</code></pre></div>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">test_8</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="go">[0.0, 2.0, 5.0]</span>
</code></pre></div>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">test_8</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
<span class="go">[0.0, 1.0, 2.0, 3.0, 4.0, 5.0]</span>
</code></pre></div>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>amads/time/meter/representations.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span>
<span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">to_start_hierarchy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create a start hierarchy for almost any time signature</span>

<span class="sd">    (with constraints as noted in the top level class description</span>
<span class="sd">    and in the `.from_string` method).</span>
<span class="sd">    See below for several examples of how this handles</span>
<span class="sd">    specific time signatures and related assumptions,</span>
<span class="sd">    and note the effect of running `fill_2s_3s()`.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    list</span>
<span class="sd">        Returns a list of lists with start positions by level.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>

<span class="sd">    &gt;&gt;&gt; ts_4_4 = TimeSignature(as_string=&quot;4/4&quot;)</span>
<span class="sd">    &gt;&gt;&gt; ts_4_4.pulses</span>
<span class="sd">    [4.0, 1.0]</span>

<span class="sd">    &gt;&gt;&gt; test_1 = ts_4_4.to_start_hierarchy()</span>
<span class="sd">    &gt;&gt;&gt; test_1[0]</span>
<span class="sd">    [0.0, 4.0]</span>

<span class="sd">    &gt;&gt;&gt; test_1[1]</span>
<span class="sd">    [0.0, 1.0, 2.0, 3.0, 4.0]</span>

<span class="sd">    &gt;&gt;&gt; ts_4_4.fill_2s_3s()</span>
<span class="sd">    &gt;&gt;&gt; ts_4_4.pulses</span>
<span class="sd">    [4.0, 2.0, 1.0]</span>

<span class="sd">    &gt;&gt;&gt; test_2 = ts_4_4.to_start_hierarchy()</span>
<span class="sd">    &gt;&gt;&gt; test_2[0]</span>
<span class="sd">    [0.0, 4.0]</span>

<span class="sd">    &gt;&gt;&gt; test_2[1]</span>
<span class="sd">    [0.0, 2.0, 4.0]</span>

<span class="sd">    &gt;&gt;&gt; test_2[2]</span>
<span class="sd">    [0.0, 1.0, 2.0, 3.0, 4.0]</span>

<span class="sd">    &gt;&gt;&gt; ts_2_2 = TimeSignature(as_string=&quot;2/2&quot;)</span>
<span class="sd">    &gt;&gt;&gt; ts_2_2.pulses</span>
<span class="sd">    [4.0, 2.0]</span>

<span class="sd">    &gt;&gt;&gt; test_3 = ts_2_2.to_start_hierarchy()</span>
<span class="sd">    &gt;&gt;&gt; test_3[0]</span>
<span class="sd">    [0.0, 4.0]</span>

<span class="sd">    &gt;&gt;&gt; test_3[1]</span>
<span class="sd">    [0.0, 2.0, 4.0]</span>

<span class="sd">    &gt;&gt;&gt; ts_2_2.fill_2s_3s() # no effect, unchanged</span>
<span class="sd">    &gt;&gt;&gt; ts_2_2.pulses</span>
<span class="sd">    [4.0, 2.0]</span>

<span class="sd">    &gt;&gt;&gt; test_4 = ts_2_2.to_start_hierarchy()</span>
<span class="sd">    &gt;&gt;&gt; test_4[0]</span>
<span class="sd">    [0.0, 4.0]</span>

<span class="sd">    &gt;&gt;&gt; test_4[1]</span>
<span class="sd">    [0.0, 2.0, 4.0]</span>

<span class="sd">    &gt;&gt;&gt; ts_6_8 = TimeSignature(as_string=&quot;6/8&quot;)</span>
<span class="sd">    &gt;&gt;&gt; ts_6_8.pulses</span>
<span class="sd">    [3.0, 0.5]</span>

<span class="sd">    &gt;&gt;&gt; test_5 = ts_6_8.to_start_hierarchy()</span>
<span class="sd">    &gt;&gt;&gt; test_5[0]</span>
<span class="sd">    [0.0, 3.0]</span>

<span class="sd">    &gt;&gt;&gt; test_5[1]</span>
<span class="sd">    [0.0, 0.5, 1.0, 1.5, 2.0, 2.5, 3.0]</span>

<span class="sd">    &gt;&gt;&gt; ts_6_8.fill_2s_3s()</span>
<span class="sd">    &gt;&gt;&gt; ts_6_8.pulses</span>
<span class="sd">    [3.0, 1.5, 0.5]</span>

<span class="sd">    &gt;&gt;&gt; test_6 = ts_6_8.to_start_hierarchy()</span>
<span class="sd">    &gt;&gt;&gt; test_6[0]</span>
<span class="sd">    [0.0, 3.0]</span>

<span class="sd">    &gt;&gt;&gt; test_6[1]</span>
<span class="sd">    [0.0, 1.5, 3.0]</span>

<span class="sd">    &gt;&gt;&gt; test_6[2]</span>
<span class="sd">    [0.0, 0.5, 1.0, 1.5, 2.0, 2.5, 3.0]</span>

<span class="sd">    &gt;&gt;&gt; ts_5_4 = TimeSignature(as_string=&quot;5/4&quot;)</span>
<span class="sd">    &gt;&gt;&gt; ts_5_4.pulses</span>
<span class="sd">    [5.0, 1.0]</span>

<span class="sd">    &gt;&gt;&gt; test_7 = ts_5_4.to_start_hierarchy()</span>
<span class="sd">    &gt;&gt;&gt; test_7[0]</span>
<span class="sd">    [0.0, 5.0]</span>

<span class="sd">    &gt;&gt;&gt; test_7[1]</span>
<span class="sd">    [0.0, 1.0, 2.0, 3.0, 4.0, 5.0]</span>

<span class="sd">    &gt;&gt;&gt; ts_2_3_4 = TimeSignature(as_string=&quot;2+3/4&quot;)</span>
<span class="sd">    &gt;&gt;&gt; ts_2_3_4.pulses # as before</span>
<span class="sd">    [5.0, 1.0]</span>

<span class="sd">    &gt;&gt;&gt; test_8 = ts_2_3_4.to_start_hierarchy()</span>
<span class="sd">    &gt;&gt;&gt; test_8[0]</span>
<span class="sd">    [0.0, 5.0]</span>

<span class="sd">    &gt;&gt;&gt; test_8[1]</span>
<span class="sd">    [0.0, 2.0, 5.0]</span>

<span class="sd">    &gt;&gt;&gt; test_8[2]</span>
<span class="sd">    [0.0, 1.0, 2.0, 3.0, 4.0, 5.0]</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># 1. Basic elements: all periodic cycles from the full cycle to the `beat_type` level.</span>
    <span class="n">pulses</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">PulseLengths</span><span class="p">(</span>  <span class="c1"># TODO consistency wrt what is added to the class.</span>
            <span class="n">pulse_lengths</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pulses</span><span class="p">,</span> <span class="n">cycle_length</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">cycle_length</span>
        <span class="p">)</span>
    <span class="p">)</span>
    <span class="n">start_hierarchy</span> <span class="o">=</span> <span class="n">pulses</span><span class="o">.</span><span class="n">to_start_hierarchy</span><span class="p">()</span>

    <span class="c1"># 2. irregular beat layer, if applicable.</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">beats</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>  <span class="c1"># not a regular pulse e.g., (2, 3)</span>
        <span class="n">bp</span> <span class="o">=</span> <span class="n">BeatPattern</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">beats</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">beat_type</span>
        <span class="p">)</span>  <span class="c1"># TODO consistency wrt what is added to the class.</span>
        <span class="n">beat_starts</span> <span class="o">=</span> <span class="n">bp</span><span class="o">.</span><span class="n">beat_pattern_to_start_hierarchy</span><span class="p">()</span>
        <span class="n">start_hierarchy</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">beat_starts</span><span class="p">)</span>

        <span class="n">start_hierarchy</span> <span class="o">=</span> <span class="p">[</span>
            <span class="nb">list</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">set</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">tuple</span><span class="p">,</span> <span class="n">start_hierarchy</span><span class="p">))</span>
        <span class="p">]</span>
        <span class="n">start_hierarchy</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="nb">len</span><span class="p">)</span>
        <span class="c1"># TODO consider move to StartTimeHierarchy?</span>

    <span class="k">return</span> <span class="n">start_hierarchy</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div><hr />


<div class="doc doc-object doc-class">



<h2 id="amads.time.meter.representations.PulseLengths" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">PulseLengths</span>


<a href="#amads.time.meter.representations.PulseLengths" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">PulseLengths</span><span class="p">(</span>
    <span class="n"><a class="autorefs autorefs-internal" title="pulse_lengths (amads.time.meter.representations.PulseLengths(pulse_lengths))" href="#amads.time.meter.representations.PulseLengths(pulse_lengths)">pulse_lengths</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a></span><span class="p">],</span>
    <span class="n"><a class="autorefs autorefs-internal" title="cycle_length (amads.time.meter.representations.PulseLengths(cycle_length))" href="#amads.time.meter.representations.PulseLengths(cycle_length)">cycle_length</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n"><a class="autorefs autorefs-internal" title="include_cycle_length (amads.time.meter.representations.PulseLengths(include_cycle_length))" href="#amads.time.meter.representations.PulseLengths(include_cycle_length)">include_cycle_length</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents first">





<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
<h3 id="amads.time.meter.representations.PulseLengths(pulse_lengths)" class="doc doc-heading doc-heading-parameter">              <b><code>pulse_lengths</code></b>
<a href="#amads.time.meter.representations.PulseLengths(pulse_lengths)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a>]</code>)
          –
          <div class="doc-md-description">
            <p>Any valid list of pulse lengths, e.g., [4, 2, 1].</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h3 id="amads.time.meter.representations.PulseLengths(cycle_length)" class="doc doc-heading doc-heading-parameter">              <b><code>cycle_length</code></b>
<a href="#amads.time.meter.representations.PulseLengths(cycle_length)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a> | None</code>, default:
                  <code>None</code>
)
          –
          <div class="doc-md-description">
            <p>Optional. If not provided, the cycle length is taken to be given by the longest pulse length.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h3 id="amads.time.meter.representations.PulseLengths(include_cycle_length)" class="doc doc-heading doc-heading-parameter">              <b><code>include_cycle_length</code></b>
<a href="#amads.time.meter.representations.PulseLengths(include_cycle_length)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>, default:
                  <code>True</code>
)
          –
          <div class="doc-md-description">
            <p>Defaults to True. If True, when converting to starts, include the full cycle length in the list.</p>
          </div>
        </li>
    </ul>












<p><span class="doc-section-title">Methods:</span></p>
    <ul>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="            to_start_hierarchy (amads.time.meter.representations.PulseLengths.to_start_hierarchy)" href="#amads.time.meter.representations.PulseLengths.to_start_hierarchy">to_start_hierarchy</a></code></b>
            –
            <div class="doc-md-description">
              <p>Convert a list of pulse lengths into a corresponding list of lists.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="            one_pulse_to_start_hierarchy_list (amads.time.meter.representations.PulseLengths.one_pulse_to_start_hierarchy_list)" href="#amads.time.meter.representations.PulseLengths.one_pulse_to_start_hierarchy_list">one_pulse_to_start_hierarchy_list</a></code></b>
            –
            <div class="doc-md-description">
              <p>Convert a single pulse length and cycle length into a list of starts.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="            to_array (amads.time.meter.representations.PulseLengths.to_array)" href="#amads.time.meter.representations.PulseLengths.to_array">to_array</a></code></b>
            –
            <div class="doc-md-description">
              <p>Create an array with the levels as rows,</p>
            </div>
          </li>
    </ul>



                  <details class="mkdocstrings-source">
                    <summary>Source code in <code>amads/time/meter/representations.py</code></summary>
                    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span>
<span class="normal">652</span>
<span class="normal">653</span>
<span class="normal">654</span>
<span class="normal">655</span>
<span class="normal">656</span>
<span class="normal">657</span>
<span class="normal">658</span>
<span class="normal">659</span>
<span class="normal">660</span>
<span class="normal">661</span>
<span class="normal">662</span>
<span class="normal">663</span>
<span class="normal">664</span>
<span class="normal">665</span>
<span class="normal">666</span>
<span class="normal">667</span>
<span class="normal">668</span>
<span class="normal">669</span>
<span class="normal">670</span>
<span class="normal">671</span>
<span class="normal">672</span>
<span class="normal">673</span>
<span class="normal">674</span>
<span class="normal">675</span>
<span class="normal">676</span>
<span class="normal">677</span>
<span class="normal">678</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">pulse_lengths</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">float</span><span class="p">],</span>
    <span class="n">cycle_length</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">include_cycle_length</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Representation of fully periodic meter centred on the constituent pulse lengths.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    pulse_lengths</span>
<span class="sd">        Any valid list of pulse lengths, e.g., [4, 2, 1].</span>
<span class="sd">    cycle_length</span>
<span class="sd">        Optional. If not provided, the cycle length is taken to be given by the longest pulse length.</span>
<span class="sd">    include_cycle_length</span>
<span class="sd">        Defaults to True. If True, when converting to starts, include the full cycle length in the list.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">pulse_lengths</span> <span class="o">=</span> <span class="n">pulse_lengths</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">pulse_lengths</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>  <span class="c1"># largest number first</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">cycle_length</span> <span class="o">=</span> <span class="n">cycle_length</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">cycle_length</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">pulse_lengths</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">cycle_length</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;The `pulse_length` </span><span class="si">{</span><span class="n">pulse_lengths</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2"> is longer than the `cycle_length` (</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">cycle_length</span><span class="si">}</span><span class="s2">).&quot;</span>
            <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cycle_length</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">pulse_lengths</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">start_hierarchy</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">include_cycle_length</span> <span class="o">=</span> <span class="n">include_cycle_length</span>
</code></pre></div></td></tr></table></div>
                  </details>



<div class="doc doc-children">








<h3 id="amads.time.meter.representations.PulseLengths-functions">Functions<a href="#amads.time.meter.representations.PulseLengths-functions" class="headerlink" title="Permanent link">&para;</a></h3>

<div class="doc doc-object doc-function">


<h4 id="amads.time.meter.representations.PulseLengths.to_start_hierarchy" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">to_start_hierarchy</span>


<a href="#amads.time.meter.representations.PulseLengths.to_start_hierarchy" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">to_start_hierarchy</span><span class="p">(</span><span class="n"><a class="autorefs autorefs-internal" title="require_2_or_3_between_levels (amads.time.meter.representations.PulseLengths.to_start_hierarchy(require_2_or_3_between_levels))" href="#amads.time.meter.representations.PulseLengths.to_start_hierarchy(require_2_or_3_between_levels)">require_2_or_3_between_levels</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Convert a list of pulse lengths into a corresponding list of lists.</p>
<p>Gives start positions per metrical level.
All values (pulse lengths, start positions, and cycle_length)
are all expressed in terms of quarter length.</p>
<p>That is, the user provides pulse lengths for each level of a
metrical hierarchy, and the algorithm expands this into a hierarchy
assuming equal spacing (aka “isochrony”).</p>
<p>This does not work for (“nonisochronous”) pulse streams of varying duration
in time signatures like 5/x, 7/x (e.g., the level of 5/4 with
dotted/undotted 1/2 notes).</p>
<p>It is still perfectly fine to use this for the pulse streams
within those meters that are regular, equally spaced (“isochronous”)
(e.g., the 1/4 note level of 5/4).</p>
<p>The list of pulse lengths is handled internally in decreasing order,
whatever the ordering in the argument.</p>
<p>If <code>require_2_or_3_between_levels</code> is True (default), this functions
checks that each level is either a 2 or 3 multiple of the next.</p>
<p>By default, the cycle_length is taken by the longest pulse length.
Alternatively, this can be user-defined to anything as long as it is</p>
<ol>
<li>longer than the longest pulse and</li>
<li>if <code>require_2_or_3_between_levels</code> is True then exactly 2x or 3x
longer.</li>
</ol>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
<h5 id="amads.time.meter.representations.PulseLengths.to_start_hierarchy(require_2_or_3_between_levels)" class="doc doc-heading doc-heading-parameter">              <b><code>require_2_or_3_between_levels</code></b>
<a href="#amads.time.meter.representations.PulseLengths.to_start_hierarchy(require_2_or_3_between_levels)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>, default:
                  <code>False</code>
)
          –
          <div class="doc-md-description">
            <p>Defaults to False.
If True, raise a ValueError in the case of this condition not being met.</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a></code>
          –
          <div class="doc-md-description">
            <p>Returns a list of lists with start positions by level.</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Examples:</span></p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">qsl</span> <span class="o">=</span> <span class="n">PulseLengths</span><span class="p">(</span><span class="n">pulse_lengths</span><span class="o">=</span><span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">qsl</span><span class="o">.</span><span class="n">pulse_lengths</span>
<span class="go">[4, 2, 1, 0.5]</span>
</code></pre></div>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">start_hierarchy</span> <span class="o">=</span> <span class="n">qsl</span><span class="o">.</span><span class="n">to_start_hierarchy</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">start_hierarchy</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="go">[0.0, 4.0]</span>
</code></pre></div>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">start_hierarchy</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="go">[0.0, 2.0, 4.0]</span>
</code></pre></div>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">start_hierarchy</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
<span class="go">[0.0, 1.0, 2.0, 3.0, 4.0]</span>
</code></pre></div>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">start_hierarchy</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
<span class="go">[0.0, 0.5, 1.0, 1.5, 2.0, 2.5, 3.0, 3.5, 4.0]</span>
</code></pre></div>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>amads/time/meter/representations.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">680</span>
<span class="normal">681</span>
<span class="normal">682</span>
<span class="normal">683</span>
<span class="normal">684</span>
<span class="normal">685</span>
<span class="normal">686</span>
<span class="normal">687</span>
<span class="normal">688</span>
<span class="normal">689</span>
<span class="normal">690</span>
<span class="normal">691</span>
<span class="normal">692</span>
<span class="normal">693</span>
<span class="normal">694</span>
<span class="normal">695</span>
<span class="normal">696</span>
<span class="normal">697</span>
<span class="normal">698</span>
<span class="normal">699</span>
<span class="normal">700</span>
<span class="normal">701</span>
<span class="normal">702</span>
<span class="normal">703</span>
<span class="normal">704</span>
<span class="normal">705</span>
<span class="normal">706</span>
<span class="normal">707</span>
<span class="normal">708</span>
<span class="normal">709</span>
<span class="normal">710</span>
<span class="normal">711</span>
<span class="normal">712</span>
<span class="normal">713</span>
<span class="normal">714</span>
<span class="normal">715</span>
<span class="normal">716</span>
<span class="normal">717</span>
<span class="normal">718</span>
<span class="normal">719</span>
<span class="normal">720</span>
<span class="normal">721</span>
<span class="normal">722</span>
<span class="normal">723</span>
<span class="normal">724</span>
<span class="normal">725</span>
<span class="normal">726</span>
<span class="normal">727</span>
<span class="normal">728</span>
<span class="normal">729</span>
<span class="normal">730</span>
<span class="normal">731</span>
<span class="normal">732</span>
<span class="normal">733</span>
<span class="normal">734</span>
<span class="normal">735</span>
<span class="normal">736</span>
<span class="normal">737</span>
<span class="normal">738</span>
<span class="normal">739</span>
<span class="normal">740</span>
<span class="normal">741</span>
<span class="normal">742</span>
<span class="normal">743</span>
<span class="normal">744</span>
<span class="normal">745</span>
<span class="normal">746</span>
<span class="normal">747</span>
<span class="normal">748</span>
<span class="normal">749</span>
<span class="normal">750</span>
<span class="normal">751</span>
<span class="normal">752</span>
<span class="normal">753</span>
<span class="normal">754</span>
<span class="normal">755</span>
<span class="normal">756</span>
<span class="normal">757</span>
<span class="normal">758</span>
<span class="normal">759</span>
<span class="normal">760</span>
<span class="normal">761</span>
<span class="normal">762</span>
<span class="normal">763</span>
<span class="normal">764</span>
<span class="normal">765</span>
<span class="normal">766</span>
<span class="normal">767</span>
<span class="normal">768</span>
<span class="normal">769</span>
<span class="normal">770</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">to_start_hierarchy</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">require_2_or_3_between_levels</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Convert a list of pulse lengths into a corresponding list of lists.</span>

<span class="sd">    Gives start positions per metrical level.</span>
<span class="sd">    All values (pulse lengths, start positions, and cycle_length)</span>
<span class="sd">    are all expressed in terms of quarter length.</span>

<span class="sd">    That is, the user provides pulse lengths for each level of a</span>
<span class="sd">    metrical hierarchy, and the algorithm expands this into a hierarchy</span>
<span class="sd">    assuming equal spacing (aka “isochrony”).</span>

<span class="sd">    This does not work for (“nonisochronous”) pulse streams of varying duration</span>
<span class="sd">    in time signatures like 5/x, 7/x (e.g., the level of 5/4 with</span>
<span class="sd">    dotted/undotted 1/2 notes).</span>

<span class="sd">    It is still perfectly fine to use this for the pulse streams</span>
<span class="sd">    within those meters that are regular, equally spaced (“isochronous”)</span>
<span class="sd">    (e.g., the 1/4 note level of 5/4).</span>

<span class="sd">    The list of pulse lengths is handled internally in decreasing order,</span>
<span class="sd">    whatever the ordering in the argument.</span>

<span class="sd">    If `require_2_or_3_between_levels` is True (default), this functions</span>
<span class="sd">    checks that each level is either a 2 or 3 multiple of the next.</span>

<span class="sd">    By default, the cycle_length is taken by the longest pulse length.</span>
<span class="sd">    Alternatively, this can be user-defined to anything as long as it is</span>

<span class="sd">    1. longer than the longest pulse and</span>
<span class="sd">    2. if `require_2_or_3_between_levels` is True then exactly 2x or 3x</span>
<span class="sd">    longer.</span>


<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    require_2_or_3_between_levels</span>
<span class="sd">        Defaults to False.</span>
<span class="sd">        If True, raise a ValueError in the case of this condition not being met.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    list</span>
<span class="sd">        Returns a list of lists with start positions by level.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>

<span class="sd">    &gt;&gt;&gt; qsl = PulseLengths(pulse_lengths=[4, 2, 1, 0.5])</span>
<span class="sd">    &gt;&gt;&gt; qsl.pulse_lengths</span>
<span class="sd">    [4, 2, 1, 0.5]</span>

<span class="sd">    &gt;&gt;&gt; start_hierarchy = qsl.to_start_hierarchy()</span>
<span class="sd">    &gt;&gt;&gt; start_hierarchy[0]</span>
<span class="sd">    [0.0, 4.0]</span>

<span class="sd">    &gt;&gt;&gt; start_hierarchy[1]</span>
<span class="sd">    [0.0, 2.0, 4.0]</span>

<span class="sd">    &gt;&gt;&gt; start_hierarchy[2]</span>
<span class="sd">    [0.0, 1.0, 2.0, 3.0, 4.0]</span>

<span class="sd">    &gt;&gt;&gt; start_hierarchy[3]</span>
<span class="sd">    [0.0, 0.5, 1.0, 1.5, 2.0, 2.5, 3.0, 3.5, 4.0]</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">require_2_or_3_between_levels</span><span class="p">:</span>  <span class="c1"># TODO consider refactor</span>
        <span class="k">for</span> <span class="n">level</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pulse_lengths</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pulse_lengths</span><span class="p">[</span><span class="n">level</span><span class="p">]</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">pulse_lengths</span><span class="p">[</span>
                <span class="n">level</span> <span class="o">+</span> <span class="mi">1</span>
            <span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span>
                <span class="mi">2</span><span class="p">,</span>
                <span class="mi">3</span><span class="p">,</span>
            <span class="p">]:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="s2">&quot;The proportion between consecutive levels is not 2 or 3 in &quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;this case: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">pulse_lengths</span><span class="p">[</span><span class="n">level</span><span class="p">]</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">pulse_lengths</span><span class="p">[</span><span class="n">level</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2">.&quot;</span>
                <span class="p">)</span>

    <span class="n">start_list</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">for</span> <span class="n">pulse_length</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">pulse_lengths</span><span class="p">:</span>
        <span class="n">starts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">one_pulse_to_start_hierarchy_list</span><span class="p">(</span><span class="n">pulse_length</span><span class="p">)</span>
        <span class="n">start_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">starts</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">start_hierarchy</span> <span class="o">=</span> <span class="n">start_list</span>
    <span class="k">return</span> <span class="n">start_list</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="amads.time.meter.representations.PulseLengths.one_pulse_to_start_hierarchy_list" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">one_pulse_to_start_hierarchy_list</span>


<a href="#amads.time.meter.representations.PulseLengths.one_pulse_to_start_hierarchy_list" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">one_pulse_to_start_hierarchy_list</span><span class="p">(</span><span class="n"><a class="autorefs autorefs-internal" title="pulse_length (amads.time.meter.representations.PulseLengths.one_pulse_to_start_hierarchy_list(pulse_length))" href="#amads.time.meter.representations.PulseLengths.one_pulse_to_start_hierarchy_list(pulse_length)">pulse_length</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a></span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Convert a single pulse length and cycle length into a list of starts.
All expressed in quarter length.</p>
<p>Note:
A maximum of 4 decimal places is hardcoded.
This is to avoid floating point errors or the need for one line of numpy (np.arange)
in a module that doesn't otherwise use it.
4 decimal points should be sufficient for all realistic use cases.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
<h5 id="amads.time.meter.representations.PulseLengths.one_pulse_to_start_hierarchy_list(pulse_length)" class="doc doc-heading doc-heading-parameter">              <b><code>pulse_length</code></b>
<a href="#amads.time.meter.representations.PulseLengths.one_pulse_to_start_hierarchy_list(pulse_length)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a></code>)
          –
          <div class="doc-md-description">
            <p>The quarter length of the pulse (note: must be shorter than the
<code>cycle_length</code>).</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Examples:</span></p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">pls</span> <span class="o">=</span> <span class="n">PulseLengths</span><span class="p">(</span><span class="n">pulse_lengths</span><span class="o">=</span><span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">],</span> <span class="n">cycle_length</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pls</span><span class="o">.</span><span class="n">pulse_lengths</span>
<span class="go">[4, 2, 1, 0.5]</span>
</code></pre></div>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">pls</span><span class="o">.</span><span class="n">one_pulse_to_start_hierarchy_list</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="go">[0.0, 1.0, 2.0, 3.0, 4.0]</span>
</code></pre></div>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">pls</span> <span class="o">=</span> <span class="n">PulseLengths</span><span class="p">(</span><span class="n">pulse_lengths</span><span class="o">=</span><span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">],</span> <span class="n">cycle_length</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">include_cycle_length</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pls</span><span class="o">.</span><span class="n">one_pulse_to_start_hierarchy_list</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="go">[0.0, 1.0, 2.0, 3.0]</span>
</code></pre></div>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>amads/time/meter/representations.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">772</span>
<span class="normal">773</span>
<span class="normal">774</span>
<span class="normal">775</span>
<span class="normal">776</span>
<span class="normal">777</span>
<span class="normal">778</span>
<span class="normal">779</span>
<span class="normal">780</span>
<span class="normal">781</span>
<span class="normal">782</span>
<span class="normal">783</span>
<span class="normal">784</span>
<span class="normal">785</span>
<span class="normal">786</span>
<span class="normal">787</span>
<span class="normal">788</span>
<span class="normal">789</span>
<span class="normal">790</span>
<span class="normal">791</span>
<span class="normal">792</span>
<span class="normal">793</span>
<span class="normal">794</span>
<span class="normal">795</span>
<span class="normal">796</span>
<span class="normal">797</span>
<span class="normal">798</span>
<span class="normal">799</span>
<span class="normal">800</span>
<span class="normal">801</span>
<span class="normal">802</span>
<span class="normal">803</span>
<span class="normal">804</span>
<span class="normal">805</span>
<span class="normal">806</span>
<span class="normal">807</span>
<span class="normal">808</span>
<span class="normal">809</span>
<span class="normal">810</span>
<span class="normal">811</span>
<span class="normal">812</span>
<span class="normal">813</span>
<span class="normal">814</span>
<span class="normal">815</span>
<span class="normal">816</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">one_pulse_to_start_hierarchy_list</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">pulse_length</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Convert a single pulse length and cycle length into a list of starts.</span>
<span class="sd">    All expressed in quarter length.</span>

<span class="sd">    Note:</span>
<span class="sd">    A maximum of 4 decimal places is hardcoded.</span>
<span class="sd">    This is to avoid floating point errors or the need for one line of numpy (np.arange)</span>
<span class="sd">    in a module that doesn&#39;t otherwise use it.</span>
<span class="sd">    4 decimal points should be sufficient for all realistic use cases.</span>

<span class="sd">    Parameters</span>
<span class="sd">    --------</span>
<span class="sd">    pulse_length</span>
<span class="sd">        The quarter length of the pulse (note: must be shorter than the</span>
<span class="sd">        `cycle_length`).</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>

<span class="sd">    &gt;&gt;&gt; pls = PulseLengths(pulse_lengths=[4, 2, 1, 0.5], cycle_length=4)</span>
<span class="sd">    &gt;&gt;&gt; pls.pulse_lengths</span>
<span class="sd">    [4, 2, 1, 0.5]</span>

<span class="sd">    &gt;&gt;&gt; pls.one_pulse_to_start_hierarchy_list(1)</span>
<span class="sd">    [0.0, 1.0, 2.0, 3.0, 4.0]</span>

<span class="sd">    &gt;&gt;&gt; pls = PulseLengths(pulse_lengths=[4, 2, 1, 0.5], cycle_length=4, include_cycle_length=False)</span>
<span class="sd">    &gt;&gt;&gt; pls.one_pulse_to_start_hierarchy_list(1)</span>
<span class="sd">    [0.0, 1.0, 2.0, 3.0]</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">starts</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">while</span> <span class="n">count</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">cycle_length</span><span class="p">:</span>
        <span class="n">starts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">count</span><span class="p">),</span> <span class="mi">4</span><span class="p">))</span>
        <span class="n">count</span> <span class="o">+=</span> <span class="n">pulse_length</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">include_cycle_length</span><span class="p">:</span>
        <span class="n">starts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">count</span><span class="p">),</span> <span class="mi">4</span><span class="p">))</span>

    <span class="k">return</span> <span class="n">starts</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="amads.time.meter.representations.PulseLengths.to_array" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">to_array</span>


<a href="#amads.time.meter.representations.PulseLengths.to_array" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">to_array</span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Create an array with the levels as rows,
and the entries as pulse length values,
where those pulse lengths start, and 0 otherwise.</p>


<p><span class="doc-section-title">Examples:</span></p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">pls</span> <span class="o">=</span> <span class="n">PulseLengths</span><span class="p">(</span><span class="n">pulse_lengths</span><span class="o">=</span><span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">],</span> <span class="n">cycle_length</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pls</span><span class="o">.</span><span class="n">to_array</span><span class="p">()</span>
<span class="go">array([[4. , 0. , 0. , 0. , 0. , 0. , 0. , 0. ],</span>
<span class="go">       [2. , 0. , 0. , 0. , 2. , 0. , 0. , 0. ],</span>
<span class="go">       [1. , 0. , 1. , 0. , 1. , 0. , 1. , 0. ],</span>
<span class="go">       [0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5]])</span>
</code></pre></div>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>amads/time/meter/representations.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">818</span>
<span class="normal">819</span>
<span class="normal">820</span>
<span class="normal">821</span>
<span class="normal">822</span>
<span class="normal">823</span>
<span class="normal">824</span>
<span class="normal">825</span>
<span class="normal">826</span>
<span class="normal">827</span>
<span class="normal">828</span>
<span class="normal">829</span>
<span class="normal">830</span>
<span class="normal">831</span>
<span class="normal">832</span>
<span class="normal">833</span>
<span class="normal">834</span>
<span class="normal">835</span>
<span class="normal">836</span>
<span class="normal">837</span>
<span class="normal">838</span>
<span class="normal">839</span>
<span class="normal">840</span>
<span class="normal">841</span>
<span class="normal">842</span>
<span class="normal">843</span>
<span class="normal">844</span>
<span class="normal">845</span>
<span class="normal">846</span>
<span class="normal">847</span>
<span class="normal">848</span>
<span class="normal">849</span>
<span class="normal">850</span>
<span class="normal">851</span>
<span class="normal">852</span>
<span class="normal">853</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">to_array</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create an array with the levels as rows,</span>
<span class="sd">    and the entries as pulse length values,</span>
<span class="sd">    where those pulse lengths start, and 0 otherwise.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>

<span class="sd">    &gt;&gt;&gt; pls = PulseLengths(pulse_lengths=[4, 2, 1, 0.5], cycle_length=4)</span>
<span class="sd">    &gt;&gt;&gt; pls.to_array()</span>
<span class="sd">    array([[4. , 0. , 0. , 0. , 0. , 0. , 0. , 0. ],</span>
<span class="sd">           [2. , 0. , 0. , 0. , 2. , 0. , 0. , 0. ],</span>
<span class="sd">           [1. , 0. , 1. , 0. , 1. , 0. , 1. , 0. ],</span>
<span class="sd">           [0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5, 0.5]])</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">tatum</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pulse_lengths</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">linear_positions</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cycle_length</span> <span class="o">/</span> <span class="n">tatum</span><span class="p">)</span>
    <span class="n">granular_row</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">full</span><span class="p">(</span>
        <span class="n">shape</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">linear_positions</span><span class="p">),</span> <span class="n">fill_value</span><span class="o">=</span><span class="n">tatum</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float64</span>
    <span class="p">)</span>
    <span class="n">symbolic_pulse_length_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">granular_row</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">pulse</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">pulse_lengths</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">::</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>  <span class="c1"># TODO check len?</span>
        <span class="n">multiple_of_tatum</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">pulse</span> <span class="o">/</span> <span class="n">tatum</span><span class="p">)</span>
        <span class="n">divider_of_cycle</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">linear_positions</span> <span class="o">/</span> <span class="n">multiple_of_tatum</span><span class="p">)</span>
        <span class="n">proto_row</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="n">multiple_of_tatum</span><span class="p">))</span>
        <span class="n">proto_row</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">pulse</span>
        <span class="n">row</span> <span class="o">=</span> <span class="n">proto_row</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">divider_of_cycle</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
            <span class="n">row</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">proto_row</span><span class="p">)</span>
        <span class="n">symbolic_pulse_length_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">(</span>
            <span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">symbolic_pulse_length_array</span><span class="p">)</span>
        <span class="p">)</span>

    <span class="k">return</span> <span class="n">symbolic_pulse_length_array</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div><hr />


<div class="doc doc-object doc-class">



<h2 id="amads.time.meter.representations.BeatPattern" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">BeatPattern</span>


<a href="#amads.time.meter.representations.BeatPattern" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">BeatPattern</span><span class="p">(</span><span class="n"><a class="autorefs autorefs-internal" title="beat_list (amads.time.meter.representations.BeatPattern(beat_list))" href="#amads.time.meter.representations.BeatPattern(beat_list)">beat_list</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#tuple">tuple</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></span><span class="p">,</span> <span class="o">...</span><span class="p">],</span> <span class="n"><a class="autorefs autorefs-internal" title="beat_type (amads.time.meter.representations.BeatPattern(beat_type))" href="#amads.time.meter.representations.BeatPattern(beat_type)">beat_type</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents first">



        <p>Encoding only the part of a metrical structure identified as the beat pattern.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
<h3 id="amads.time.meter.representations.BeatPattern(beat_list)" class="doc doc-heading doc-heading-parameter">              <b><code>beat_list</code></b>
<a href="#amads.time.meter.representations.BeatPattern(beat_list)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#tuple">tuple</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a>, ...]</code>)
          –
          <div class="doc-md-description">
            <p>An ordered list of the beat types.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h3 id="amads.time.meter.representations.BeatPattern(beat_type)" class="doc doc-heading doc-heading-parameter">              <b><code>beat_type</code></b>
<a href="#amads.time.meter.representations.BeatPattern(beat_type)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>)
          –
          <div class="doc-md-description">
            <p>The lower value of a time signature to set the pulse value.</p>
          </div>
        </li>
    </ul>












<p><span class="doc-section-title">Methods:</span></p>
    <ul>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="            beat_pattern_to_start_hierarchy (amads.time.meter.representations.BeatPattern.beat_pattern_to_start_hierarchy)" href="#amads.time.meter.representations.BeatPattern.beat_pattern_to_start_hierarchy">beat_pattern_to_start_hierarchy</a></code></b>
            –
            <div class="doc-md-description">
              <p>Converts a list of beats</p>
            </div>
          </li>
    </ul>



                  <details class="mkdocstrings-source">
                    <summary>Source code in <code>amads/time/meter/representations.py</code></summary>
                    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">868</span>
<span class="normal">869</span>
<span class="normal">870</span>
<span class="normal">871</span>
<span class="normal">872</span>
<span class="normal">873</span>
<span class="normal">874</span>
<span class="normal">875</span>
<span class="normal">876</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">beat_list</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="o">...</span><span class="p">],</span>
    <span class="n">beat_type</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
<span class="p">):</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">beat_list</span> <span class="o">=</span> <span class="n">beat_list</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">beat_type</span> <span class="o">=</span> <span class="n">beat_type</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">start_time_hierarchy</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">beat_pattern_to_start_hierarchy</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
                  </details>



<div class="doc doc-children">








<h3 id="amads.time.meter.representations.BeatPattern-functions">Functions<a href="#amads.time.meter.representations.BeatPattern-functions" class="headerlink" title="Permanent link">&para;</a></h3>

<div class="doc doc-object doc-function">


<h4 id="amads.time.meter.representations.BeatPattern.beat_pattern_to_start_hierarchy" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">beat_pattern_to_start_hierarchy</span>


<a href="#amads.time.meter.representations.BeatPattern.beat_pattern_to_start_hierarchy" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">beat_pattern_to_start_hierarchy</span><span class="p">(</span>
    <span class="n"><a class="autorefs autorefs-internal" title="include_cycle_length (amads.time.meter.representations.BeatPattern.beat_pattern_to_start_hierarchy(include_cycle_length))" href="#amads.time.meter.representations.BeatPattern.beat_pattern_to_start_hierarchy(include_cycle_length)">include_cycle_length</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Converts a list of beats
like [2, 2, 2]
or [3, 3]
or indeed
[6, 9]
into a list of within-cycle starting positions, as defined relative
to the start of the cycle.
Basically, the list of beats functions like the time signature's
so-called “numerator”,
so for instance, <code>[2, 2, 3]</code> with the denominator <code>4</code> is a kind of 7/4.
This equates to starting positions of
<code>[0.0, 2.0, 4.0, 7.0]</code>.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
<h5 id="amads.time.meter.representations.BeatPattern.beat_pattern_to_start_hierarchy(include_cycle_length)" class="doc doc-heading doc-heading-parameter">              <b><code>include_cycle_length</code></b>
<a href="#amads.time.meter.representations.BeatPattern.beat_pattern_to_start_hierarchy(include_cycle_length)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>, default:
                  <code>True</code>
)
          –
          <div class="doc-md-description">
            <p>If True (default) then each level ends with the full cycle length
(i.e., the start of the next cycle).</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Examples:</span></p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">bp</span> <span class="o">=</span> <span class="n">BeatPattern</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="mi">4</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bp</span><span class="o">.</span><span class="n">beat_pattern_to_start_hierarchy</span><span class="p">()</span>
<span class="go">[0.0, 2.0, 4.0, 7.0]</span>
</code></pre></div>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">bp</span><span class="o">.</span><span class="n">beat_pattern_to_start_hierarchy</span><span class="p">(</span><span class="n">include_cycle_length</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span>
<span class="go">[0.0, 2.0, 4.0]</span>
</code></pre></div>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>amads/time/meter/representations.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">878</span>
<span class="normal">879</span>
<span class="normal">880</span>
<span class="normal">881</span>
<span class="normal">882</span>
<span class="normal">883</span>
<span class="normal">884</span>
<span class="normal">885</span>
<span class="normal">886</span>
<span class="normal">887</span>
<span class="normal">888</span>
<span class="normal">889</span>
<span class="normal">890</span>
<span class="normal">891</span>
<span class="normal">892</span>
<span class="normal">893</span>
<span class="normal">894</span>
<span class="normal">895</span>
<span class="normal">896</span>
<span class="normal">897</span>
<span class="normal">898</span>
<span class="normal">899</span>
<span class="normal">900</span>
<span class="normal">901</span>
<span class="normal">902</span>
<span class="normal">903</span>
<span class="normal">904</span>
<span class="normal">905</span>
<span class="normal">906</span>
<span class="normal">907</span>
<span class="normal">908</span>
<span class="normal">909</span>
<span class="normal">910</span>
<span class="normal">911</span>
<span class="normal">912</span>
<span class="normal">913</span>
<span class="normal">914</span>
<span class="normal">915</span>
<span class="normal">916</span>
<span class="normal">917</span>
<span class="normal">918</span>
<span class="normal">919</span>
<span class="normal">920</span>
<span class="normal">921</span>
<span class="normal">922</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">beat_pattern_to_start_hierarchy</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">include_cycle_length</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Converts a list of beats</span>
<span class="sd">    like [2, 2, 2]</span>
<span class="sd">    or [3, 3]</span>
<span class="sd">    or indeed</span>
<span class="sd">    [6, 9]</span>
<span class="sd">    into a list of within-cycle starting positions, as defined relative</span>
<span class="sd">    to the start of the cycle.</span>
<span class="sd">    Basically, the list of beats functions like the time signature&#39;s</span>
<span class="sd">    so-called “numerator”,</span>
<span class="sd">    so for instance, `[2, 2, 3]` with the denominator `4` is a kind of 7/4.</span>
<span class="sd">    This equates to starting positions of</span>
<span class="sd">    `[0.0, 2.0, 4.0, 7.0]`.</span>

<span class="sd">    Parameters</span>
<span class="sd">    --------</span>
<span class="sd">    include_cycle_length</span>
<span class="sd">        If True (default) then each level ends with the full cycle length</span>
<span class="sd">        (i.e., the start of the next cycle).</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>

<span class="sd">    &gt;&gt;&gt; bp = BeatPattern((2, 2, 3), 4)</span>
<span class="sd">    &gt;&gt;&gt; bp.beat_pattern_to_start_hierarchy()</span>
<span class="sd">    [0.0, 2.0, 4.0, 7.0]</span>

<span class="sd">    &gt;&gt;&gt; bp.beat_pattern_to_start_hierarchy(include_cycle_length = False)</span>
<span class="sd">    [0.0, 2.0, 4.0]</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">starts</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">]</span>  <span class="c1"># always float, always starts at zero</span>
    <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">beat_val</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">beat_list</span><span class="p">:</span>
        <span class="n">count</span> <span class="o">+=</span> <span class="n">beat_val</span>
        <span class="n">this_start</span> <span class="o">=</span> <span class="n">count</span> <span class="o">*</span> <span class="mi">4</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">beat_type</span>
        <span class="n">starts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">this_start</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">include_cycle_length</span><span class="p">:</span>  <span class="c1"># include last value</span>
        <span class="k">return</span> <span class="n">starts</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">starts</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div><hr />


<div class="doc doc-object doc-function">


<h2 id="amads.time.meter.representations.is_non_negative_integer_power_of_two" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>            <span class="doc doc-object-name doc-function-name">is_non_negative_integer_power_of_two</span>


<a href="#amads.time.meter.representations.is_non_negative_integer_power_of_two" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">is_non_negative_integer_power_of_two</span><span class="p">(</span><span class="n"><span title="amads.time.meter.representations.is_non_negative_integer_power_of_two(n)">n</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a></span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span>
</code></pre></div>

    <div class="doc doc-contents first">

        <p>Checks if a number is a power of 2.</p>


<p><span class="doc-section-title">Examples:</span></p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">is_non_negative_integer_power_of_two</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="go">False</span>
</code></pre></div>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">is_non_negative_integer_power_of_two</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>
<span class="go">False</span>
</code></pre></div>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">is_non_negative_integer_power_of_two</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="go">True</span>
</code></pre></div>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">is_non_negative_integer_power_of_two</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="go">True</span>
</code></pre></div>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">is_non_negative_integer_power_of_two</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="go">False</span>
</code></pre></div>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">is_non_negative_integer_power_of_two</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="go">True</span>
</code></pre></div>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>amads/time/meter/representations.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">is_non_negative_integer_power_of_two</span><span class="p">(</span><span class="n">n</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Checks if a number is a power of 2.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; is_non_negative_integer_power_of_two(0)</span>
<span class="sd">    False</span>

<span class="sd">    &gt;&gt;&gt; is_non_negative_integer_power_of_two(0.5)</span>
<span class="sd">    False</span>

<span class="sd">    &gt;&gt;&gt; is_non_negative_integer_power_of_two(1)</span>
<span class="sd">    True</span>

<span class="sd">    &gt;&gt;&gt; is_non_negative_integer_power_of_two(2)</span>
<span class="sd">    True</span>

<span class="sd">    &gt;&gt;&gt; is_non_negative_integer_power_of_two(3)</span>
<span class="sd">    False</span>

<span class="sd">    &gt;&gt;&gt; is_non_negative_integer_power_of_two(4)</span>
<span class="sd">    True</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">n</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>  <span class="c1"># also catches type error if non-numeric</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">int</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="o">==</span> <span class="n">n</span><span class="p">:</span>
            <span class="n">n</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
    <span class="k">return</span> <span class="n">n</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="p">(</span><span class="n">n</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">))</span> <span class="o">==</span> <span class="mi">0</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div><hr />


<div class="doc doc-object doc-function">


<h2 id="amads.time.meter.representations.switch_pulse_length_beat_type" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>            <span class="doc doc-object-name doc-function-name">switch_pulse_length_beat_type</span>


<a href="#amads.time.meter.representations.switch_pulse_length_beat_type" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">switch_pulse_length_beat_type</span><span class="p">(</span>
    <span class="n"><span title="amads.time.meter.representations.switch_pulse_length_beat_type(pulse_length_or_beat_type)">pulse_length_or_beat_type</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a></span> <span class="o">|</span> <span class="n"><span title="numpy.ndarray">ndarray</span></span><span class="p">,</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents first">

        <p>Switch between a pulse length and beat type.
Accepts numeric values or numpy arrays thereof.
Note that a float of vale 0 will raise a
<code>ZeroDivisionError: division by zero</code>,
but a numpy array will map any 0s to <code>inf</code> without error.</p>


<p><span class="doc-section-title">Examples:</span></p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">switch_pulse_length_beat_type</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>
<span class="go">8.0</span>
</code></pre></div>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">switch_pulse_length_beat_type</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span>
<span class="go">0.5</span>
</code></pre></div>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">switch_pulse_length_beat_type</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.5</span><span class="p">,</span> <span class="mi">8</span><span class="p">]))</span>
<span class="go">array([8. , 0.5])</span>
</code></pre></div>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>amads/time/meter/representations.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">switch_pulse_length_beat_type</span><span class="p">(</span>
    <span class="n">pulse_length_or_beat_type</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Switch between a pulse length and beat type.</span>
<span class="sd">    Accepts numeric values or numpy arrays thereof.</span>
<span class="sd">    Note that a float of vale 0 will raise a</span>
<span class="sd">    `ZeroDivisionError: division by zero`,</span>
<span class="sd">    but a numpy array will map any 0s to `inf` without error.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; switch_pulse_length_beat_type(0.5)</span>
<span class="sd">    8.0</span>

<span class="sd">    &gt;&gt;&gt; switch_pulse_length_beat_type(8)</span>
<span class="sd">    0.5</span>

<span class="sd">    &gt;&gt;&gt; switch_pulse_length_beat_type(np.array([0.5, 8]))</span>
<span class="sd">    array([8. , 0.5])</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="mi">4</span> <span class="o">/</span> <span class="n">pulse_length_or_beat_type</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div><hr />


<div class="doc doc-object doc-class">



<h2 id="amads.time.meter.syncopation.SyncopationMetric" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">SyncopationMetric</span>


<a href="#amads.time.meter.syncopation.SyncopationMetric" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">SyncopationMetric</span><span class="p">(</span><span class="n"><a class="autorefs autorefs-internal" title="path_to_score (amads.time.meter.syncopation.SyncopationMetric(path_to_score))" href="#amads.time.meter.syncopation.SyncopationMetric(path_to_score)">path_to_score</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents first">



        <p>times and similar).</p>
<p>The parameters of this class allow users to run from a score
(with onsets etc. deduced from there) or directly on their own
data (the necessary parameters differ slightly for each method).</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
<h3 id="amads.time.meter.syncopation.SyncopationMetric(path_to_score)" class="doc doc-heading doc-heading-parameter">              <b><code>path_to_score</code></b>
<a href="#amads.time.meter.syncopation.SyncopationMetric(path_to_score)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a> | None</code>, default:
                  <code>None</code>
)
          –
          <div class="doc-md-description">
            <p>Path to the score in any supported format (e.g., MusicXML).
Deduce any necessary onsets, beats etc. from the score as
calculated by Partitura.
Warning: Partitura takes “beats” from time signatures
denominators, e.g., 6/8 has 6 “beats” (not 2).</p>
          </div>
        </li>
    </ul>












<p><span class="doc-section-title">Methods:</span></p>
    <ul>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="            load_note_array_from_score (amads.time.meter.syncopation.SyncopationMetric.load_note_array_from_score)" href="#amads.time.meter.syncopation.SyncopationMetric.load_note_array_from_score">load_note_array_from_score</a></code></b>
            –
            <div class="doc-md-description">
              <p>Parse a score and return Partitura's <code>.note_array()</code> with <code>include_metrical_position=True</code>.</p>
            </div>
          </li>
          <li class="doc-section-item field-body">
            <b><code><a class="autorefs autorefs-internal" title="            weighted_note_to_beat_distance (amads.time.meter.syncopation.SyncopationMetric.weighted_note_to_beat_distance)" href="#amads.time.meter.syncopation.SyncopationMetric.weighted_note_to_beat_distance">weighted_note_to_beat_distance</a></code></b>
            –
            <div class="doc-md-description">
              <p>TODO: WIP - does not currently replicate answers in the literature; further investigation to follow</p>
            </div>
          </li>
    </ul>



                  <details class="mkdocstrings-source">
                    <summary>Source code in <code>amads/time/meter/syncopation.py</code></summary>
                    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path_to_score</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The methods of this class implement syncopation metrics from the</span>
<span class="sd">    literature. These are typically based on simple data (note start</span>
<span class="sd">    times and similar).</span>

<span class="sd">    The parameters of this class allow users to run from a score</span>
<span class="sd">    (with onsets etc. deduced from there) or directly on their own</span>
<span class="sd">    data (the necessary parameters differ slightly for each method).</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    path_to_score:</span>
<span class="sd">        Path to the score in any supported format (e.g., MusicXML).</span>
<span class="sd">        Deduce any necessary onsets, beats etc. from the score as</span>
<span class="sd">        calculated by Partitura.</span>
<span class="sd">        Warning: Partitura takes “beats” from time signatures</span>
<span class="sd">        denominators, e.g., 6/8 has 6 “beats” (not 2).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">path_to_score</span> <span class="o">=</span> <span class="n">path_to_score</span>
    <span class="c1"># TODO. TBC. May be redundant / better handled on a per-metric basis:</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">note_array</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
                  </details>



<div class="doc doc-children">








<h3 id="amads.time.meter.syncopation.SyncopationMetric-functions">Functions<a href="#amads.time.meter.syncopation.SyncopationMetric-functions" class="headerlink" title="Permanent link">&para;</a></h3>

<div class="doc doc-object doc-function">


<h4 id="amads.time.meter.syncopation.SyncopationMetric.load_note_array_from_score" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">load_note_array_from_score</span>


<a href="#amads.time.meter.syncopation.SyncopationMetric.load_note_array_from_score" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">load_note_array_from_score</span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Parse a score and return Partitura's <code>.note_array()</code> with <code>include_metrical_position=True</code>.</p>
<p>This should cover the required information.
The note array's fields includes several fields of which methods here
use the following (in their words):</p>
<ul>
<li>'onset_beat': onset time of the note in beats</li>
<li>'duration_beat': duration of the note in beats</li>
</ul>
<p>These values are called in the form <code>note_array["onset_beat"]</code>.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>amads/time/meter/syncopation.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">load_note_array_from_score</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Parse a score and return Partitura&#39;s `.note_array()` with `include_metrical_position=True`.</span>

<span class="sd">    This should cover the required information.</span>
<span class="sd">    The note array&#39;s fields includes several fields of which methods here</span>
<span class="sd">    use the following (in their words):</span>

<span class="sd">    * &#39;onset_beat&#39;: onset time of the note in beats</span>
<span class="sd">    * &#39;duration_beat&#39;: duration of the note in beats</span>

<span class="sd">    These values are called in the form `note_array[&quot;onset_beat&quot;]`.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">note_array</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;already retrieved, skipping&quot;</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">path_to_score</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;No score provided.&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">score</span> <span class="o">=</span> <span class="n">load_score</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">path_to_score</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">note_array</span> <span class="o">=</span> <span class="n">score</span><span class="o">.</span><span class="n">note_array</span><span class="p">(</span><span class="n">include_metrical_position</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="amads.time.meter.syncopation.SyncopationMetric.weighted_note_to_beat_distance" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <span class="doc doc-object-name doc-function-name">weighted_note_to_beat_distance</span>


<a href="#amads.time.meter.syncopation.SyncopationMetric.weighted_note_to_beat_distance" class="headerlink" title="Permanent link">&para;</a></h4>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">weighted_note_to_beat_distance</span><span class="p">(</span>
    <span class="n"><a class="autorefs autorefs-internal" title="onset_beats (amads.time.meter.syncopation.SyncopationMetric.weighted_note_to_beat_distance(onset_beats))" href="#amads.time.meter.syncopation.SyncopationMetric.weighted_note_to_beat_distance(onset_beats)">onset_beats</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a></span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>TODO: WIP - does not currently replicate answers in the literature; further investigation to follow</p>
<p>The weighted note-to-beat distance measure (WNBD)
measures the distance between note starts and
records the traversing of beats, and the distance to the nearest beat.</p>
<p>The authors clarify that “notes are supposed to end where the
next note starts”,
so we're working with the inter-note interval (INI), rather
than the duration.
Note that there are one fewer INI values than notes.</p>
<p>Among the limitations is the incomplete definition of “beat”
and the agnostic view of metre:
“By strong beats we just mean pulses.” (§3.4).</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
<h5 id="amads.time.meter.syncopation.SyncopationMetric.weighted_note_to_beat_distance(onset_beats)" class="doc doc-heading doc-heading-parameter">              <b><code>onset_beats</code></b>
<a href="#amads.time.meter.syncopation.SyncopationMetric.weighted_note_to_beat_distance(onset_beats)" class="headerlink" title="Permanent link">&para;</a></h5>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a> | None</code>, default:
                  <code>None</code>
)
          –
          <div class="doc-md-description">
            <p>User supplied data for the onset time of each note expressed
in beats. Optional.</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code>WNBD value (float)</code>
          –
          <div class="doc-md-description">
            
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Examples:</span></p>
    <p>We use the example of the son clave
(also available from the <code>meter.profiles</code> module),
adapting to match presentation in the literature.</p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">son</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">onset_beats</span> <span class="o">=</span> <span class="n">vector_to_onset_beat</span><span class="p">(</span><span class="n">vector</span><span class="o">=</span><span class="n">son</span><span class="p">,</span> <span class="n">beat_unit_length</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sm</span> <span class="o">=</span> <span class="n">SyncopationMetric</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sm</span><span class="o">.</span><span class="n">weighted_note_to_beat_distance</span><span class="p">(</span><span class="n">onset_beats</span><span class="o">=</span><span class="n">onset_beats</span><span class="p">)</span>
<span class="go">Fraction(14, 5)</span>
</code></pre></div>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">hesitation</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">onset_beats</span> <span class="o">=</span> <span class="n">vector_to_onset_beat</span><span class="p">(</span><span class="n">vector</span><span class="o">=</span><span class="n">hesitation</span><span class="p">,</span> <span class="n">beat_unit_length</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sm</span> <span class="o">=</span> <span class="n">SyncopationMetric</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sm</span><span class="o">.</span><span class="n">weighted_note_to_beat_distance</span><span class="p">(</span><span class="n">onset_beats</span><span class="o">=</span><span class="n">onset_beats</span><span class="p">)</span>
<span class="go">Fraction(1, 2)</span>
</code></pre></div>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">amads.music</span><span class="w"> </span><span class="kn">import</span> <span class="n">example</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test_xml_file</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">example</span><span class="o">.</span><span class="n">fullpath</span><span class="p">(</span><span class="s2">&quot;musicxml/ex1.xml&quot;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sm</span> <span class="o">=</span> <span class="n">SyncopationMetric</span><span class="p">(</span><span class="n">path_to_score</span><span class="o">=</span><span class="n">test_xml_file</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sm</span><span class="o">.</span><span class="n">weighted_note_to_beat_distance</span><span class="p">()</span>
<span class="go">Fraction(4, 3)</span>
</code></pre></div>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>amads/time/meter/syncopation.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">weighted_note_to_beat_distance</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">onset_beats</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">list</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>

<span class="sd">    TODO: WIP - does not currently replicate answers in the literature; further investigation to follow</span>

<span class="sd">    The weighted note-to-beat distance measure (WNBD)</span>
<span class="sd">    measures the distance between note starts and</span>
<span class="sd">    records the traversing of beats, and the distance to the nearest beat.</span>

<span class="sd">    The authors clarify that “notes are supposed to end where the</span>
<span class="sd">    next note starts”,</span>
<span class="sd">    so we&#39;re working with the inter-note interval (INI), rather</span>
<span class="sd">    than the duration.</span>
<span class="sd">    Note that there are one fewer INI values than notes.</span>

<span class="sd">    Among the limitations is the incomplete definition of “beat”</span>
<span class="sd">    and the agnostic view of metre:</span>
<span class="sd">    “By strong beats we just mean pulses.” (§3.4).</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    onset_beats:</span>
<span class="sd">        User supplied data for the onset time of each note expressed</span>
<span class="sd">        in beats. Optional.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    WNBD value (float)</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    We use the example of the son clave</span>
<span class="sd">    (also available from the `meter.profiles` module),</span>
<span class="sd">    adapting to match presentation in the literature.</span>

<span class="sd">    &gt;&gt;&gt; son = [1, 0, 0, 1, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0, 0, 0]</span>
<span class="sd">    &gt;&gt;&gt; onset_beats = vector_to_onset_beat(vector=son, beat_unit_length=4)</span>
<span class="sd">    &gt;&gt;&gt; sm = SyncopationMetric()</span>
<span class="sd">    &gt;&gt;&gt; sm.weighted_note_to_beat_distance(onset_beats=onset_beats)</span>
<span class="sd">    Fraction(14, 5)</span>

<span class="sd">    &gt;&gt;&gt; hesitation = [1, 0, 1, 0, 1, 0, 0, 1]</span>
<span class="sd">    &gt;&gt;&gt; onset_beats = vector_to_onset_beat(vector=hesitation, beat_unit_length=4)</span>
<span class="sd">    &gt;&gt;&gt; sm = SyncopationMetric()</span>
<span class="sd">    &gt;&gt;&gt; sm.weighted_note_to_beat_distance(onset_beats=onset_beats)</span>
<span class="sd">    Fraction(1, 2)</span>

<span class="sd">    &gt;&gt;&gt; from amads.music import example</span>
<span class="sd">    &gt;&gt;&gt; test_xml_file = str(example.fullpath(&quot;musicxml/ex1.xml&quot;))</span>
<span class="sd">    &gt;&gt;&gt; sm = SyncopationMetric(path_to_score=test_xml_file)</span>
<span class="sd">    &gt;&gt;&gt; sm.weighted_note_to_beat_distance()</span>
<span class="sd">    Fraction(4, 3)</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># onset_beats is required for user-provided,</span>
    <span class="k">if</span> <span class="n">onset_beats</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># if not seek a score on the class</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">path_to_score</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">load_note_array_from_score</span><span class="p">()</span>
            <span class="n">onset_beats</span> <span class="o">=</span> <span class="p">[</span>
                <span class="n">Fraction</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="s2">&quot;onset_beat&quot;</span><span class="p">]))</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">note_array</span>
            <span class="p">]</span>  <span class="c1"># type: ignore</span>
            <span class="c1"># Sic, Fraction via first: Partitura uses np.float32 and</span>
            <span class="c1">#    Fractions do not accept that type.</span>
            <span class="c1"># TODO revisit class handling of this retrieval when</span>
            <span class="c1">#    more algos are in</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;No score or user values provided.&quot;</span><span class="p">)</span>

    <span class="n">per_note_syncopation_values</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="n">durations</span> <span class="o">=</span> <span class="p">[</span><span class="n">j</span> <span class="o">-</span> <span class="n">i</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">onset_beats</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">onset_beats</span><span class="p">[</span><span class="mi">1</span><span class="p">:])]</span>
    <span class="c1"># Sic, although Partitura note_array provides durations,</span>
    <span class="c1">#    we&#39;re using INI here.</span>

    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">durations</span><span class="p">)):</span>
        <span class="n">onset</span> <span class="o">=</span> <span class="n">onset_beats</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">int</span><span class="p">(</span><span class="n">onset</span><span class="p">)</span> <span class="o">==</span> <span class="n">onset</span><span class="p">:</span>  <span class="c1"># starts on a beat</span>
            <span class="n">per_note_syncopation_values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">duration</span> <span class="o">=</span> <span class="n">durations</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="n">this_beat_int</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">onset</span><span class="p">)</span>  <span class="c1"># NB round down</span>
            <span class="k">if</span> <span class="p">(</span>
                <span class="n">onset</span> <span class="o">+</span> <span class="n">duration</span> <span class="o">&lt;=</span> <span class="n">this_beat_int</span> <span class="o">+</span> <span class="mi">1</span>
            <span class="p">):</span>  <span class="c1"># ends before or at e_{i+1}</span>
                <span class="n">numerator</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="k">elif</span> <span class="p">(</span>
                <span class="n">onset</span> <span class="o">+</span> <span class="n">duration</span> <span class="o">&lt;=</span> <span class="n">this_beat_int</span> <span class="o">+</span> <span class="mi">2</span>
            <span class="p">):</span>  <span class="c1"># ends before or at e_{i+2}</span>
                <span class="n">numerator</span> <span class="o">=</span> <span class="mi">2</span>
            <span class="k">else</span><span class="p">:</span>  <span class="c1"># if onset + duration &gt; this_beat_int + 2: # ends after e_{i+2}</span>
                <span class="n">numerator</span> <span class="o">=</span> <span class="mi">1</span>

            <span class="n">distance_to_nearest_beat</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span>
                <span class="nb">round</span><span class="p">(</span><span class="n">onset</span><span class="p">)</span> <span class="o">-</span> <span class="n">Fraction</span><span class="p">(</span><span class="n">onset</span><span class="p">)</span>
            <span class="p">)</span>  <span class="c1"># Fraction</span>
            <span class="n">per_note_syncopation_values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                <span class="n">Fraction</span><span class="p">(</span><span class="n">numerator</span><span class="p">,</span> <span class="n">distance_to_nearest_beat</span><span class="p">)</span>
            <span class="p">)</span>

    <span class="k">return</span> <span class="nb">sum</span><span class="p">(</span><span class="n">per_note_syncopation_values</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span>
        <span class="nb">len</span><span class="p">(</span><span class="n">per_note_syncopation_values</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div><hr />


<div class="doc doc-object doc-function">


<h2 id="amads.time.meter.syncopation.vector_to_onset_beat" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>            <span class="doc doc-object-name doc-function-name">vector_to_onset_beat</span>


<a href="#amads.time.meter.syncopation.vector_to_onset_beat" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">vector_to_onset_beat</span><span class="p">(</span><span class="n"><span title="amads.time.meter.syncopation.vector_to_onset_beat(vector)">vector</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a></span><span class="p">,</span> <span class="n"><span title="amads.time.meter.syncopation.vector_to_onset_beat(beat_unit_length)">beat_unit_length</span></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></span> <span class="o">=</span> <span class="mi">2</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents first">

        <p>Map from a vector to onset beat data via <code>vector_to_multiset</code>.</p>


<p><span class="doc-section-title">Examples:</span></p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">son</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>  <span class="c1"># Final 1 for cycle rotation</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">vector_to_onset_beat</span><span class="p">(</span><span class="n">vector</span><span class="o">=</span><span class="n">son</span><span class="p">,</span> <span class="n">beat_unit_length</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span> <span class="c1"># NB different beat value</span>
<span class="go">(Fraction(0, 1), Fraction(3, 4), Fraction(3, 2), Fraction(5, 2), Fraction(3, 1), Fraction(4, 1))</span>
</code></pre></div>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>amads/time/meter/syncopation.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">vector_to_onset_beat</span><span class="p">(</span><span class="n">vector</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span> <span class="n">beat_unit_length</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">2</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Map from a vector to onset beat data via `vector_to_multiset`.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; son = [1, 0, 0, 1, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0, 0, 0, 1]  # Final 1 for cycle rotation</span>
<span class="sd">    &gt;&gt;&gt; vector_to_onset_beat(vector=son, beat_unit_length=4) # NB different beat value</span>
<span class="sd">    (Fraction(0, 1), Fraction(3, 4), Fraction(3, 2), Fraction(5, 2), Fraction(3, 1), Fraction(4, 1))</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">onsets</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">count</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">vector</span><span class="p">)</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">count</span><span class="p">)]</span>
    <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">Fraction</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">beat_unit_length</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">onsets</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div><hr />


<div class="doc doc-object doc-function">


<h2 id="amads.time.meter.tatum.score_to_offsets" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>            <span class="doc doc-object-name doc-function-name">score_to_offsets</span>


<a href="#amads.time.meter.tatum.score_to_offsets" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">score_to_offsets</span><span class="p">(</span><span class="n"><a class="autorefs autorefs-internal" title="path_to_score (amads.time.meter.tatum.score_to_offsets(path_to_score))" href="#amads.time.meter.tatum.score_to_offsets(path_to_score)">path_to_score</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-internal" title="to_indices (amads.time.meter.tatum.score_to_offsets(to_indices))" href="#amads.time.meter.tatum.score_to_offsets(to_indices)">to_indices</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a></span>
</code></pre></div>

    <div class="doc doc-contents first">

        <p>Import a score and convert it to the sorted list of unique
starting timepoints as measured in quarters since the start of the score,
and (optionally) convert those starts to indices on a tatum grid.</p>
<p>Note: score parsing warnings are supressed.
If you need to test the validity of scores, do handle that separately.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
<h3 id="amads.time.meter.tatum.score_to_offsets(path_to_score)" class="doc doc-heading doc-heading-parameter">              <b><code>path_to_score</code></b>
<a href="#amads.time.meter.tatum.score_to_offsets(path_to_score)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></code>)
          –
          <div class="doc-md-description">
            <p>A string for the file path or URL.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h3 id="amads.time.meter.tatum.score_to_offsets(to_indices)" class="doc doc-heading doc-heading-parameter">              <b><code>to_indices</code></b>
<a href="#amads.time.meter.tatum.score_to_offsets(to_indices)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>, default:
                  <code>True</code>
)
          –
          <div class="doc-md-description">
            <p>If True, convert the starts to indices on a tatum grid.</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Examples:</span></p>
    <p>If you want to suppress import warnings, then run this first.</p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">score_path</span> <span class="o">=</span> <span class="s2">&quot;https://github.com/MarkGotham/species/raw/refs/heads/main/1x1/005.mxl&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">score_to_offsets</span><span class="p">(</span><span class="n">score_path</span><span class="p">,</span> <span class="n">to_indices</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="go">[0.0, 4.0, 8.0, 12.0, 16.0, 20.0, 24.0, 28.0, 32.0, 36.0, 40.0]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">score_to_offsets</span><span class="p">(</span><span class="n">score_path</span><span class="p">)</span>
<span class="go">[0, 4, 8, 12, 16, 20, 24, 28, 32, 36, 40]</span>
</code></pre></div>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>amads/time/meter/tatum.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">score_to_offsets</span><span class="p">(</span><span class="n">path_to_score</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">to_indices</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Import a score and convert it to the sorted list of unique</span>
<span class="sd">    starting timepoints as measured in quarters since the start of the score,</span>
<span class="sd">    and (optionally) convert those starts to indices on a tatum grid.</span>

<span class="sd">    Note: score parsing warnings are supressed.</span>
<span class="sd">    If you need to test the validity of scores, do handle that separately.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    path_to_score</span>
<span class="sd">        A string for the file path or URL.</span>
<span class="sd">    to_indices</span>
<span class="sd">        If True, convert the starts to indices on a tatum grid.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    If you want to suppress import warnings, then run this first.</span>
<span class="sd">    &gt;&gt;&gt; score_path = &quot;https://github.com/MarkGotham/species/raw/refs/heads/main/1x1/005.mxl&quot;</span>
<span class="sd">    &gt;&gt;&gt; score_to_offsets(score_path, to_indices=False)</span>
<span class="sd">    [0.0, 4.0, 8.0, 12.0, 16.0, 20.0, 24.0, 28.0, 32.0, 36.0, 40.0]</span>
<span class="sd">    &gt;&gt;&gt; score_to_offsets(score_path)</span>
<span class="sd">    [0, 4, 8, 12, 16, 20, 24, 28, 32, 36, 40]</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">set_reader_warning_level</span><span class="p">(</span><span class="s2">&quot;none&quot;</span><span class="p">)</span>
    <span class="n">score</span> <span class="o">=</span> <span class="n">read_score</span><span class="p">(</span><span class="n">path_to_score</span><span class="p">,</span> <span class="n">show</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">notes</span> <span class="o">=</span> <span class="n">score</span><span class="o">.</span><span class="n">get_sorted_notes</span><span class="p">()</span>
    <span class="n">timepoints</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">n</span><span class="o">.</span><span class="n">onset</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">notes</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">to_indices</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">starts_to_indices</span><span class="p">(</span><span class="n">timepoints</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">timepoints</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div><hr />


<div class="doc doc-object doc-function">


<h2 id="amads.time.meter.tatum.starts_to_indices" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>            <span class="doc doc-object-name doc-function-name">starts_to_indices</span>


<a href="#amads.time.meter.tatum.starts_to_indices" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">starts_to_indices</span><span class="p">(</span><span class="n"><a class="autorefs autorefs-internal" title="starts (amads.time.meter.tatum.starts_to_indices(starts))" href="#amads.time.meter.tatum.starts_to_indices(starts)">starts</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a></span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-internal" title="tatum (amads.time.meter.tatum.starts_to_indices(tatum))" href="#amads.time.meter.tatum.starts_to_indices(tatum)">tatum</a></span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" title="fractions.Fraction" href="https://docs.python.org/3/library/fractions.html#fractions.Fraction">Fraction</a></span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a></span>
</code></pre></div>

    <div class="doc doc-contents first">

        <p>Given a list of start times,
convert to a list of indices on the tatum grid.</p>
<p>If a tatum value is provided, use that;
otherwise, deduce the tatum using gcd methods.</p>
<p>This is the input format for the IMA algorithm, among others.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
<h3 id="amads.time.meter.tatum.starts_to_indices(starts)" class="doc doc-heading doc-heading-parameter">              <b><code>starts</code></b>
<a href="#amads.time.meter.tatum.starts_to_indices(starts)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a></code>)
          –
          <div class="doc-md-description">
            <p>A list of numeric start times.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
<h3 id="amads.time.meter.tatum.starts_to_indices(tatum)" class="doc doc-heading doc-heading-parameter">              <b><code>tatum</code></b>
<a href="#amads.time.meter.tatum.starts_to_indices(tatum)" class="headerlink" title="Permanent link">&para;</a></h3>              (<code><a class="autorefs autorefs-external" title="fractions.Fraction" href="https://docs.python.org/3/library/fractions.html#fractions.Fraction">Fraction</a></code>, default:
                  <code>None</code>
)
          –
          <div class="doc-md-description">
            <p>The tatum duration to use as the grid unit and values are rounded to it.
If None, it is
deduced automatically via <code>get_tatum_from_priorities</code>.</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Examples:</span></p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">starts_to_indices</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span> <span class="mf">2.5</span><span class="p">])</span>
<span class="go">[0, 3, 4, 15]</span>
</code></pre></div>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">starts_to_indices</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span> <span class="mf">2.5</span><span class="p">],</span> <span class="n">tatum</span><span class="o">=</span><span class="n">Fraction</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="go">[0, 3, 4, 15]</span>
</code></pre></div>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">starts_to_indices</span><span class="p">([</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">,</span> <span class="mf">4.0</span><span class="p">,</span> <span class="mf">5.0</span><span class="p">,</span> <span class="mf">6.0</span><span class="p">,</span> <span class="mf">6.5</span><span class="p">,</span> <span class="mf">6.6640625</span><span class="p">,</span> <span class="mf">6.83203125</span><span class="p">,</span> <span class="mf">7.0</span><span class="p">])</span>
<span class="go">[0, 6, 12, 18, 24, 30, 36, 39, 40, 41, 42]</span>
</code></pre></div>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">starts_to_indices</span><span class="p">([</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">,</span> <span class="mf">4.0</span><span class="p">,</span> <span class="mf">5.0</span><span class="p">,</span> <span class="mf">6.0</span><span class="p">,</span> <span class="mf">6.5</span><span class="p">,</span> <span class="mf">6.6640625</span><span class="p">,</span> <span class="mf">6.83203125</span><span class="p">,</span> <span class="mf">7.0</span><span class="p">],</span> <span class="n">tatum</span><span class="o">=</span><span class="n">Fraction</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="go">[0, 6, 12, 18, 24, 30, 36, 39, 40, 41, 42]</span>
</code></pre></div>
    <p>Also accepts tatum values greater than 1:</p>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">starts_to_indices</span><span class="p">([</span><span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">9</span><span class="p">],</span> <span class="n">tatum</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="go">[1, 2, 3]</span>
</code></pre></div>
    <div class="highlight"><pre><span></span><code><span class="gp">&gt;&gt;&gt; </span><span class="n">starts_to_indices</span><span class="p">([</span><span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">9</span><span class="p">])</span>
<span class="go">[1, 2, 3]</span>
</code></pre></div>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>amads/time/meter/tatum.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">starts_to_indices</span><span class="p">(</span><span class="n">starts</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span> <span class="n">tatum</span><span class="p">:</span> <span class="n">Fraction</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a list of start times,</span>
<span class="sd">    convert to a list of indices on the tatum grid.</span>

<span class="sd">    If a tatum value is provided, use that;</span>
<span class="sd">    otherwise, deduce the tatum using gcd methods.</span>

<span class="sd">    This is the input format for the IMA algorithm, among others.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    starts</span>
<span class="sd">        A list of numeric start times.</span>
<span class="sd">    tatum</span>
<span class="sd">        The tatum duration to use as the grid unit and values are rounded to it.</span>
<span class="sd">        If None, it is</span>
<span class="sd">        deduced automatically via `get_tatum_from_priorities`.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; starts_to_indices([0, 1/2, 2/3, 2.5])</span>
<span class="sd">    [0, 3, 4, 15]</span>

<span class="sd">    &gt;&gt;&gt; starts_to_indices([0, 1/2, 2/3, 2.5], tatum=Fraction(1, 6))</span>
<span class="sd">    [0, 3, 4, 15]</span>

<span class="sd">    &gt;&gt;&gt; starts_to_indices([0.0, 1.0, 2.0, 3.0, 4.0, 5.0, 6.0, 6.5, 6.6640625, 6.83203125, 7.0])</span>
<span class="sd">    [0, 6, 12, 18, 24, 30, 36, 39, 40, 41, 42]</span>

<span class="sd">    &gt;&gt;&gt; starts_to_indices([0.0, 1.0, 2.0, 3.0, 4.0, 5.0, 6.0, 6.5, 6.6640625, 6.83203125, 7.0], tatum=Fraction(1, 6))</span>
<span class="sd">    [0, 6, 12, 18, 24, 30, 36, 39, 40, 41, 42]</span>

<span class="sd">    Also accepts tatum values greater than 1:</span>

<span class="sd">    &gt;&gt;&gt; starts_to_indices([3, 6, 9], tatum=3)</span>
<span class="sd">    [1, 2, 3]</span>

<span class="sd">    &gt;&gt;&gt; starts_to_indices([3, 6, 9])</span>
<span class="sd">    [1, 2, 3]</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">starts</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;starts must not be empty&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">tatum</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">tatum</span> <span class="o">=</span> <span class="n">get_tatum_from_priorities</span><span class="p">(</span><span class="n">starts</span><span class="p">)</span>

    <span class="k">return</span> <span class="p">[</span><span class="nb">round</span><span class="p">(</span><span class="n">x</span> <span class="o">/</span> <span class="n">tatum</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">starts</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../../..", "features": ["navigation.sections", "navigation.expand", "navigation.tabs"], "search": "../../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
        <script src="../../../javascripts/fix-properties.js"></script>
      
        <script src="../../../javascripts/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>